(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{136:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(70),i=n.n(s),r=(n(80),n(25)),l=n(39),c=n(26),p=n(27),m=n(29),u=n(28),d=n(30),h=n(40),g=n(71),f={en:{translation:{title:"Digital Lock",settings:"Settings",save:"Save",download:"Download",scormVersion:"SCORM Version",tip:"Guess the right code",config:{title:"Title",showUsername:"Show username",timeout:"Time limit",theme:"Theme",mode:"Puzzle type",tip:"Tip",escapp:"Are you using escapp to host your escape room?",escapeRoomId:"Escape Room",puzzleId:"Puzzle",Padlock:"Padlock",CombinationLock:"Combination Lock",answer:"Solution",puzzleLength:"Puzzle length",good:"Success message",bad:"Fail message",CombinationLockImage:"Picture",nonMetallic:"Metallic effect"},Symbol:"Symbol",AlphaNumeric:"Alphanumeric",CombinationLock:"Combination Lock",Padlock:"Padlock",Pattern:"Pattern"}},es:{translation:{title:"Candado digital",settings:"Configuraci\xf3n",save:"Guardar",download:"Descargar",scormVersion:"Versi\xf3n de SCORM",tip:"Adivina el c\xf3digo correcto",config:{title:"T\xedtulo",showUsername:"Mostrar usuario",timeout:"L\xedmite de tiempo",theme:"Tema",mode:"Tipo de reto",tip:"Mensaje de ayuda",escapp:"Vas a usar escapp para tu escape room?",escapeRoomId:"Escape Room",puzzleId:"Reto",Padlock:"Candado",CombinationLock:"Caja fuerte",answer:"Soluci\xf3n",puzzleLength:"N\xfamero de cifras",good:"Mensaje de \xe9xito",bad:"Mensaje de error",CombinationLockImage:"Imagen",nonMetallic:"Efecto met\xe1lico"},Symbol:"S\xedmbolo",AlphaNumeric:"Alfanum\xe9rico",CombinationLock:"Caja fuerte",Padlock:"Candado",Pattern:"Patr\xf3n"}}};h.a.use(g.a).init({whitelist:["es","en"],fallbackLng:"en",attributes:["t","i18n"],resources:f,debug:!1});var b=h.a,C=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=[{name:"title",value:this.props.title,type:"text",callback:function(t){e.props.onConfigChange("title",t.target.value)}},{name:"timeout",value:this.props.timeout,type:"number",min:0,callback:function(t){e.props.onConfigChange("timeout",parseInt(t.target.value))}},{name:"theme",value:this.props.theme,type:"select",options:["cerulean","journal","sketchy","darkly","cyborg","cosmo","flatly","lumen","litera","lux","materia","minty","pulse","sandstone","simplex","slate","solar","spacelab","superhero","united","yeti"],callback:function(t){e.props.onConfigChange("theme",t.target.value)}},{name:"mode",value:this.props.mode,type:"select",options:["Symbol","AlphaNumeric","Pattern","CombinationLock","Padlock"],callback:function(t){if(e.props.onConfigChange("mode",t.target.value),e.props.embeddedInEscapp){var n=e.props.escapeRoomId||e.props.erOptions[0].id,a=e.props.puzzleOptions[n][0],o=a.id;e.props.onConfigChange("escapeRoomId",n),e.props.onConfigChange("puzzleId",o),"Padlock"===e.props.mode||"CombinationLock"===e.props.mode?e.props.onConfigChange("answer",a.answer):(e.props.onConfigChange("puzzleLength",a.answer.length),e.props.onConfigChange("answer",void 0))}}},{name:"tip",value:this.props.tip,type:"text",callback:function(t){e.props.onConfigChange("tip",t.target.value)}}];return this.props.escapp?this.props.embeddedInEscapp?(t.push({name:"escapp",value:this.props.escapp,type:"checkbox",callback:function(){e.props.onConfigChange("escapp",!e.props.escapp)}}),t.push({name:"escapeRoomId",value:this.props.escapeRoomId||this.props.erOptions[0].id,type:"select",options:this.props.erOptions||[],callback:function(t){var n=parseInt(t.target.value),a=e.props.puzzleOptions[n][0],o=a.id;e.props.onConfigChange("escapeRoomId",n),e.props.onConfigChange("puzzleId",o),"Padlock"===e.props.mode||"CombinationLock"===e.props.mode?e.props.onConfigChange("answer",a.answer):(e.props.onConfigChange("puzzleLength",a.answer.length),e.props.onConfigChange("answer",void 0))}}),t.push({name:"puzzleId",friendlyName:"puzzleId",value:this.props.puzzleId||this.props.puzzleOptions[this.props.escapeRoomId||this.props.erOptions[0].id][0].id,type:"select",options:this.props.puzzleOptions[this.props.escapeRoomId]||[],callback:function(t){var n=parseInt(t.target.value);e.props.onConfigChange("puzzleId",n);var a=e.props.puzzleOptions[e.props.escapeRoomId||e.props.erOptions[0].id].find(function(e){return e.id===n});"Padlock"===e.props.mode||"CombinationLock"===e.props.mode?e.props.onConfigChange("answer",a.answer):(e.props.onConfigChange("puzzleLength",a.answer.length),e.props.onConfigChange("answer",void 0))}})):(t.push({name:"escapeRoomId",value:this.props.escapeRoomId,type:"number",min:0,callback:function(t){e.props.onConfigChange("escapeRoomId",parseInt(t.target.value))}}),t.push({name:"puzzleId",value:this.props.puzzleId,type:"number",min:0,callback:function(t){e.props.onConfigChange("puzzleId",parseInt(t.target.value))}}),"Padlock"===this.props.mode||"CombinationLock"===this.props.mode?t.push({name:"answer",value:this.props.answer,type:"text",callback:function(t){e.props.onConfigChange("answer",t.target.value)}}):t.push({name:"puzzleLength",value:this.props.puzzleLength,type:"number",min:0,callback:function(t){e.props.onConfigChange("puzzleLength",parseInt(t.target.value))}})):(t.push({name:"escapp",value:this.props.escapp,type:"checkbox",callback:function(){e.props.onConfigChange("escapp",!e.props.escapp)}}),t.push({name:"showUsername",value:!this.props.escapp&&this.props.showUsername,type:"checkbox",callback:function(t){e.props.onConfigChange("showUsername",!e.props.showUsername)}}),t.push({name:"answer",value:this.props.answer,type:"text",callback:function(t){e.props.onConfigChange("answer",t.target.value)}}),t.push({name:"good",value:this.props.good,type:"text",callback:function(t){e.props.onConfigChange("good",t.target.value)}}),t.push({name:"bad",value:this.props.bad,type:"text",callback:function(t){e.props.onConfigChange("bad",t.target.value)}})),"CombinationLock"===this.props.mode?t.splice(5,0,{name:"CombinationLockImage",value:void 0,type:"file",callback:function(t){e.readFile(t.target.files[0],function(t){return e.props.onConfigChange("CombinationLockImage",t)},!0)}}):"Padlock"===this.props.mode&&t.splice(5,0,{name:"nonMetallic",value:!this.props.nonMetallic,type:"checkbox",callback:function(){e.props.onConfigChange("nonMetallic",!e.props.nonMetallic)}}),o.a.createElement("div",{className:"config"},t.map(function(e,t){return e?[o.a.createElement("div",{className:"form-group",key:e.name},o.a.createElement("label",{htmlFor:e.name},o.a.createElement("b",null,b.t("config."+e.name))),"select"===e.type?o.a.createElement("select",{name:e.name,onChange:e.callback,value:e.value},e.options.map(function(e){return"string"===typeof e?o.a.createElement("option",{key:e,value:e},b.t(e)):o.a.createElement("option",{key:e.id,value:e.id},e.name)})):o.a.createElement("input",{name:e.name,type:e.type,value:"file"===e.type?void 0:e.value,min:e.min,checked:e.value,onChange:e.callback})),e.noBreak?null:o.a.createElement("br",{key:"br-"+t})]:null}),o.a.createElement("br",null),o.a.createElement("br",null),this.props.embeddedInEscapp&&this.props.escapp?null:o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"scormVersion"},o.a.createElement("b",null,b.t("scormVersion"),":")),o.a.createElement("p",null),o.a.createElement("label",{htmlFor:"scormVersion"},"SCORM 1.2"),o.a.createElement("input",{name:"scormVersion",type:"radio",value:"1.2",checked:"1.2"===this.props.scormVersion,onChange:function(t){e.props.onConfigChange("scormVersion","1.2")}}),o.a.createElement("label",{htmlFor:"scormVersion"},"SCORM 2004"),o.a.createElement("input",{name:"scormVersion",type:"radio",value:"1.2",checked:"2004"===this.props.scormVersion,onChange:function(t){e.props.onConfigChange("scormVersion","2004")}})))}},{key:"readFile",value:function(e,t,n){try{var a=new FileReader;a.onload=function(e){return t(e.target.result)},a.onerror=function(e){return t("")},a.readAsDataURL(e)}catch(o){t("")}}},{key:"humanize",value:function(e){return e.replace(/([A-Z])/g," $1").replace(/^./,function(e){return e.toUpperCase()})}}]),t}(a.Component),v=n(3),k=n(4),y=n(11),w=n(13),E=n(14),z=function(e){function t(){return Object(v.a)(this,t),Object(y.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:this.props.show?"modal":"modal hidden"},o.a.createElement("div",{className:"overlay"}),o.a.createElement("div",{className:"modal-body"},o.a.createElement("button",{className:"modal-close",onClick:this.props.hide},o.a.createElement("i",{className:"material-icons"},"close")),o.a.createElement("h2",null,"About"),o.a.createElement("br",{style:{clear:"both"}}),o.a.createElement("div",{className:"modal-content"},"This website allows you to customize your very own lock application and generate a SCORM package so you can upload it to your preferred LMS.    ",o.a.createElement("h4",null,"Author"),o.a.createElement("hr",null),"This project was developed by ",o.a.createElement("a",{href:"http://github.com/adelabat",rel:"noopener noreferrer",target:"_blank"},"@adelabat")," using ",o.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://github.com/agordillo/RESCORM"},"RESCORM"),".")))}}]),t}(a.Component),I=(n(82),n(2)),O=n(72),L=n.n(O),j=n(73),P=n.n(j),S=n(74),R=n.n(S),N=function(e){P.a.getBinaryContent("2004"===e.scormVersion?"scorm2004.zip":"scorm12.zip",function(t,n){if(t)throw t;L.a.loadAsync(n).then(function(t){var n,a=function(e){var t=JSON.stringify(Object(I.a)({},e,{content:void 0,moodleXmlPath:e.moodleXmlPath?"assets/quiz.xml":void 0}));return'<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>'.concat(e.title||"Quiz",'</title>\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n        <link href="https://fonts.googleapis.com/icon?family=Material+Icons"\n      rel="stylesheet">\n    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">\n </head>\n<body>\n<div id="root"></div>\n<script> window.config=JSON.parse(\'').concat(t,'\');<\/script>\n<script type="text/javascript" src="bundle.js"><\/script>\n</body>\n</html>')}(e);t.file("index.html",a),e.moodleXmlPath&&t.file("assets/quiz.xml",(n=e.moodleXmlPath,decodeURIComponent(window.atob(n.slice(21)).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join("")))),t.generateAsync({type:"blob"}).then(function(t){R.a.saveAs(t,e.title.toLowerCase().replace(/\s/g,"")+Math.round(+new Date/1e3)+("2004"===e.scormVersion?"_2004":"_1.2")+".zip")})})})};var M=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state=Object(l.a)({title:b.t("title"),showUsername:!1,timeout:0,tip:b.t("tip"),CombinationLockImage:"./../assets/images/CajaFuerte.png",mode:"Pattern",theme:"journal",good:"Enhorabuena, lo has logrado!!",bad:"Lo siento, se acab\xf3 tu tiempo",escapp:!0,puzzleId:5,escapeRoomId:1,puzzleLength:4,scormVersion:"1.2",embeddedInEscapp:!1},window.state),n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},this.state.embeddedInEscapp?null:o.a.createElement("header",{id:"appHeader"},o.a.createElement("button",{className:"info",onClick:function(){e.setState({showInfoModal:!0})}},o.a.createElement("i",{className:"material-icons"},"info")),o.a.createElement("h1",null,o.a.createElement("i",{className:"material-icons"},"lock"),b.t("title"))),o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"content-col left"},o.a.createElement("form",{action:this.state.action,method:"POST"},o.a.createElement("h1",null,b.t(this.state.embeddedInEscapp?"title":"settings")),o.a.createElement(C,Object.assign({},this.state,{onConfigChange:function(t,n){e.setState(Object(r.a)({},t,n)),e.preview()}})),o.a.createElement("div",{className:"buttons"},this.state.embeddedInEscapp&&this.state.escapp?o.a.createElement("button",{type:"submit"},o.a.createElement("i",{className:"material-icons"},"cloud_upload"),b.t("save")):o.a.createElement("button",{type:"button",onClick:this.download.bind(this)},o.a.createElement("i",{className:"material-icons"},"cloud_download"),b.t("download"))))),o.a.createElement("div",{className:"content-col right"},o.a.createElement("iframe",{id:"visor",title:"app"}))),o.a.createElement(z,{show:this.state.showInfoModal,hide:function(){e.setState({showInfoModal:!1})}}))}},{key:"preview",value:function(){var e=this;fetch("/apps/digitalLock/scorm12/index.html").then(function(e){return e.text()}).then(function(t){e.onloadend(t)})}},{key:"onloadend",value:function(e){var t=e.replace('<div id="root"></div>',"\n      <div id='root'></div>\n      <script>\n        window._babelPolyfill = false;\n        window.config=JSON.parse('".concat(JSON.stringify(Object(l.a)({},this.state,{dev:!0})),"');\n      <\/script>"));t=t.replace("bundle.js","/apps/digitalLock/scorm12/bundle.js");var n=document.getElementById("visor");n.contentWindow.document.open(),n.contentWindow.document.write(t),n.contentWindow.document.close()}},{key:"download",value:function(){N(this.state)}},{key:"componentDidMount",value:function(){this.preview()}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},75:function(e,t,n){e.exports=n(136)},80:function(e,t,n){},82:function(e,t,n){},88:function(e,t){},90:function(e,t){}},[[75,2,1]]]);
//# sourceMappingURL=main.1e06162c.chunk.js.map