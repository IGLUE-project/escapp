(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),i=n(71),s=n.n(i),r=(n(81),n(26)),l=n(40),c=n(27),p=n(28),m=n(30),u=n(29),d=n(31),h=n(20),g=n(41),f=n(72),b={en:{translation:{title:"Digital Lock",settings:"Settings",save:"Save",download:"Download",scormVersion:"SCORM Version",tip:"Guess the right code",config:{title:"Title",showUsername:"Show username",timeout:"Time limit",theme:"Theme",mode:"Puzzle type",tip:"Tip",escapp:"Are you using escapp to host your escape room?",escapeRoomId:"Escape Room",puzzleId:"Puzzle",Padlock:"Padlock",CombinationLock:"Combination Lock",answer:"Solution",puzzleLength:"Puzzle length",good:"Success message",bad:"Fail message",CombinationLockImage:"Picture",nonMetallic:"Metallic effect"},Symbol:"Symbol",AlphaNumeric:"Alphanumeric",CombinationLock:"Combination Lock",Padlock:"Padlock",Pattern:"Pattern"}},es:{translation:{title:"Candado digital",settings:"Configuraci\xf3n",save:"Guardar",download:"Descargar",scormVersion:"Versi\xf3n de SCORM",tip:"Adivina el c\xf3digo correcto",config:{title:"T\xedtulo",showUsername:"Mostrar usuario",timeout:"L\xedmite de tiempo",theme:"Tema",mode:"Tipo de reto",tip:"Mensaje de ayuda",escapp:"Vas a usar escapp para tu escape room?",escapeRoomId:"Escape Room",puzzleId:"Reto",Padlock:"Candado",CombinationLock:"Caja fuerte",answer:"Soluci\xf3n",puzzleLength:"N\xfamero de cifras",good:"Mensaje de \xe9xito",bad:"Mensaje de error",CombinationLockImage:"Imagen",nonMetallic:"Efecto met\xe1lico"},Symbol:"S\xedmbolo",AlphaNumeric:"Alfanum\xe9rico",CombinationLock:"Caja fuerte",Padlock:"Candado",Pattern:"Patr\xf3n"}}};g.a.use(f.a).init({whitelist:["es","en"],fallbackLng:"en",attributes:["t","i18n"],resources:b,debug:!1});var v=g.a,C=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=[{name:"title",value:this.props.title,type:"text",callback:function(t){e.props.onConfigChange("title",t.target.value)}},{name:"timeout",value:this.props.timeout,type:"number",min:0,callback:function(t){e.props.onConfigChange("timeout",parseInt(t.target.value))}},{name:"theme",value:this.props.theme,type:"select",options:["cerulean","journal","sketchy","darkly","cyborg","cosmo","flatly","lumen","litera","lux","materia","minty","pulse","sandstone","simplex","slate","solar","spacelab","superhero","united","yeti"],callback:function(t){e.props.onConfigChange("theme",t.target.value)}},{name:"mode",value:this.props.mode,type:"select",options:["Symbol","AlphaNumeric","Pattern","CombinationLock","Padlock"],callback:function(t){if(e.props.onConfigChange("mode",t.target.value),e.props.embeddedInEscapp){var n=e.props.escapeRoomId||e.props.erOptions[0].id,o=e.props.puzzleOptions[n][0],a=o.id;e.props.onConfigChange("escapeRoomId",n),e.props.onConfigChange("puzzleId",a),"Padlock"===e.props.mode||"CombinationLock"===e.props.mode?e.props.onConfigChange("answer",o.answer):(e.props.onConfigChange("puzzleLength",o.answer.length),e.props.onConfigChange("answer",void 0))}}},{name:"tip",value:this.props.tip,type:"text",callback:function(t){e.props.onConfigChange("tip",t.target.value)}}];return this.props.escapp?this.props.embeddedInEscapp?(t.push({name:"escapp",value:this.props.escapp,type:"checkbox",callback:function(){e.props.onConfigChange("escapp",!e.props.escapp)}}),t.push({name:"escapeRoomId",value:this.props.escapeRoomId||this.props.erOptions[0].id,type:"select",options:this.props.erOptions||[],callback:function(t){var n=parseInt(t.target.value),o=e.props.puzzleOptions[n][0],a=o.id;e.props.onConfigChange("escapeRoomId",n),e.props.onConfigChange("puzzleId",a),"Padlock"===e.props.mode||"CombinationLock"===e.props.mode?e.props.onConfigChange("answer",o.answer):(e.props.onConfigChange("puzzleLength",o.answer.length),e.props.onConfigChange("answer",void 0))}}),t.push({name:"puzzleId",friendlyName:"puzzleId",value:this.props.puzzleId||this.props.puzzleOptions[this.props.escapeRoomId||this.props.erOptions[0].id][0].id,type:"select",options:this.props.puzzleOptions[this.props.escapeRoomId]||[],callback:function(t){var n=parseInt(t.target.value);e.props.onConfigChange("puzzleId",n);var o=e.props.puzzleOptions[e.props.escapeRoomId||e.props.erOptions[0].id].find(function(e){return e.id===n});"Padlock"===e.props.mode||"CombinationLock"===e.props.mode?e.props.onConfigChange("answer",o.answer):(e.props.onConfigChange("puzzleLength",o.answer.length),e.props.onConfigChange("answer",void 0))}})):(t.push({name:"escapeRoomId",value:this.props.escapeRoomId,type:"number",min:0,callback:function(t){e.props.onConfigChange("escapeRoomId",parseInt(t.target.value))}}),t.push({name:"puzzleId",value:this.props.puzzleId,type:"number",min:0,callback:function(t){e.props.onConfigChange("puzzleId",parseInt(t.target.value))}}),"Padlock"===this.props.mode||"CombinationLock"===this.props.mode?t.push({name:"answer",value:this.props.answer,type:"text",callback:function(t){e.props.onConfigChange("answer",t.target.value)}}):t.push({name:"puzzleLength",value:this.props.puzzleLength,type:"number",min:0,callback:function(t){e.props.onConfigChange("puzzleLength",parseInt(t.target.value))}})):(t.push({name:"escapp",value:this.props.escapp,type:"checkbox",callback:function(){e.props.onConfigChange("escapp",!e.props.escapp)}}),t.push({name:"showUsername",value:!this.props.escapp&&this.props.showUsername,type:"checkbox",callback:function(t){e.props.onConfigChange("showUsername",!e.props.showUsername)}}),t.push({name:"answer",value:this.props.answer,type:"text",callback:function(t){e.props.onConfigChange("answer",t.target.value)}}),t.push({name:"good",value:this.props.good,type:"text",callback:function(t){e.props.onConfigChange("good",t.target.value)}}),t.push({name:"bad",value:this.props.bad,type:"text",callback:function(t){e.props.onConfigChange("bad",t.target.value)}})),"CombinationLock"===this.props.mode?t.splice(5,0,{name:"CombinationLockImage",value:void 0,type:"file",callback:function(t){e.readFile(t.target.files[0],function(t){return e.props.onConfigChange("CombinationLockImage",t)},!0)}}):"Padlock"===this.props.mode&&t.splice(5,0,{name:"nonMetallic",value:!this.props.nonMetallic,type:"checkbox",callback:function(){e.props.onConfigChange("nonMetallic",!e.props.nonMetallic)}}),a.a.createElement("div",{className:"config"},t.map(function(e,t){return e?[a.a.createElement("div",{className:"form-group",key:e.name},a.a.createElement("label",{htmlFor:e.name},a.a.createElement("b",null,v.t("config."+e.name))),"select"===e.type?a.a.createElement("select",{name:e.name,onChange:e.callback,value:e.value},e.options.map(function(e){return"string"===typeof e?a.a.createElement("option",{key:e,value:e},v.t(e)):a.a.createElement("option",{key:e.id,value:e.id},e.name)})):a.a.createElement("input",{name:e.name,type:e.type,value:"file"===e.type?void 0:e.value,min:e.min,checked:e.value,onChange:e.callback})),e.noBreak?null:a.a.createElement("br",{key:"br-"+t})]:null}),a.a.createElement("br",null),a.a.createElement("br",null),this.props.embeddedInEscapp&&this.props.escapp?null:a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{htmlFor:"scormVersion"},a.a.createElement("b",null,v.t("scormVersion"),":")),a.a.createElement("p",null),a.a.createElement("label",{htmlFor:"scormVersion"},"SCORM 1.2"),a.a.createElement("input",{name:"scormVersion",type:"radio",value:"1.2",checked:"1.2"===this.props.scormVersion,onChange:function(t){e.props.onConfigChange("scormVersion","1.2")}}),a.a.createElement("label",{htmlFor:"scormVersion"},"SCORM 2004"),a.a.createElement("input",{name:"scormVersion",type:"radio",value:"1.2",checked:"2004"===this.props.scormVersion,onChange:function(t){e.props.onConfigChange("scormVersion","2004")}})))}},{key:"readFile",value:function(e,t){try{var n=new FileReader;n.onload=function(e){return t(e.target.result)},n.onerror=function(e){return t("")},n.readAsDataURL(e)}catch(o){t("")}}}]),t}(o.Component),k=n(3),y=n(4),w=n(11),z=n(13),E=n(14),I=function(e){function t(){return Object(k.a)(this,t),Object(w.a)(this,Object(z.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:this.props.show?"modal":"modal hidden"},a.a.createElement("div",{className:"overlay"}),a.a.createElement("div",{className:"modal-body"},a.a.createElement("button",{className:"modal-close",onClick:this.props.hide},a.a.createElement("i",{className:"material-icons"},"close")),a.a.createElement("h2",null,"About"),a.a.createElement("br",{style:{clear:"both"}}),a.a.createElement("div",{className:"modal-content"},"This website allows you to customize your very own lock application and generate a SCORM package so you can upload it to your preferred LMS.    ",a.a.createElement("h4",null,"Author"),a.a.createElement("hr",null),"This project was developed by ",a.a.createElement("a",{href:"http://github.com/adelabat",rel:"noopener noreferrer",target:"_blank"},"@adelabat")," using ",a.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://github.com/agordillo/RESCORM"},"RESCORM"),".")))}}]),t}(o.Component),O=(n(83),n(2)),L=n(73),j=n.n(L),S=n(74),R=n.n(S),P=n(75),N=n.n(P),M=function(e){R.a.getBinaryContent("2004"===e.scormVersion?"scorm2004.zip":"scorm12.zip",function(t,n){if(t)throw t;j.a.loadAsync(n).then(function(t){var n,o=function(e){var t=JSON.stringify(Object(O.a)({},e,{content:void 0,moodleXmlPath:e.moodleXmlPath?"assets/quiz.xml":void 0}));return'<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>'.concat(e.title||"Quiz",'</title>\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n        <link href="https://fonts.googleapis.com/icon?family=Material+Icons"\n      rel="stylesheet">\n    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">\n </head>\n<body>\n<div id="root"></div>\n<script> window.config=JSON.parse(\'').concat(t,'\');<\/script>\n<script type="text/javascript" src="bundle.js"><\/script>\n</body>\n</html>')}(e);t.file("index.html",o),e.moodleXmlPath&&t.file("assets/quiz.xml",(n=e.moodleXmlPath,decodeURIComponent(window.atob(n.slice(21)).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join("")))),t.generateAsync({type:"blob"}).then(function(t){N.a.saveAs(t,e.title.toLowerCase().replace(/\s/g,"")+Math.round(+new Date/1e3)+("2004"===e.scormVersion?"_2004":"_1.2")+".zip")})})})};var x=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(m.a)(this,Object(u.a)(t).call(this,e))).state=Object(l.a)({title:v.t("title"),showUsername:!1,timeout:0,tip:v.t("tip"),CombinationLockImage:"./../assets/images/CajaFuerte.png",mode:"Pattern",theme:"journal",good:"Enhorabuena, lo has logrado!!",bad:"Lo siento, se acab\xf3 tu tiempo",escapp:!0,puzzleId:5,escapeRoomId:1,puzzleLength:4,scormVersion:"1.2",embeddedInEscapp:!1},window.state),n.onSubmit=n.onSubmit.bind(Object(h.a)(Object(h.a)(n))),n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"App"},this.state.embeddedInEscapp?null:a.a.createElement("header",{id:"appHeader"},a.a.createElement("button",{className:"info",onClick:function(){e.setState({showInfoModal:!0})}},a.a.createElement("i",{className:"material-icons"},"info")),a.a.createElement("h1",null,a.a.createElement("i",{className:"material-icons"},"lock"),v.t("title"))),a.a.createElement("div",{className:"content"},a.a.createElement("div",{className:"content-col left"},a.a.createElement("form",{action:this.state.action,method:"POST",onSubmit:this.onSubmit},a.a.createElement("h1",null,v.t(this.state.embeddedInEscapp?"title":"settings")),a.a.createElement(C,Object.assign({},this.state,{onConfigChange:function(t,n){e.setState(Object(r.a)({},t,n)),e.preview()}})),a.a.createElement("div",{className:"buttons"},this.state.embeddedInEscapp&&this.state.escapp?a.a.createElement("button",{type:"submit"},a.a.createElement("i",{className:"material-icons"},"cloud_upload"),v.t("save")):a.a.createElement("button",{type:"button",onClick:this.download.bind(this)},a.a.createElement("i",{className:"material-icons"},"cloud_download"),v.t("download"))),a.a.createElement("input",{type:"hidden",id:"configInput",name:"config",value:""}))),a.a.createElement("div",{className:"content-col right"},a.a.createElement("iframe",{id:"visor",title:"app"}))),a.a.createElement(I,{show:this.state.showInfoModal,hide:function(){e.setState({showInfoModal:!1})}}))}},{key:"preview",value:function(){var e=this;fetch("/apps/digitalLock/scorm12/index.html").then(function(e){return e.text()}).then(function(t){e.onloadend(t)})}},{key:"onSubmit",value:function(e){var t=this.state,n={title:t.title,showUsername:t.showUsername,timeout:t.timeout,tip:t.tip,CombinationLockImage:t.CombinationLockImage,mode:t.mode,theme:t.theme,good:t.good,bad:t.bad,escapp:t.escapp,puzzleId:t.puzzleId,escapeRoomId:t.escapeRoomId,puzzleLength:t.puzzleLength,scormVersion:t.scormVersion};return document.getElementById("configInput").value=JSON.stringify(n),!0}},{key:"onloadend",value:function(e){var t=e.replace('<div id="root"></div>',"\n      <div id='root'></div>\n      <script>\n        window._babelPolyfill = false;\n        window.config=JSON.parse('".concat(JSON.stringify(Object(l.a)({},this.state,{dev:!0})),"');\n      <\/script>"));t=t.replace("bundle.js","/apps/digitalLock/scorm12/bundle.js");var n=document.getElementById("visor");n.contentWindow.document.open(),n.contentWindow.document.write(t),n.contentWindow.document.close()}},{key:"download",value:function(){M(this.state)}},{key:"componentDidMount",value:function(){this.preview()}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},76:function(e,t,n){e.exports=n(137)},81:function(e,t,n){},83:function(e,t,n){},89:function(e,t){},91:function(e,t){}},[[76,2,1]]]);
//# sourceMappingURL=main.f42de4eb.chunk.js.map