var SceneMaker=SceneMaker||{};SceneMaker.VERSION="1.0.0",SceneMaker.getOptions=function(){try{if(window.parent.SCENE_MAKER_OPTIONS_PREVIEW)return window.parent.SCENE_MAKER_OPTIONS_PREVIEW;if(window.SCENE_MAKER_OPTIONS)return window.SCENE_MAKER_OPTIONS;if(window.parent.SCENE_MAKER_OPTIONS)return window.parent.SCENE_MAKER_OPTIONS}catch(e){}};/*! jQuery v1.7.2 jquery.com | jquery.org/license */(function(e,n){function w(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function l(a){if(!Hn[a]){var u=ce.body,y=f("<"+a+">").appendTo(u),E=y.css("display");y.remove(),(E==="none"||E==="")&&(hn||(hn=ce.createElement("iframe"),hn.frameBorder=hn.width=hn.height=0),u.appendChild(hn),(!kn||!hn.createElement)&&(kn=(hn.contentWindow||hn.contentDocument).document,kn.write((f.support.boxModel?"<!doctype html>":"")+"<html><body>"),kn.close()),y=kn.createElement(a),kn.body.appendChild(y),E=f.css(y,"display"),u.removeChild(hn)),Hn[a]=E}return Hn[a]}function c(a,u){var y={};return f.each(Vn.concat.apply([],Vn.slice(0,u)),function(){y[this]=a}),y}function m(){pn=n}function p(){return setTimeout(m,0),pn=f.now()}function T(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}function A(){try{return new e.XMLHttpRequest}catch(a){}}function D(a,u){a.dataFilter&&(u=a.dataFilter(u,a.dataType));var y=a.dataTypes,E={},P,z,M=y.length,Z,fe=y[0],ae,_e,pe,ye,Ce;for(P=1;P<M;P++){if(P===1)for(z in a.converters)typeof z=="string"&&(E[z.toLowerCase()]=a.converters[z]);if(ae=fe,fe=y[P],fe==="*")fe=ae;else if(ae!=="*"&&ae!==fe){if(_e=ae+" "+fe,pe=E[_e]||E["* "+fe],!pe){Ce=n;for(ye in E)if(Z=ye.split(" "),(Z[0]===ae||Z[0]==="*")&&(Ce=E[Z[1]+" "+fe],Ce)){ye=E[ye],ye===!0?pe=Ce:Ce===!0&&(pe=ye);break}}!pe&&!Ce&&f.error("No conversion from "+_e.replace(" "," to ")),pe!==!0&&(u=pe?pe(u):Ce(ye(u)))}}return u}function U(a,u,y){var E=a.contents,P=a.dataTypes,z=a.responseFields,M,Z,fe,ae;for(Z in z)Z in y&&(u[z[Z]]=y[Z]);for(;P[0]==="*";)P.shift(),M===n&&(M=a.mimeType||u.getResponseHeader("content-type"));if(M){for(Z in E)if(E[Z]&&E[Z].test(M)){P.unshift(Z);break}}if(P[0]in y)fe=P[0];else{for(Z in y){if(!P[0]||a.converters[Z+" "+P[0]]){fe=Z;break}ae||(ae=Z)}fe=fe||ae}if(fe)return fe!==P[0]&&P.unshift(fe),y[fe]}function F(a,u,y,E){if(f.isArray(u))f.each(u,function(z,M){y||ci.test(a)?E(a,M):F(a+"["+(typeof M=="object"?z:"")+"]",M,y,E)});else if(!y&&f.type(u)==="object")for(var P in u)F(a+"["+P+"]",u[P],y,E);else E(a,u)}function _(a,u){var y,E,P=f.ajaxSettings.flatOptions||{};for(y in u)u[y]!==n&&((P[y]?a:E||(E={}))[y]=u[y]);E&&f.extend(!0,a,E)}function O(a,u,y,E,P,z){P=P||u.dataTypes[0],z=z||{},z[P]=!0;for(var M=a[P],Z=0,fe=M?M.length:0,ae=a===ti,_e;Z<fe&&(ae||!_e);Z++)_e=M[Z](u,y,E),typeof _e=="string"&&(!ae||z[_e]?_e=n:(u.dataTypes.unshift(_e),_e=O(a,u,y,E,_e,z)));return(ae||!_e)&&!z["*"]&&(_e=O(a,u,y,E,"*",z)),_e}function v(a){return function(u,y){if(typeof u!="string"&&(y=u,u="*"),f.isFunction(y))for(var E=u.toLowerCase().split(hi),P=0,z=E.length,M,Z,fe;P<z;P++)M=E[P],fe=/^\+/.test(M),fe&&(M=M.substr(1)||"*"),Z=a[M]=a[M]||[],Z[fe?"unshift":"push"](y)}}function h(a,u,y){var E=u==="width"?a.offsetWidth:a.offsetHeight,P=u==="width"?1:0,z=4;if(E>0){if(y!=="border")for(;P<z;P+=2)y||(E-=parseFloat(f.css(a,"padding"+_n[P]))||0),y==="margin"?E+=parseFloat(f.css(a,y+_n[P]))||0:E-=parseFloat(f.css(a,"border"+_n[P]+"Width"))||0;return E+"px"}if(E=Sn(a,u),(E<0||E==null)&&(E=a.style[u]),fn.test(E))return E;if(E=parseFloat(E)||0,y)for(;P<z;P+=2)E+=parseFloat(f.css(a,"padding"+_n[P]))||0,y!=="padding"&&(E+=parseFloat(f.css(a,"border"+_n[P]+"Width"))||0),y==="margin"&&(E+=parseFloat(f.css(a,y+_n[P]))||0);return E+"px"}function S(a){var u=ce.createElement("div");return wn.appendChild(u),u.innerHTML=a.outerHTML,u.firstChild}function k(a){var u=(a.nodeName||"").toLowerCase();u==="input"?N(a):u!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),N)}function N(a){(a.type==="checkbox"||a.type==="radio")&&(a.defaultChecked=a.checked)}function G(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function K(a,u){var y;u.nodeType===1&&(u.clearAttributes&&u.clearAttributes(),u.mergeAttributes&&u.mergeAttributes(a),y=u.nodeName.toLowerCase(),y==="object"?u.outerHTML=a.outerHTML:y!=="input"||a.type!=="checkbox"&&a.type!=="radio"?y==="option"?u.selected=a.defaultSelected:y==="input"||y==="textarea"?u.defaultValue=a.defaultValue:y==="script"&&u.text!==a.text&&(u.text=a.text):(a.checked&&(u.defaultChecked=u.checked=a.checked),u.value!==a.value&&(u.value=a.value)),u.removeAttribute(f.expando),u.removeAttribute("_submit_attached"),u.removeAttribute("_change_attached"))}function te(a,u){if(u.nodeType===1&&f.hasData(a)){var y,E,P,z=f._data(a),M=f._data(u,z),Z=z.events;if(Z){delete M.handle,M.events={};for(y in Z)for(E=0,P=Z[y].length;E<P;E++)f.event.add(u,y,Z[y][E])}M.data&&(M.data=f.extend({},M.data))}}function X(a,u){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function V(a){var u=at.split("|"),y=a.createDocumentFragment();if(y.createElement)for(;u.length;)y.createElement(u.pop());return y}function ie(a,u,y){if(u=u||0,f.isFunction(u))return f.grep(a,function(P,z){var M=!!u.call(P,z,P);return M===y});if(u.nodeType)return f.grep(a,function(P,z){return P===u===y});if(typeof u=="string"){var E=f.grep(a,function(P){return P.nodeType===1});if(Ne.test(u))return f.filter(u,E,!y);u=f.filter(u,E)}return f.grep(a,function(P,z){return f.inArray(P,u)>=0===y})}function R(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function Y(){return!0}function L(){return!1}function Q(a,u,y){var E=u+"defer",P=u+"queue",z=u+"mark",M=f._data(a,E);M&&(y==="queue"||!f._data(a,P))&&(y==="mark"||!f._data(a,z))&&setTimeout(function(){!f._data(a,P)&&!f._data(a,z)&&(f.removeData(a,E,!0),M.fire())},0)}function oe(a){for(var u in a)if(!(u==="data"&&f.isEmptyObject(a[u]))&&u!=="toJSON")return!1;return!0}function b(a,u,y){if(y===n&&a.nodeType===1){var E="data-"+u.replace(ot,"-$1").toLowerCase();if(y=a.getAttribute(E),typeof y=="string"){try{y=y==="true"?!0:y==="false"?!1:y==="null"?null:f.isNumeric(y)?+y:Me.test(y)?f.parseJSON(y):y}catch(P){}f.data(a,u,y)}else y=n}return y}function Le(a){var u=Re[a]={},y,E;for(a=a.split(/\s+/),y=0,E=a.length;y<E;y++)u[a[y]]=!0;return u}var ce=e.document,J=e.navigator,me=e.location,f=(function(){function a(){if(!u.isReady){try{ce.documentElement.doScroll("left")}catch(re){setTimeout(a,1);return}u.ready()}}var u=function(re,ke){return new u.fn.init(re,ke,P)},y=e.jQuery,E=e.$,P,z=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,M=/\S/,Z=/^\s+/,fe=/\s+$/,ae=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,_e=/^[\],:{}\s]*$/,pe=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,ye=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Ce=/(?:^|:|,)(?:\s*\[)+/g,lt=/(webkit)[ \/]([\w.]+)/,$e=/(opera)(?:.*version)?[ \/]([\w.]+)/,ct=/(msie) ([\w.]+)/,ht=/(mozilla)(?:.*? rv:([\w.]+))?/,Xt=/-([a-z]|[0-9])/ig,Yt=/^-ms-/,bt=function(re,ke){return(ke+"").toUpperCase()},q=J.userAgent,ee,be,xe,De=Object.prototype.toString,Ae=Object.prototype.hasOwnProperty,Ve=Array.prototype.push,Je=Array.prototype.slice,Ze=String.prototype.trim,mt=Array.prototype.indexOf,Ft={};return u.fn=u.prototype={constructor:u,init:function(re,ke,Ke){var Be,rt,Dt,zt;if(!re)return this;if(re.nodeType)return this.context=this[0]=re,this.length=1,this;if(re==="body"&&!ke&&ce.body)return this.context=ce,this[0]=ce.body,this.selector=re,this.length=1,this;if(typeof re=="string"){if(re.charAt(0)!=="<"||re.charAt(re.length-1)!==">"||re.length<3?Be=z.exec(re):Be=[null,re,null],Be&&(Be[1]||!ke)){if(Be[1])return ke=ke instanceof u?ke[0]:ke,zt=ke?ke.ownerDocument||ke:ce,Dt=ae.exec(re),Dt?u.isPlainObject(ke)?(re=[ce.createElement(Dt[1])],u.fn.attr.call(re,ke,!0)):re=[zt.createElement(Dt[1])]:(Dt=u.buildFragment([Be[1]],[zt]),re=(Dt.cacheable?u.clone(Dt.fragment):Dt.fragment).childNodes),u.merge(this,re);if(rt=ce.getElementById(Be[2]),rt&&rt.parentNode){if(rt.id!==Be[2])return Ke.find(re);this.length=1,this[0]=rt}return this.context=ce,this.selector=re,this}return!ke||ke.jquery?(ke||Ke).find(re):this.constructor(ke).find(re)}return u.isFunction(re)?Ke.ready(re):(re.selector!==n&&(this.selector=re.selector,this.context=re.context),u.makeArray(re,this))},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return Je.call(this,0)},get:function(re){return re==null?this.toArray():re<0?this[this.length+re]:this[re]},pushStack:function(re,ke,Ke){var Be=this.constructor();return u.isArray(re)?Ve.apply(Be,re):u.merge(Be,re),Be.prevObject=this,Be.context=this.context,ke==="find"?Be.selector=this.selector+(this.selector?" ":"")+Ke:ke&&(Be.selector=this.selector+"."+ke+"("+Ke+")"),Be},each:function(re,ke){return u.each(this,re,ke)},ready:function(re){return u.bindReady(),be.add(re),this},eq:function(re){return re=+re,re===-1?this.slice(re):this.slice(re,re+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(Je.apply(this,arguments),"slice",Je.call(arguments).join(","))},map:function(re){return this.pushStack(u.map(this,function(ke,Ke){return re.call(ke,Ke,ke)}))},end:function(){return this.prevObject||this.constructor(null)},push:Ve,sort:[].sort,splice:[].splice},u.fn.init.prototype=u.fn,u.extend=u.fn.extend=function(){var re,ke,Ke,Be,rt,Dt,zt=arguments[0]||{},en=1,Tn=arguments.length,cn=!1;for(typeof zt=="boolean"&&(cn=zt,zt=arguments[1]||{},en=2),typeof zt!="object"&&!u.isFunction(zt)&&(zt={}),Tn===en&&(zt=this,--en);en<Tn;en++)if((re=arguments[en])!=null)for(ke in re)Ke=zt[ke],Be=re[ke],zt!==Be&&(cn&&Be&&(u.isPlainObject(Be)||(rt=u.isArray(Be)))?(rt?(rt=!1,Dt=Ke&&u.isArray(Ke)?Ke:[]):Dt=Ke&&u.isPlainObject(Ke)?Ke:{},zt[ke]=u.extend(cn,Dt,Be)):Be!==n&&(zt[ke]=Be));return zt},u.extend({noConflict:function(re){return e.$===u&&(e.$=E),re&&e.jQuery===u&&(e.jQuery=y),u},isReady:!1,readyWait:1,holdReady:function(re){re?u.readyWait++:u.ready(!0)},ready:function(re){if(re===!0&&!--u.readyWait||re!==!0&&!u.isReady){if(!ce.body)return setTimeout(u.ready,1);if(u.isReady=!0,re!==!0&&--u.readyWait>0)return;be.fireWith(ce,[u]),u.fn.trigger&&u(ce).trigger("ready").off("ready")}},bindReady:function(){if(!be){if(be=u.Callbacks("once memory"),ce.readyState==="complete")return setTimeout(u.ready,1);if(ce.addEventListener)ce.addEventListener("DOMContentLoaded",xe,!1),e.addEventListener("load",u.ready,!1);else if(ce.attachEvent){ce.attachEvent("onreadystatechange",xe),e.attachEvent("onload",u.ready);var re=!1;try{re=e.frameElement==null}catch(ke){}ce.documentElement.doScroll&&re&&a()}}},isFunction:function(re){return u.type(re)==="function"},isArray:Array.isArray||function(re){return u.type(re)==="array"},isWindow:function(re){return re!=null&&re==re.window},isNumeric:function(re){return!isNaN(parseFloat(re))&&isFinite(re)},type:function(re){return re==null?String(re):Ft[De.call(re)]||"object"},isPlainObject:function(re){if(!re||u.type(re)!=="object"||re.nodeType||u.isWindow(re))return!1;try{if(re.constructor&&!Ae.call(re,"constructor")&&!Ae.call(re.constructor.prototype,"isPrototypeOf"))return!1}catch(Ke){return!1}var ke;for(ke in re);return ke===n||Ae.call(re,ke)},isEmptyObject:function(re){for(var ke in re)return!1;return!0},error:function(re){throw new Error(re)},parseJSON:function(re){if(typeof re!="string"||!re)return null;if(re=u.trim(re),e.JSON&&e.JSON.parse)return e.JSON.parse(re);if(_e.test(re.replace(pe,"@").replace(ye,"]").replace(Ce,"")))return new Function("return "+re)();u.error("Invalid JSON: "+re)},parseXML:function(re){if(typeof re!="string"||!re)return null;var ke,Ke;try{e.DOMParser?(Ke=new DOMParser,ke=Ke.parseFromString(re,"text/xml")):(ke=new ActiveXObject("Microsoft.XMLDOM"),ke.async="false",ke.loadXML(re))}catch(Be){ke=n}return(!ke||!ke.documentElement||ke.getElementsByTagName("parsererror").length)&&u.error("Invalid XML: "+re),ke},noop:function(){},globalEval:function(re){re&&M.test(re)&&(e.execScript||function(ke){e.eval.call(e,ke)})(re)},camelCase:function(re){return re.replace(Yt,"ms-").replace(Xt,bt)},nodeName:function(re,ke){return re.nodeName&&re.nodeName.toUpperCase()===ke.toUpperCase()},each:function(re,ke,Ke){var Be,rt=0,Dt=re.length,zt=Dt===n||u.isFunction(re);if(Ke)if(zt){for(Be in re)if(ke.apply(re[Be],Ke)===!1)break}else for(;rt<Dt&&ke.apply(re[rt++],Ke)!==!1;);else if(zt){for(Be in re)if(ke.call(re[Be],Be,re[Be])===!1)break}else for(;rt<Dt&&ke.call(re[rt],rt,re[rt++])!==!1;);return re},trim:Ze?function(re){return re==null?"":Ze.call(re)}:function(re){return re==null?"":(re+"").replace(Z,"").replace(fe,"")},makeArray:function(re,ke){var Ke=ke||[];if(re!=null){var Be=u.type(re);re.length==null||Be==="string"||Be==="function"||Be==="regexp"||u.isWindow(re)?Ve.call(Ke,re):u.merge(Ke,re)}return Ke},inArray:function(re,ke,Ke){var Be;if(ke){if(mt)return mt.call(ke,re,Ke);for(Be=ke.length,Ke=Ke?Ke<0?Math.max(0,Be+Ke):Ke:0;Ke<Be;Ke++)if(Ke in ke&&ke[Ke]===re)return Ke}return-1},merge:function(re,ke){var Ke=re.length,Be=0;if(typeof ke.length=="number")for(var rt=ke.length;Be<rt;Be++)re[Ke++]=ke[Be];else for(;ke[Be]!==n;)re[Ke++]=ke[Be++];return re.length=Ke,re},grep:function(re,ke,Ke){var Be=[],rt;Ke=!!Ke;for(var Dt=0,zt=re.length;Dt<zt;Dt++)rt=!!ke(re[Dt],Dt),Ke!==rt&&Be.push(re[Dt]);return Be},map:function(re,ke,Ke){var Be,rt,Dt=[],zt=0,en=re.length,Tn=re instanceof u||en!==n&&typeof en=="number"&&(en>0&&re[0]&&re[en-1]||en===0||u.isArray(re));if(Tn)for(;zt<en;zt++)Be=ke(re[zt],zt,Ke),Be!=null&&(Dt[Dt.length]=Be);else for(rt in re)Be=ke(re[rt],rt,Ke),Be!=null&&(Dt[Dt.length]=Be);return Dt.concat.apply([],Dt)},guid:1,proxy:function(re,ke){if(typeof ke=="string"){var Ke=re[ke];ke=re,re=Ke}if(!u.isFunction(re))return n;var Be=Je.call(arguments,2),rt=function(){return re.apply(ke,Be.concat(Je.call(arguments)))};return rt.guid=re.guid=re.guid||rt.guid||u.guid++,rt},access:function(re,ke,Ke,Be,rt,Dt,zt){var en,Tn=Ke==null,cn=0,wi=re.length;if(Ke&&typeof Ke=="object"){for(cn in Ke)u.access(re,ke,cn,Ke[cn],1,Dt,Be);rt=1}else if(Be!==n){if(en=zt===n&&u.isFunction(Be),Tn&&(en?(en=ke,ke=function(Vi,or,_i){return en.call(u(Vi),_i)}):(ke.call(re,Be),ke=null)),ke)for(;cn<wi;cn++)ke(re[cn],Ke,en?Be.call(re[cn],cn,ke(re[cn],Ke)):Be,zt);rt=1}return rt?re:Tn?ke.call(re):wi?ke(re[0],Ke):Dt},now:function(){return new Date().getTime()},uaMatch:function(re){re=re.toLowerCase();var ke=lt.exec(re)||$e.exec(re)||ct.exec(re)||re.indexOf("compatible")<0&&ht.exec(re)||[];return{browser:ke[1]||"",version:ke[2]||"0"}},sub:function(){function re(Ke,Be){return new re.fn.init(Ke,Be)}u.extend(!0,re,this),re.superclass=this,re.fn=re.prototype=this(),re.fn.constructor=re,re.sub=this.sub,re.fn.init=function(Ke,Be){return Be&&Be instanceof u&&!(Be instanceof re)&&(Be=re(Be)),u.fn.init.call(this,Ke,Be,ke)},re.fn.init.prototype=re.fn;var ke=re(ce);return re},browser:{}}),u.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(re,ke){Ft["[object "+ke+"]"]=ke.toLowerCase()}),ee=u.uaMatch(q),ee.browser&&(u.browser[ee.browser]=!0,u.browser.version=ee.version),u.browser.webkit&&(u.browser.safari=!0),M.test("\xA0")&&(Z=/^[\s\xA0]+/,fe=/[\s\xA0]+$/),P=u(ce),ce.addEventListener?xe=function(){ce.removeEventListener("DOMContentLoaded",xe,!1),u.ready()}:ce.attachEvent&&(xe=function(){ce.readyState==="complete"&&(ce.detachEvent("onreadystatechange",xe),u.ready())}),u})(),Re={};f.Callbacks=function(a){a=a?Re[a]||Le(a):{};var u=[],y=[],E,P,z,M,Z,fe,ae=function(ye){var Ce,lt,$e,ct,ht;for(Ce=0,lt=ye.length;Ce<lt;Ce++)$e=ye[Ce],ct=f.type($e),ct==="array"?ae($e):ct==="function"&&(!a.unique||!pe.has($e))&&u.push($e)},_e=function(ye,Ce){for(Ce=Ce||[],E=!a.memory||[ye,Ce],P=!0,z=!0,fe=M||0,M=0,Z=u.length;u&&fe<Z;fe++)if(u[fe].apply(ye,Ce)===!1&&a.stopOnFalse){E=!0;break}z=!1,u&&(a.once?E===!0?pe.disable():u=[]:y&&y.length&&(E=y.shift(),pe.fireWith(E[0],E[1])))},pe={add:function(){if(u){var ye=u.length;ae(arguments),z?Z=u.length:E&&E!==!0&&(M=ye,_e(E[0],E[1]))}return this},remove:function(){if(u)for(var ye=arguments,Ce=0,lt=ye.length;Ce<lt;Ce++)for(var $e=0;$e<u.length&&!(ye[Ce]===u[$e]&&(z&&$e<=Z&&(Z--,$e<=fe&&fe--),u.splice($e--,1),a.unique));$e++);return this},has:function(ye){if(u){for(var Ce=0,lt=u.length;Ce<lt;Ce++)if(ye===u[Ce])return!0}return!1},empty:function(){return u=[],this},disable:function(){return u=y=E=n,this},disabled:function(){return!u},lock:function(){return y=n,(!E||E===!0)&&pe.disable(),this},locked:function(){return!y},fireWith:function(ye,Ce){return y&&(z?a.once||y.push([ye,Ce]):(!a.once||!E)&&_e(ye,Ce)),this},fire:function(){return pe.fireWith(this,arguments),this},fired:function(){return!!P}};return pe};var je=[].slice;f.extend({Deferred:function(a){var u=f.Callbacks("once memory"),y=f.Callbacks("once memory"),E=f.Callbacks("memory"),P="pending",z={resolve:u,reject:y,notify:E},M={done:u.add,fail:y.add,progress:E.add,state:function(){return P},isResolved:u.fired,isRejected:y.fired,then:function(ae,_e,pe){return Z.done(ae).fail(_e).progress(pe),this},always:function(){return Z.done.apply(Z,arguments).fail.apply(Z,arguments),this},pipe:function(ae,_e,pe){return f.Deferred(function(ye){f.each({done:[ae,"resolve"],fail:[_e,"reject"],progress:[pe,"notify"]},function(Ce,lt){var $e=lt[0],ct=lt[1],ht;f.isFunction($e)?Z[Ce](function(){ht=$e.apply(this,arguments),ht&&f.isFunction(ht.promise)?ht.promise().then(ye.resolve,ye.reject,ye.notify):ye[ct+"With"](this===Z?ye:this,[ht])}):Z[Ce](ye[ct])})}).promise()},promise:function(ae){if(ae==null)ae=M;else for(var _e in M)ae[_e]=M[_e];return ae}},Z=M.promise({}),fe;for(fe in z)Z[fe]=z[fe].fire,Z[fe+"With"]=z[fe].fireWith;return Z.done(function(){P="resolved"},y.disable,E.lock).fail(function(){P="rejected"},u.disable,E.lock),a&&a.call(Z,Z),Z},when:function(a){function u(pe){return function(ye){M[pe]=arguments.length>1?je.call(arguments,0):ye,ae.notifyWith(_e,M)}}function y(pe){return function(ye){E[pe]=arguments.length>1?je.call(arguments,0):ye,--Z||ae.resolveWith(ae,E)}}var E=je.call(arguments,0),P=0,z=E.length,M=Array(z),Z=z,fe=z,ae=z<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),_e=ae.promise();if(z>1){for(;P<z;P++)E[P]&&E[P].promise&&f.isFunction(E[P].promise)?E[P].promise().then(y(P),ae.reject,u(P)):--Z;Z||ae.resolveWith(ae,E)}else ae!==a&&ae.resolveWith(ae,z?[a]:[]);return _e}}),f.support=(function(){var a,u,y,E,P,z,M,Z,fe,ae,_e,pe,ye=ce.createElement("div"),Ce=ce.documentElement;if(ye.setAttribute("className","t"),ye.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",u=ye.getElementsByTagName("*"),y=ye.getElementsByTagName("a")[0],!u||!u.length||!y)return{};E=ce.createElement("select"),P=E.appendChild(ce.createElement("option")),z=ye.getElementsByTagName("input")[0],a={leadingWhitespace:ye.firstChild.nodeType===3,tbody:!ye.getElementsByTagName("tbody").length,htmlSerialize:!!ye.getElementsByTagName("link").length,style:/top/.test(y.getAttribute("style")),hrefNormalized:y.getAttribute("href")==="/a",opacity:/^0.55/.test(y.style.opacity),cssFloat:!!y.style.cssFloat,checkOn:z.value==="on",optSelected:P.selected,getSetAttribute:ye.className!=="t",enctype:!!ce.createElement("form").enctype,html5Clone:ce.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},f.boxModel=a.boxModel=ce.compatMode==="CSS1Compat",z.checked=!0,a.noCloneChecked=z.cloneNode(!0).checked,E.disabled=!0,a.optDisabled=!P.disabled;try{delete ye.test}catch(lt){a.deleteExpando=!1}if(!ye.addEventListener&&ye.attachEvent&&ye.fireEvent&&(ye.attachEvent("onclick",function(){a.noCloneEvent=!1}),ye.cloneNode(!0).fireEvent("onclick")),z=ce.createElement("input"),z.value="t",z.setAttribute("type","radio"),a.radioValue=z.value==="t",z.setAttribute("checked","checked"),z.setAttribute("name","t"),ye.appendChild(z),M=ce.createDocumentFragment(),M.appendChild(ye.lastChild),a.checkClone=M.cloneNode(!0).cloneNode(!0).lastChild.checked,a.appendChecked=z.checked,M.removeChild(z),M.appendChild(ye),ye.attachEvent)for(_e in{submit:1,change:1,focusin:1})ae="on"+_e,pe=ae in ye,pe||(ye.setAttribute(ae,"return;"),pe=typeof ye[ae]=="function"),a[_e+"Bubbles"]=pe;return M.removeChild(ye),M=E=P=ye=z=null,f(function(){var lt,$e,ct,ht,Xt,Yt,bt,q,ee,be,xe,De,Ae,Ve=ce.getElementsByTagName("body")[0];!Ve||(q=1,Ae="padding:0;margin:0;border:",xe="position:absolute;top:0;left:0;width:1px;height:1px;",De=Ae+"0;visibility:hidden;",ee="style='"+xe+Ae+"5px solid #000;",be="<div "+ee+"display:block;'><div style='"+Ae+"0;display:block;overflow:hidden;'></div></div><table "+ee+"' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",lt=ce.createElement("div"),lt.style.cssText=De+"width:0;height:0;position:static;top:0;margin-top:"+q+"px",Ve.insertBefore(lt,Ve.firstChild),ye=ce.createElement("div"),lt.appendChild(ye),ye.innerHTML="<table><tr><td style='"+Ae+"0;display:none'></td><td>t</td></tr></table>",Z=ye.getElementsByTagName("td"),pe=Z[0].offsetHeight===0,Z[0].style.display="",Z[1].style.display="none",a.reliableHiddenOffsets=pe&&Z[0].offsetHeight===0,e.getComputedStyle&&(ye.innerHTML="",bt=ce.createElement("div"),bt.style.width="0",bt.style.marginRight="0",ye.style.width="2px",ye.appendChild(bt),a.reliableMarginRight=(parseInt((e.getComputedStyle(bt,null)||{marginRight:0}).marginRight,10)||0)===0),typeof ye.style.zoom!="undefined"&&(ye.innerHTML="",ye.style.width=ye.style.padding="1px",ye.style.border=0,ye.style.overflow="hidden",ye.style.display="inline",ye.style.zoom=1,a.inlineBlockNeedsLayout=ye.offsetWidth===3,ye.style.display="block",ye.style.overflow="visible",ye.innerHTML="<div style='width:5px;'></div>",a.shrinkWrapBlocks=ye.offsetWidth!==3),ye.style.cssText=xe+De,ye.innerHTML=be,$e=ye.firstChild,ct=$e.firstChild,Xt=$e.nextSibling.firstChild.firstChild,Yt={doesNotAddBorder:ct.offsetTop!==5,doesAddBorderForTableAndCells:Xt.offsetTop===5},ct.style.position="fixed",ct.style.top="20px",Yt.fixedPosition=ct.offsetTop===20||ct.offsetTop===15,ct.style.position=ct.style.top="",$e.style.overflow="hidden",$e.style.position="relative",Yt.subtractsBorderForOverflowNotVisible=ct.offsetTop===-5,Yt.doesNotIncludeMarginInBodyOffset=Ve.offsetTop!==q,e.getComputedStyle&&(ye.style.marginTop="1%",a.pixelMargin=(e.getComputedStyle(ye,null)||{marginTop:0}).marginTop!=="1%"),typeof lt.style.zoom!="undefined"&&(lt.style.zoom=1),Ve.removeChild(lt),bt=ye=lt=null,f.extend(a,Yt))}),a})();var Me=/^(?:\{.*\}|\[.*\])$/,ot=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?f.cache[a[f.expando]]:a[f.expando],!!a&&!oe(a)},data:function(a,u,y,E){if(f.acceptData(a)){var P,z,M,Z=f.expando,fe=typeof u=="string",ae=a.nodeType,_e=ae?f.cache:a,pe=ae?a[Z]:a[Z]&&Z,ye=u==="events";return(!pe||!_e[pe]||!ye&&!E&&!_e[pe].data)&&fe&&y===n?void 0:(pe||(ae?a[Z]=pe=++f.uuid:pe=Z),_e[pe]||(_e[pe]={},ae||(_e[pe].toJSON=f.noop)),(typeof u=="object"||typeof u=="function")&&(E?_e[pe]=f.extend(_e[pe],u):_e[pe].data=f.extend(_e[pe].data,u)),P=z=_e[pe],E||(z.data||(z.data={}),z=z.data),y!==n&&(z[f.camelCase(u)]=y),ye&&!z[u]?P.events:(fe?(M=z[u],M==null&&(M=z[f.camelCase(u)])):M=z,M))}},removeData:function(a,u,y){if(f.acceptData(a)){var E,P,z,M=f.expando,Z=a.nodeType,fe=Z?f.cache:a,ae=Z?a[M]:M;if(!fe[ae])return;if(u&&(E=y?fe[ae]:fe[ae].data,E)){for(f.isArray(u)||(u in E?u=[u]:(u=f.camelCase(u),u in E?u=[u]:u=u.split(" "))),P=0,z=u.length;P<z;P++)delete E[u[P]];if(!(y?oe:f.isEmptyObject)(E))return}if(!y&&(delete fe[ae].data,!oe(fe[ae])))return;f.support.deleteExpando||!fe.setInterval?delete fe[ae]:fe[ae]=null,Z&&(f.support.deleteExpando?delete a[M]:a.removeAttribute?a.removeAttribute(M):a[M]=null)}},_data:function(a,u,y){return f.data(a,u,y,!0)},acceptData:function(a){if(a.nodeName){var u=f.noData[a.nodeName.toLowerCase()];if(u)return u!==!0&&a.getAttribute("classid")===u}return!0}}),f.fn.extend({data:function(a,u){var y,E,P,z,M,Z=this[0],fe=0,ae=null;if(a===n){if(this.length&&(ae=f.data(Z),Z.nodeType===1&&!f._data(Z,"parsedAttrs"))){for(P=Z.attributes,M=P.length;fe<M;fe++)z=P[fe].name,z.indexOf("data-")===0&&(z=f.camelCase(z.substring(5)),b(Z,z,ae[z]));f._data(Z,"parsedAttrs",!0)}return ae}return typeof a=="object"?this.each(function(){f.data(this,a)}):(y=a.split(".",2),y[1]=y[1]?"."+y[1]:"",E=y[1]+"!",f.access(this,function(_e){if(_e===n)return ae=this.triggerHandler("getData"+E,[y[0]]),ae===n&&Z&&(ae=f.data(Z,a),ae=b(Z,a,ae)),ae===n&&y[1]?this.data(y[0]):ae;y[1]=_e,this.each(function(){var pe=f(this);pe.triggerHandler("setData"+E,y),f.data(this,a,_e),pe.triggerHandler("changeData"+E,y)})},null,u,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,u){a&&(u=(u||"fx")+"mark",f._data(a,u,(f._data(a,u)||0)+1))},_unmark:function(a,u,y){if(a!==!0&&(y=u,u=a,a=!1),u){y=y||"fx";var E=y+"mark",P=a?0:(f._data(u,E)||1)-1;P?f._data(u,E,P):(f.removeData(u,E,!0),Q(u,y,"mark"))}},queue:function(a,u,y){var E;if(a)return u=(u||"fx")+"queue",E=f._data(a,u),y&&(!E||f.isArray(y)?E=f._data(a,u,f.makeArray(y)):E.push(y)),E||[]},dequeue:function(a,u){u=u||"fx";var y=f.queue(a,u),E=y.shift(),P={};E==="inprogress"&&(E=y.shift()),E&&(u==="fx"&&y.unshift("inprogress"),f._data(a,u+".run",P),E.call(a,function(){f.dequeue(a,u)},P)),y.length||(f.removeData(a,u+"queue "+u+".run",!0),Q(a,u,"queue"))}}),f.fn.extend({queue:function(a,u){var y=2;return typeof a!="string"&&(u=a,a="fx",y--),arguments.length<y?f.queue(this[0],a):u===n?this:this.each(function(){var E=f.queue(this,a,u);a==="fx"&&E[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,u){return a=f.fx&&f.fx.speeds[a]||a,u=u||"fx",this.queue(u,function(y,E){var P=setTimeout(y,a);E.stop=function(){clearTimeout(P)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,u){function y(){--M||E.resolveWith(P,[P])}typeof a!="string"&&(u=a,a=n),a=a||"fx";for(var E=f.Deferred(),P=this,z=P.length,M=1,Z=a+"defer",fe=a+"queue",ae=a+"mark",_e;z--;)(_e=f.data(P[z],Z,n,!0)||(f.data(P[z],fe,n,!0)||f.data(P[z],ae,n,!0))&&f.data(P[z],Z,f.Callbacks("once memory"),!0))&&(M++,_e.add(y));return y(),E.promise(u)}});var Tt=/[\n\t\r]/g,Ue=/\s+/,et=/\r/g,Pe=/^(?:button|input)$/i,We=/^(?:button|input|object|select|textarea)$/i,xt=/^a(?:rea)?$/i,Et=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,le=f.support.getSetAttribute,Oe,ft,Ct;f.fn.extend({attr:function(a,u){return f.access(this,f.attr,a,u,arguments.length>1)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,u){return f.access(this,f.prop,a,u,arguments.length>1)},removeProp:function(a){return a=f.propFix[a]||a,this.each(function(){try{this[a]=n,delete this[a]}catch(u){}})},addClass:function(a){var u,y,E,P,z,M,Z;if(f.isFunction(a))return this.each(function(fe){f(this).addClass(a.call(this,fe,this.className))});if(a&&typeof a=="string"){for(u=a.split(Ue),y=0,E=this.length;y<E;y++)if(P=this[y],P.nodeType===1)if(!P.className&&u.length===1)P.className=a;else{for(z=" "+P.className+" ",M=0,Z=u.length;M<Z;M++)~z.indexOf(" "+u[M]+" ")||(z+=u[M]+" ");P.className=f.trim(z)}}return this},removeClass:function(a){var u,y,E,P,z,M,Z;if(f.isFunction(a))return this.each(function(fe){f(this).removeClass(a.call(this,fe,this.className))});if(a&&typeof a=="string"||a===n){for(u=(a||"").split(Ue),y=0,E=this.length;y<E;y++)if(P=this[y],P.nodeType===1&&P.className)if(a){for(z=(" "+P.className+" ").replace(Tt," "),M=0,Z=u.length;M<Z;M++)z=z.replace(" "+u[M]+" "," ");P.className=f.trim(z)}else P.className=""}return this},toggleClass:function(a,u){var y=typeof a,E=typeof u=="boolean";return f.isFunction(a)?this.each(function(P){f(this).toggleClass(a.call(this,P,this.className,u),u)}):this.each(function(){if(y==="string")for(var P,z=0,M=f(this),Z=u,fe=a.split(Ue);P=fe[z++];)Z=E?Z:!M.hasClass(P),M[Z?"addClass":"removeClass"](P);else(y==="undefined"||y==="boolean")&&(this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||"")})},hasClass:function(a){for(var u=" "+a+" ",y=0,E=this.length;y<E;y++)if(this[y].nodeType===1&&(" "+this[y].className+" ").replace(Tt," ").indexOf(u)>-1)return!0;return!1},val:function(a){var u,y,E,P=this[0];{if(arguments.length)return E=f.isFunction(a),this.each(function(z){var M=f(this),Z;this.nodeType===1&&(E?Z=a.call(this,z,M.val()):Z=a,Z==null?Z="":typeof Z=="number"?Z+="":f.isArray(Z)&&(Z=f.map(Z,function(fe){return fe==null?"":fe+""})),u=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()],(!u||!("set"in u)||u.set(this,Z,"value")===n)&&(this.value=Z))});if(P)return u=f.valHooks[P.type]||f.valHooks[P.nodeName.toLowerCase()],u&&"get"in u&&(y=u.get(P,"value"))!==n?y:(y=P.value,typeof y=="string"?y.replace(et,""):y==null?"":y)}}}),f.extend({valHooks:{option:{get:function(a){var u=a.attributes.value;return!u||u.specified?a.value:a.text}},select:{get:function(a){var u,y,E,P,z=a.selectedIndex,M=[],Z=a.options,fe=a.type==="select-one";if(z<0)return null;for(y=fe?z:0,E=fe?z+1:Z.length;y<E;y++)if(P=Z[y],P.selected&&(f.support.optDisabled?!P.disabled:P.getAttribute("disabled")===null)&&(!P.parentNode.disabled||!f.nodeName(P.parentNode,"optgroup"))){if(u=f(P).val(),fe)return u;M.push(u)}return fe&&!M.length&&Z.length?f(Z[z]).val():M},set:function(a,u){var y=f.makeArray(u);return f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),y)>=0}),y.length||(a.selectedIndex=-1),y}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,u,y,E){var P,z,M,Z=a.nodeType;if(a&&Z!==3&&Z!==8&&Z!==2){if(E&&u in f.attrFn)return f(a)[u](y);if(typeof a.getAttribute=="undefined")return f.prop(a,u,y);if(M=Z!==1||!f.isXMLDoc(a),M&&(u=u.toLowerCase(),z=f.attrHooks[u]||(Et.test(u)?ft:Oe)),y!==n){if(y===null){f.removeAttr(a,u);return}return z&&"set"in z&&M&&(P=z.set(a,y,u))!==n?P:(a.setAttribute(u,""+y),y)}return z&&"get"in z&&M&&(P=z.get(a,u))!==null?P:(P=a.getAttribute(u),P===null?n:P)}},removeAttr:function(a,u){var y,E,P,z,M,Z=0;if(u&&a.nodeType===1)for(E=u.toLowerCase().split(Ue),z=E.length;Z<z;Z++)P=E[Z],P&&(y=f.propFix[P]||P,M=Et.test(P),M||f.attr(a,P,""),a.removeAttribute(le?P:y),M&&y in a&&(a[y]=!1))},attrHooks:{type:{set:function(a,u){if(Pe.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&u==="radio"&&f.nodeName(a,"input")){var y=a.value;return a.setAttribute("type",u),y&&(a.value=y),u}}},value:{get:function(a,u){return Oe&&f.nodeName(a,"button")?Oe.get(a,u):u in a?a.value:null},set:function(a,u,y){if(Oe&&f.nodeName(a,"button"))return Oe.set(a,u,y);a.value=u}}},propFix:{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,u,y){var E,P,z,M=a.nodeType;if(a&&M!==3&&M!==8&&M!==2)return z=M!==1||!f.isXMLDoc(a),z&&(u=f.propFix[u]||u,P=f.propHooks[u]),y!==n?P&&"set"in P&&(E=P.set(a,y,u))!==n?E:a[u]=y:P&&"get"in P&&(E=P.get(a,u))!==null?E:a[u]},propHooks:{tabIndex:{get:function(a){var u=a.getAttributeNode("tabindex");return u&&u.specified?parseInt(u.value,10):We.test(a.nodeName)||xt.test(a.nodeName)&&a.href?0:n}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,ft={get:function(a,u){var y,E=f.prop(a,u);return E===!0||typeof E!="boolean"&&(y=a.getAttributeNode(u))&&y.nodeValue!==!1?u.toLowerCase():n},set:function(a,u,y){var E;return u===!1?f.removeAttr(a,y):(E=f.propFix[y]||y,E in a&&(a[E]=!0),a.setAttribute(y,y.toLowerCase())),y}},le||(Ct={name:!0,id:!0,coords:!0},Oe=f.valHooks.button={get:function(a,u){var y;return y=a.getAttributeNode(u),y&&(Ct[u]?y.nodeValue!=="":y.specified)?y.nodeValue:n},set:function(a,u,y){var E=a.getAttributeNode(y);return E||(E=ce.createAttribute(y),a.setAttributeNode(E)),E.nodeValue=u+""}},f.attrHooks.tabindex.set=Oe.set,f.each(["width","height"],function(a,u){f.attrHooks[u]=f.extend(f.attrHooks[u],{set:function(y,E){if(E==="")return y.setAttribute(u,"auto"),E}})}),f.attrHooks.contenteditable={get:Oe.get,set:function(a,u,y){u===""&&(u="false"),Oe.set(a,u,y)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,u){f.attrHooks[u]=f.extend(f.attrHooks[u],{get:function(y){var E=y.getAttribute(u,2);return E===null?n:E}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||n},set:function(a,u){return a.style.cssText=""+u}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var u=a.parentNode;return u&&(u.selectedIndex,u.parentNode&&u.parentNode.selectedIndex),null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,u){if(f.isArray(u))return a.checked=f.inArray(f(a).val(),u)>=0}})});var Rt=/^(?:textarea|input|select)$/i,Wt=/^([^\.]*)?(?:\.(.+))?$/,nn=/(?:^|\s)hover(\.\S+)?\b/,rn=/^key/,Kt=/^(?:mouse|contextmenu)|click/,Vt=/^(?:focusinfocus|focusoutblur)$/,Qt=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,st=function(a){var u=Qt.exec(a);return u&&(u[1]=(u[1]||"").toLowerCase(),u[3]=u[3]&&new RegExp("(?:^|\\s)"+u[3]+"(?:\\s|$)")),u},pt=function(a,u){var y=a.attributes||{};return(!u[1]||a.nodeName.toLowerCase()===u[1])&&(!u[2]||(y.id||{}).value===u[2])&&(!u[3]||u[3].test((y.class||{}).value))},qt=function(a){return f.event.special.hover?a:a.replace(nn,"mouseenter$1 mouseleave$1")};f.event={add:function(a,u,y,E,P){var z,M,Z,fe,ae,_e,pe,ye,Ce,lt,$e,ct;if(!(a.nodeType===3||a.nodeType===8||!u||!y||!(z=f._data(a)))){for(y.handler&&(Ce=y,y=Ce.handler,P=Ce.selector),y.guid||(y.guid=f.guid++),Z=z.events,Z||(z.events=Z={}),M=z.handle,M||(z.handle=M=function(ht){return typeof f!="undefined"&&(!ht||f.event.triggered!==ht.type)?f.event.dispatch.apply(M.elem,arguments):n},M.elem=a),u=f.trim(qt(u)).split(" "),fe=0;fe<u.length;fe++)ae=Wt.exec(u[fe])||[],_e=ae[1],pe=(ae[2]||"").split(".").sort(),ct=f.event.special[_e]||{},_e=(P?ct.delegateType:ct.bindType)||_e,ct=f.event.special[_e]||{},ye=f.extend({type:_e,origType:ae[1],data:E,handler:y,guid:y.guid,selector:P,quick:P&&st(P),namespace:pe.join(".")},Ce),$e=Z[_e],$e||($e=Z[_e]=[],$e.delegateCount=0,(!ct.setup||ct.setup.call(a,E,pe,M)===!1)&&(a.addEventListener?a.addEventListener(_e,M,!1):a.attachEvent&&a.attachEvent("on"+_e,M))),ct.add&&(ct.add.call(a,ye),ye.handler.guid||(ye.handler.guid=y.guid)),P?$e.splice($e.delegateCount++,0,ye):$e.push(ye),f.event.global[_e]=!0;a=null}},global:{},remove:function(a,u,y,E,P){var z=f.hasData(a)&&f._data(a),M,Z,fe,ae,_e,pe,ye,Ce,lt,$e,ct,ht;if(z&&(Ce=z.events)){for(u=f.trim(qt(u||"")).split(" "),M=0;M<u.length;M++){if(Z=Wt.exec(u[M])||[],fe=ae=Z[1],_e=Z[2],!fe){for(fe in Ce)f.event.remove(a,fe+u[M],y,E,!0);continue}for(lt=f.event.special[fe]||{},fe=(E?lt.delegateType:lt.bindType)||fe,ct=Ce[fe]||[],pe=ct.length,_e=_e?new RegExp("(^|\\.)"+_e.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,ye=0;ye<ct.length;ye++)ht=ct[ye],(P||ae===ht.origType)&&(!y||y.guid===ht.guid)&&(!_e||_e.test(ht.namespace))&&(!E||E===ht.selector||E==="**"&&ht.selector)&&(ct.splice(ye--,1),ht.selector&&ct.delegateCount--,lt.remove&&lt.remove.call(a,ht));ct.length===0&&pe!==ct.length&&((!lt.teardown||lt.teardown.call(a,_e)===!1)&&f.removeEvent(a,fe,z.handle),delete Ce[fe])}f.isEmptyObject(Ce)&&($e=z.handle,$e&&($e.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(a,u,y,E){if(!y||y.nodeType!==3&&y.nodeType!==8){var P=a.type||a,z=[],M,Z,fe,ae,_e,pe,ye,Ce,lt,$e;if(Vt.test(P+f.event.triggered)||(P.indexOf("!")>=0&&(P=P.slice(0,-1),Z=!0),P.indexOf(".")>=0&&(z=P.split("."),P=z.shift(),z.sort()),(!y||f.event.customEvent[P])&&!f.event.global[P]))return;if(a=typeof a=="object"?a[f.expando]?a:new f.Event(P,a):new f.Event(P),a.type=P,a.isTrigger=!0,a.exclusive=Z,a.namespace=z.join("."),a.namespace_re=a.namespace?new RegExp("(^|\\.)"+z.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,pe=P.indexOf(":")<0?"on"+P:"",!y){M=f.cache;for(fe in M)M[fe].events&&M[fe].events[P]&&f.event.trigger(a,u,M[fe].handle.elem,!0);return}if(a.result=n,a.target||(a.target=y),u=u!=null?f.makeArray(u):[],u.unshift(a),ye=f.event.special[P]||{},ye.trigger&&ye.trigger.apply(y,u)===!1)return;if(lt=[[y,ye.bindType||P]],!E&&!ye.noBubble&&!f.isWindow(y)){for($e=ye.delegateType||P,ae=Vt.test($e+P)?y:y.parentNode,_e=null;ae;ae=ae.parentNode)lt.push([ae,$e]),_e=ae;_e&&_e===y.ownerDocument&&lt.push([_e.defaultView||_e.parentWindow||e,$e])}for(fe=0;fe<lt.length&&!a.isPropagationStopped();fe++)ae=lt[fe][0],a.type=lt[fe][1],Ce=(f._data(ae,"events")||{})[a.type]&&f._data(ae,"handle"),Ce&&Ce.apply(ae,u),Ce=pe&&ae[pe],Ce&&f.acceptData(ae)&&Ce.apply(ae,u)===!1&&a.preventDefault();return a.type=P,!E&&!a.isDefaultPrevented()&&(!ye._default||ye._default.apply(y.ownerDocument,u)===!1)&&(P!=="click"||!f.nodeName(y,"a"))&&f.acceptData(y)&&pe&&y[P]&&(P!=="focus"&&P!=="blur"||a.target.offsetWidth!==0)&&!f.isWindow(y)&&(_e=y[pe],_e&&(y[pe]=null),f.event.triggered=P,y[P](),f.event.triggered=n,_e&&(y[pe]=_e)),a.result}},dispatch:function(a){a=f.event.fix(a||e.event);var u=(f._data(this,"events")||{})[a.type]||[],y=u.delegateCount,E=[].slice.call(arguments,0),P=!a.exclusive&&!a.namespace,z=f.event.special[a.type]||{},M=[],Z,fe,ae,_e,pe,ye,Ce,lt,$e,ct,ht;if(E[0]=a,a.delegateTarget=this,!z.preDispatch||z.preDispatch.call(this,a)!==!1){if(y&&(!a.button||a.type!=="click")){for(_e=f(this),_e.context=this.ownerDocument||this,ae=a.target;ae!=this;ae=ae.parentNode||this)if(ae.disabled!==!0){for(ye={},lt=[],_e[0]=ae,Z=0;Z<y;Z++)$e=u[Z],ct=$e.selector,ye[ct]===n&&(ye[ct]=$e.quick?pt(ae,$e.quick):_e.is(ct)),ye[ct]&&lt.push($e);lt.length&&M.push({elem:ae,matches:lt})}}for(u.length>y&&M.push({elem:this,matches:u.slice(y)}),Z=0;Z<M.length&&!a.isPropagationStopped();Z++)for(Ce=M[Z],a.currentTarget=Ce.elem,fe=0;fe<Ce.matches.length&&!a.isImmediatePropagationStopped();fe++)$e=Ce.matches[fe],(P||!a.namespace&&!$e.namespace||a.namespace_re&&a.namespace_re.test($e.namespace))&&(a.data=$e.data,a.handleObj=$e,pe=((f.event.special[$e.origType]||{}).handle||$e.handler).apply(Ce.elem,E),pe!==n&&(a.result=pe,pe===!1&&(a.preventDefault(),a.stopPropagation())));return z.postDispatch&&z.postDispatch.call(this,a),a.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,u){return a.which==null&&(a.which=u.charCode!=null?u.charCode:u.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,u){var y,E,P,z=u.button,M=u.fromElement;return a.pageX==null&&u.clientX!=null&&(y=a.target.ownerDocument||ce,E=y.documentElement,P=y.body,a.pageX=u.clientX+(E&&E.scrollLeft||P&&P.scrollLeft||0)-(E&&E.clientLeft||P&&P.clientLeft||0),a.pageY=u.clientY+(E&&E.scrollTop||P&&P.scrollTop||0)-(E&&E.clientTop||P&&P.clientTop||0)),!a.relatedTarget&&M&&(a.relatedTarget=M===a.target?u.toElement:M),!a.which&&z!==n&&(a.which=z&1?1:z&2?3:z&4?2:0),a}},fix:function(a){if(a[f.expando])return a;var u,y,E=a,P=f.event.fixHooks[a.type]||{},z=P.props?this.props.concat(P.props):this.props;for(a=f.Event(E),u=z.length;u;)y=z[--u],a[y]=E[y];return a.target||(a.target=E.srcElement||ce),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===n&&(a.metaKey=a.ctrlKey),P.filter?P.filter(a,E):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,u,y){f.isWindow(this)&&(this.onbeforeunload=y)},teardown:function(a,u){this.onbeforeunload===u&&(this.onbeforeunload=null)}}},simulate:function(a,u,y,E){var P=f.extend(new f.Event,y,{type:a,isSimulated:!0,originalEvent:{}});E?f.event.trigger(P,null,u):f.event.dispatch.call(u,P),P.isDefaultPrevented()&&y.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=ce.removeEventListener?function(a,u,y){a.removeEventListener&&a.removeEventListener(u,y,!1)}:function(a,u,y){a.detachEvent&&a.detachEvent("on"+u,y)},f.Event=function(a,u){if(!(this instanceof f.Event))return new f.Event(a,u);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?Y:L):this.type=a,u&&f.extend(this,u),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=Y;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=Y;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Y,this.stopPropagation()},isDefaultPrevented:L,isPropagationStopped:L,isImmediatePropagationStopped:L},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,u){f.event.special[a]={delegateType:u,bindType:u,handle:function(y){var E=this,P=y.relatedTarget,z=y.handleObj,M=z.selector,Z;return(!P||P!==E&&!f.contains(E,P))&&(y.type=z.origType,Z=z.handler.apply(this,arguments),y.type=u),Z}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){var u=a.target,y=f.nodeName(u,"input")||f.nodeName(u,"button")?u.form:n;y&&!y._submit_attached&&(f.event.add(y,"submit._submit",function(E){E._submit_bubble=!0}),y._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(Rt.test(this.nodeName))return(this.type==="checkbox"||this.type==="radio")&&(f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))})),!1;f.event.add(this,"beforeactivate._change",function(a){var u=a.target;Rt.test(u.nodeName)&&!u._change_attached&&(f.event.add(u,"change._change",function(y){this.parentNode&&!y.isSimulated&&!y.isTrigger&&f.event.simulate("change",this.parentNode,y,!0)}),u._change_attached=!0)})},handle:function(a){var u=a.target;if(this!==u||a.isSimulated||a.isTrigger||u.type!=="radio"&&u.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){return f.event.remove(this,"._change"),Rt.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,u){var y=0,E=function(P){f.event.simulate(u,P.target,f.event.fix(P),!0)};f.event.special[u]={setup:function(){y++===0&&ce.addEventListener(a,E,!0)},teardown:function(){--y===0&&ce.removeEventListener(a,E,!0)}}}),f.fn.extend({on:function(a,u,y,E,P){var z,M;if(typeof a=="object"){typeof u!="string"&&(y=y||u,u=n);for(M in a)this.on(M,u,y,a[M],P);return this}if(y==null&&E==null?(E=u,y=u=n):E==null&&(typeof u=="string"?(E=y,y=n):(E=y,y=u,u=n)),E===!1)E=L;else if(!E)return this;return P===1&&(z=E,E=function(Z){return f().off(Z),z.apply(this,arguments)},E.guid=z.guid||(z.guid=f.guid++)),this.each(function(){f.event.add(this,a,E,y,u)})},one:function(a,u,y,E){return this.on(a,u,y,E,1)},off:function(a,u,y){if(a&&a.preventDefault&&a.handleObj){var E=a.handleObj;return f(a.delegateTarget).off(E.namespace?E.origType+"."+E.namespace:E.origType,E.selector,E.handler),this}if(typeof a=="object"){for(var P in a)this.off(P,u,a[P]);return this}return(u===!1||typeof u=="function")&&(y=u,u=n),y===!1&&(y=L),this.each(function(){f.event.remove(this,a,y,u)})},bind:function(a,u,y){return this.on(a,null,u,y)},unbind:function(a,u){return this.off(a,null,u)},live:function(a,u,y){return f(this.context).on(a,this.selector,u,y),this},die:function(a,u){return f(this.context).off(a,this.selector||"**",u),this},delegate:function(a,u,y,E){return this.on(u,a,y,E)},undelegate:function(a,u,y){return arguments.length==1?this.off(a,"**"):this.off(u,a,y)},trigger:function(a,u){return this.each(function(){f.event.trigger(a,u,this)})},triggerHandler:function(a,u){if(this[0])return f.event.trigger(a,u,this[0],!0)},toggle:function(a){var u=arguments,y=a.guid||f.guid++,E=0,P=function(z){var M=(f._data(this,"lastToggle"+a.guid)||0)%E;return f._data(this,"lastToggle"+a.guid,M+1),z.preventDefault(),u[M].apply(this,arguments)||!1};for(P.guid=y;E<u.length;)u[E++].guid=y;return this.click(P)},hover:function(a,u){return this.mouseenter(a).mouseleave(u||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,u){f.fn[u]=function(y,E){return E==null&&(E=y,y=null),arguments.length>0?this.on(u,null,y,E):this.trigger(u)},f.attrFn&&(f.attrFn[u]=!0),rn.test(u)&&(f.event.fixHooks[u]=f.event.keyHooks),Kt.test(u)&&(f.event.fixHooks[u]=f.event.mouseHooks)}),(function(){function a(q,ee,be,xe,De,Ae){for(var Ve=0,Je=xe.length;Ve<Je;Ve++){var Ze=xe[Ve];if(Ze){var mt=!1;for(Ze=Ze[q];Ze;){if(Ze[E]===be){mt=xe[Ze.sizset];break}if(Ze.nodeType===1){if(Ae||(Ze[E]=be,Ze.sizset=Ve),typeof ee!="string"){if(Ze===ee){mt=!0;break}}else if(pe.filter(ee,[Ze]).length>0){mt=Ze;break}}Ze=Ze[q]}xe[Ve]=mt}}}function u(q,ee,be,xe,De,Ae){for(var Ve=0,Je=xe.length;Ve<Je;Ve++){var Ze=xe[Ve];if(Ze){var mt=!1;for(Ze=Ze[q];Ze;){if(Ze[E]===be){mt=xe[Ze.sizset];break}if(Ze.nodeType===1&&!Ae&&(Ze[E]=be,Ze.sizset=Ve),Ze.nodeName.toLowerCase()===ee){mt=Ze;break}Ze=Ze[q]}xe[Ve]=mt}}}var y=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,E="sizcache"+(Math.random()+"").replace(".",""),P=0,z=Object.prototype.toString,M=!1,Z=!0,fe=/\\/g,ae=/\r\n/g,_e=/\W/;[0,0].sort(function(){return Z=!1,0});var pe=function(q,ee,be,xe){be=be||[],ee=ee||ce;var De=ee;if(ee.nodeType!==1&&ee.nodeType!==9)return[];if(!q||typeof q!="string")return be;var Ae,Ve,Je,Ze,mt,Ft,re,ke,Ke=!0,Be=pe.isXML(ee),rt=[],Dt=q;do if(y.exec(""),Ae=y.exec(Dt),Ae&&(Dt=Ae[3],rt.push(Ae[1]),Ae[2])){Ze=Ae[3];break}while(Ae);if(rt.length>1&&lt.exec(q))if(rt.length===2&&Ce.relative[rt[0]])Ve=bt(rt[0]+rt[1],ee,xe);else for(Ve=Ce.relative[rt[0]]?[ee]:pe(rt.shift(),ee);rt.length;)q=rt.shift(),Ce.relative[q]&&(q+=rt.shift()),Ve=bt(q,Ve,xe);else if(!xe&&rt.length>1&&ee.nodeType===9&&!Be&&Ce.match.ID.test(rt[0])&&!Ce.match.ID.test(rt[rt.length-1])&&(mt=pe.find(rt.shift(),ee,Be),ee=mt.expr?pe.filter(mt.expr,mt.set)[0]:mt.set[0]),ee)for(mt=xe?{expr:rt.pop(),set:ht(xe)}:pe.find(rt.pop(),rt.length===1&&(rt[0]==="~"||rt[0]==="+")&&ee.parentNode?ee.parentNode:ee,Be),Ve=mt.expr?pe.filter(mt.expr,mt.set):mt.set,rt.length>0?Je=ht(Ve):Ke=!1;rt.length;)Ft=rt.pop(),re=Ft,Ce.relative[Ft]?re=rt.pop():Ft="",re==null&&(re=ee),Ce.relative[Ft](Je,re,Be);else Je=rt=[];if(Je||(Je=Ve),Je||pe.error(Ft||q),z.call(Je)==="[object Array]")if(!Ke)be.push.apply(be,Je);else if(ee&&ee.nodeType===1)for(ke=0;Je[ke]!=null;ke++)Je[ke]&&(Je[ke]===!0||Je[ke].nodeType===1&&pe.contains(ee,Je[ke]))&&be.push(Ve[ke]);else for(ke=0;Je[ke]!=null;ke++)Je[ke]&&Je[ke].nodeType===1&&be.push(Ve[ke]);else ht(Je,be);return Ze&&(pe(Ze,De,be,xe),pe.uniqueSort(be)),be};pe.uniqueSort=function(q){if(Xt&&(M=Z,q.sort(Xt),M))for(var ee=1;ee<q.length;ee++)q[ee]===q[ee-1]&&q.splice(ee--,1);return q},pe.matches=function(q,ee){return pe(q,null,null,ee)},pe.matchesSelector=function(q,ee){return pe(ee,null,null,[q]).length>0},pe.find=function(q,ee,be){var xe,De,Ae,Ve,Je,Ze;if(!q)return[];for(De=0,Ae=Ce.order.length;De<Ae;De++)if(Je=Ce.order[De],(Ve=Ce.leftMatch[Je].exec(q))&&(Ze=Ve[1],Ve.splice(1,1),Ze.substr(Ze.length-1)!=="\\"&&(Ve[1]=(Ve[1]||"").replace(fe,""),xe=Ce.find[Je](Ve,ee,be),xe!=null))){q=q.replace(Ce.match[Je],"");break}return xe||(xe=typeof ee.getElementsByTagName!="undefined"?ee.getElementsByTagName("*"):[]),{set:xe,expr:q}},pe.filter=function(q,ee,be,xe){for(var De,Ae,Ve,Je,Ze,mt,Ft,re,ke,Ke=q,Be=[],rt=ee,Dt=ee&&ee[0]&&pe.isXML(ee[0]);q&&ee.length;){for(Ve in Ce.filter)if((De=Ce.leftMatch[Ve].exec(q))!=null&&De[2]){if(mt=Ce.filter[Ve],Ft=De[1],Ae=!1,De.splice(1,1),Ft.substr(Ft.length-1)==="\\")continue;if(rt===Be&&(Be=[]),Ce.preFilter[Ve]){if(De=Ce.preFilter[Ve](De,rt,be,Be,xe,Dt),!De)Ae=Je=!0;else if(De===!0)continue}if(De)for(re=0;(Ze=rt[re])!=null;re++)Ze&&(Je=mt(Ze,De,re,rt),ke=xe^Je,be&&Je!=null?ke?Ae=!0:rt[re]=!1:ke&&(Be.push(Ze),Ae=!0));if(Je!==n){if(be||(rt=Be),q=q.replace(Ce.match[Ve],""),!Ae)return[];break}}if(q===Ke)if(Ae==null)pe.error(q);else break;Ke=q}return rt},pe.error=function(q){throw new Error("Syntax error, unrecognized expression: "+q)};var ye=pe.getText=function(q){var ee,be,xe=q.nodeType,De="";if(xe){if(xe===1||xe===9||xe===11){if(typeof q.textContent=="string")return q.textContent;if(typeof q.innerText=="string")return q.innerText.replace(ae,"");for(q=q.firstChild;q;q=q.nextSibling)De+=ye(q)}else if(xe===3||xe===4)return q.nodeValue}else for(ee=0;be=q[ee];ee++)be.nodeType!==8&&(De+=ye(be));return De},Ce=pe.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{class:"className",for:"htmlFor"},attrHandle:{href:function(q){return q.getAttribute("href")},type:function(q){return q.getAttribute("type")}},relative:{"+":function(q,ee){var be=typeof ee=="string",xe=be&&!_e.test(ee),De=be&&!xe;xe&&(ee=ee.toLowerCase());for(var Ae=0,Ve=q.length,Je;Ae<Ve;Ae++)if(Je=q[Ae]){for(;(Je=Je.previousSibling)&&Je.nodeType!==1;);q[Ae]=De||Je&&Je.nodeName.toLowerCase()===ee?Je||!1:Je===ee}De&&pe.filter(ee,q,!0)},">":function(q,ee){var be,xe=typeof ee=="string",De=0,Ae=q.length;if(xe&&!_e.test(ee)){for(ee=ee.toLowerCase();De<Ae;De++)if(be=q[De],be){var Ve=be.parentNode;q[De]=Ve.nodeName.toLowerCase()===ee?Ve:!1}}else{for(;De<Ae;De++)be=q[De],be&&(q[De]=xe?be.parentNode:be.parentNode===ee);xe&&pe.filter(ee,q,!0)}},"":function(q,ee,be){var xe,De=P++,Ae=a;typeof ee=="string"&&!_e.test(ee)&&(ee=ee.toLowerCase(),xe=ee,Ae=u),Ae("parentNode",ee,De,q,xe,be)},"~":function(q,ee,be){var xe,De=P++,Ae=a;typeof ee=="string"&&!_e.test(ee)&&(ee=ee.toLowerCase(),xe=ee,Ae=u),Ae("previousSibling",ee,De,q,xe,be)}},find:{ID:function(q,ee,be){if(typeof ee.getElementById!="undefined"&&!be){var xe=ee.getElementById(q[1]);return xe&&xe.parentNode?[xe]:[]}},NAME:function(q,ee){if(typeof ee.getElementsByName!="undefined"){for(var be=[],xe=ee.getElementsByName(q[1]),De=0,Ae=xe.length;De<Ae;De++)xe[De].getAttribute("name")===q[1]&&be.push(xe[De]);return be.length===0?null:be}},TAG:function(q,ee){if(typeof ee.getElementsByTagName!="undefined")return ee.getElementsByTagName(q[1])}},preFilter:{CLASS:function(q,ee,be,xe,De,Ae){if(q=" "+q[1].replace(fe,"")+" ",Ae)return q;for(var Ve=0,Je;(Je=ee[Ve])!=null;Ve++)Je&&(De^(Je.className&&(" "+Je.className+" ").replace(/[\t\n\r]/g," ").indexOf(q)>=0)?be||xe.push(Je):be&&(ee[Ve]=!1));return!1},ID:function(q){return q[1].replace(fe,"")},TAG:function(q,ee){return q[1].replace(fe,"").toLowerCase()},CHILD:function(q){if(q[1]==="nth"){q[2]||pe.error(q[0]),q[2]=q[2].replace(/^\+|\s*/g,"");var ee=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(q[2]==="even"&&"2n"||q[2]==="odd"&&"2n+1"||!/\D/.test(q[2])&&"0n+"+q[2]||q[2]);q[2]=ee[1]+(ee[2]||1)-0,q[3]=ee[3]-0}else q[2]&&pe.error(q[0]);return q[0]=P++,q},ATTR:function(q,ee,be,xe,De,Ae){var Ve=q[1]=q[1].replace(fe,"");return!Ae&&Ce.attrMap[Ve]&&(q[1]=Ce.attrMap[Ve]),q[4]=(q[4]||q[5]||"").replace(fe,""),q[2]==="~="&&(q[4]=" "+q[4]+" "),q},PSEUDO:function(q,ee,be,xe,De){if(q[1]==="not")if((y.exec(q[3])||"").length>1||/^\w/.test(q[3]))q[3]=pe(q[3],null,null,ee);else{var Ae=pe.filter(q[3],ee,be,!0^De);return be||xe.push.apply(xe,Ae),!1}else if(Ce.match.POS.test(q[0])||Ce.match.CHILD.test(q[0]))return!0;return q},POS:function(q){return q.unshift(!0),q}},filters:{enabled:function(q){return q.disabled===!1&&q.type!=="hidden"},disabled:function(q){return q.disabled===!0},checked:function(q){return q.checked===!0},selected:function(q){return q.parentNode&&q.parentNode.selectedIndex,q.selected===!0},parent:function(q){return!!q.firstChild},empty:function(q){return!q.firstChild},has:function(q,ee,be){return!!pe(be[3],q).length},header:function(q){return/h\d/i.test(q.nodeName)},text:function(q){var ee=q.getAttribute("type"),be=q.type;return q.nodeName.toLowerCase()==="input"&&be==="text"&&(ee===be||ee===null)},radio:function(q){return q.nodeName.toLowerCase()==="input"&&q.type==="radio"},checkbox:function(q){return q.nodeName.toLowerCase()==="input"&&q.type==="checkbox"},file:function(q){return q.nodeName.toLowerCase()==="input"&&q.type==="file"},password:function(q){return q.nodeName.toLowerCase()==="input"&&q.type==="password"},submit:function(q){var ee=q.nodeName.toLowerCase();return(ee==="input"||ee==="button")&&q.type==="submit"},image:function(q){return q.nodeName.toLowerCase()==="input"&&q.type==="image"},reset:function(q){var ee=q.nodeName.toLowerCase();return(ee==="input"||ee==="button")&&q.type==="reset"},button:function(q){var ee=q.nodeName.toLowerCase();return ee==="input"&&q.type==="button"||ee==="button"},input:function(q){return/input|select|textarea|button/i.test(q.nodeName)},focus:function(q){return q===q.ownerDocument.activeElement}},setFilters:{first:function(q,ee){return ee===0},last:function(q,ee,be,xe){return ee===xe.length-1},even:function(q,ee){return ee%2===0},odd:function(q,ee){return ee%2===1},lt:function(q,ee,be){return ee<be[3]-0},gt:function(q,ee,be){return ee>be[3]-0},nth:function(q,ee,be){return be[3]-0===ee},eq:function(q,ee,be){return be[3]-0===ee}},filter:{PSEUDO:function(q,ee,be,xe){var De=ee[1],Ae=Ce.filters[De];if(Ae)return Ae(q,be,ee,xe);if(De==="contains")return(q.textContent||q.innerText||ye([q])||"").indexOf(ee[3])>=0;if(De==="not"){for(var Ve=ee[3],Je=0,Ze=Ve.length;Je<Ze;Je++)if(Ve[Je]===q)return!1;return!0}pe.error(De)},CHILD:function(q,ee){var be,xe,De,Ae,Ve,Je,Ze,mt=ee[1],Ft=q;switch(mt){case"only":case"first":for(;Ft=Ft.previousSibling;)if(Ft.nodeType===1)return!1;if(mt==="first")return!0;Ft=q;case"last":for(;Ft=Ft.nextSibling;)if(Ft.nodeType===1)return!1;return!0;case"nth":if(be=ee[2],xe=ee[3],be===1&&xe===0)return!0;if(De=ee[0],Ae=q.parentNode,Ae&&(Ae[E]!==De||!q.nodeIndex)){for(Je=0,Ft=Ae.firstChild;Ft;Ft=Ft.nextSibling)Ft.nodeType===1&&(Ft.nodeIndex=++Je);Ae[E]=De}return Ze=q.nodeIndex-xe,be===0?Ze===0:Ze%be===0&&Ze/be>=0}},ID:function(q,ee){return q.nodeType===1&&q.getAttribute("id")===ee},TAG:function(q,ee){return ee==="*"&&q.nodeType===1||!!q.nodeName&&q.nodeName.toLowerCase()===ee},CLASS:function(q,ee){return(" "+(q.className||q.getAttribute("class"))+" ").indexOf(ee)>-1},ATTR:function(q,ee){var be=ee[1],xe=pe.attr?pe.attr(q,be):Ce.attrHandle[be]?Ce.attrHandle[be](q):q[be]!=null?q[be]:q.getAttribute(be),De=xe+"",Ae=ee[2],Ve=ee[4];return xe==null?Ae==="!=":!Ae&&pe.attr?xe!=null:Ae==="="?De===Ve:Ae==="*="?De.indexOf(Ve)>=0:Ae==="~="?(" "+De+" ").indexOf(Ve)>=0:Ve?Ae==="!="?De!==Ve:Ae==="^="?De.indexOf(Ve)===0:Ae==="$="?De.substr(De.length-Ve.length)===Ve:Ae==="|="?De===Ve||De.substr(0,Ve.length+1)===Ve+"-":!1:De&&xe!==!1},POS:function(q,ee,be,xe){var De=ee[2],Ae=Ce.setFilters[De];if(Ae)return Ae(q,be,ee,xe)}}},lt=Ce.match.POS,$e=function(q,ee){return"\\"+(ee-0+1)};for(var ct in Ce.match)Ce.match[ct]=new RegExp(Ce.match[ct].source+/(?![^\[]*\])(?![^\(]*\))/.source),Ce.leftMatch[ct]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Ce.match[ct].source.replace(/\\(\d+)/g,$e));Ce.match.globalPOS=lt;var ht=function(q,ee){return q=Array.prototype.slice.call(q,0),ee?(ee.push.apply(ee,q),ee):q};try{Array.prototype.slice.call(ce.documentElement.childNodes,0)[0].nodeType}catch(q){ht=function(ee,be){var xe=0,De=be||[];if(z.call(ee)==="[object Array]")Array.prototype.push.apply(De,ee);else if(typeof ee.length=="number")for(var Ae=ee.length;xe<Ae;xe++)De.push(ee[xe]);else for(;ee[xe];xe++)De.push(ee[xe]);return De}}var Xt,Yt;ce.documentElement.compareDocumentPosition?Xt=function(q,ee){return q===ee?(M=!0,0):!q.compareDocumentPosition||!ee.compareDocumentPosition?q.compareDocumentPosition?-1:1:q.compareDocumentPosition(ee)&4?-1:1}:(Xt=function(q,ee){if(q===ee)return M=!0,0;if(q.sourceIndex&&ee.sourceIndex)return q.sourceIndex-ee.sourceIndex;var be,xe,De=[],Ae=[],Ve=q.parentNode,Je=ee.parentNode,Ze=Ve;if(Ve===Je)return Yt(q,ee);if(!Ve)return-1;if(!Je)return 1;for(;Ze;)De.unshift(Ze),Ze=Ze.parentNode;for(Ze=Je;Ze;)Ae.unshift(Ze),Ze=Ze.parentNode;be=De.length,xe=Ae.length;for(var mt=0;mt<be&&mt<xe;mt++)if(De[mt]!==Ae[mt])return Yt(De[mt],Ae[mt]);return mt===be?Yt(q,Ae[mt],-1):Yt(De[mt],ee,1)},Yt=function(q,ee,be){if(q===ee)return be;for(var xe=q.nextSibling;xe;){if(xe===ee)return-1;xe=xe.nextSibling}return 1}),(function(){var q=ce.createElement("div"),ee="script"+new Date().getTime(),be=ce.documentElement;q.innerHTML="<a name='"+ee+"'/>",be.insertBefore(q,be.firstChild),ce.getElementById(ee)&&(Ce.find.ID=function(xe,De,Ae){if(typeof De.getElementById!="undefined"&&!Ae){var Ve=De.getElementById(xe[1]);return Ve?Ve.id===xe[1]||typeof Ve.getAttributeNode!="undefined"&&Ve.getAttributeNode("id").nodeValue===xe[1]?[Ve]:n:[]}},Ce.filter.ID=function(xe,De){var Ae=typeof xe.getAttributeNode!="undefined"&&xe.getAttributeNode("id");return xe.nodeType===1&&Ae&&Ae.nodeValue===De}),be.removeChild(q),be=q=null})(),(function(){var q=ce.createElement("div");q.appendChild(ce.createComment("")),q.getElementsByTagName("*").length>0&&(Ce.find.TAG=function(ee,be){var xe=be.getElementsByTagName(ee[1]);if(ee[1]==="*"){for(var De=[],Ae=0;xe[Ae];Ae++)xe[Ae].nodeType===1&&De.push(xe[Ae]);xe=De}return xe}),q.innerHTML="<a href='#'></a>",q.firstChild&&typeof q.firstChild.getAttribute!="undefined"&&q.firstChild.getAttribute("href")!=="#"&&(Ce.attrHandle.href=function(ee){return ee.getAttribute("href",2)}),q=null})(),ce.querySelectorAll&&(function(){var q=pe,ee=ce.createElement("div"),be="__sizzle__";if(ee.innerHTML="<p class='TEST'></p>",!ee.querySelectorAll||ee.querySelectorAll(".TEST").length!==0){pe=function(De,Ae,Ve,Je){if(Ae=Ae||ce,!Je&&!pe.isXML(Ae)){var Ze=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(De);if(Ze&&(Ae.nodeType===1||Ae.nodeType===9)){if(Ze[1])return ht(Ae.getElementsByTagName(De),Ve);if(Ze[2]&&Ce.find.CLASS&&Ae.getElementsByClassName)return ht(Ae.getElementsByClassName(Ze[2]),Ve)}if(Ae.nodeType===9){if(De==="body"&&Ae.body)return ht([Ae.body],Ve);if(Ze&&Ze[3]){var mt=Ae.getElementById(Ze[3]);if(!mt||!mt.parentNode)return ht([],Ve);if(mt.id===Ze[3])return ht([mt],Ve)}try{return ht(Ae.querySelectorAll(De),Ve)}catch(rt){}}else if(Ae.nodeType===1&&Ae.nodeName.toLowerCase()!=="object"){var Ft=Ae,re=Ae.getAttribute("id"),ke=re||be,Ke=Ae.parentNode,Be=/^\s*[+~]/.test(De);re?ke=ke.replace(/'/g,"\\$&"):Ae.setAttribute("id",ke),Be&&Ke&&(Ae=Ae.parentNode);try{if(!Be||Ke)return ht(Ae.querySelectorAll("[id='"+ke+"'] "+De),Ve)}catch(rt){}finally{re||Ft.removeAttribute("id")}}}return q(De,Ae,Ve,Je)};for(var xe in q)pe[xe]=q[xe];ee=null}})(),(function(){var q=ce.documentElement,ee=q.matchesSelector||q.mozMatchesSelector||q.webkitMatchesSelector||q.msMatchesSelector;if(ee){var be=!ee.call(ce.createElement("div"),"div"),xe=!1;try{ee.call(ce.documentElement,"[test!='']:sizzle")}catch(De){xe=!0}pe.matchesSelector=function(De,Ae){if(Ae=Ae.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!pe.isXML(De))try{if(xe||!Ce.match.PSEUDO.test(Ae)&&!/!=/.test(Ae)){var Ve=ee.call(De,Ae);if(Ve||!be||De.document&&De.document.nodeType!==11)return Ve}}catch(Je){}return pe(Ae,null,null,[De]).length>0}}})(),(function(){var q=ce.createElement("div");if(q.innerHTML="<div class='test e'></div><div class='test'></div>",q.getElementsByClassName&&q.getElementsByClassName("e").length!==0){if(q.lastChild.className="e",q.getElementsByClassName("e").length===1)return;Ce.order.splice(1,0,"CLASS"),Ce.find.CLASS=function(ee,be,xe){if(typeof be.getElementsByClassName!="undefined"&&!xe)return be.getElementsByClassName(ee[1])},q=null}})(),ce.documentElement.contains?pe.contains=function(q,ee){return q!==ee&&(q.contains?q.contains(ee):!0)}:ce.documentElement.compareDocumentPosition?pe.contains=function(q,ee){return!!(q.compareDocumentPosition(ee)&16)}:pe.contains=function(){return!1},pe.isXML=function(q){var ee=(q?q.ownerDocument||q:0).documentElement;return ee?ee.nodeName!=="HTML":!1};var bt=function(q,ee,be){for(var xe,De=[],Ae="",Ve=ee.nodeType?[ee]:ee;xe=Ce.match.PSEUDO.exec(q);)Ae+=xe[0],q=q.replace(Ce.match.PSEUDO,"");q=Ce.relative[q]?q+"*":q;for(var Je=0,Ze=Ve.length;Je<Ze;Je++)pe(q,Ve[Je],De,be);return pe.filter(Ae,De)};pe.attr=f.attr,pe.selectors.attrMap={},f.find=pe,f.expr=pe.selectors,f.expr[":"]=f.expr.filters,f.unique=pe.uniqueSort,f.text=pe.getText,f.isXMLDoc=pe.isXML,f.contains=pe.contains})();var Mt=/Until$/,ue=/^(?:parents|prevUntil|prevAll)/,se=/,/,Ne=/^.[^:#\[\.,]*$/,Xe=Array.prototype.slice,it=f.expr.match.globalPOS,vt={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var u=this,y,E;if(typeof a!="string")return f(a).filter(function(){for(y=0,E=u.length;y<E;y++)if(f.contains(u[y],this))return!0});var P=this.pushStack("","find",a),z,M,Z;for(y=0,E=this.length;y<E;y++)if(z=P.length,f.find(a,this[y],P),y>0){for(M=z;M<P.length;M++)for(Z=0;Z<z;Z++)if(P[Z]===P[M]){P.splice(M--,1);break}}return P},has:function(a){var u=f(a);return this.filter(function(){for(var y=0,E=u.length;y<E;y++)if(f.contains(this,u[y]))return!0})},not:function(a){return this.pushStack(ie(this,a,!1),"not",a)},filter:function(a){return this.pushStack(ie(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?it.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,u){var y=[],E,P,z=this[0];if(f.isArray(a)){for(var M=1;z&&z.ownerDocument&&z!==u;){for(E=0;E<a.length;E++)f(z).is(a[E])&&y.push({selector:a[E],elem:z,level:M});z=z.parentNode,M++}return y}var Z=it.test(a)||typeof a!="string"?f(a,u||this.context):0;for(E=0,P=this.length;E<P;E++)for(z=this[E];z;){if(Z?Z.index(z)>-1:f.find.matchesSelector(z,a)){y.push(z);break}if(z=z.parentNode,!z||!z.ownerDocument||z===u||z.nodeType===11)break}return y=y.length>1?f.unique(y):y,this.pushStack(y,"closest",a)},index:function(a){return a?typeof a=="string"?f.inArray(this[0],f(a)):f.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,u){var y=typeof a=="string"?f(a,u):f.makeArray(a&&a.nodeType?[a]:a),E=f.merge(this.get(),y);return this.pushStack(R(y[0])||R(E[0])?E:f.unique(E))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var u=a.parentNode;return u&&u.nodeType!==11?u:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,u,y){return f.dir(a,"parentNode",y)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,u,y){return f.dir(a,"nextSibling",y)},prevUntil:function(a,u,y){return f.dir(a,"previousSibling",y)},siblings:function(a){return f.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,u){f.fn[a]=function(y,E){var P=f.map(this,u,y);return Mt.test(a)||(E=y),E&&typeof E=="string"&&(P=f.filter(E,P)),P=this.length>1&&!vt[a]?f.unique(P):P,(this.length>1||se.test(E))&&ue.test(a)&&(P=P.reverse()),this.pushStack(P,a,Xe.call(arguments).join(","))}}),f.extend({filter:function(a,u,y){return y&&(a=":not("+a+")"),u.length===1?f.find.matchesSelector(u[0],a)?[u[0]]:[]:f.find.matches(a,u)},dir:function(a,u,y){for(var E=[],P=a[u];P&&P.nodeType!==9&&(y===n||P.nodeType!==1||!f(P).is(y));)P.nodeType===1&&E.push(P),P=P[u];return E},nth:function(a,u,y,E){u=u||1;for(var P=0;a&&!(a.nodeType===1&&++P===u);a=a[y]);return a},sibling:function(a,u){for(var y=[];a;a=a.nextSibling)a.nodeType===1&&a!==u&&y.push(a);return y}});var at="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",_t=/ jQuery\d+="(?:\d+|null)"/g,kt=/^\s+/,Nt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Gt=/<([\w:]+)/,Bt=/<tbody/i,Jt=/<|&#?\w+;/,un=/<(?:script|style)/i,mn=/<(?:script|object|embed|option|style)/i,jt=new RegExp("<(?:"+at+")[\\s/>]","i"),vn=/checked\s*(?:[^=]|=\s*.checked.)/i,dn=/\/(java|ecma)script/i,Bn=/^\s*<!(?:\[CDATA\[|\-\-)/,tn={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},wn=V(ce);tn.optgroup=tn.option,tn.tbody=tn.tfoot=tn.colgroup=tn.caption=tn.thead,tn.th=tn.td,f.support.htmlSerialize||(tn._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){return f.access(this,function(u){return u===n?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ce).createTextNode(u))},null,a,arguments.length)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(y){f(this).wrapAll(a.call(this,y))});if(this[0]){var u=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&u.insertBefore(this[0]),u.map(function(){for(var y=this;y.firstChild&&y.firstChild.nodeType===1;)y=y.firstChild;return y}).append(this)}return this},wrapInner:function(a){return f.isFunction(a)?this.each(function(u){f(this).wrapInner(a.call(this,u))}):this.each(function(){var u=f(this),y=u.contents();y.length?y.wrapAll(a):u.append(a)})},wrap:function(a){var u=f.isFunction(a);return this.each(function(y){f(this).wrapAll(u?a.call(this,y):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(u){this.parentNode.insertBefore(u,this)});if(arguments.length){var a=f.clean(arguments);return a.push.apply(a,this.toArray()),this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(u){this.parentNode.insertBefore(u,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);return a.push.apply(a,f.clean(arguments)),a}},remove:function(a,u){for(var y=0,E;(E=this[y])!=null;y++)(!a||f.filter(a,[E]).length)&&(!u&&E.nodeType===1&&(f.cleanData(E.getElementsByTagName("*")),f.cleanData([E])),E.parentNode&&E.parentNode.removeChild(E));return this},empty:function(){for(var a=0,u;(u=this[a])!=null;a++)for(u.nodeType===1&&f.cleanData(u.getElementsByTagName("*"));u.firstChild;)u.removeChild(u.firstChild);return this},clone:function(a,u){return a=a==null?!1:a,u=u==null?a:u,this.map(function(){return f.clone(this,a,u)})},html:function(a){return f.access(this,function(u){var y=this[0]||{},E=0,P=this.length;if(u===n)return y.nodeType===1?y.innerHTML.replace(_t,""):null;if(typeof u=="string"&&!un.test(u)&&(f.support.leadingWhitespace||!kt.test(u))&&!tn[(Gt.exec(u)||["",""])[1].toLowerCase()]){u=u.replace(Nt,"<$1></$2>");try{for(;E<P;E++)y=this[E]||{},y.nodeType===1&&(f.cleanData(y.getElementsByTagName("*")),y.innerHTML=u);y=0}catch(z){}}y&&this.empty().append(u)},null,a,arguments.length)},replaceWith:function(a){return this[0]&&this[0].parentNode?f.isFunction(a)?this.each(function(u){var y=f(this),E=y.html();y.replaceWith(a.call(this,u,E))}):(typeof a!="string"&&(a=f(a).detach()),this.each(function(){var u=this.nextSibling,y=this.parentNode;f(this).remove(),u?f(u).before(a):f(y).append(a)})):this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,u,y){var E,P,z,M,Z=a[0],fe=[];if(!f.support.checkClone&&arguments.length===3&&typeof Z=="string"&&vn.test(Z))return this.each(function(){f(this).domManip(a,u,y,!0)});if(f.isFunction(Z))return this.each(function(ye){var Ce=f(this);a[0]=Z.call(this,ye,u?Ce.html():n),Ce.domManip(a,u,y)});if(this[0]){if(M=Z&&Z.parentNode,f.support.parentNode&&M&&M.nodeType===11&&M.childNodes.length===this.length?E={fragment:M}:E=f.buildFragment(a,this,fe),z=E.fragment,z.childNodes.length===1?P=z=z.firstChild:P=z.firstChild,P){u=u&&f.nodeName(P,"tr");for(var ae=0,_e=this.length,pe=_e-1;ae<_e;ae++)y.call(u?X(this[ae],P):this[ae],E.cacheable||_e>1&&ae<pe?f.clone(z,!0,!0):z)}fe.length&&f.each(fe,function(ye,Ce){Ce.src?f.ajax({type:"GET",global:!1,url:Ce.src,async:!1,dataType:"script"}):f.globalEval((Ce.text||Ce.textContent||Ce.innerHTML||"").replace(Bn,"/*$0*/")),Ce.parentNode&&Ce.parentNode.removeChild(Ce)})}return this}}),f.buildFragment=function(a,u,y){var E,P,z,M,Z=a[0];return u&&u[0]&&(M=u[0].ownerDocument||u[0]),M.createDocumentFragment||(M=ce),a.length===1&&typeof Z=="string"&&Z.length<512&&M===ce&&Z.charAt(0)==="<"&&!mn.test(Z)&&(f.support.checkClone||!vn.test(Z))&&(f.support.html5Clone||!jt.test(Z))&&(P=!0,z=f.fragments[Z],z&&z!==1&&(E=z)),E||(E=M.createDocumentFragment(),f.clean(a,M,E,y)),P&&(f.fragments[Z]=z?E:1),{fragment:E,cacheable:P}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,u){f.fn[a]=function(y){var E=[],P=f(y),z=this.length===1&&this[0].parentNode;if(z&&z.nodeType===11&&z.childNodes.length===1&&P.length===1)return P[u](this[0]),this;for(var M=0,Z=P.length;M<Z;M++){var fe=(M>0?this.clone(!0):this).get();f(P[M])[u](fe),E=E.concat(fe)}return this.pushStack(E,a,P.selector)}}),f.extend({clone:function(a,u,y){var E,P,z,M=f.support.html5Clone||f.isXMLDoc(a)||!jt.test("<"+a.nodeName+">")?a.cloneNode(!0):S(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a))for(K(a,M),E=G(a),P=G(M),z=0;E[z];++z)P[z]&&K(E[z],P[z]);if(u&&(te(a,M),y))for(E=G(a),P=G(M),z=0;E[z];++z)te(E[z],P[z]);return E=P=null,M},clean:function(a,u,y,E){var P,z,M,Z=[];u=u||ce,typeof u.createElement=="undefined"&&(u=u.ownerDocument||u[0]&&u[0].ownerDocument||ce);for(var fe=0,ae;(ae=a[fe])!=null;fe++)if(typeof ae=="number"&&(ae+=""),!!ae){if(typeof ae=="string")if(!Jt.test(ae))ae=u.createTextNode(ae);else{ae=ae.replace(Nt,"<$1></$2>");var _e=(Gt.exec(ae)||["",""])[1].toLowerCase(),pe=tn[_e]||tn._default,ye=pe[0],Ce=u.createElement("div"),lt=wn.childNodes,$e;for(u===ce?wn.appendChild(Ce):V(u).appendChild(Ce),Ce.innerHTML=pe[1]+ae+pe[2];ye--;)Ce=Ce.lastChild;if(!f.support.tbody){var ct=Bt.test(ae),ht=_e==="table"&&!ct?Ce.firstChild&&Ce.firstChild.childNodes:pe[1]==="<table>"&&!ct?Ce.childNodes:[];for(M=ht.length-1;M>=0;--M)f.nodeName(ht[M],"tbody")&&!ht[M].childNodes.length&&ht[M].parentNode.removeChild(ht[M])}!f.support.leadingWhitespace&&kt.test(ae)&&Ce.insertBefore(u.createTextNode(kt.exec(ae)[0]),Ce.firstChild),ae=Ce.childNodes,Ce&&(Ce.parentNode.removeChild(Ce),lt.length>0&&($e=lt[lt.length-1],$e&&$e.parentNode&&$e.parentNode.removeChild($e)))}var Xt;if(!f.support.appendChecked)if(ae[0]&&typeof(Xt=ae.length)=="number")for(M=0;M<Xt;M++)k(ae[M]);else k(ae);ae.nodeType?Z.push(ae):Z=f.merge(Z,ae)}if(y)for(P=function(bt){return!bt.type||dn.test(bt.type)},fe=0;Z[fe];fe++)if(z=Z[fe],E&&f.nodeName(z,"script")&&(!z.type||dn.test(z.type)))E.push(z.parentNode?z.parentNode.removeChild(z):z);else{if(z.nodeType===1){var Yt=f.grep(z.getElementsByTagName("script"),P);Z.splice.apply(Z,[fe+1,0].concat(Yt))}y.appendChild(z)}return Z},cleanData:function(a){for(var u,y,E=f.cache,P=f.event.special,z=f.support.deleteExpando,M=0,Z;(Z=a[M])!=null;M++)if(!(Z.nodeName&&f.noData[Z.nodeName.toLowerCase()])&&(y=Z[f.expando],y)){if(u=E[y],u&&u.events){for(var fe in u.events)P[fe]?f.event.remove(Z,fe):f.removeEvent(Z,fe,u.handle);u.handle&&(u.handle.elem=null)}z?delete Z[f.expando]:Z.removeAttribute&&Z.removeAttribute(f.expando),delete E[y]}}});var Kn=/alpha\([^)]*\)/i,Ii=/opacity=([^)]*)/,Pi=/([A-Z]|^ms)/g,On=/^[\-+]?(?:\d*\.)?\d+$/i,fn=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,li=/^([\-+])=([\-+.\de]+)/,Di=/^margin/,Oi={position:"absolute",visibility:"hidden",display:"block"},_n=["Top","Right","Bottom","Left"],Sn,Ln,Jn;f.fn.css=function(a,u){return f.access(this,function(y,E,P){return P!==n?f.style(y,E,P):f.css(y,E)},a,u,arguments.length>1)},f.extend({cssHooks:{opacity:{get:function(a,u){if(u){var y=Sn(a,"opacity");return y===""?"1":y}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,u,y,E){if(a&&a.nodeType!==3&&a.nodeType!==8&&a.style){var P,z,M=f.camelCase(u),Z=a.style,fe=f.cssHooks[M];if(u=f.cssProps[M]||M,y===n)return fe&&"get"in fe&&(P=fe.get(a,!1,E))!==n?P:Z[u];if(z=typeof y,z==="string"&&(P=li.exec(y))&&(y=+(P[1]+1)*+P[2]+parseFloat(f.css(a,u)),z="number"),y==null||z==="number"&&isNaN(y))return;if(z==="number"&&!f.cssNumber[M]&&(y+="px"),!fe||!("set"in fe)||(y=fe.set(a,y))!==n)try{Z[u]=y}catch(ae){}}},css:function(a,u,y){var E,P;if(u=f.camelCase(u),P=f.cssHooks[u],u=f.cssProps[u]||u,u==="cssFloat"&&(u="float"),P&&"get"in P&&(E=P.get(a,!0,y))!==n)return E;if(Sn)return Sn(a,u)},swap:function(a,u,y){var E={},P,z;for(z in u)E[z]=a.style[z],a.style[z]=u[z];P=y.call(a);for(z in u)a.style[z]=E[z];return P}}),f.curCSS=f.css,ce.defaultView&&ce.defaultView.getComputedStyle&&(Ln=function(a,u){var y,E,P,z,M=a.style;return u=u.replace(Pi,"-$1").toLowerCase(),(E=a.ownerDocument.defaultView)&&(P=E.getComputedStyle(a,null))&&(y=P.getPropertyValue(u),y===""&&!f.contains(a.ownerDocument.documentElement,a)&&(y=f.style(a,u))),!f.support.pixelMargin&&P&&Di.test(u)&&fn.test(y)&&(z=M.width,M.width=y,y=P.width,M.width=z),y}),ce.documentElement.currentStyle&&(Jn=function(a,u){var y,E,P,z=a.currentStyle&&a.currentStyle[u],M=a.style;return z==null&&M&&(P=M[u])&&(z=P),fn.test(z)&&(y=M.left,E=a.runtimeStyle&&a.runtimeStyle.left,E&&(a.runtimeStyle.left=a.currentStyle.left),M.left=u==="fontSize"?"1em":z,z=M.pixelLeft+"px",M.left=y,E&&(a.runtimeStyle.left=E)),z===""?"auto":z}),Sn=Ln||Jn,f.each(["height","width"],function(a,u){f.cssHooks[u]={get:function(y,E,P){if(E)return y.offsetWidth!==0?h(y,u,P):f.swap(y,Oi,function(){return h(y,u,P)})},set:function(y,E){return On.test(E)?E+"px":E}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,u){return Ii.test((u&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":u?"1":""},set:function(a,u){var y=a.style,E=a.currentStyle,P=f.isNumeric(u)?"alpha(opacity="+u*100+")":"",z=E&&E.filter||y.filter||"";y.zoom=1,!(u>=1&&f.trim(z.replace(Kn,""))===""&&(y.removeAttribute("filter"),E&&!E.filter))&&(y.filter=Kn.test(z)?z.replace(Kn,P):z+" "+P)}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,u){return f.swap(a,{display:"inline-block"},function(){return u?Sn(a,"margin-right"):a.style.marginRight})}})}),f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var u=a.offsetWidth,y=a.offsetHeight;return u===0&&y===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)}),f.each({margin:"",padding:"",border:"Width"},function(a,u){f.cssHooks[a+u]={expand:function(y){var E,P=typeof y=="string"?y.split(" "):[y],z={};for(E=0;E<4;E++)z[a+_n[E]+u]=P[E]||P[E-2]||P[0];return z}}});var Li=/%20/g,ci=/\[\]$/,Gn=/\r?\n/g,ui=/#.*$/,Nn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Fn=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,di=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,fi=/^(?:GET|HEAD)$/,pi=/^\/\//,$n=/\?/,Ni=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Yn=/^(?:select|textarea)/i,hi=/\s+/,Fi=/([?&])_=[^&]*/,gi=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,ei=f.fn.load,ti={},mi={},En,xn,vi="*/*";try{En=me.href}catch(a){En=ce.createElement("a"),En.href="",En=En.href}xn=gi.exec(En.toLowerCase())||[],f.fn.extend({load:function(a,u,y){if(typeof a!="string"&&ei)return ei.apply(this,arguments);if(!this.length)return this;var E=a.indexOf(" ");if(E>=0){var P=a.slice(E,a.length);a=a.slice(0,E)}var z="GET";u&&(f.isFunction(u)?(y=u,u=n):typeof u=="object"&&(u=f.param(u,f.ajaxSettings.traditional),z="POST"));var M=this;return f.ajax({url:a,type:z,dataType:"html",data:u,complete:function(Z,fe,ae){ae=Z.responseText,Z.isResolved()&&(Z.done(function(_e){ae=_e}),M.html(P?f("<div>").append(ae.replace(Ni,"")).find(P):ae)),y&&M.each(y,[ae,fe,Z])}}),this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Yn.test(this.nodeName)||Fn.test(this.type))}).map(function(a,u){var y=f(this).val();return y==null?null:f.isArray(y)?f.map(y,function(E,P){return{name:u.name,value:E.replace(Gn,`\r
`)}}):{name:u.name,value:y.replace(Gn,`\r
`)}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,u){f.fn[u]=function(y){return this.on(u,y)}}),f.each(["get","post"],function(a,u){f[u]=function(y,E,P,z){return f.isFunction(E)&&(z=z||P,P=E,E=n),f.ajax({type:u,url:y,data:E,success:P,dataType:z})}}),f.extend({getScript:function(a,u){return f.get(a,n,u,"script")},getJSON:function(a,u,y){return f.get(a,u,y,"json")},ajaxSetup:function(a,u){return u?_(a,f.ajaxSettings):(u=a,a=f.ajaxSettings),_(a,u),a},ajaxSettings:{url:En,isLocal:di.test(xn[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":vi},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:v(ti),ajaxTransport:v(mi),ajax:function(a,u){function y(be,xe,De,Ae){if(ht!==2){ht=2,$e&&clearTimeout($e),lt=n,ye=Ae||"",bt.readyState=be>0?4:0;var Ve,Je,Ze,mt=xe,Ft=De?U(E,bt,De):n,re,ke;if(be>=200&&be<300||be===304)if(E.ifModified&&((re=bt.getResponseHeader("Last-Modified"))&&(f.lastModified[ae]=re),(ke=bt.getResponseHeader("Etag"))&&(f.etag[ae]=ke)),be===304)mt="notmodified",Ve=!0;else try{Je=D(E,Ft),mt="success",Ve=!0}catch(Ke){mt="parsererror",Ze=Ke}else Ze=mt,(!mt||be)&&(mt="error",be<0&&(be=0));bt.status=be,bt.statusText=""+(xe||mt),Ve?M.resolveWith(P,[Je,mt,bt]):M.rejectWith(P,[bt,mt,Ze]),bt.statusCode(fe),fe=n,Xt&&z.trigger("ajax"+(Ve?"Success":"Error"),[bt,E,Ve?Je:Ze]),Z.fireWith(P,[bt,mt]),Xt&&(z.trigger("ajaxComplete",[bt,E]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(u=a,a=n),u=u||{};var E=f.ajaxSetup({},u),P=E.context||E,z=P!==E&&(P.nodeType||P instanceof f)?f(P):f.event,M=f.Deferred(),Z=f.Callbacks("once memory"),fe=E.statusCode||{},ae,_e={},pe={},ye,Ce,lt,$e,ct,ht=0,Xt,Yt,bt={readyState:0,setRequestHeader:function(be,xe){if(!ht){var De=be.toLowerCase();be=pe[De]=pe[De]||be,_e[be]=xe}return this},getAllResponseHeaders:function(){return ht===2?ye:null},getResponseHeader:function(be){var xe;if(ht===2){if(!Ce)for(Ce={};xe=Nn.exec(ye);)Ce[xe[1].toLowerCase()]=xe[2];xe=Ce[be.toLowerCase()]}return xe===n?null:xe},overrideMimeType:function(be){return ht||(E.mimeType=be),this},abort:function(be){return be=be||"abort",lt&&lt.abort(be),y(0,be),this}};if(M.promise(bt),bt.success=bt.done,bt.error=bt.fail,bt.complete=Z.add,bt.statusCode=function(be){if(be){var xe;if(ht<2)for(xe in be)fe[xe]=[fe[xe],be[xe]];else xe=be[bt.status],bt.then(xe,xe)}return this},E.url=((a||E.url)+"").replace(ui,"").replace(pi,xn[1]+"//"),E.dataTypes=f.trim(E.dataType||"*").toLowerCase().split(hi),E.crossDomain==null&&(ct=gi.exec(E.url.toLowerCase()),E.crossDomain=!(!ct||ct[1]==xn[1]&&ct[2]==xn[2]&&(ct[3]||(ct[1]==="http:"?80:443))==(xn[3]||(xn[1]==="http:"?80:443)))),E.data&&E.processData&&typeof E.data!="string"&&(E.data=f.param(E.data,E.traditional)),O(ti,E,u,bt),ht===2)return!1;if(Xt=E.global,E.type=E.type.toUpperCase(),E.hasContent=!fi.test(E.type),Xt&&f.active++===0&&f.event.trigger("ajaxStart"),!E.hasContent&&(E.data&&(E.url+=($n.test(E.url)?"&":"?")+E.data,delete E.data),ae=E.url,E.cache===!1)){var q=f.now(),ee=E.url.replace(Fi,"$1_="+q);E.url=ee+(ee===E.url?($n.test(E.url)?"&":"?")+"_="+q:"")}(E.data&&E.hasContent&&E.contentType!==!1||u.contentType)&&bt.setRequestHeader("Content-Type",E.contentType),E.ifModified&&(ae=ae||E.url,f.lastModified[ae]&&bt.setRequestHeader("If-Modified-Since",f.lastModified[ae]),f.etag[ae]&&bt.setRequestHeader("If-None-Match",f.etag[ae])),bt.setRequestHeader("Accept",E.dataTypes[0]&&E.accepts[E.dataTypes[0]]?E.accepts[E.dataTypes[0]]+(E.dataTypes[0]!=="*"?", "+vi+"; q=0.01":""):E.accepts["*"]);for(Yt in E.headers)bt.setRequestHeader(Yt,E.headers[Yt]);if(E.beforeSend&&(E.beforeSend.call(P,bt,E)===!1||ht===2))return bt.abort(),!1;for(Yt in{success:1,error:1,complete:1})bt[Yt](E[Yt]);if(lt=O(mi,E,u,bt),!lt)y(-1,"No Transport");else{bt.readyState=1,Xt&&z.trigger("ajaxSend",[bt,E]),E.async&&E.timeout>0&&($e=setTimeout(function(){bt.abort("timeout")},E.timeout));try{ht=1,lt.send(_e,y)}catch(be){if(ht<2)y(-1,be);else throw be}}return bt},param:function(a,u){var y=[],E=function(z,M){M=f.isFunction(M)?M():M,y[y.length]=encodeURIComponent(z)+"="+encodeURIComponent(M)};if(u===n&&(u=f.ajaxSettings.traditional),f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){E(this.name,this.value)});else for(var P in a)F(P,a[P],u,E);return y.join("&").replace(Li,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var yi=f.now(),Mn=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+yi++}}),f.ajaxPrefilter("json jsonp",function(a,u,y){var E=typeof a.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(a.contentType);if(a.dataTypes[0]==="jsonp"||a.jsonp!==!1&&(Mn.test(a.url)||E&&Mn.test(a.data))){var P,z=a.jsonpCallback=f.isFunction(a.jsonpCallback)?a.jsonpCallback():a.jsonpCallback,M=e[z],Z=a.url,fe=a.data,ae="$1"+z+"$2";return a.jsonp!==!1&&(Z=Z.replace(Mn,ae),a.url===Z&&(E&&(fe=fe.replace(Mn,ae)),a.data===fe&&(Z+=(/\?/.test(Z)?"&":"?")+a.jsonp+"="+z))),a.url=Z,a.data=fe,e[z]=function(_e){P=[_e]},y.always(function(){e[z]=M,P&&f.isFunction(M)&&e[z](P[0])}),a.converters["script json"]=function(){return P||f.error(z+" was not called"),P[0]},a.dataTypes[0]="json","script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return f.globalEval(a),a}}}),f.ajaxPrefilter("script",function(a){a.cache===n&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var u,y=ce.head||ce.getElementsByTagName("head")[0]||ce.documentElement;return{send:function(E,P){u=ce.createElement("script"),u.async="async",a.scriptCharset&&(u.charset=a.scriptCharset),u.src=a.url,u.onload=u.onreadystatechange=function(z,M){(M||!u.readyState||/loaded|complete/.test(u.readyState))&&(u.onload=u.onreadystatechange=null,y&&u.parentNode&&y.removeChild(u),u=n,M||P(200,"success"))},y.insertBefore(u,y.firstChild)},abort:function(){u&&u.onload(0,1)}}}});var Xn=e.ActiveXObject?function(){for(var a in An)An[a](0,1)}:!1,on=0,An;f.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&A()||T()}:A,(function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})})(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(a){if(!a.crossDomain||f.support.cors){var u;return{send:function(y,E){var P=a.xhr(),z,M;if(a.username?P.open(a.type,a.url,a.async,a.username,a.password):P.open(a.type,a.url,a.async),a.xhrFields)for(M in a.xhrFields)P[M]=a.xhrFields[M];a.mimeType&&P.overrideMimeType&&P.overrideMimeType(a.mimeType),!a.crossDomain&&!y["X-Requested-With"]&&(y["X-Requested-With"]="XMLHttpRequest");try{for(M in y)P.setRequestHeader(M,y[M])}catch(Z){}P.send(a.hasContent&&a.data||null),u=function(Z,fe){var ae,_e,pe,ye,Ce;try{if(u&&(fe||P.readyState===4))if(u=n,z&&(P.onreadystatechange=f.noop,Xn&&delete An[z]),fe)P.readyState!==4&&P.abort();else{ae=P.status,pe=P.getAllResponseHeaders(),ye={},Ce=P.responseXML,Ce&&Ce.documentElement&&(ye.xml=Ce);try{ye.text=P.responseText}catch(lt){}try{_e=P.statusText}catch(lt){_e=""}!ae&&a.isLocal&&!a.crossDomain?ae=ye.text?200:404:ae===1223&&(ae=204)}}catch(lt){fe||E(-1,lt)}ye&&E(ae,_e,ye,pe)},!a.async||P.readyState===4?u():(z=++on,Xn&&(An||(An={},f(e).unload(Xn)),An[z]=u),P.onreadystatechange=u)},abort:function(){u&&u(0,1)}}}});var Hn={},hn,kn,bi=/^(?:toggle|show|hide)$/,Hi=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,Rn,Vn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],pn;f.fn.extend({show:function(a,u,y){var E,P;if(a||a===0)return this.animate(c("show",3),a,u,y);for(var z=0,M=this.length;z<M;z++)E=this[z],E.style&&(P=E.style.display,!f._data(E,"olddisplay")&&P==="none"&&(P=E.style.display=""),(P===""&&f.css(E,"display")==="none"||!f.contains(E.ownerDocument.documentElement,E))&&f._data(E,"olddisplay",l(E.nodeName)));for(z=0;z<M;z++)E=this[z],E.style&&(P=E.style.display,(P===""||P==="none")&&(E.style.display=f._data(E,"olddisplay")||""));return this},hide:function(a,u,y){if(a||a===0)return this.animate(c("hide",3),a,u,y);for(var E,P,z=0,M=this.length;z<M;z++)E=this[z],E.style&&(P=f.css(E,"display"),P!=="none"&&!f._data(E,"olddisplay")&&f._data(E,"olddisplay",P));for(z=0;z<M;z++)this[z].style&&(this[z].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,u,y){var E=typeof a=="boolean";return f.isFunction(a)&&f.isFunction(u)?this._toggle.apply(this,arguments):a==null||E?this.each(function(){var P=E?a:f(this).is(":hidden");f(this)[P?"show":"hide"]()}):this.animate(c("toggle",3),a,u,y),this},fadeTo:function(a,u,y,E){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:u},a,y,E)},animate:function(a,u,y,E){function P(){z.queue===!1&&f._mark(this);var M=f.extend({},z),Z=this.nodeType===1,fe=Z&&f(this).is(":hidden"),ae,_e,pe,ye,Ce,lt,$e,ct,ht,Xt,Yt;M.animatedProperties={};for(pe in a)if(ae=f.camelCase(pe),pe!==ae&&(a[ae]=a[pe],delete a[pe]),(Ce=f.cssHooks[ae])&&"expand"in Ce){lt=Ce.expand(a[ae]),delete a[ae];for(pe in lt)pe in a||(a[pe]=lt[pe])}for(ae in a){if(_e=a[ae],f.isArray(_e)?(M.animatedProperties[ae]=_e[1],_e=a[ae]=_e[0]):M.animatedProperties[ae]=M.specialEasing&&M.specialEasing[ae]||M.easing||"swing",_e==="hide"&&fe||_e==="show"&&!fe)return M.complete.call(this);Z&&(ae==="height"||ae==="width")&&(M.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||l(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}M.overflow!=null&&(this.style.overflow="hidden");for(pe in a)ye=new f.fx(this,M,pe),_e=a[pe],bi.test(_e)?(Yt=f._data(this,"toggle"+pe)||(_e==="toggle"?fe?"show":"hide":0),Yt?(f._data(this,"toggle"+pe,Yt==="show"?"hide":"show"),ye[Yt]()):ye[_e]()):($e=Hi.exec(_e),ct=ye.cur(),$e?(ht=parseFloat($e[2]),Xt=$e[3]||(f.cssNumber[pe]?"":"px"),Xt!=="px"&&(f.style(this,pe,(ht||1)+Xt),ct=(ht||1)/ye.cur()*ct,f.style(this,pe,ct+Xt)),$e[1]&&(ht=($e[1]==="-="?-1:1)*ht+ct),ye.custom(ct,ht,Xt)):ye.custom(ct,_e,""));return!0}var z=f.speed(u,y,E);return f.isEmptyObject(a)?this.each(z.complete,[!1]):(a=f.extend({},a),z.queue===!1?this.each(P):this.queue(z.queue,P))},stop:function(a,u,y){return typeof a!="string"&&(y=u,u=a,a=n),u&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){function E(fe,ae,_e){var pe=ae[_e];f.removeData(fe,_e,!0),pe.stop(y)}var P,z=!1,M=f.timers,Z=f._data(this);if(y||f._unmark(!0,this),a==null)for(P in Z)Z[P]&&Z[P].stop&&P.indexOf(".run")===P.length-4&&E(this,Z,P);else Z[P=a+".run"]&&Z[P].stop&&E(this,Z,P);for(P=M.length;P--;)M[P].elem===this&&(a==null||M[P].queue===a)&&(y?M[P](!0):M[P].saveState(),z=!0,M.splice(P,1));(!y||!z)&&f.dequeue(this,a)})}}),f.each({slideDown:c("show",1),slideUp:c("hide",1),slideToggle:c("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,u){f.fn[a]=function(y,E,P){return this.animate(u,y,E,P)}}),f.extend({speed:function(a,u,y){var E=a&&typeof a=="object"?f.extend({},a):{complete:y||!y&&u||f.isFunction(a)&&a,duration:a,easing:y&&u||u&&!f.isFunction(u)&&u};return E.duration=f.fx.off?0:typeof E.duration=="number"?E.duration:E.duration in f.fx.speeds?f.fx.speeds[E.duration]:f.fx.speeds._default,(E.queue==null||E.queue===!0)&&(E.queue="fx"),E.old=E.complete,E.complete=function(P){f.isFunction(E.old)&&E.old.call(this),E.queue?f.dequeue(this,E.queue):P!==!1&&f._unmark(this)},E},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+.5}},timers:[],fx:function(a,u,y){this.options=u,this.elem=a,this.prop=y,u.orig=u.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,u=f.css(this.elem,this.prop);return isNaN(a=parseFloat(u))?!u||u==="auto"?0:u:a},custom:function(a,u,y){function E(M){return P.step(M)}var P=this,z=f.fx;this.startTime=pn||p(),this.end=u,this.now=this.start=a,this.pos=this.state=0,this.unit=y||this.unit||(f.cssNumber[this.prop]?"":"px"),E.queue=this.options.queue,E.elem=this.elem,E.saveState=function(){f._data(P.elem,"fxshow"+P.prop)===n&&(P.options.hide?f._data(P.elem,"fxshow"+P.prop,P.start):P.options.show&&f._data(P.elem,"fxshow"+P.prop,P.end))},E()&&f.timers.push(E)&&!Rn&&(Rn=setInterval(z.tick,z.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==n?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var u,y,E,P=pn||p(),z=!0,M=this.elem,Z=this.options;if(a||P>=Z.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),Z.animatedProperties[this.prop]=!0;for(u in Z.animatedProperties)Z.animatedProperties[u]!==!0&&(z=!1);if(z){if(Z.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(fe,ae){M.style["overflow"+ae]=Z.overflow[fe]}),Z.hide&&f(M).hide(),Z.hide||Z.show)for(u in Z.animatedProperties)f.style(M,u,Z.orig[u]),f.removeData(M,"fxshow"+u,!0),f.removeData(M,"toggle"+u,!0);E=Z.complete,E&&(Z.complete=!1,E.call(M))}return!1}return Z.duration==1/0?this.now=P:(y=P-this.startTime,this.state=y/Z.duration,this.pos=f.easing[Z.animatedProperties[this.prop]](this.state,y,0,1,Z.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},f.extend(f.fx,{tick:function(){for(var a,u=f.timers,y=0;y<u.length;y++)a=u[y],!a()&&u[y]===a&&u.splice(y--,1);u.length||f.fx.stop()},interval:13,stop:function(){clearInterval(Rn),Rn=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(Vn.concat.apply([],Vn),function(a,u){u.indexOf("margin")&&(f.fx.step[u]=function(y){f.style(y.elem,u,Math.max(0,y.now)+y.unit)})}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(u){return a===u.elem}).length});var jn,Ri=/^t(?:able|d|h)$/i,Cn=/^(?:body|html)$/i;"getBoundingClientRect"in ce.documentElement?jn=function(a,u,y,E){try{E=a.getBoundingClientRect()}catch(ye){}if(!E||!f.contains(y,a))return E?{top:E.top,left:E.left}:{top:0,left:0};var P=u.body,z=w(u),M=y.clientTop||P.clientTop||0,Z=y.clientLeft||P.clientLeft||0,fe=z.pageYOffset||f.support.boxModel&&y.scrollTop||P.scrollTop,ae=z.pageXOffset||f.support.boxModel&&y.scrollLeft||P.scrollLeft,_e=E.top+fe-M,pe=E.left+ae-Z;return{top:_e,left:pe}}:jn=function(a,u,y){for(var E,P=a.offsetParent,z=a,M=u.body,Z=u.defaultView,fe=Z?Z.getComputedStyle(a,null):a.currentStyle,ae=a.offsetTop,_e=a.offsetLeft;(a=a.parentNode)&&a!==M&&a!==y&&!(f.support.fixedPosition&&fe.position==="fixed");)E=Z?Z.getComputedStyle(a,null):a.currentStyle,ae-=a.scrollTop,_e-=a.scrollLeft,a===P&&(ae+=a.offsetTop,_e+=a.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!Ri.test(a.nodeName))&&(ae+=parseFloat(E.borderTopWidth)||0,_e+=parseFloat(E.borderLeftWidth)||0),z=P,P=a.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&E.overflow!=="visible"&&(ae+=parseFloat(E.borderTopWidth)||0,_e+=parseFloat(E.borderLeftWidth)||0),fe=E;return(fe.position==="relative"||fe.position==="static")&&(ae+=M.offsetTop,_e+=M.offsetLeft),f.support.fixedPosition&&fe.position==="fixed"&&(ae+=Math.max(y.scrollTop,M.scrollTop),_e+=Math.max(y.scrollLeft,M.scrollLeft)),{top:ae,left:_e}},f.fn.offset=function(a){if(arguments.length)return a===n?this:this.each(function(E){f.offset.setOffset(this,a,E)});var u=this[0],y=u&&u.ownerDocument;return y?u===y.body?f.offset.bodyOffset(u):jn(u,y,y.documentElement):null},f.offset={bodyOffset:function(a){var u=a.offsetTop,y=a.offsetLeft;return f.support.doesNotIncludeMarginInBodyOffset&&(u+=parseFloat(f.css(a,"marginTop"))||0,y+=parseFloat(f.css(a,"marginLeft"))||0),{top:u,left:y}},setOffset:function(a,u,y){var E=f.css(a,"position");E==="static"&&(a.style.position="relative");var P=f(a),z=P.offset(),M=f.css(a,"top"),Z=f.css(a,"left"),fe=(E==="absolute"||E==="fixed")&&f.inArray("auto",[M,Z])>-1,ae={},_e={},pe,ye;fe?(_e=P.position(),pe=_e.top,ye=_e.left):(pe=parseFloat(M)||0,ye=parseFloat(Z)||0),f.isFunction(u)&&(u=u.call(a,y,z)),u.top!=null&&(ae.top=u.top-z.top+pe),u.left!=null&&(ae.left=u.left-z.left+ye),"using"in u?u.using.call(a,ae):P.css(ae)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],u=this.offsetParent(),y=this.offset(),E=Cn.test(u[0].nodeName)?{top:0,left:0}:u.offset();return y.top-=parseFloat(f.css(a,"marginTop"))||0,y.left-=parseFloat(f.css(a,"marginLeft"))||0,E.top+=parseFloat(f.css(u[0],"borderTopWidth"))||0,E.left+=parseFloat(f.css(u[0],"borderLeftWidth"))||0,{top:y.top-E.top,left:y.left-E.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||ce.body;a&&!Cn.test(a.nodeName)&&f.css(a,"position")==="static";)a=a.offsetParent;return a})}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,u){var y=/Y/.test(u);f.fn[a]=function(E){return f.access(this,function(P,z,M){var Z=w(P);if(M===n)return Z?u in Z?Z[u]:f.support.boxModel&&Z.document.documentElement[z]||Z.document.body[z]:P[z];Z?Z.scrollTo(y?f(Z).scrollLeft():M,y?M:f(Z).scrollTop()):P[z]=M},a,E,arguments.length,null)}}),f.each({Height:"height",Width:"width"},function(a,u){var y="client"+a,E="scroll"+a,P="offset"+a;f.fn["inner"+a]=function(){var z=this[0];return z?z.style?parseFloat(f.css(z,u,"padding")):this[u]():null},f.fn["outer"+a]=function(z){var M=this[0];return M?M.style?parseFloat(f.css(M,u,z?"margin":"border")):this[u]():null},f.fn[u]=function(z){return f.access(this,function(M,Z,fe){var ae,_e,pe,ye;if(f.isWindow(M))return ae=M.document,_e=ae.documentElement[y],f.support.boxModel&&_e||ae.body&&ae.body[y]||_e;if(M.nodeType===9)return ae=M.documentElement,ae[y]>=ae[E]?ae[y]:Math.max(M.body[E],ae[E],M.body[P],ae[P]);if(fe===n)return pe=f.css(M,Z),ye=parseFloat(pe),f.isNumeric(ye)?ye:pe;f(M).css(Z,fe)},u,z,arguments.length,null)}}),e.jQuery=e.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);/*! jQuery UI - v1.9.2 - 2012-12-10
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.sortable.js, jquery.ui.autocomplete.js, jquery.ui.menu.js, jquery.ui.slider.js
* Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */(function(e,n){function w(p,T){var A,D,U,F=p.nodeName.toLowerCase();return F==="area"?(A=p.parentNode,D=A.name,!p.href||!D||A.nodeName.toLowerCase()!=="map"?!1:(U=e("img[usemap=#"+D+"]")[0],!!U&&l(U))):(/input|select|textarea|button|object/.test(F)?!p.disabled:F==="a"&&p.href||T)&&l(p)}function l(p){return e.expr.filters.visible(p)&&!e(p).parents().andSelf().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var c=0,m=/^ui-id-\d+$/;e.ui=e.ui||{},!e.ui.version&&(e.extend(e.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(p,T){return typeof p=="number"?this.each(function(){var A=this;setTimeout(function(){e(A).focus(),T&&T.call(A)},p)}):this._focus.apply(this,arguments)},scrollParent:function(){var p;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?p=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):p=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!p.length?e(document):p},zIndex:function(p){if(p!==n)return this.css("zIndex",p);if(this.length)for(var T=e(this[0]),A,D;T.length&&T[0]!==document;){if(A=T.css("position"),(A==="absolute"||A==="relative"||A==="fixed")&&(D=parseInt(T.css("zIndex"),10),!isNaN(D)&&D!==0))return D;T=T.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++c)})},removeUniqueId:function(){return this.each(function(){m.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(p){return function(T){return!!e.data(T,p)}}):function(p,T,A){return!!e.data(p,A[3])},focusable:function(p){return w(p,!isNaN(e.attr(p,"tabindex")))},tabbable:function(p){var T=e.attr(p,"tabindex"),A=isNaN(T);return(A||T>=0)&&w(p,!A)}}),e(function(){var p=document.body,T=p.appendChild(T=document.createElement("div"));T.offsetHeight,e.extend(T.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=T.offsetHeight===100,e.support.selectstart="onselectstart"in T,p.removeChild(T).style.display="none"}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(p,T){function A(_,O,v,h){return e.each(D,function(){O-=parseFloat(e.css(_,"padding"+this))||0,v&&(O-=parseFloat(e.css(_,"border"+this+"Width"))||0),h&&(O-=parseFloat(e.css(_,"margin"+this))||0)}),O}var D=T==="Width"?["Left","Right"]:["Top","Bottom"],U=T.toLowerCase(),F={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+T]=function(_){return _===n?F["inner"+T].call(this):this.each(function(){e(this).css(U,A(this,_)+"px")})},e.fn["outer"+T]=function(_,O){return typeof _!="number"?F["outer"+T].call(this,_):this.each(function(){e(this).css(U,A(this,_,!0,O)+"px")})}}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=(function(p){return function(T){return arguments.length?p.call(this,e.camelCase(T)):p.call(this)}})(e.fn.removeData)),(function(){var p=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=!!p.length,e.ui.ie6=parseFloat(p[1],10)===6})(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(p){p.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(p,T,A){var D,U=e.ui[p].prototype;for(D in A)U.plugins[D]=U.plugins[D]||[],U.plugins[D].push([T,A[D]])},call:function(p,T,A){var D,U=p.plugins[T];if(!(!U||!p.element[0].parentNode||p.element[0].parentNode.nodeType===11))for(D=0;D<U.length;D++)p.options[U[D][0]]&&U[D][1].apply(p.element,A)}},contains:e.contains,hasScroll:function(p,T){if(e(p).css("overflow")==="hidden")return!1;var A=T&&T==="left"?"scrollLeft":"scrollTop",D=!1;return p[A]>0?!0:(p[A]=1,D=p[A]>0,p[A]=0,D)},isOverAxis:function(p,T,A){return p>T&&p<T+A},isOver:function(p,T,A,D,U,F){return e.ui.isOverAxis(p,A,U)&&e.ui.isOverAxis(T,D,F)}}))})(jQuery),(function(e,n){var w=0,l=Array.prototype.slice,c=e.cleanData;e.cleanData=function(m){for(var p=0,T;(T=m[p])!=null;p++)try{e(T).triggerHandler("remove")}catch(A){}c(m)},e.widget=function(m,p,T){var A,D,U,F,_=m.split(".")[0];m=m.split(".")[1],A=_+"-"+m,T||(T=p,p=e.Widget),e.expr[":"][A.toLowerCase()]=function(O){return!!e.data(O,A)},e[_]=e[_]||{},D=e[_][m],U=e[_][m]=function(O,v){if(!this._createWidget)return new U(O,v);arguments.length&&this._createWidget(O,v)},e.extend(U,D,{version:T.version,_proto:e.extend({},T),_childConstructors:[]}),F=new p,F.options=e.widget.extend({},F.options),e.each(T,function(O,v){e.isFunction(v)&&(T[O]=(function(){var h=function(){return p.prototype[O].apply(this,arguments)},S=function(k){return p.prototype[O].apply(this,k)};return function(){var k=this._super,N=this._superApply,G;return this._super=h,this._superApply=S,G=v.apply(this,arguments),this._super=k,this._superApply=N,G}})())}),U.prototype=e.widget.extend(F,{widgetEventPrefix:D?F.widgetEventPrefix:m},T,{constructor:U,namespace:_,widgetName:m,widgetBaseClass:A,widgetFullName:A}),D?(e.each(D._childConstructors,function(O,v){var h=v.prototype;e.widget(h.namespace+"."+h.widgetName,U,v._proto)}),delete D._childConstructors):p._childConstructors.push(U),e.widget.bridge(m,U)},e.widget.extend=function(m){for(var p=l.call(arguments,1),T=0,A=p.length,D,U;T<A;T++)for(D in p[T])U=p[T][D],p[T].hasOwnProperty(D)&&U!==n&&(e.isPlainObject(U)?m[D]=e.isPlainObject(m[D])?e.widget.extend({},m[D],U):e.widget.extend({},U):m[D]=U);return m},e.widget.bridge=function(m,p){var T=p.prototype.widgetFullName||m;e.fn[m]=function(A){var D=typeof A=="string",U=l.call(arguments,1),F=this;return A=!D&&U.length?e.widget.extend.apply(null,[A].concat(U)):A,D?this.each(function(){var _,O=e.data(this,T);if(!O)return e.error("cannot call methods on "+m+" prior to initialization; attempted to call method '"+A+"'");if(!e.isFunction(O[A])||A.charAt(0)==="_")return e.error("no such method '"+A+"' for "+m+" widget instance");if(_=O[A].apply(O,U),_!==O&&_!==n)return F=_&&_.jquery?F.pushStack(_.get()):_,!1}):this.each(function(){var _=e.data(this,T);_?_.option(A||{})._init():e.data(this,T,new p(A,this))}),F}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(m,p){p=e(p||this.defaultElement||this)[0],this.element=e(p),this.uuid=w++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),m),this.bindings=e(),this.hoverable=e(),this.focusable=e(),p!==this&&(e.data(p,this.widgetName,this),e.data(p,this.widgetFullName,this),this._on(!0,this.element,{remove:function(T){T.target===p&&this.destroy()}}),this.document=e(p.style?p.ownerDocument:p.document||p),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(m,p){var T=m,A,D,U;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof m=="string")if(T={},A=m.split("."),m=A.shift(),A.length){for(D=T[m]=e.widget.extend({},this.options[m]),U=0;U<A.length-1;U++)D[A[U]]=D[A[U]]||{},D=D[A[U]];if(m=A.pop(),p===n)return D[m]===n?null:D[m];D[m]=p}else{if(p===n)return this.options[m]===n?null:this.options[m];T[m]=p}return this._setOptions(T),this},_setOptions:function(m){var p;for(p in m)this._setOption(p,m[p]);return this},_setOption:function(m,p){return this.options[m]=p,m==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!p).attr("aria-disabled",p),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(m,p,T){var A,D=this;typeof m!="boolean"&&(T=p,p=m,m=!1),T?(p=A=e(p),this.bindings=this.bindings.add(p)):(T=p,p=this.element,A=this.widget()),e.each(T,function(U,F){function _(){if(!(!m&&(D.options.disabled===!0||e(this).hasClass("ui-state-disabled"))))return(typeof F=="string"?D[F]:F).apply(D,arguments)}typeof F!="string"&&(_.guid=F.guid=F.guid||_.guid||e.guid++);var O=U.match(/^(\w+)\s*(.*)$/),v=O[1]+D.eventNamespace,h=O[2];h?A.delegate(h,v,_):p.bind(v,_)})},_off:function(m,p){p=(p||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,m.unbind(p).undelegate(p)},_delay:function(m,p){function T(){return(typeof m=="string"?A[m]:m).apply(A,arguments)}var A=this;return setTimeout(T,p||0)},_hoverable:function(m){this.hoverable=this.hoverable.add(m),this._on(m,{mouseenter:function(p){e(p.currentTarget).addClass("ui-state-hover")},mouseleave:function(p){e(p.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(m){this.focusable=this.focusable.add(m),this._on(m,{focusin:function(p){e(p.currentTarget).addClass("ui-state-focus")},focusout:function(p){e(p.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(m,p,T){var A,D,U=this.options[m];if(T=T||{},p=e.Event(p),p.type=(m===this.widgetEventPrefix?m:this.widgetEventPrefix+m).toLowerCase(),p.target=this.element[0],D=p.originalEvent,D)for(A in D)A in p||(p[A]=D[A]);return this.element.trigger(p,T),!(e.isFunction(U)&&U.apply(this.element[0],[p].concat(T))===!1||p.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(m,p){e.Widget.prototype["_"+m]=function(T,A,D){typeof A=="string"&&(A={effect:A});var U,F=A?A===!0||typeof A=="number"?p:A.effect||p:m;A=A||{},typeof A=="number"&&(A={duration:A}),U=!e.isEmptyObject(A),A.complete=D,A.delay&&T.delay(A.delay),U&&e.effects&&(e.effects.effect[F]||e.uiBackCompat!==!1&&e.effects[F])?T[m](A):F!==m&&T[F]?T[F](A.duration,A.easing,D):T.queue(function(_){e(this)[m](),D&&D.call(T[0]),_()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})})(jQuery),(function(e,n){var w=!1;e(document).mouseup(function(l){w=!1}),e.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var l=this;this.element.bind("mousedown."+this.widgetName,function(c){return l._mouseDown(c)}).bind("click."+this.widgetName,function(c){if(e.data(c.target,l.widgetName+".preventClickEvent")===!0)return e.removeData(c.target,l.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(l){if(!w){this._mouseStarted&&this._mouseUp(l),this._mouseDownEvent=l;var c=this,m=l.which===1,p=typeof this.options.cancel=="string"&&l.target.nodeName?e(l.target).closest(this.options.cancel).length:!1;return!m||p||!this._mouseCapture(l)?!0:(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(l)&&this._mouseDelayMet(l)&&(this._mouseStarted=this._mouseStart(l)!==!1,!this._mouseStarted)?(l.preventDefault(),!0):(e.data(l.target,this.widgetName+".preventClickEvent")===!0&&e.removeData(l.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(T){return c._mouseMove(T)},this._mouseUpDelegate=function(T){return c._mouseUp(T)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),l.preventDefault(),w=!0,!0))}},_mouseMove:function(l){return!e.ui.ie||document.documentMode>=9||l.button?this._mouseStarted?(this._mouseDrag(l),l.preventDefault()):(this._mouseDistanceMet(l)&&this._mouseDelayMet(l)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,l)!==!1,this._mouseStarted?this._mouseDrag(l):this._mouseUp(l)),!this._mouseStarted):this._mouseUp(l)},_mouseUp:function(l){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,l.target===this._mouseDownEvent.target&&e.data(l.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(l)),!1},_mouseDistanceMet:function(l){return Math.max(Math.abs(this._mouseDownEvent.pageX-l.pageX),Math.abs(this._mouseDownEvent.pageY-l.pageY))>=this.options.distance},_mouseDelayMet:function(l){return this.mouseDelayMet},_mouseStart:function(l){},_mouseDrag:function(l){},_mouseStop:function(l){},_mouseCapture:function(l){return!0}})})(jQuery),(function(e,n){function w(v,h,S){return[parseInt(v[0],10)*(_.test(v[0])?h/100:1),parseInt(v[1],10)*(_.test(v[1])?S/100:1)]}function l(v,h){return parseInt(e.css(v,h),10)||0}e.ui=e.ui||{};var c,m=Math.max,p=Math.abs,T=Math.round,A=/left|center|right/,D=/top|center|bottom/,U=/[\+\-]\d+%?/,F=/^\w+/,_=/%$/,O=e.fn.position;e.position={scrollbarWidth:function(){if(c!==n)return c;var v,h,S=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),k=S.children()[0];return e("body").append(S),v=k.offsetWidth,S.css("overflow","scroll"),h=k.offsetWidth,v===h&&(h=S[0].clientWidth),S.remove(),c=v-h},getScrollInfo:function(v){var h=v.isWindow?"":v.element.css("overflow-x"),S=v.isWindow?"":v.element.css("overflow-y"),k=h==="scroll"||h==="auto"&&v.width<v.element[0].scrollWidth,N=S==="scroll"||S==="auto"&&v.height<v.element[0].scrollHeight;return{width:k?e.position.scrollbarWidth():0,height:N?e.position.scrollbarWidth():0}},getWithinInfo:function(v){var h=e(v||window),S=e.isWindow(h[0]);return{element:h,isWindow:S,offset:h.offset()||{left:0,top:0},scrollLeft:h.scrollLeft(),scrollTop:h.scrollTop(),width:S?h.width():h.outerWidth(),height:S?h.height():h.outerHeight()}}},e.fn.position=function(v){if(!v||!v.of)return O.apply(this,arguments);v=e.extend({},v);var h,S,k,N,G,K=e(v.of),te=e.position.getWithinInfo(v.within),X=e.position.getScrollInfo(te),V=K[0],ie=(v.collision||"flip").split(" "),R={};return V.nodeType===9?(S=K.width(),k=K.height(),N={top:0,left:0}):e.isWindow(V)?(S=K.width(),k=K.height(),N={top:K.scrollTop(),left:K.scrollLeft()}):V.preventDefault?(v.at="left top",S=k=0,N={top:V.pageY,left:V.pageX}):(S=K.outerWidth(),k=K.outerHeight(),N=K.offset()),G=e.extend({},N),e.each(["my","at"],function(){var Y=(v[this]||"").split(" "),L,Q;Y.length===1&&(Y=A.test(Y[0])?Y.concat(["center"]):D.test(Y[0])?["center"].concat(Y):["center","center"]),Y[0]=A.test(Y[0])?Y[0]:"center",Y[1]=D.test(Y[1])?Y[1]:"center",L=U.exec(Y[0]),Q=U.exec(Y[1]),R[this]=[L?L[0]:0,Q?Q[0]:0],v[this]=[F.exec(Y[0])[0],F.exec(Y[1])[0]]}),ie.length===1&&(ie[1]=ie[0]),v.at[0]==="right"?G.left+=S:v.at[0]==="center"&&(G.left+=S/2),v.at[1]==="bottom"?G.top+=k:v.at[1]==="center"&&(G.top+=k/2),h=w(R.at,S,k),G.left+=h[0],G.top+=h[1],this.each(function(){var Y,L,Q=e(this),oe=Q.outerWidth(),b=Q.outerHeight(),Le=l(this,"marginLeft"),ce=l(this,"marginTop"),J=oe+Le+l(this,"marginRight")+X.width,me=b+ce+l(this,"marginBottom")+X.height,f=e.extend({},G),Re=w(R.my,Q.outerWidth(),Q.outerHeight());v.my[0]==="right"?f.left-=oe:v.my[0]==="center"&&(f.left-=oe/2),v.my[1]==="bottom"?f.top-=b:v.my[1]==="center"&&(f.top-=b/2),f.left+=Re[0],f.top+=Re[1],e.support.offsetFractions||(f.left=T(f.left),f.top=T(f.top)),Y={marginLeft:Le,marginTop:ce},e.each(["left","top"],function(je,Me){e.ui.position[ie[je]]&&e.ui.position[ie[je]][Me](f,{targetWidth:S,targetHeight:k,elemWidth:oe,elemHeight:b,collisionPosition:Y,collisionWidth:J,collisionHeight:me,offset:[h[0]+Re[0],h[1]+Re[1]],my:v.my,at:v.at,within:te,elem:Q})}),e.fn.bgiframe&&Q.bgiframe(),v.using&&(L=function(je){var Me=N.left-f.left,ot=Me+S-oe,Tt=N.top-f.top,Ue=Tt+k-b,et={target:{element:K,left:N.left,top:N.top,width:S,height:k},element:{element:Q,left:f.left,top:f.top,width:oe,height:b},horizontal:ot<0?"left":Me>0?"right":"center",vertical:Ue<0?"top":Tt>0?"bottom":"middle"};S<oe&&p(Me+ot)<S&&(et.horizontal="center"),k<b&&p(Tt+Ue)<k&&(et.vertical="middle"),m(p(Me),p(ot))>m(p(Tt),p(Ue))?et.important="horizontal":et.important="vertical",v.using.call(this,je,et)}),Q.offset(e.extend(f,{using:L}))})},e.ui.position={fit:{left:function(v,h){var S=h.within,k=S.isWindow?S.scrollLeft:S.offset.left,N=S.width,G=v.left-h.collisionPosition.marginLeft,K=k-G,te=G+h.collisionWidth-N-k,X;h.collisionWidth>N?K>0&&te<=0?(X=v.left+K+h.collisionWidth-N-k,v.left+=K-X):te>0&&K<=0?v.left=k:K>te?v.left=k+N-h.collisionWidth:v.left=k:K>0?v.left+=K:te>0?v.left-=te:v.left=m(v.left-G,v.left)},top:function(v,h){var S=h.within,k=S.isWindow?S.scrollTop:S.offset.top,N=h.within.height,G=v.top-h.collisionPosition.marginTop,K=k-G,te=G+h.collisionHeight-N-k,X;h.collisionHeight>N?K>0&&te<=0?(X=v.top+K+h.collisionHeight-N-k,v.top+=K-X):te>0&&K<=0?v.top=k:K>te?v.top=k+N-h.collisionHeight:v.top=k:K>0?v.top+=K:te>0?v.top-=te:v.top=m(v.top-G,v.top)}},flip:{left:function(v,h){var S=h.within,k=S.offset.left+S.scrollLeft,N=S.width,G=S.isWindow?S.scrollLeft:S.offset.left,K=v.left-h.collisionPosition.marginLeft,te=K-G,X=K+h.collisionWidth-N-G,V=h.my[0]==="left"?-h.elemWidth:h.my[0]==="right"?h.elemWidth:0,ie=h.at[0]==="left"?h.targetWidth:h.at[0]==="right"?-h.targetWidth:0,R=-2*h.offset[0],Y,L;te<0?(Y=v.left+V+ie+R+h.collisionWidth-N-k,(Y<0||Y<p(te))&&(v.left+=V+ie+R)):X>0&&(L=v.left-h.collisionPosition.marginLeft+V+ie+R-G,(L>0||p(L)<X)&&(v.left+=V+ie+R))},top:function(v,h){var S=h.within,k=S.offset.top+S.scrollTop,N=S.height,G=S.isWindow?S.scrollTop:S.offset.top,K=v.top-h.collisionPosition.marginTop,te=K-G,X=K+h.collisionHeight-N-G,V=h.my[1]==="top",ie=V?-h.elemHeight:h.my[1]==="bottom"?h.elemHeight:0,R=h.at[1]==="top"?h.targetHeight:h.at[1]==="bottom"?-h.targetHeight:0,Y=-2*h.offset[1],L,Q;te<0?(Q=v.top+ie+R+Y+h.collisionHeight-N-k,v.top+ie+R+Y>te&&(Q<0||Q<p(te))&&(v.top+=ie+R+Y)):X>0&&(L=v.top-h.collisionPosition.marginTop+ie+R+Y-G,v.top+ie+R+Y>X&&(L>0||p(L)<X)&&(v.top+=ie+R+Y))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},(function(){var v,h,S,k,N,G=document.getElementsByTagName("body")[0],K=document.createElement("div");v=document.createElement(G?"div":"body"),S={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},G&&e.extend(S,{position:"absolute",left:"-1000px",top:"-1000px"});for(N in S)v.style[N]=S[N];v.appendChild(K),h=G||document.documentElement,h.insertBefore(v,h.firstChild),K.style.cssText="position: absolute; left: 10.7432222px;",k=e(K).offset().left,e.support.offsetFractions=k>10&&k<11,v.innerHTML="",h.removeChild(v)})(),e.uiBackCompat!==!1&&(function(v){var h=v.fn.position;v.fn.position=function(S){if(!S||!S.offset)return h.call(this,S);var k=S.offset.split(" "),N=S.at.split(" ");return k.length===1&&(k[1]=k[0]),/^\d/.test(k[0])&&(k[0]="+"+k[0]),/^\d/.test(k[1])&&(k[1]="+"+k[1]),N.length===1&&(/left|center|right/.test(N[0])?N[1]="center":(N[1]=N[0],N[0]="center")),h.call(this,v.extend(S,{at:N[0]+k[0]+" "+N[1]+k[1],offset:n}))}})(jQuery)})(jQuery),(function(e,n){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(w){var l=this.options;return this.helper||l.disabled||e(w.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(w),this.handle?(e(l.iframeFix===!0?"iframe":l.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(w){var l=this.options;return this.helper=this._createHelper(w),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:w.pageX-this.offset.left,top:w.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(w),this.originalPageX=w.pageX,this.originalPageY=w.pageY,l.cursorAt&&this._adjustOffsetFromHelper(l.cursorAt),l.containment&&this._setContainment(),this._trigger("start",w)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!l.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,w),this._mouseDrag(w,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,w),!0)},_mouseDrag:function(w,l){if(this.position=this._generatePosition(w),this.positionAbs=this._convertPositionTo("absolute"),!l){var c=this._uiHash();if(this._trigger("drag",w,c)===!1)return this._mouseUp({}),!1;this.position=c.position}return(!this.options.axis||this.options.axis!="y")&&(this.helper[0].style.left=this.position.left+"px"),(!this.options.axis||this.options.axis!="x")&&(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,w),!1},_mouseStop:function(w){var l=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(l=e.ui.ddmanager.drop(this,w)),this.dropped&&(l=this.dropped,this.dropped=!1);for(var c=this.element[0],m=!1;c&&(c=c.parentNode);)c==document&&(m=!0);if(!m&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!l||this.options.revert=="valid"&&l||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,l)){var p=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){p._trigger("stop",w)!==!1&&p._clear()})}else this._trigger("stop",w)!==!1&&this._clear();return!1},_mouseUp:function(w){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,w),e.ui.mouse.prototype._mouseUp.call(this,w)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(w){var l=!this.options.handle||!e(this.options.handle,this.element).length;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==w.target&&(l=!0)}),l},_createHelper:function(w){var l=this.options,c=e.isFunction(l.helper)?e(l.helper.apply(this.element[0],[w])):l.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return c.parents("body").length||c.appendTo(l.appendTo=="parent"?this.element[0].parentNode:l.appendTo),c[0]!=this.element[0]&&!/(fixed|absolute)/.test(c.css("position"))&&c.css("position","absolute"),c},_adjustOffsetFromHelper:function(w){typeof w=="string"&&(w=w.split(" ")),e.isArray(w)&&(w={left:+w[0],top:+w[1]||0}),"left"in w&&(this.offset.click.left=w.left+this.margins.left),"right"in w&&(this.offset.click.left=this.helperProportions.width-w.right+this.margins.left),"top"in w&&(this.offset.click.top=w.top+this.margins.top),"bottom"in w&&(this.offset.click.top=this.helperProportions.height-w.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var w=this.offsetParent.offset();return this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(w.left+=this.scrollParent.scrollLeft(),w.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.ui.ie)&&(w={top:0,left:0}),{top:w.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:w.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var w=this.element.position();return{top:w.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:w.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var w=this.options;if(w.containment=="parent"&&(w.containment=this.helper[0].parentNode),(w.containment=="document"||w.containment=="window")&&(this.containment=[w.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,w.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(w.containment=="document"?0:e(window).scrollLeft())+e(w.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(w.containment=="document"?0:e(window).scrollTop())+(e(w.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(w.containment)&&w.containment.constructor!=Array){var l=e(w.containment),c=l[0];if(!c)return;var m=l.offset(),p=e(c).css("overflow")!="hidden";this.containment=[(parseInt(e(c).css("borderLeftWidth"),10)||0)+(parseInt(e(c).css("paddingLeft"),10)||0),(parseInt(e(c).css("borderTopWidth"),10)||0)+(parseInt(e(c).css("paddingTop"),10)||0),(p?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(e(c).css("borderLeftWidth"),10)||0)-(parseInt(e(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(p?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(e(c).css("borderTopWidth"),10)||0)-(parseInt(e(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=l}else w.containment.constructor==Array&&(this.containment=w.containment)},_convertPositionTo:function(w,l){l||(l=this.position);var c=w=="absolute"?1:-1,m=this.options,p=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,T=/(html|body)/i.test(p[0].tagName);return{top:l.top+this.offset.relative.top*c+this.offset.parent.top*c-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():T?0:p.scrollTop())*c,left:l.left+this.offset.relative.left*c+this.offset.parent.left*c-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():T?0:p.scrollLeft())*c}},_generatePosition:function(w){var l=this.options,c=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,m=/(html|body)/i.test(c[0].tagName),p=w.pageX,T=w.pageY;if(this.originalPosition){var A;if(this.containment){if(this.relative_container){var D=this.relative_container.offset();A=[this.containment[0]+D.left,this.containment[1]+D.top,this.containment[2]+D.left,this.containment[3]+D.top]}else A=this.containment;w.pageX-this.offset.click.left<A[0]&&(p=A[0]+this.offset.click.left),w.pageY-this.offset.click.top<A[1]&&(T=A[1]+this.offset.click.top),w.pageX-this.offset.click.left>A[2]&&(p=A[2]+this.offset.click.left),w.pageY-this.offset.click.top>A[3]&&(T=A[3]+this.offset.click.top)}if(l.grid){var U=l.grid[1]?this.originalPageY+Math.round((T-this.originalPageY)/l.grid[1])*l.grid[1]:this.originalPageY;T=A&&(U-this.offset.click.top<A[1]||U-this.offset.click.top>A[3])?U-this.offset.click.top<A[1]?U+l.grid[1]:U-l.grid[1]:U;var F=l.grid[0]?this.originalPageX+Math.round((p-this.originalPageX)/l.grid[0])*l.grid[0]:this.originalPageX;p=A&&(F-this.offset.click.left<A[0]||F-this.offset.click.left>A[2])?F-this.offset.click.left<A[0]?F+l.grid[0]:F-l.grid[0]:F}}return{top:T-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():m?0:c.scrollTop()),left:p-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():m?0:c.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(w,l,c){return c=c||this._uiHash(),e.ui.plugin.call(this,w,[l,c]),w=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,w,l,c)},plugins:{},_uiHash:function(w){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(w,l){var c=e(this).data("draggable"),m=c.options,p=e.extend({},l,{item:c.element});c.sortables=[],e(m.connectToSortable).each(function(){var T=e.data(this,"sortable");T&&!T.options.disabled&&(c.sortables.push({instance:T,shouldRevert:T.options.revert}),T.refreshPositions(),T._trigger("activate",w,p))})},stop:function(w,l){var c=e(this).data("draggable"),m=e.extend({},l,{item:c.element});e.each(c.sortables,function(){this.instance.isOver?(this.instance.isOver=0,c.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(w),this.instance.options.helper=this.instance.options._helper,c.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",w,m))})},drag:function(w,l){var c=e(this).data("draggable"),m=this,p=function(T){var A=this.offset.click.top,D=this.offset.click.left,U=this.positionAbs.top,F=this.positionAbs.left,_=T.height,O=T.width,v=T.top,h=T.left;return e.ui.isOver(U+A,F+D,v,h,_,O)};e.each(c.sortables,function(T){var A=!1,D=this;this.instance.positionAbs=c.positionAbs,this.instance.helperProportions=c.helperProportions,this.instance.offset.click=c.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(A=!0,e.each(c.sortables,function(){return this.instance.positionAbs=c.positionAbs,this.instance.helperProportions=c.helperProportions,this.instance.offset.click=c.offset.click,this!=D&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(D.instance.element[0],this.instance.element[0])&&(A=!1),A})),A?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(m).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return l.helper[0]},w.target=this.instance.currentItem[0],this.instance._mouseCapture(w,!0),this.instance._mouseStart(w,!0,!0),this.instance.offset.click.top=c.offset.click.top,this.instance.offset.click.left=c.offset.click.left,this.instance.offset.parent.left-=c.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=c.offset.parent.top-this.instance.offset.parent.top,c._trigger("toSortable",w),c.dropped=this.instance.element,c.currentItem=c.element,this.instance.fromOutside=c),this.instance.currentItem&&this.instance._mouseDrag(w)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",w,this.instance._uiHash(this.instance)),this.instance._mouseStop(w,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),c._trigger("fromSortable",w),c.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(w,l){var c=e("body"),m=e(this).data("draggable").options;c.css("cursor")&&(m._cursor=c.css("cursor")),c.css("cursor",m.cursor)},stop:function(w,l){var c=e(this).data("draggable").options;c._cursor&&e("body").css("cursor",c._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(w,l){var c=e(l.helper),m=e(this).data("draggable").options;c.css("opacity")&&(m._opacity=c.css("opacity")),c.css("opacity",m.opacity)},stop:function(w,l){var c=e(this).data("draggable").options;c._opacity&&e(l.helper).css("opacity",c._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(w,l){var c=e(this).data("draggable");c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"&&(c.overflowOffset=c.scrollParent.offset())},drag:function(w,l){var c=e(this).data("draggable"),m=c.options,p=!1;c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"?((!m.axis||m.axis!="x")&&(c.overflowOffset.top+c.scrollParent[0].offsetHeight-w.pageY<m.scrollSensitivity?c.scrollParent[0].scrollTop=p=c.scrollParent[0].scrollTop+m.scrollSpeed:w.pageY-c.overflowOffset.top<m.scrollSensitivity&&(c.scrollParent[0].scrollTop=p=c.scrollParent[0].scrollTop-m.scrollSpeed)),(!m.axis||m.axis!="y")&&(c.overflowOffset.left+c.scrollParent[0].offsetWidth-w.pageX<m.scrollSensitivity?c.scrollParent[0].scrollLeft=p=c.scrollParent[0].scrollLeft+m.scrollSpeed:w.pageX-c.overflowOffset.left<m.scrollSensitivity&&(c.scrollParent[0].scrollLeft=p=c.scrollParent[0].scrollLeft-m.scrollSpeed))):((!m.axis||m.axis!="x")&&(w.pageY-e(document).scrollTop()<m.scrollSensitivity?p=e(document).scrollTop(e(document).scrollTop()-m.scrollSpeed):e(window).height()-(w.pageY-e(document).scrollTop())<m.scrollSensitivity&&(p=e(document).scrollTop(e(document).scrollTop()+m.scrollSpeed))),(!m.axis||m.axis!="y")&&(w.pageX-e(document).scrollLeft()<m.scrollSensitivity?p=e(document).scrollLeft(e(document).scrollLeft()-m.scrollSpeed):e(window).width()-(w.pageX-e(document).scrollLeft())<m.scrollSensitivity&&(p=e(document).scrollLeft(e(document).scrollLeft()+m.scrollSpeed)))),p!==!1&&e.ui.ddmanager&&!m.dropBehaviour&&e.ui.ddmanager.prepareOffsets(c,w)}}),e.ui.plugin.add("draggable","snap",{start:function(w,l){var c=e(this).data("draggable"),m=c.options;c.snapElements=[],e(m.snap.constructor!=String?m.snap.items||":data(draggable)":m.snap).each(function(){var p=e(this),T=p.offset();this!=c.element[0]&&c.snapElements.push({item:this,width:p.outerWidth(),height:p.outerHeight(),top:T.top,left:T.left})})},drag:function(w,l){for(var c=e(this).data("draggable"),m=c.options,p=m.snapTolerance,T=l.offset.left,A=T+c.helperProportions.width,D=l.offset.top,U=D+c.helperProportions.height,F=c.snapElements.length-1;F>=0;F--){var _=c.snapElements[F].left,O=_+c.snapElements[F].width,v=c.snapElements[F].top,h=v+c.snapElements[F].height;if(!(_-p<T&&T<O+p&&v-p<D&&D<h+p||_-p<T&&T<O+p&&v-p<U&&U<h+p||_-p<A&&A<O+p&&v-p<D&&D<h+p||_-p<A&&A<O+p&&v-p<U&&U<h+p)){c.snapElements[F].snapping&&c.options.snap.release&&c.options.snap.release.call(c.element,w,e.extend(c._uiHash(),{snapItem:c.snapElements[F].item})),c.snapElements[F].snapping=!1;continue}if(m.snapMode!="inner"){var S=Math.abs(v-U)<=p,k=Math.abs(h-D)<=p,N=Math.abs(_-A)<=p,G=Math.abs(O-T)<=p;S&&(l.position.top=c._convertPositionTo("relative",{top:v-c.helperProportions.height,left:0}).top-c.margins.top),k&&(l.position.top=c._convertPositionTo("relative",{top:h,left:0}).top-c.margins.top),N&&(l.position.left=c._convertPositionTo("relative",{top:0,left:_-c.helperProportions.width}).left-c.margins.left),G&&(l.position.left=c._convertPositionTo("relative",{top:0,left:O}).left-c.margins.left)}var K=S||k||N||G;if(m.snapMode!="outer"){var S=Math.abs(v-D)<=p,k=Math.abs(h-U)<=p,N=Math.abs(_-T)<=p,G=Math.abs(O-A)<=p;S&&(l.position.top=c._convertPositionTo("relative",{top:v,left:0}).top-c.margins.top),k&&(l.position.top=c._convertPositionTo("relative",{top:h-c.helperProportions.height,left:0}).top-c.margins.top),N&&(l.position.left=c._convertPositionTo("relative",{top:0,left:_}).left-c.margins.left),G&&(l.position.left=c._convertPositionTo("relative",{top:0,left:O-c.helperProportions.width}).left-c.margins.left)}!c.snapElements[F].snapping&&(S||k||N||G||K)&&c.options.snap.snap&&c.options.snap.snap.call(c.element,w,e.extend(c._uiHash(),{snapItem:c.snapElements[F].item})),c.snapElements[F].snapping=S||k||N||G||K}}}),e.ui.plugin.add("draggable","stack",{start:function(w,l){var c=e(this).data("draggable").options,m=e.makeArray(e(c.stack)).sort(function(T,A){return(parseInt(e(T).css("zIndex"),10)||0)-(parseInt(e(A).css("zIndex"),10)||0)});if(m.length){var p=parseInt(m[0].style.zIndex)||0;e(m).each(function(T){this.style.zIndex=p+T}),this[0].style.zIndex=p+m.length}}}),e.ui.plugin.add("draggable","zIndex",{start:function(w,l){var c=e(l.helper),m=e(this).data("draggable").options;c.css("zIndex")&&(m._zIndex=c.css("zIndex")),c.css("zIndex",m.zIndex)},stop:function(w,l){var c=e(this).data("draggable").options;c._zIndex&&e(l.helper).css("zIndex",c._zIndex)}})})(jQuery),(function(e,n){e.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var w=this.options,l=w.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(l)?l:function(c){return c.is(l)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[w.scope]=e.ui.ddmanager.droppables[w.scope]||[],e.ui.ddmanager.droppables[w.scope].push(this),w.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var w=e.ui.ddmanager.droppables[this.options.scope],l=0;l<w.length;l++)w[l]==this&&w.splice(l,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(w,l){w=="accept"&&(this.accept=e.isFunction(l)?l:function(c){return c.is(l)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(w){var l=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),l&&this._trigger("activate",w,this.ui(l))},_deactivate:function(w){var l=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),l&&this._trigger("deactivate",w,this.ui(l))},_over:function(w){var l=e.ui.ddmanager.current;!l||(l.currentItem||l.element)[0]==this.element[0]||this.accept.call(this.element[0],l.currentItem||l.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",w,this.ui(l)))},_out:function(w){var l=e.ui.ddmanager.current;!l||(l.currentItem||l.element)[0]==this.element[0]||this.accept.call(this.element[0],l.currentItem||l.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",w,this.ui(l)))},_drop:function(w,l){var c=l||e.ui.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0])return!1;var m=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var p=e.data(this,"droppable");if(p.options.greedy&&!p.options.disabled&&p.options.scope==c.options.scope&&p.accept.call(p.element[0],c.currentItem||c.element)&&e.ui.intersect(c,e.extend(p,{offset:p.element.offset()}),p.options.tolerance))return m=!0,!1}),m?!1:this.accept.call(this.element[0],c.currentItem||c.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",w,this.ui(c)),this.element):!1},ui:function(w){return{draggable:w.currentItem||w.element,helper:w.helper,position:w.position,offset:w.positionAbs}}}),e.ui.intersect=function(w,l,c){if(!l.offset)return!1;var m=(w.positionAbs||w.position.absolute).left,p=m+w.helperProportions.width,T=(w.positionAbs||w.position.absolute).top,A=T+w.helperProportions.height,D=l.offset.left,U=D+l.proportions.width,F=l.offset.top,_=F+l.proportions.height;switch(c){case"fit":return D<=m&&p<=U&&F<=T&&A<=_;case"intersect":return D<m+w.helperProportions.width/2&&p-w.helperProportions.width/2<U&&F<T+w.helperProportions.height/2&&A-w.helperProportions.height/2<_;case"pointer":var O=(w.positionAbs||w.position.absolute).left+(w.clickOffset||w.offset.click).left,v=(w.positionAbs||w.position.absolute).top+(w.clickOffset||w.offset.click).top,h=e.ui.isOver(v,O,F,D,l.proportions.height,l.proportions.width);return h;case"touch":return(T>=F&&T<=_||A>=F&&A<=_||T<F&&A>_)&&(m>=D&&m<=U||p>=D&&p<=U||m<D&&p>U);default:return!1}},e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(w,l){var c=e.ui.ddmanager.droppables[w.options.scope]||[],m=l?l.type:null,p=(w.currentItem||w.element).find(":data(droppable)").andSelf();e:for(var T=0;T<c.length;T++)if(!(c[T].options.disabled||w&&!c[T].accept.call(c[T].element[0],w.currentItem||w.element))){for(var A=0;A<p.length;A++)if(p[A]==c[T].element[0]){c[T].proportions.height=0;continue e}c[T].visible=c[T].element.css("display")!="none",c[T].visible&&(m=="mousedown"&&c[T]._activate.call(c[T],l),c[T].offset=c[T].element.offset(),c[T].proportions={width:c[T].element[0].offsetWidth,height:c[T].element[0].offsetHeight})}},drop:function(w,l){var c=!1;return e.each(e.ui.ddmanager.droppables[w.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(w,this,this.options.tolerance)&&(c=this._drop.call(this,l)||c),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],w.currentItem||w.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,l)))}),c},dragStart:function(w,l){w.element.parentsUntil("body").bind("scroll.droppable",function(){w.options.refreshPositions||e.ui.ddmanager.prepareOffsets(w,l)})},drag:function(w,l){w.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(w,l),e.each(e.ui.ddmanager.droppables[w.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var c=e.ui.intersect(w,this,this.options.tolerance),m=!c&&this.isover==1?"isout":c&&this.isover==0?"isover":null;if(m){var p;if(this.options.greedy){var T=this.options.scope,A=this.element.parents(":data(droppable)").filter(function(){return e.data(this,"droppable").options.scope===T});A.length&&(p=e.data(A[0],"droppable"),p.greedyChild=m=="isover"?1:0)}p&&m=="isover"&&(p.isover=0,p.isout=1,p._out.call(p,l)),this[m]=1,this[m=="isout"?"isover":"isout"]=0,this[m=="isover"?"_over":"_out"].call(this,l),p&&m=="isout"&&(p.isout=0,p.isover=1,p._over.call(p,l))}}})},dragStop:function(w,l){w.element.parentsUntil("body").unbind("scroll.droppable"),w.options.refreshPositions||e.ui.ddmanager.prepareOffsets(w,l)}}})(jQuery),(function(e,n){e.widget("ui.sortable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var w=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?w.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var w=this.items.length-1;w>=0;w--)this.items[w].item.removeData(this.widgetName+"-item");return this},_setOption:function(w,l){w==="disabled"?(this.options[w]=l,this.widget().toggleClass("ui-sortable-disabled",!!l)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(w,l){var c=this;if(this.reverting||this.options.disabled||this.options.type=="static")return!1;this._refreshItems(w);var m=null,p=e(w.target).parents().each(function(){if(e.data(this,c.widgetName+"-item")==c)return m=e(this),!1});if(e.data(w.target,c.widgetName+"-item")==c&&(m=e(w.target)),!m)return!1;if(this.options.handle&&!l){var T=!1;if(e(this.options.handle,m).find("*").andSelf().each(function(){this==w.target&&(T=!0)}),!T)return!1}return this.currentItem=m,this._removeCurrentsFromItems(),!0},_mouseStart:function(w,l,c){var m=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(w),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:w.pageX-this.offset.left,top:w.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(w),this.originalPageX=w.pageX,this.originalPageY=w.pageY,m.cursorAt&&this._adjustOffsetFromHelper(m.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),m.containment&&this._setContainment(),m.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",m.cursor)),m.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",m.opacity)),m.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",m.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",w,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!c)for(var p=this.containers.length-1;p>=0;p--)this.containers[p]._trigger("activate",w,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!m.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,w),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(w),!0},_mouseDrag:function(w){if(this.position=this._generatePosition(w),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var l=this.options,c=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-w.pageY<l.scrollSensitivity?this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop+l.scrollSpeed:w.pageY-this.overflowOffset.top<l.scrollSensitivity&&(this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop-l.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-w.pageX<l.scrollSensitivity?this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft+l.scrollSpeed:w.pageX-this.overflowOffset.left<l.scrollSensitivity&&(this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft-l.scrollSpeed)):(w.pageY-e(document).scrollTop()<l.scrollSensitivity?c=e(document).scrollTop(e(document).scrollTop()-l.scrollSpeed):e(window).height()-(w.pageY-e(document).scrollTop())<l.scrollSensitivity&&(c=e(document).scrollTop(e(document).scrollTop()+l.scrollSpeed)),w.pageX-e(document).scrollLeft()<l.scrollSensitivity?c=e(document).scrollLeft(e(document).scrollLeft()-l.scrollSpeed):e(window).width()-(w.pageX-e(document).scrollLeft())<l.scrollSensitivity&&(c=e(document).scrollLeft(e(document).scrollLeft()+l.scrollSpeed))),c!==!1&&e.ui.ddmanager&&!l.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,w)}this.positionAbs=this._convertPositionTo("absolute"),(!this.options.axis||this.options.axis!="y")&&(this.helper[0].style.left=this.position.left+"px"),(!this.options.axis||this.options.axis!="x")&&(this.helper[0].style.top=this.position.top+"px");for(var m=this.items.length-1;m>=0;m--){var p=this.items[m],T=p.item[0],A=this._intersectsWithPointer(p);if(A&&p.instance===this.currentContainer&&T!=this.currentItem[0]&&this.placeholder[A==1?"next":"prev"]()[0]!=T&&!e.contains(this.placeholder[0],T)&&(this.options.type!="semi-dynamic"||!e.contains(this.element[0],T))){if(this.direction=A==1?"down":"up",this.options.tolerance!="pointer"&&!this._intersectsWithSides(p))break;this._rearrange(w,p),this._trigger("change",w,this._uiHash());break}}return this._contactContainers(w),e.ui.ddmanager&&e.ui.ddmanager.drag(this,w),this._trigger("sort",w,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(w,l){if(w){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,w),this.options.revert){var c=this,m=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:m.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:m.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){c._clear(w)})}else this._clear(w,l);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var w=this.containers.length-1;w>=0;w--)this.containers[w]._trigger("deactivate",null,this._uiHash(this)),this.containers[w].containerCache.over&&(this.containers[w]._trigger("out",null,this._uiHash(this)),this.containers[w].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(w){var l=this._getItemsAsjQuery(w&&w.connected),c=[];return w=w||{},e(l).each(function(){var m=(e(w.item||this).attr(w.attribute||"id")||"").match(w.expression||/(.+)[-=_](.+)/);m&&c.push((w.key||m[1]+"[]")+"="+(w.key&&w.expression?m[1]:m[2]))}),!c.length&&w.key&&c.push(w.key+"="),c.join("&")},toArray:function(w){var l=this._getItemsAsjQuery(w&&w.connected),c=[];return w=w||{},l.each(function(){c.push(e(w.item||this).attr(w.attribute||"id")||"")}),c},_intersectsWith:function(w){var l=this.positionAbs.left,c=l+this.helperProportions.width,m=this.positionAbs.top,p=m+this.helperProportions.height,T=w.left,A=T+w.width,D=w.top,U=D+w.height,F=this.offset.click.top,_=this.offset.click.left,O=m+F>D&&m+F<U&&l+_>T&&l+_<A;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>w[this.floating?"width":"height"]?O:T<l+this.helperProportions.width/2&&c-this.helperProportions.width/2<A&&D<m+this.helperProportions.height/2&&p-this.helperProportions.height/2<U},_intersectsWithPointer:function(w){var l=this.options.axis==="x"||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,w.top,w.height),c=this.options.axis==="y"||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,w.left,w.width),m=l&&c,p=this._getDragVerticalDirection(),T=this._getDragHorizontalDirection();return m?this.floating?T&&T=="right"||p=="down"?2:1:p&&(p=="down"?2:1):!1},_intersectsWithSides:function(w){var l=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,w.top+w.height/2,w.height),c=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,w.left+w.width/2,w.width),m=this._getDragVerticalDirection(),p=this._getDragHorizontalDirection();return this.floating&&p?p=="right"&&c||p=="left"&&!c:m&&(m=="down"&&l||m=="up"&&!l)},_getDragVerticalDirection:function(){var w=this.positionAbs.top-this.lastPositionAbs.top;return w!=0&&(w>0?"down":"up")},_getDragHorizontalDirection:function(){var w=this.positionAbs.left-this.lastPositionAbs.left;return w!=0&&(w>0?"right":"left")},refresh:function(w){return this._refreshItems(w),this.refreshPositions(),this},_connectWith:function(){var w=this.options;return w.connectWith.constructor==String?[w.connectWith]:w.connectWith},_getItemsAsjQuery:function(w){var l=[],c=[],m=this._connectWith();if(m&&w)for(var p=m.length-1;p>=0;p--)for(var T=e(m[p]),A=T.length-1;A>=0;A--){var D=e.data(T[A],this.widgetName);D&&D!=this&&!D.options.disabled&&c.push([e.isFunction(D.options.items)?D.options.items.call(D.element):e(D.options.items,D.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),D])}c.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var p=c.length-1;p>=0;p--)c[p][0].each(function(){l.push(this)});return e(l)},_removeCurrentsFromItems:function(){var w=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(l){for(var c=0;c<w.length;c++)if(w[c]==l.item[0])return!1;return!0})},_refreshItems:function(w){this.items=[],this.containers=[this];var l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],w,{item:this.currentItem}):e(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready)for(var p=m.length-1;p>=0;p--)for(var T=e(m[p]),A=T.length-1;A>=0;A--){var D=e.data(T[A],this.widgetName);D&&D!=this&&!D.options.disabled&&(c.push([e.isFunction(D.options.items)?D.options.items.call(D.element[0],w,{item:this.currentItem}):e(D.options.items,D.element),D]),this.containers.push(D))}for(var p=c.length-1;p>=0;p--)for(var U=c[p][1],F=c[p][0],A=0,_=F.length;A<_;A++){var O=e(F[A]);O.data(this.widgetName+"-item",U),l.push({item:O,instance:U,width:0,height:0,left:0,top:0})}},refreshPositions:function(w){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var l=this.items.length-1;l>=0;l--){var c=this.items[l];if(!(c.instance!=this.currentContainer&&this.currentContainer&&c.item[0]!=this.currentItem[0])){var m=this.options.toleranceElement?e(this.options.toleranceElement,c.item):c.item;w||(c.width=m.outerWidth(),c.height=m.outerHeight());var p=m.offset();c.left=p.left,c.top=p.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var l=this.containers.length-1;l>=0;l--){var p=this.containers[l].element.offset();this.containers[l].containerCache.left=p.left,this.containers[l].containerCache.top=p.top,this.containers[l].containerCache.width=this.containers[l].element.outerWidth(),this.containers[l].containerCache.height=this.containers[l].element.outerHeight()}return this},_createPlaceholder:function(w){w=w||this;var l=w.options;if(!l.placeholder||l.placeholder.constructor==String){var c=l.placeholder;l.placeholder={element:function(){var m=e(document.createElement(w.currentItem[0].nodeName)).addClass(c||w.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return c||(m.style.visibility="hidden"),m},update:function(m,p){c&&!l.forcePlaceholderSize||(p.height()||p.height(w.currentItem.innerHeight()-parseInt(w.currentItem.css("paddingTop")||0,10)-parseInt(w.currentItem.css("paddingBottom")||0,10)),p.width()||p.width(w.currentItem.innerWidth()-parseInt(w.currentItem.css("paddingLeft")||0,10)-parseInt(w.currentItem.css("paddingRight")||0,10)))}}}w.placeholder=e(l.placeholder.element.call(w.element,w.currentItem)),w.currentItem.after(w.placeholder),l.placeholder.update(w,w.placeholder)},_contactContainers:function(w){for(var l=null,c=null,m=this.containers.length-1;m>=0;m--)if(!e.contains(this.currentItem[0],this.containers[m].element[0]))if(this._intersectsWith(this.containers[m].containerCache)){if(l&&e.contains(this.containers[m].element[0],l.element[0]))continue;l=this.containers[m],c=m}else this.containers[m].containerCache.over&&(this.containers[m]._trigger("out",w,this._uiHash(this)),this.containers[m].containerCache.over=0);if(l)if(this.containers.length===1)this.containers[c]._trigger("over",w,this._uiHash(this)),this.containers[c].containerCache.over=1;else{for(var p=1e4,T=null,A=this.containers[c].floating?"left":"top",D=this.containers[c].floating?"width":"height",U=this.positionAbs[A]+this.offset.click[A],F=this.items.length-1;F>=0;F--)if(e.contains(this.containers[c].element[0],this.items[F].item[0])&&this.items[F].item[0]!=this.currentItem[0]){var _=this.items[F].item.offset()[A],O=!1;Math.abs(_-U)>Math.abs(_+this.items[F][D]-U)&&(O=!0,_+=this.items[F][D]),Math.abs(_-U)<p&&(p=Math.abs(_-U),T=this.items[F],this.direction=O?"up":"down")}if(!T&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[c],T?this._rearrange(w,T,null,!0):this._rearrange(w,null,this.containers[c].element,!0),this._trigger("change",w,this._uiHash()),this.containers[c]._trigger("change",w,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[c]._trigger("over",w,this._uiHash(this)),this.containers[c].containerCache.over=1}},_createHelper:function(w){var l=this.options,c=e.isFunction(l.helper)?e(l.helper.apply(this.element[0],[w,this.currentItem])):l.helper=="clone"?this.currentItem.clone():this.currentItem;return c.parents("body").length||e(l.appendTo!="parent"?l.appendTo:this.currentItem[0].parentNode)[0].appendChild(c[0]),c[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(c[0].style.width==""||l.forceHelperSize)&&c.width(this.currentItem.width()),(c[0].style.height==""||l.forceHelperSize)&&c.height(this.currentItem.height()),c},_adjustOffsetFromHelper:function(w){typeof w=="string"&&(w=w.split(" ")),e.isArray(w)&&(w={left:+w[0],top:+w[1]||0}),"left"in w&&(this.offset.click.left=w.left+this.margins.left),"right"in w&&(this.offset.click.left=this.helperProportions.width-w.right+this.margins.left),"top"in w&&(this.offset.click.top=w.top+this.margins.top),"bottom"in w&&(this.offset.click.top=this.helperProportions.height-w.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var w=this.offsetParent.offset();return this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(w.left+=this.scrollParent.scrollLeft(),w.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.ui.ie)&&(w={top:0,left:0}),{top:w.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:w.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var w=this.currentItem.position();return{top:w.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:w.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var w=this.options;if(w.containment=="parent"&&(w.containment=this.helper[0].parentNode),(w.containment=="document"||w.containment=="window")&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(w.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(w.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(w.containment)){var l=e(w.containment)[0],c=e(w.containment).offset(),m=e(l).css("overflow")!="hidden";this.containment=[c.left+(parseInt(e(l).css("borderLeftWidth"),10)||0)+(parseInt(e(l).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(e(l).css("borderTopWidth"),10)||0)+(parseInt(e(l).css("paddingTop"),10)||0)-this.margins.top,c.left+(m?Math.max(l.scrollWidth,l.offsetWidth):l.offsetWidth)-(parseInt(e(l).css("borderLeftWidth"),10)||0)-(parseInt(e(l).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(m?Math.max(l.scrollHeight,l.offsetHeight):l.offsetHeight)-(parseInt(e(l).css("borderTopWidth"),10)||0)-(parseInt(e(l).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(w,l){l||(l=this.position);var c=w=="absolute"?1:-1,m=this.options,p=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,T=/(html|body)/i.test(p[0].tagName);return{top:l.top+this.offset.relative.top*c+this.offset.parent.top*c-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():T?0:p.scrollTop())*c,left:l.left+this.offset.relative.left*c+this.offset.parent.left*c-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():T?0:p.scrollLeft())*c}},_generatePosition:function(w){var l=this.options,c=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,m=/(html|body)/i.test(c[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var p=w.pageX,T=w.pageY;if(this.originalPosition&&(this.containment&&(w.pageX-this.offset.click.left<this.containment[0]&&(p=this.containment[0]+this.offset.click.left),w.pageY-this.offset.click.top<this.containment[1]&&(T=this.containment[1]+this.offset.click.top),w.pageX-this.offset.click.left>this.containment[2]&&(p=this.containment[2]+this.offset.click.left),w.pageY-this.offset.click.top>this.containment[3]&&(T=this.containment[3]+this.offset.click.top)),l.grid)){var A=this.originalPageY+Math.round((T-this.originalPageY)/l.grid[1])*l.grid[1];T=this.containment&&(A-this.offset.click.top<this.containment[1]||A-this.offset.click.top>this.containment[3])?A-this.offset.click.top<this.containment[1]?A+l.grid[1]:A-l.grid[1]:A;var D=this.originalPageX+Math.round((p-this.originalPageX)/l.grid[0])*l.grid[0];p=this.containment&&(D-this.offset.click.left<this.containment[0]||D-this.offset.click.left>this.containment[2])?D-this.offset.click.left<this.containment[0]?D+l.grid[0]:D-l.grid[0]:D}return{top:T-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():m?0:c.scrollTop()),left:p-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():m?0:c.scrollLeft())}},_rearrange:function(w,l,c,m){c?c[0].appendChild(this.placeholder[0]):l.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?l.item[0]:l.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var p=this.counter;this._delay(function(){p==this.counter&&this.refreshPositions(!m)})},_clear:function(w,l){this.reverting=!1;var c=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var m in this._storedCSS)(this._storedCSS[m]=="auto"||this._storedCSS[m]=="static")&&(this._storedCSS[m]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!l&&c.push(function(p){this._trigger("receive",p,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!l&&c.push(function(p){this._trigger("update",p,this._uiHash())}),this!==this.currentContainer&&(l||(c.push(function(p){this._trigger("remove",p,this._uiHash())}),c.push(function(p){return function(T){p._trigger("receive",T,this._uiHash(this))}}.call(this,this.currentContainer)),c.push(function(p){return function(T){p._trigger("update",T,this._uiHash(this))}}.call(this,this.currentContainer))));for(var m=this.containers.length-1;m>=0;m--)l||c.push(function(T){return function(A){T._trigger("deactivate",A,this._uiHash(this))}}.call(this,this.containers[m])),this.containers[m].containerCache.over&&(c.push(function(T){return function(A){T._trigger("out",A,this._uiHash(this))}}.call(this,this.containers[m])),this.containers[m].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!l){this._trigger("beforeStop",w,this._uiHash());for(var m=0;m<c.length;m++)c[m].call(this,w);this._trigger("stop",w,this._uiHash())}return this.fromOutside=!1,!1}if(l||this._trigger("beforeStop",w,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!l){for(var m=0;m<c.length;m++)c[m].call(this,w);this._trigger("stop",w,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(w){var l=w||this;return{helper:l.helper,placeholder:l.placeholder||e([]),position:l.position,originalPosition:l.originalPosition,offset:l.positionAbs,item:l.currentItem,sender:w?w.element:null}}})})(jQuery),(function(e,n){var w=0;e.widget("ui.autocomplete",{version:"1.9.2",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var l,c,m;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(p){if(this.element.prop("readOnly")){l=!0,m=!0,c=!0;return}l=!1,m=!1,c=!1;var T=e.ui.keyCode;switch(p.keyCode){case T.PAGE_UP:l=!0,this._move("previousPage",p);break;case T.PAGE_DOWN:l=!0,this._move("nextPage",p);break;case T.UP:l=!0,this._keyEvent("previous",p);break;case T.DOWN:l=!0,this._keyEvent("next",p);break;case T.ENTER:case T.NUMPAD_ENTER:this.menu.active&&(l=!0,p.preventDefault(),this.menu.select(p));break;case T.TAB:this.menu.active&&this.menu.select(p);break;case T.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(p),p.preventDefault());break;default:c=!0,this._searchTimeout(p)}},keypress:function(p){if(l){l=!1,p.preventDefault();return}if(!c){var T=e.ui.keyCode;switch(p.keyCode){case T.PAGE_UP:this._move("previousPage",p);break;case T.PAGE_DOWN:this._move("nextPage",p);break;case T.UP:this._keyEvent("previous",p);break;case T.DOWN:this._keyEvent("next",p)}}},input:function(p){if(m){m=!1,p.preventDefault();return}this._searchTimeout(p)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(p){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(p),this._change(p)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(p){p.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var T=this.menu.element[0];e(p.target).closest(".ui-menu-item").length||this._delay(function(){var A=this;this.document.one("mousedown",function(D){D.target!==A.element[0]&&D.target!==T&&!e.contains(T,D.target)&&A.close()})})},menufocus:function(p,T){if(this.isNewMenu&&(this.isNewMenu=!1,p.originalEvent&&/^mouse/.test(p.originalEvent.type))){this.menu.blur(),this.document.one("mousemove",function(){e(p.target).trigger(p.originalEvent)});return}var A=T.item.data("ui-autocomplete-item")||T.item.data("item.autocomplete");this._trigger("focus",p,{item:A})!==!1?p.originalEvent&&/^key/.test(p.originalEvent.type)&&this._value(A.value):this.liveRegion.text(A.value)},menuselect:function(p,T){var A=T.item.data("ui-autocomplete-item")||T.item.data("item.autocomplete"),D=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=D,this._delay(function(){this.previous=D,this.selectedItem=A})),this._trigger("select",p,{item:A})!==!1&&this._value(A.value),this.term=this._value(),this.close(p),this.selectedItem=A}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),e.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(l,c){this._super(l,c),l==="source"&&this._initSource(),l==="appendTo"&&this.menu.element.appendTo(this.document.find(c||"body")[0]),l==="disabled"&&c&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var l,c,m=this;e.isArray(this.options.source)?(l=this.options.source,this.source=function(p,T){T(e.ui.autocomplete.filter(l,p.term))}):typeof this.options.source=="string"?(c=this.options.source,this.source=function(p,T){m.xhr&&m.xhr.abort(),m.xhr=e.ajax({url:c,data:p,dataType:"json",success:function(A){T(A)},error:function(){T([])}})}):this.source=this.options.source},_searchTimeout:function(l){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,l))},this.options.delay)},search:function(l,c){if(l=l!=null?l:this._value(),this.term=this._value(),l.length<this.options.minLength)return this.close(c);if(this._trigger("search",c)!==!1)return this._search(l)},_search:function(l){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:l},this._response())},_response:function(){var l=this,c=++w;return function(m){c===w&&l.__response(m),l.pending--,l.pending||l.element.removeClass("ui-autocomplete-loading")}},__response:function(l){l&&(l=this._normalize(l)),this._trigger("response",null,{content:l}),!this.options.disabled&&l&&l.length&&!this.cancelSearch?(this._suggest(l),this._trigger("open")):this._close()},close:function(l){this.cancelSearch=!0,this._close(l)},_close:function(l){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",l))},_change:function(l){this.previous!==this._value()&&this._trigger("change",l,{item:this.selectedItem})},_normalize:function(l){return l.length&&l[0].label&&l[0].value?l:e.map(l,function(c){return typeof c=="string"?{label:c,value:c}:e.extend({label:c.label||c.value,value:c.value||c.label},c)})},_suggest:function(l){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,l),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var l=this.menu.element;l.outerWidth(Math.max(l.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(l,c){var m=this;e.each(c,function(p,T){m._renderItemData(l,T)})},_renderItemData:function(l,c){return this._renderItem(l,c).data("ui-autocomplete-item",c)},_renderItem:function(l,c){return e("<li>").append(e("<a>").text(c.label)).appendTo(l)},_move:function(l,c){if(!this.menu.element.is(":visible")){this.search(null,c);return}if(this.menu.isFirstItem()&&/^previous/.test(l)||this.menu.isLastItem()&&/^next/.test(l)){this._value(this.term),this.menu.blur();return}this.menu[l](c)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(l,c){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(l,c),c.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(l){return l.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(l,c){var m=new RegExp(e.ui.autocomplete.escapeRegex(c),"i");return e.grep(l,function(p){return m.test(p.label||p.value||p)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(l){return l+(l>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(l){var c;this._superApply(arguments),!(this.options.disabled||this.cancelSearch)&&(l&&l.length?c=this.options.messages.results(l.length):c=this.options.messages.noResults,this.liveRegion.text(c))}})})(jQuery),(function(e,n){var w=!1;e.widget("ui.menu",{version:"1.9.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(l){this.options.disabled&&l.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(l){l.preventDefault()},"click .ui-state-disabled > a":function(l){l.preventDefault()},"click .ui-menu-item:has(a)":function(l){var c=e(l.target).closest(".ui-menu-item");!w&&c.not(".ui-state-disabled").length&&(w=!0,this.select(l),c.has(".ui-menu").length?this.expand(l):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(l){var c=e(l.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(l,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(l,c){var m=this.active||this.element.children(".ui-menu-item").eq(0);c||this.focus(l,m)},blur:function(l){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(l)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(l){e(l.target).closest(".ui-menu").length||this.collapseAll(l),w=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var l=e(this);l.data("ui-menu-submenu-carat")&&l.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(l){function c(F){return F.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var m,p,T,A,D,U=!0;switch(l.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(l);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(l);break;case e.ui.keyCode.HOME:this._move("first","first",l);break;case e.ui.keyCode.END:this._move("last","last",l);break;case e.ui.keyCode.UP:this.previous(l);break;case e.ui.keyCode.DOWN:this.next(l);break;case e.ui.keyCode.LEFT:this.collapse(l);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(l);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(l);break;case e.ui.keyCode.ESCAPE:this.collapse(l);break;default:U=!1,p=this.previousFilter||"",T=String.fromCharCode(l.keyCode),A=!1,clearTimeout(this.filterTimer),T===p?A=!0:T=p+T,D=new RegExp("^"+c(T),"i"),m=this.activeMenu.children(".ui-menu-item").filter(function(){return D.test(e(this).children("a").text())}),m=A&&m.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):m,m.length||(T=String.fromCharCode(l.keyCode),D=new RegExp("^"+c(T),"i"),m=this.activeMenu.children(".ui-menu-item").filter(function(){return D.test(e(this).children("a").text())})),m.length?(this.focus(l,m),m.length>1?(this.previousFilter=T,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}U&&l.preventDefault()},_activate:function(l){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(l):this.select(l))},refresh:function(){var l,c=this.options.icons.submenu,m=this.element.find(this.options.menus);m.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var p=e(this),T=p.prev("a"),A=e("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);T.attr("aria-haspopup","true").prepend(A),p.attr("aria-labelledby",T.attr("id"))}),l=m.add(this.element),l.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),l.children(":not(.ui-menu-item)").each(function(){var p=e(this);/[^\-\s]/.test(p.text())||p.addClass("ui-widget-content ui-menu-divider")}),l.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(l,c){var m,p;this.blur(l,l&&l.type==="focus"),this._scrollIntoView(c),this.active=c.first(),p=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",p.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),l&&l.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),m=c.children(".ui-menu"),m.length&&/^mouse/.test(l.type)&&this._startOpening(m),this.activeMenu=c.parent(),this._trigger("focus",l,{item:c})},_scrollIntoView:function(l){var c,m,p,T,A,D;this._hasScroll()&&(c=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,m=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,p=l.offset().top-this.activeMenu.offset().top-c-m,T=this.activeMenu.scrollTop(),A=this.activeMenu.height(),D=l.height(),p<0?this.activeMenu.scrollTop(T+p):p+D>A&&this.activeMenu.scrollTop(T+p-A+D))},blur:function(l,c){c||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",l,{item:this.active}))},_startOpening:function(l){clearTimeout(this.timer),l.attr("aria-hidden")==="true"&&(this.timer=this._delay(function(){this._close(),this._open(l)},this.delay))},_open:function(l){var c=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(l.parents(".ui-menu")).hide().attr("aria-hidden","true"),l.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(l,c){clearTimeout(this.timer),this.timer=this._delay(function(){var m=c?this.element:e(l&&l.target).closest(this.element.find(".ui-menu"));m.length||(m=this.element),this._close(m),this.blur(l),this.activeMenu=m},this.delay)},_close:function(l){l||(l=this.active?this.active.parent():this.element),l.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(l){var c=this.active&&this.active.parent().closest(".ui-menu-item",this.element);c&&c.length&&(this._close(),this.focus(l,c))},expand:function(l){var c=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();c&&c.length&&(this._open(c.parent()),this._delay(function(){this.focus(l,c)}))},next:function(l){this._move("next","first",l)},previous:function(l){this._move("prev","last",l)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(l,c,m){var p;this.active&&(l==="first"||l==="last"?p=this.active[l==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):p=this.active[l+"All"](".ui-menu-item").eq(0)),(!p||!p.length||!this.active)&&(p=this.activeMenu.children(".ui-menu-item")[c]()),this.focus(m,p)},nextPage:function(l){var c,m,p;if(!this.active){this.next(l);return}this.isLastItem()||(this._hasScroll()?(m=this.active.offset().top,p=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return c=e(this),c.offset().top-m-p<0}),this.focus(l,c)):this.focus(l,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))},previousPage:function(l){var c,m,p;if(!this.active){this.next(l);return}this.isFirstItem()||(this._hasScroll()?(m=this.active.offset().top,p=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return c=e(this),c.offset().top-m+p>0}),this.focus(l,c)):this.focus(l,this.activeMenu.children(".ui-menu-item").first()))},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(l){this.active=this.active||e(l.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(l,!0),this._trigger("select",l,c)}})})(jQuery),(function(e,n){var w=5;e.widget("ui.slider",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var l,c,m=this.options,p=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),T="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",A=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(m.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),m.range&&(m.range===!0&&(m.values||(m.values=[this._valueMin(),this._valueMin()]),m.values.length&&m.values.length!==2&&(m.values=[m.values[0],m.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(m.range==="min"||m.range==="max"?" ui-slider-range-"+m.range:""))),c=m.values&&m.values.length||1,l=p.length;l<c;l++)A.push(T);this.handles=p.add(e(A.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(D){D.preventDefault()}).mouseenter(function(){m.disabled||e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).focus(function(){m.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(D){e(this).data("ui-slider-handle-index",D)}),this._on(this.handles,{keydown:function(D){var U,F,_,O,v=e(D.target).data("ui-slider-handle-index");switch(D.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(D.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(D.target).addClass("ui-state-active"),U=this._start(D,v),U===!1))return}switch(O=this.options.step,this.options.values&&this.options.values.length?F=_=this.values(v):F=_=this.value(),D.keyCode){case e.ui.keyCode.HOME:_=this._valueMin();break;case e.ui.keyCode.END:_=this._valueMax();break;case e.ui.keyCode.PAGE_UP:_=this._trimAlignValue(F+(this._valueMax()-this._valueMin())/w);break;case e.ui.keyCode.PAGE_DOWN:_=this._trimAlignValue(F-(this._valueMax()-this._valueMin())/w);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(F===this._valueMax())return;_=this._trimAlignValue(F+O);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(F===this._valueMin())return;_=this._trimAlignValue(F-O)}this._slide(D,v,_)},keyup:function(D){var U=e(D.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(D,U),this._change(D,U),e(D.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(l){var c,m,p,T,A,D,U,F,_=this,O=this.options;return O.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:l.pageX,y:l.pageY},m=this._normValueFromMouse(c),p=this._valueMax()-this._valueMin()+1,this.handles.each(function(v){var h=Math.abs(m-_.values(v));p>h&&(p=h,T=e(this),A=v)}),O.range===!0&&this.values(1)===O.min&&(A+=1,T=e(this.handles[A])),D=this._start(l,A),D===!1?!1:(this._mouseSliding=!0,this._handleIndex=A,T.addClass("ui-state-active").focus(),U=T.offset(),F=!e(l.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=F?{left:0,top:0}:{left:l.pageX-U.left-T.width()/2,top:l.pageY-U.top-T.height()/2-(parseInt(T.css("borderTopWidth"),10)||0)-(parseInt(T.css("borderBottomWidth"),10)||0)+(parseInt(T.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(l,A,m),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(l){var c={x:l.pageX,y:l.pageY},m=this._normValueFromMouse(c);return this._slide(l,this._handleIndex,m),!1},_mouseStop:function(l){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(l,this._handleIndex),this._change(l,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(l){var c,m,p,T,A;return this.orientation==="horizontal"?(c=this.elementSize.width,m=l.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(c=this.elementSize.height,m=l.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),p=m/c,p>1&&(p=1),p<0&&(p=0),this.orientation==="vertical"&&(p=1-p),T=this._valueMax()-this._valueMin(),A=this._valueMin()+p*T,this._trimAlignValue(A)},_start:function(l,c){var m={handle:this.handles[c],value:this.value()};return this.options.values&&this.options.values.length&&(m.value=this.values(c),m.values=this.values()),this._trigger("start",l,m)},_slide:function(l,c,m){var p,T,A;this.options.values&&this.options.values.length?(p=this.values(c?0:1),this.options.values.length===2&&this.options.range===!0&&(c===0&&m>p||c===1&&m<p)&&(m=p),m!==this.values(c)&&(T=this.values(),T[c]=m,A=this._trigger("slide",l,{handle:this.handles[c],value:m,values:T}),p=this.values(c?0:1),A!==!1&&this.values(c,m,!0))):m!==this.value()&&(A=this._trigger("slide",l,{handle:this.handles[c],value:m}),A!==!1&&this.value(m))},_stop:function(l,c){var m={handle:this.handles[c],value:this.value()};this.options.values&&this.options.values.length&&(m.value=this.values(c),m.values=this.values()),this._trigger("stop",l,m)},_change:function(l,c){if(!this._keySliding&&!this._mouseSliding){var m={handle:this.handles[c],value:this.value()};this.options.values&&this.options.values.length&&(m.value=this.values(c),m.values=this.values()),this._trigger("change",l,m)}},value:function(l){if(arguments.length){this.options.value=this._trimAlignValue(l),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(l,c){var m,p,T;if(arguments.length>1){this.options.values[l]=this._trimAlignValue(c),this._refreshValue(),this._change(null,l);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(l):this.value();for(m=this.options.values,p=arguments[0],T=0;T<m.length;T+=1)m[T]=this._trimAlignValue(p[T]),this._change(null,T);this._refreshValue()},_setOption:function(l,c){var m,p=0;switch(e.isArray(this.options.values)&&(p=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),l){case"disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),m=0;m<p;m+=1)this._change(null,m);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var l=this.options.value;return l=this._trimAlignValue(l),l},_values:function(l){var c,m,p;if(arguments.length)return c=this.options.values[l],c=this._trimAlignValue(c),c;for(m=this.options.values.slice(),p=0;p<m.length;p+=1)m[p]=this._trimAlignValue(m[p]);return m},_trimAlignValue:function(l){if(l<=this._valueMin())return this._valueMin();if(l>=this._valueMax())return this._valueMax();var c=this.options.step>0?this.options.step:1,m=(l-this._valueMin())%c,p=l-m;return Math.abs(m)*2>=c&&(p+=m>0?c:-c),parseFloat(p.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var l,c,m,p,T,A=this.options.range,D=this.options,U=this,F=this._animateOff?!1:D.animate,_={};this.options.values&&this.options.values.length?this.handles.each(function(O){c=(U.values(O)-U._valueMin())/(U._valueMax()-U._valueMin())*100,_[U.orientation==="horizontal"?"left":"bottom"]=c+"%",e(this).stop(1,1)[F?"animate":"css"](_,D.animate),U.options.range===!0&&(U.orientation==="horizontal"?(O===0&&U.range.stop(1,1)[F?"animate":"css"]({left:c+"%"},D.animate),O===1&&U.range[F?"animate":"css"]({width:c-l+"%"},{queue:!1,duration:D.animate})):(O===0&&U.range.stop(1,1)[F?"animate":"css"]({bottom:c+"%"},D.animate),O===1&&U.range[F?"animate":"css"]({height:c-l+"%"},{queue:!1,duration:D.animate}))),l=c}):(m=this.value(),p=this._valueMin(),T=this._valueMax(),c=T!==p?(m-p)/(T-p)*100:0,_[this.orientation==="horizontal"?"left":"bottom"]=c+"%",this.handle.stop(1,1)[F?"animate":"css"](_,D.animate),A==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[F?"animate":"css"]({width:c+"%"},D.animate),A==="max"&&this.orientation==="horizontal"&&this.range[F?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:D.animate}),A==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[F?"animate":"css"]({height:c+"%"},D.animate),A==="max"&&this.orientation==="vertical"&&this.range[F?"animate":"css"]({height:100-c+"%"},{queue:!1,duration:D.animate}))}})})(jQuery);/*! Copyright (c) 2010 Brandon Aaron (http://brandonaaron.net)
* Licensed under the MIT License.
*
* Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
* Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
* Thanks to: Seamus Leahy for adding deltaX and deltaY
*
* Version: 3.0.4
*
* Requires: 1.2.2+
*/(function(e){function n(l){var c=l||window.event,m=[].slice.call(arguments,1),p=0,T=0,A=0;return l=e.event.fix(c),l.type="mousewheel",l.wheelDelta&&(p=l.wheelDelta/120),l.detail&&(p=-l.detail/3),A=p,c.axis!==void 0&&c.axis===c.HORIZONTAL_AXIS&&(A=0,T=-1*p),c.wheelDeltaY!==void 0&&(A=c.wheelDeltaY/120),c.wheelDeltaX!==void 0&&(T=-1*c.wheelDeltaX/120),m.unshift(l,p,T,A),e.event.handle.apply(this,m)}var w=["DOMMouseScroll","mousewheel"];e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var l=w.length;l;)this.addEventListener(w[--l],n,!1);else this.onmousewheel=n},teardown:function(){if(this.removeEventListener)for(var l=w.length;l;)this.removeEventListener(w[--l],n,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(l){return l?this.bind("mousewheel",l):this.trigger("mousewheel")},unmousewheel:function(l){return this.unbind("mousewheel",l)}})})(jQuery),eval((function(e,n,w,l,c,m){if(c=function(p){return(p<n?"":c(parseInt(p/n)))+((p=p%n)>35?String.fromCharCode(p+29):p.toString(36))},!"".replace(/^/,String)){for(;w--;)m[c(w)]=l[w]||c(w);l=[function(p){return m[p]}],c=function(){return"\\w+"},w=1}for(;w--;)l[w]&&(e=e.replace(new RegExp("\\b"+c(w)+"\\b","g"),l[w]));return e})(`(D($){8($.1s.1v){H}$.1s.6i=$.1s.1v=D(u,w){8(1l.S==0){18(J,'6j 55 6k 1j "'+1l.4o+'".');H 1l}8(1l.S>1){H 1l.1W(D(){$(1l).1v(u,w)})}F y=1l,$12=1l[0],56=L;8(y.1q('57')){56=y.1P('3o','4p');y.T('3o',['4q',J])}F z={};z.59=D(o,a,b){o=3S($12,o);o.E=6l($12,o.E);o.1K=6m($12,o.1K);o.N=6n($12,o.N);o.14=5a($12,o.14);o.16=5a($12,o.16);o.1b=6o($12,o.1b);o.1r=6p($12,o.1r);o.1Q=6q($12,o.1Q);8(a){31=$.1L(J,{},$.1s.1v.5b,o)}7=$.1L(J,{},$.1s.1v.5b,o);7.d=6r(7);A.2l=(7.2l=='5c'||7.2l=='1m')?'16':'14';F c=y.13(),2m=5d($1n,7,'P');8(3p(7.25)){7.25='7Q'+G.3T}7.3U=5e(7,2m);7.E=6s(7.E,7,c,b);7[7.d['P']]=6t(7[7.d['P']],7,c);7[7.d['1e']]=6u(7[7.d['1e']],7,c);8(7.2H){8(!3V(7[7.d['P']])){7[7.d['P']]='2I%'}}8(3V(7[7.d['P']])){A.6v=J;A.4r=7[7.d['P']];7[7.d['P']]=4s(2m,A.4r);8(!7.E.M){7.E.U.1d=J}}8(7.2H){7.1R=L;7.1i=[0,0,0,0];7.1B=L;7.E.U.1d=L}O{8(!7.E.M){7=6w(7,2m)}8(!7[7.d['P']]){8(!7.E.U.1d&&Y(7.E[7.d['P']])&&7.E.1t=='*'){7[7.d['P']]=7.E.M*7.E[7.d['P']];7.1B=L}O{7[7.d['P']]='1d'}}8(1z(7.1B)){7.1B=(Y(7[7.d['P']]))?'5f':L}8(7.E.U.1d){7.E.M=32(c,7,0)}}8(7.E.1t!='*'&&!7.E.U.1d){7.E.U.4t=7.E.M;7.E.M=3W(c,7,0)}7.E.M=2x(7.E.M,7,7.E.U.2c,$12);7.E.U.20=7.E.M;8(7.2H){8(!7.E.U.34){7.E.U.34=7.E.M}8(!7.E.U.1X){7.E.U.1X=7.E.M}7=5g(7,c,2m)}O{7.1i=6x(7.1i);8(7.1B=='3q'){7.1B='1m'}O 8(7.1B=='5h'){7.1B='35'}1F(7.1B){R'5f':R'1m':R'35':8(7[7.d['P']]!='1d'){7=5i(7,c);7.1R=J}17;2J:7.1B=L;7.1R=(7.1i[0]==0&&7.1i[1]==0&&7.1i[2]==0&&7.1i[3]==0)?L:J;17}}8(!Y(7.1K.1M)){7.1K.1M=6y}8(1z(7.1K.E)){7.1K.E=(7.2H||7.E.U.1d||7.E.1t!='*')?'M':7.E.M}7.N=$.1L(J,{},7.1K,7.N);7.14=$.1L(J,{},7.1K,7.14);7.16=$.1L(J,{},7.1K,7.16);7.1b=$.1L(J,{},7.1K,7.1b);7.N=6z($12,7.N);7.14=5j($12,7.14);7.16=5j($12,7.16);7.1b=6A($12,7.1b);7.1r=6B($12,7.1r);7.1Q=6C($12,7.1Q);8(7.2n){7.2n=5k(7.2n)}8(7.N.5l){7.N.4u=7.N.5l;3X('N.5l','N.4u')}8(7.N.5m){7.N.4v=7.N.5m;3X('N.5m','N.4v')}8(7.N.5n){7.N.4w=7.N.5n;3X('N.5n','N.4w')}8(7.N.5o){7.N.2K=7.N.5o;3X('N.5o','N.2K')}};z.6D=D(){y.1q('57',J);F a=y.13(),3Y=6E(y,['6F','6G','3r','3q','35','5h','1m','3Z','P','1e','6H','1S','5p','6I']),5q='7R';1F(3Y.3r){R'6J':R'7S':5q=3Y.3r;17}8(G.3s=='36'){41($1n)}O{$1n.Z(3Y)}$1n.Z({'7T':'3t','3r':5q});41(y);y.1q('6K',3Y.3Z);y.Z({'6F':'1m','6G':'42','3r':'6J','3q':0,'35':'N','5h':'N','1m':0,'6H':0,'1S':0,'5p':0,'6I':0});4x(a,7);41(a);8(7.2H){5r(7,a)}};z.6L=D(){z.5s();y.11(I('6M',G),D(e,a){e.1g();8(!A.2d){8(7.N.W){7.N.W.3a(2y('4y',G))}}A.2d=J;8(7.N.1G){7.N.1G=L;y.T(I('3b',G),a)}H J});y.11(I('5t',G),D(e){e.1g();8(A.26){43(V)}H J});y.11(I('3b',G),D(e,a,b){e.1g();1u=3u(1u);8(a&&A.26){V.2d=J;F c=2o()-V.2L;V.1M-=c;8(V.4z){V.4z.1M-=c}8(V.4A){V.4A.1M-=c}43(V,L)}8(!A.27&&!A.26){8(b){1u.3v+=2o()-1u.2L}}8(!A.27){8(7.N.W){7.N.W.3a(2y('6N',G))}}A.27=J;8(7.N.4v){F d=7.N.2K-1u.3v,3c=2I-1H.2z(d*2I/7.N.2K);7.N.4v.1h($12,3c,d)}H J});y.11(I('1G',G),D(e,b,c,d){e.1g();1u=3u(1u);F v=[b,c,d],t=['2M','28','3d'],a=3e(v,t);b=a[0];c=a[1];d=a[2];8(b!='14'&&b!='16'){b=A.2l}8(!Y(c)){c=0}8(!1k(d)){d=L}8(d){A.2d=L;7.N.1G=J}8(!7.N.1G){e.2e();H 18(G,'3w 4y: 2p 3f.')}8(A.27){8(7.N.W){7.N.W.2N(2y('4y',G));7.N.W.2N(2y('6N',G))}}A.27=L;1u.2L=2o();F f=7.N.2K+c;44=f-1u.3v;3c=2I-1H.2z(44*2I/f);8(7.N.1f){1u.1f=7U(D(){F a=2o()-1u.2L+1u.3v,3c=1H.2z(a*2I/f);7.N.1f.4B.1h(7.N.1f.2q[0],3c)},7.N.1f.5u)}1u.N=7V(D(){8(7.N.1f){7.N.1f.4B.1h(7.N.1f.2q[0],2I)}8(7.N.4w){7.N.4w.1h($12,3c,44)}8(A.26){y.T(I('1G',G),b)}O{y.T(I(b,G),7.N)}},44);8(7.N.4u){7.N.4u.1h($12,3c,44)}H J});y.11(I('3g',G),D(e){e.1g();8(V.2d){V.2d=L;A.27=L;A.26=J;V.2L=2o();3x(V,G)}O{y.T(I('1G',G))}H J});y.11(I('14',G)+' '+I('16',G),D(e,b,f,g,h){e.1g();8(A.2d||y.2f(':3t')){e.2e();H 18(G,'3w 4y 7W 3t: 2p 3f.')}F i=(Y(7.E.4C))?7.E.4C:7.E.M+1;8(i>K.Q){e.2e();H 18(G,'2p 6O E ('+K.Q+' Q, '+i+' 6P): 2p 3f.')}F v=[b,f,g,h],t=['2A','28/2M','D','3d'],a=3e(v,t);b=a[0];f=a[1];g=a[2];h=a[3];F k=e.5v.19(G.3y.45.S);8(!1T(b)){b={}}8(1o(g)){b.3h=g}8(1k(h)){b.2O=h}b=$.1L(J,{},7[k],b);8(b.5w&&!b.5w.1h($12,k)){e.2e();H 18(G,'7X "5w" 7Y L.')}8(!Y(f)){8(7.E.1t!='*'){f='M'}O{F m=[f,b.E,7[k].E];1j(F a=0,l=m.S;a<l;a++){8(Y(m[a])||m[a]=='6Q'||m[a]=='M'){f=m[a];17}}}1F(f){R'6Q':e.2e();H y.1P(I(k+'7Z',G),[b,g]);17;R'M':8(!7.E.U.1d&&7.E.1t=='*'){f=7.E.M}17}}8(V.2d){y.T(I('3g',G));y.T(I('2O',G),[k,[b,f,g]]);e.2e();H 18(G,'3w 80 3f.')}8(b.1M>0){8(A.26){8(b.2O){8(b.2O=='2P'){2g=[]}8(b.2O!='X'||2g.S==0){y.T(I('2O',G),[k,[b,f,g]])}}e.2e();H 18(G,'3w 81 3f.')}}1u.3v=0;y.T(I('6R'+k,G),[b,f]);8(7.2n){F s=7.2n,c=[b,f];1j(F j=0,l=s.S;j<l;j++){F d=k;8(!s[j][2]){d=(d=='14')?'16':'14'}8(!s[j][1]){c[0]=s[j][0].1P('3o',['6S',d])}c[1]=f+s[j][3];s[j][0].T('3o',['6R'+d,c])}}H J});y.11(I('82',G),D(e,b,c){e.1g();F d=y.13();8(!7.1U){8(K.X==0){8(7.3z){y.T(I('16',G),K.Q-1)}H e.2e()}}1Y(d,7);8(!Y(c)){8(7.E.U.1d){c=4D(d,7,K.Q-1)}O 8(7.E.1t!='*'){F f=(Y(b.E))?b.E:5x(y,7);c=6T(d,7,K.Q-1,f)}O{c=7.E.M}c=4E(c,7,b.E,$12)}8(!7.1U){8(K.Q-c<K.X){c=K.Q-K.X}}7.E.U.20=7.E.M;8(7.E.U.1d){F g=2x(32(d,7,K.Q-c),7,7.E.U.2c,$12);8(7.E.M+c<=g&&c<K.Q){c++;g=2x(32(d,7,K.Q-c),7,7.E.U.2c,$12)}7.E.M=g}O 8(7.E.1t!='*'){F g=3W(d,7,K.Q-c);7.E.M=2x(g,7,7.E.U.2c,$12)}1Y(d,7,J);8(c==0){e.2e();H 18(G,'0 E 46 1K: 2p 3f.')}18(G,'6U '+c+' E 5y.');K.X+=c;2h(K.X>=K.Q){K.X-=K.Q}8(!7.1U){8(K.X==0&&b.4F){b.4F.1h($12,'14')}8(!7.3z){3A(7,K.X,G)}}y.13().19(K.Q-c,K.Q).83(y);8(K.Q<7.E.M+c){y.13().19(0,(7.E.M+c)-K.Q).4G(J).47(y)}F d=y.13(),3i=6V(d,7,c),2i=6W(d,7),1Z=d.1N(c-1),21=3i.2P(),2r=2i.2P();1Y(d,7);F h=0,2B=0;8(7.1B){F p=4H(2i,7);h=p[0];2B=p[1]}F i=(h<0)?7.1i[7.d[3]]:0;F j=L,2Q=$();8(7.E.M<c){2Q=d.19(7.E.U.20,c);8(b.1V=='6X'){F k=7.E[7.d['P']];j=2Q;1Z=2r;5z(j);7.E[7.d['P']]='1d'}}F l=L,3B=2R(d.19(0,c),7,'P'),2j=4I(4J(2i,7,J),7,!7.1R),3C=0,29={},4K={},2s={},2S={},4L={},2T={},5A={},2U=5B(b,7,c,3B);1F(b.1V){R'1I':R'1I-1w':3C=2R(d.19(0,7.E.M),7,'P');17}8(j){7.E[7.d['P']]=k}1Y(d,7,J);8(2B>=0){1Y(21,7,7.1i[7.d[1]])}8(h>=0){1Y(1Z,7,7.1i[7.d[3]])}8(7.1B){7.1i[7.d[1]]=2B;7.1i[7.d[3]]=h}2T[7.d['1m']]=-(3B-i);5A[7.d['1m']]=-(3C-i);4K[7.d['1m']]=2j[7.d['P']];F m=D(){},1O=D(){},1C=D(){},3D=D(){},2C=D(){},5C=D(){},1D=D(){},3E=D(){},1x=D(){},1y=D(){},1J=D(){};1F(b.1V){R'3j':R'1I':R'1I-1w':R'22':R'22-1w':l=y.4G(J).47($1n);17}1F(b.1V){R'3j':R'22':R'22-1w':l.13().19(0,c).2t();l.13().19(7.E.U.20).2t();17;R'1I':R'1I-1w':l.13().19(7.E.M).2t();l.Z(5A);17}y.Z(2T);V=48(2U,b.2u,G);29[7.d['1m']]=(7.1R)?7.1i[7.d[3]]:0;8(7[7.d['P']]=='1d'||7[7.d['1e']]=='1d'){m=D(){$1n.Z(2j)};1O=D(){V.1a.1c([$1n,2j])}}8(7.1R){8(2r.4M(1Z).S){2s[7.d['1S']]=1Z.1q('2a');8(h<0){1Z.Z(2s)}O{1D=D(){1Z.Z(2s)};3E=D(){V.1a.1c([1Z,2s])}}}1F(b.1V){R'1I':R'1I-1w':l.13().1N(c-1).Z(2s);17}8(2r.4M(21).S){2S[7.d['1S']]=21.1q('2a');1C=D(){21.Z(2S)};3D=D(){V.1a.1c([21,2S])}}8(2B>=0){4L[7.d['1S']]=2r.1q('2a')+7.1i[7.d[1]];2C=D(){2r.Z(4L)};5C=D(){V.1a.1c([2r,4L])}}}1J=D(){y.Z(29)};F n=7.E.M+c-K.Q;1y=D(){8(n>0){y.13().19(K.Q).2t();3i=$(y.13().19(K.Q-(7.E.M-n)).3F().6Y(y.13().19(0,n).3F()))}5D(j);8(7.1R){F a=y.13().1N(7.E.M+c-1);a.Z(7.d['1S'],a.1q('2a'))}};F o=5E(3i,2Q,2i,c,'14',2U,2j);1x=D(){5F(y,l,b);A.26=L;2b.3h=4a($12,b,'3h',o,2b);2g=5G(y,2g,G);8(!A.27){y.T(I('1G',G))}};A.26=J;1u=3u(1u);2b.3G=4a($12,b,'3G',o,2b);1F(b.1V){R'42':y.Z(29);m();1C();2C();1D();1J();1y();1x();17;R'1w':V.1a.1c([y,{'1E':0},D(){m();1C();2C();1D();1J();1y();V=48(2U,b.2u,G);V.1a.1c([y,{'1E':1},1x]);3x(V,G)}]);17;R'3j':y.Z({'1E':0});V.1a.1c([l,{'1E':0}]);V.1a.1c([y,{'1E':1},1x]);1O();1C();2C();1D();1J();1y();17;R'1I':V.1a.1c([l,29,D(){1C();2C();1D();1J();1y();1x()}]);1O();17;R'1I-1w':V.1a.1c([y,{'1E':0}]);V.1a.1c([l,29,D(){y.Z({'1E':1});1C();2C();1D();1J();1y();1x()}]);1O();17;R'22':V.1a.1c([l,4K,1x]);1O();1C();2C();1D();1J();1y();17;R'22-1w':y.Z({'1E':0});V.1a.1c([y,{'1E':1}]);V.1a.1c([l,4K,1x]);1O();1C();2C();1D();1J();1y();17;2J:V.1a.1c([y,29,D(){1y();1x()}]);1O();3D();5C();3E();17}3x(V,G);5H(7.25,y,G);y.T(I('3H',G),[L,2j]);H J});y.11(I('84',G),D(e,c,d){e.1g();F f=y.13();8(!7.1U){8(K.X==7.E.M){8(7.3z){y.T(I('14',G),K.Q-1)}H e.2e()}}1Y(f,7);8(!Y(d)){8(7.E.1t!='*'){F g=(Y(c.E))?c.E:5x(y,7);d=6Z(f,7,0,g)}O{d=7.E.M}d=4E(d,7,c.E,$12)}F h=(K.X==0)?K.Q:K.X;8(!7.1U){8(7.E.U.1d){F i=32(f,7,d),g=4D(f,7,h-1)}O{F i=7.E.M,g=7.E.M}8(d+i>h){d=h-g}}7.E.U.20=7.E.M;8(7.E.U.1d){F i=2x(5I(f,7,d,h),7,7.E.U.2c,$12);2h(7.E.M-d>=i&&d<K.Q){d++;i=2x(5I(f,7,d,h),7,7.E.U.2c,$12)}7.E.M=i}O 8(7.E.1t!='*'){F i=3W(f,7,d);7.E.M=2x(i,7,7.E.U.2c,$12)}1Y(f,7,J);8(d==0){e.2e();H 18(G,'0 E 46 1K: 2p 3f.')}18(G,'6U '+d+' E 70.');K.X-=d;2h(K.X<0){K.X+=K.Q}8(!7.1U){8(K.X==7.E.M&&c.4F){c.4F.1h($12,'16')}8(!7.3z){3A(7,K.X,G)}}8(K.Q<7.E.M+d){y.13().19(0,(7.E.M+d)-K.Q).4G(J).47(y)}F f=y.13(),3i=71(f,7),2i=72(f,7,d),1Z=f.1N(d-1),21=3i.2P(),2r=2i.2P();1Y(f,7);F j=0,2B=0;8(7.1B){F p=4H(2i,7);j=p[0];2B=p[1]}F k=L,2Q=$();8(7.E.U.20<d){2Q=f.19(7.E.U.20,d);8(c.1V=='6X'){F l=7.E[7.d['P']];k=2Q;1Z=21;5z(k);7.E[7.d['P']]='1d'}}F m=L,3B=2R(f.19(0,d),7,'P'),2j=4I(4J(2i,7,J),7,!7.1R),3C=0,29={},4N={},2s={},2S={},2T={},2U=5B(c,7,d,3B);1F(c.1V){R'22':R'22-1w':3C=2R(f.19(0,7.E.U.20),7,'P');17}8(k){7.E[7.d['P']]=l}8(7.1B){8(7.1i[7.d[1]]<0){7.1i[7.d[1]]=0}}1Y(f,7,J);1Y(21,7,7.1i[7.d[1]]);8(7.1B){7.1i[7.d[1]]=2B;7.1i[7.d[3]]=j}2T[7.d['1m']]=(7.1R)?7.1i[7.d[3]]:0;F n=D(){},1O=D(){},1C=D(){},3D=D(){},1D=D(){},3E=D(){},1x=D(){},1y=D(){},1J=D(){};1F(c.1V){R'3j':R'1I':R'1I-1w':R'22':R'22-1w':m=y.4G(J).47($1n);m.13().19(7.E.U.20).2t();17}1F(c.1V){R'3j':R'1I':R'1I-1w':y.Z('3Z',1);m.Z('3Z',0);17}V=48(2U,c.2u,G);29[7.d['1m']]=-3B;4N[7.d['1m']]=-3C;8(j<0){29[7.d['1m']]+=j}8(7[7.d['P']]=='1d'||7[7.d['1e']]=='1d'){n=D(){$1n.Z(2j)};1O=D(){V.1a.1c([$1n,2j])}}8(7.1R){F o=2r.1q('2a');8(2B>=0){o+=7.1i[7.d[1]]}2r.Z(7.d['1S'],o);8(1Z.4M(21).S){2S[7.d['1S']]=21.1q('2a')}1C=D(){21.Z(2S)};3D=D(){V.1a.1c([21,2S])};F q=1Z.1q('2a');8(j>0){q+=7.1i[7.d[3]]}2s[7.d['1S']]=q;1D=D(){1Z.Z(2s)};3E=D(){V.1a.1c([1Z,2s])}}1J=D(){y.Z(2T)};F r=7.E.M+d-K.Q;1y=D(){8(r>0){y.13().19(K.Q).2t()}F a=y.13().19(0,d).47(y).2P();8(r>0){2i=3I(f,7)}5D(k);8(7.1R){8(K.Q<7.E.M+d){F b=y.13().1N(7.E.M-1);b.Z(7.d['1S'],b.1q('2a')+7.1i[7.d[1]])}a.Z(7.d['1S'],a.1q('2a'))}};F s=5E(3i,2Q,2i,d,'16',2U,2j);1x=D(){y.Z('3Z',y.1q('6K'));5F(y,m,c);A.26=L;2b.3h=4a($12,c,'3h',s,2b);2g=5G(y,2g,G);8(!A.27){y.T(I('1G',G))}};A.26=J;1u=3u(1u);2b.3G=4a($12,c,'3G',s,2b);1F(c.1V){R'42':y.Z(29);n();1C();1D();1J();1y();1x();17;R'1w':V.1a.1c([y,{'1E':0},D(){n();1C();1D();1J();1y();V=48(2U,c.2u,G);V.1a.1c([y,{'1E':1},1x]);3x(V,G)}]);17;R'3j':y.Z({'1E':0});V.1a.1c([m,{'1E':0}]);V.1a.1c([y,{'1E':1},1x]);1O();1C();1D();1J();1y();17;R'1I':y.Z(7.d['1m'],$1n[7.d['P']]());V.1a.1c([y,2T,1x]);1O();1C();1D();1y();17;R'1I-1w':y.Z(7.d['1m'],$1n[7.d['P']]());V.1a.1c([m,{'1E':0}]);V.1a.1c([y,2T,1x]);1O();1C();1D();1y();17;R'22':V.1a.1c([m,4N,1x]);1O();1C();1D();1J();1y();17;R'22-1w':y.Z({'1E':0});V.1a.1c([y,{'1E':1}]);V.1a.1c([m,4N,1x]);1O();1C();1D();1J();1y();17;2J:V.1a.1c([y,29,D(){1J();1y();1x()}]);1O();3D();3E();17}3x(V,G);5H(7.25,y,G);y.T(I('3H',G),[L,2j]);H J});y.11(I('3k',G),D(e,b,c,d,f,g,h){e.1g();F v=[b,c,d,f,g,h],t=['2M/28/2A','28','3d','2A','2M','D'],a=3e(v,t);f=a[3];g=a[4];h=a[5];b=3J(a[0],a[1],a[2],K,y);8(b==0){H L}8(!1T(f)){f=L}8(g!='14'&&g!='16'){8(7.1U){g=(b<=K.Q/2)?'16':'14'}O{g=(K.X==0||K.X>b)?'16':'14'}}8(g=='14'){b=K.Q-b}y.T(I(g,G),[f,b,h]);H J});y.11(I('85',G),D(e,a,b){e.1g();F c=y.1P(I('4b',G));H y.1P(I('5J',G),[c-1,a,'14',b])});y.11(I('86',G),D(e,a,b){e.1g();F c=y.1P(I('4b',G));H y.1P(I('5J',G),[c+1,a,'16',b])});y.11(I('5J',G),D(e,a,b,c,d){e.1g();8(!Y(a)){a=y.1P(I('4b',G))}F f=7.1b.E||7.E.M,1X=1H.2z(K.Q/f)-1;8(a<0){a=1X}8(a>1X){a=0}H y.1P(I('3k',G),[a*f,0,J,b,c,d])});y.11(I('73',G),D(e,s){e.1g();8(s){s=3J(s,0,J,K,y)}O{s=0}s+=K.X;8(s!=0){8(K.Q>0){2h(s>K.Q){s-=K.Q}}y.87(y.13().19(s,K.Q))}H J});y.11(I('2n',G),D(e,s){e.1g();8(s){s=5k(s)}O 8(7.2n){s=7.2n}O{H 18(G,'6j 88 46 2n.')}F n=y.1P(I('4p',G)),x=J;1j(F j=0,l=s.S;j<l;j++){8(!s[j][0].1P(I('3k',G),[n,s[j][3],J])){x=L}}H x});y.11(I('2O',G),D(e,a,b){e.1g();8(1o(a)){a.1h($12,2g)}O 8(2V(a)){2g=a}O 8(!1z(a)){2g.1c([a,b])}H 2g});y.11(I('89',G),D(e,b,c,d,f){e.1g();F v=[b,c,d,f],t=['2M/2A','2M/28/2A','3d','28'],a=3e(v,t);b=a[0];c=a[1];d=a[2];f=a[3];8(1T(b)&&!2v(b)){b=$(b)}O 8(1p(b)){b=$(b)}8(!2v(b)||b.S==0){H 18(G,'2p a 5K 2A.')}8(1z(c)){c='4c'}4x(b,7);41(b);F g=c,4d='4d';8(c=='4c'){8(d){8(K.X==0){c=K.Q-1;4d='74'}O{c=K.X;K.X+=b.S}8(c<0){c=0}}O{c=K.Q-1;4d='74'}}O{c=3J(c,f,d,K,y)}F h=y.13().1N(c);8(h.S){h[4d](b)}O{18(G,'8a 8b-3r 4M 6k! 8c 8d 46 75 4c.');y.76(b)}8(g!='4c'&&!d){8(c<K.X){K.X+=b.S}}K.Q=y.13().S;8(K.X>=K.Q){K.X-=K.Q}y.T(I('4O',G));y.T(I('5L',G));H J});y.11(I('77',G),D(e,c,d,f){e.1g();F v=[c,d,f],t=['2M/28/2A','3d','28'],a=3e(v,t);c=a[0];d=a[1];f=a[2];F g=L;8(c 2W $&&c.S>1){h=$();c.1W(D(i,a){F b=y.T(I('77',G),[$(1l),d,f]);8(b){h=h.8e(b)}});H h}8(1z(c)||c=='4c'){h=y.13().2P()}O{c=3J(c,f,d,K,y);F h=y.13().1N(c);8(h.S){8(c<K.X){K.X-=h.S}}}8(h&&h.S){h.8f();K.Q=y.13().S;y.T(I('4O',G))}H h});y.11(I('3G',G)+' '+I('3h',G),D(e,a){e.1g();F b=e.5v.19(G.3y.45.S);8(2V(a)){2b[b]=a}8(1o(a)){2b[b].1c(a)}H 2b[b]});y.11(I('4p',G),D(e,a){e.1g();8(K.X==0){F b=0}O{F b=K.Q-K.X}8(1o(a)){a.1h($12,b)}H b});y.11(I('4b',G),D(e,a){e.1g();F b=7.1b.E||7.E.M,1X=1H.2z(K.Q/b-1),2k;8(K.X==0){2k=0}O 8(K.X<K.Q%b){2k=0}O 8(K.X==b&&!7.1U){2k=1X}O{2k=1H.78((K.Q-K.X)/b)}8(2k<0){2k=0}8(2k>1X){2k=1X}8(1o(a)){a.1h($12,2k)}H 2k});y.11(I('8g',G),D(e,a){e.1g();F b=3I(y.13(),7);8(1o(a)){a.1h($12,b)}H b});y.11(I('19',G),D(e,f,l,b){e.1g();8(K.Q==0){H L}F v=[f,l,b],t=['28','28','D'],a=3e(v,t);f=(Y(a[0]))?a[0]:0;l=(Y(a[1]))?a[1]:K.Q;b=a[2];f+=K.X;l+=K.X;8(E.Q>0){2h(f>K.Q){f-=K.Q}2h(l>K.Q){l-=K.Q}2h(f<0){f+=K.Q}2h(l<0){l+=K.Q}}F c=y.13(),$i;8(l>f){$i=c.19(f,l)}O{$i=$(c.19(f,K.Q).3F().6Y(c.19(0,l).3F()))}8(1o(b)){b.1h($12,$i)}H $i});y.11(I('27',G)+' '+I('2d',G)+' '+I('26',G),D(e,a){e.1g();F b=e.5v.19(G.3y.45.S),5M=A[b];8(1o(a)){a.1h($12,5M)}H 5M});y.11(I('6S',G),D(e,a,b,c){e.1g();F d=L;8(1o(a)){a.1h($12,7)}O 8(1T(a)){31=$.1L(J,{},31,a);8(b!==L)d=J;O 7=$.1L(J,{},7,a)}O 8(!1z(a)){8(1o(b)){F f=4P('7.'+a);8(1z(f)){f=''}b.1h($12,f)}O 8(!1z(b)){8(2X c!=='3d')c=J;4P('31.'+a+' = b');8(c!==L)d=J;O 4P('7.'+a+' = b')}O{H 4P('7.'+a)}}8(d){1Y(y.13(),7);z.59(31);z.5N();F g=4Q(y,7);y.T(I('3H',G),[J,g])}H 7});y.11(I('5L',G),D(e,a,b){e.1g();8(1z(a)){a=$('8h')}O 8(1p(a)){a=$(a)}8(!2v(a)||a.S==0){H 18(G,'2p a 5K 2A.')}8(!1p(b)){b='a.6i'}a.8i(b).1W(D(){F h=1l.79||'';8(h.S>0&&y.13().7a($(h))!=-1){$(1l).23('5O').5O(D(e){e.2D();y.T(I('3k',G),h)})}});H J});y.11(I('3H',G),D(e,b,c){e.1g();8(!7.1b.1A){H}F d=7.1b.E||7.E.M,4R=1H.2z(K.Q/d);8(b){8(7.1b.3K){7.1b.1A.13().2t();7.1b.1A.1W(D(){1j(F a=0;a<4R;a++){F i=y.13().1N(3J(a*d,0,J,K,y));$(1l).76(7.1b.3K.1h(i[0],a+1))}})}7.1b.1A.1W(D(){$(1l).13().23(7.1b.3L).1W(D(a){$(1l).11(7.1b.3L,D(e){e.2D();y.T(I('3k',G),[a*d,-7.1b.4S,J,7.1b])})})})}F f=y.1P(I('4b',G))+7.1b.4S;8(f>=4R){f=0}8(f<0){f=4R-1}7.1b.1A.1W(D(){$(1l).13().2N(2y('7b',G)).1N(f).3a(2y('7b',G))});H J});y.11(I('4O',G),D(e){F a=7.E.M,2E=y.13(),2m=5d($1n,7,'P');K.Q=2E.S;8(A.4r){7.3U=2m;7[7.d['P']]=4s(2m,A.4r)}O{7.3U=5e(7,2m)}8(7.2H){7.E.P=7.E.3M.P;7.E.1e=7.E.3M.1e;7=5g(7,2E,2m);a=7.E.M;5r(7,2E)}O 8(7.E.U.1d){a=32(2E,7,0)}O 8(7.E.1t!='*'){a=3W(2E,7,0)}8(!7.1U&&K.X!=0&&a>K.X){8(7.E.U.1d){F b=4D(2E,7,K.X)-K.X}O 8(7.E.1t!='*'){F b=7c(2E,7,K.X)-K.X}O{F b=7.E.M-K.X}18(G,'8j 8k-1U: 8l '+b+' E 5y.');y.T(I('14',G),b)}7.E.M=2x(a,7,7.E.U.2c,$12);7.E.U.20=7.E.M;7=5i(7,2E);F c=4Q(y,7);y.T(I('3H',G),[J,c]);4T(7,K.Q,G);3A(7,K.X,G);H c});y.11(I('4q',G),D(e,a){e.1g();1u=3u(1u);y.1q('57',L);y.T(I('5t',G));8(a){y.T(I('73',G))}4U(y.13());4U(y);z.5s();z.5P();8(G.3s=='36'){4U($1n)}O{$1n.8m(y)}H J});y.11(I('18',G),D(e){18(G,'3w P: '+7.P);18(G,'3w 1e: '+7.1e);18(G,'7d 8n: '+7.E.P);18(G,'7d 8o: '+7.E.1e);18(G,'4e 4f E M: '+7.E.M);8(7.N.1G){18(G,'4e 4f E 5Q 8p: '+7.N.E)}8(7.14.W){18(G,'4e 4f E 5Q 5y: '+7.14.E)}8(7.16.W){18(G,'4e 4f E 5Q 70: '+7.16.E)}H G.18});y.11('3o',D(e,n,o){e.1g();H y.1P(I(n,G),o)})};z.5s=D(){y.23(I('',G));y.23(I('',G,L));y.23('3o')};z.5N=D(){z.5P();4T(7,K.Q,G);3A(7,K.X,G);8(7.N.2F){F b=3N(7.N.2F);$1n.11(I('4V',G,L),D(){y.T(I('3b',G),b)}).11(I('4W',G,L),D(){y.T(I('3g',G))})}8(7.N.W){7.N.W.11(I(7.N.3L,G,L),D(e){e.2D();F a=L,b=3O;8(A.27){a='1G'}O 8(7.N.4X){a='3b';b=3N(7.N.4X)}8(a){y.T(I(a,G),b)}})}8(7.14.W){7.14.W.11(I(7.14.3L,G,L),D(e){e.2D();y.T(I('14',G))});8(7.14.2F){F b=3N(7.14.2F);7.14.W.11(I('4V',G,L),D(){y.T(I('3b',G),b)}).11(I('4W',G,L),D(){y.T(I('3g',G))})}}8(7.16.W){7.16.W.11(I(7.16.3L,G,L),D(e){e.2D();y.T(I('16',G))});8(7.16.2F){F b=3N(7.16.2F);7.16.W.11(I('4V',G,L),D(){y.T(I('3b',G),b)}).11(I('4W',G,L),D(){y.T(I('3g',G))})}}8(7.1b.1A){8(7.1b.2F){F b=3N(7.1b.2F);7.1b.1A.11(I('4V',G,L),D(){y.T(I('3b',G),b)}).11(I('4W',G,L),D(){y.T(I('3g',G))})}}8(7.14.2Y||7.16.2Y){$(4g).11(I('7e',G,L,J,J),D(e){F k=e.7f;8(k==7.16.2Y){e.2D();y.T(I('16',G))}8(k==7.14.2Y){e.2D();y.T(I('14',G))}})}8(7.1b.4Y){$(4g).11(I('7e',G,L,J,J),D(e){F k=e.7f;8(k>=49&&k<58){k=(k-49)*7.E.M;8(k<=K.Q){e.2D();y.T(I('3k',G),[k,0,J,7.1b])}}})}8($.1s.1r){F c='8q'8r 3l;8((c&&7.1r.4h)||(!c&&7.1r.5R)){F d=$.1L(J,{},7.14,7.1r),7g=$.1L(J,{},7.16,7.1r),5S=D(){y.T(I('14',G),[d])},5T=D(){y.T(I('16',G),[7g])};1F(7.2l){R'5c':R'7h':7.1r.2G.8s=5T;7.1r.2G.8t=5S;17;2J:7.1r.2G.8u=5T;7.1r.2G.8v=5S}8(A.1r){y.1r('4q')}$1n.1r(7.1r.2G);$1n.Z('7i','8w');A.1r=J}}8($.1s.1Q){8(7.1Q){F f=$.1L(J,{},7.14,7.1Q),7j=$.1L(J,{},7.16,7.1Q);8(A.1Q){$1n.23(I('1Q',G,L))}$1n.11(I('1Q',G,L),D(e,a){e.2D();8(a>0){y.T(I('14',G),[f])}O{y.T(I('16',G),[7j])}});A.1Q=J}}8(7.N.1G){y.T(I('1G',G),7.N.5U)}8(A.6v){F g=D(e){y.T(I('5t',G));8(7.N.5V&&!A.27){y.T(I('1G',G))}1Y(y.13(),7);y.T(I('4O',G))};F h=$(3l),4i=3O;8($.5W&&G.5X=='5W'){4i=$.5W(8x,g)}O 8($.4Z&&G.5X=='4Z'){4i=$.4Z(8y,g)}O{F i=0,5Y=0;4i=D(){F a=h.P(),5Z=h.1e();8(a!=i||5Z!=5Y){g();i=a;5Y=5Z}}}h.11(I('8z',G,L,J,J),4i)}};z.5P=D(){F a=I('',G),3P=I('',G,L);61=I('',G,L,J,J);$(4g).23(61);$(3l).23(61);$1n.23(3P);8(7.N.W){7.N.W.23(3P)}8(7.14.W){7.14.W.23(3P)}8(7.16.W){7.16.W.23(3P)}8(7.1b.1A){7.1b.1A.23(3P);8(7.1b.3K){7.1b.1A.13().2t()}}8(A.1r){y.1r('4q');$1n.Z('7i','2J');A.1r=L}8(A.1Q){A.1Q=L}4T(7,'4j',G);3A(7,'2N',G)};8(1k(w)){w={'18':w}}F A={'2l':'16','27':J,'26':L,'2d':L,'1Q':L,'1r':L},K={'Q':y.13().S,'X':0},1u={'N':3O,'1f':3O,'2L':2o(),'3v':0},V={'2d':L,'1M':0,'2L':0,'2u':'','1a':[]},2b={'3G':[],'3h':[]},2g=[],G=$.1L(J,{},$.1s.1v.7k,w),7={},31=$.1L(J,{},u),$1n=(G.3s=='36')?y.36():y.8A('<'+G.3s.55+' 8B="'+G.3s.7l+'" />').36();G.4o=y.4o;G.3T=$.1s.1v.3T++;G.2Z=(G.2Z&&$.1s.2Z)?'2Z':'8C';z.59(31,J,56);z.6D();z.6L();z.5N();8(2V(7.E.3m)){F B=7.E.3m}O{F B=[];8(7.E.3m!=0){B.1c(7.E.3m)}}8(7.25){B.8D(4k(7m(7.25),10))}8(B.S>0){1j(F a=0,l=B.S;a<l;a++){F s=B[a];8(s==0){62}8(s===J){s=3l.8E.79;8(s.S<1){62}}O 8(s==='7n'){s=1H.4l(1H.7n()*K.Q)}8(y.1P(I('3k',G),[s,0,J,{1V:'42'}])){17}}}F C=4Q(y,7),7o=3I(y.13(),7);8(7.7p){7.7p.1h($12,{'P':C.P,'1e':C.1e,'E':7o})}y.T(I('3H',G),[J,C]);y.T(I('5L',G));8(G.18){y.T(I('18',G))}H y};$.1s.1v.3T=1;$.1s.1v.5b={'2n':L,'3z':J,'1U':J,'2H':L,'2l':'1m','E':{'3m':0},'1K':{'2u':'7q','1M':6y,'2F':L,'3L':'5O','2O':L}};$.1s.1v.7k={'18':L,'2Z':L,'5X':'4Z','3y':{'45':'','7r':'8F'},'3s':{'55':'8G','7l':'8H'},'63':{}};$.1s.1v.7s=D(a){H'<a 8I="#"><7t>'+a+'</7t></a>'};$.1s.1v.7u=D(a){$(1l).Z('P',a+'%')};$.1s.1v.25={3F:D(n){n+='=';F b=4g.25.3Q(';');1j(F a=0,l=b.S;a<l;a++){F c=b[a];2h(c.8J(0)==' '){c=c.19(1)}8(c.3R(n)==0){H c.19(n.S)}}H 0},64:D(n,v,d){F e="";8(d){F a=7v 7w();a.8K(a.2o()+(d*24*60*60*8L));e="; 8M="+a.8N()}4g.25=n+'='+v+e+'; 8O=/'},2t:D(n){$.1s.1v.25.64(n,"",-1)}};D 48(d,e,c){8(c.2Z=='2Z'){8(e=='7q'){e='8P'}}H{1a:[],1M:d,8Q:d,2u:e,2L:2o()}}D 3x(s,c){1j(F a=0,l=s.1a.S;a<l;a++){F b=s.1a[a];8(!b){62}b[0][c.2Z](b[1],s.1M,s.2u,b[2])}}D 43(s,c){8(!1k(c)){c=J}8(1T(s.4z)){43(s.4z,c)}1j(F a=0,l=s.1a.S;a<l;a++){F b=s.1a[a];b[0].6M(J);8(c){b[0].Z(b[1]);8(1o(b[2])){b[2]()}}}8(1T(s.4A)){43(s.4A,c)}}D 5F(a,b,o){8(b){b.2t()}1F(o.1V){R'1w':R'3j':R'1I-1w':R'22-1w':a.Z('1t','');a.Z('1E',1);17}}D 4a(d,o,b,a,c){8(o[b]){o[b].1h(d,a)}8(c[b].S){1j(F i=0,l=c[b].S;i<l;i++){c[b][i].1h(d,a)}}H[]}D 5G(a,q,c){8(q.S){a.T(I(q[0][0],c),q[0][1]);q.8R()}H q}D 5z(b){b.1W(D(){F a=$(1l);a.1q('7x',a.2f(':3t')).4j()})}D 5D(b){8(b){b.1W(D(){F a=$(1l);8(!a.1q('7x')){a.4m()}})}}D 3u(t){8(t.N){8S(t.N)}8(t.1f){8T(t.1f)}H t}D 5E(a,b,c,d,e,f,g){H{'P':g.P,'1e':g.1e,'E':{'20':a,'8U':b,'M':c},'1K':{'E':d,'2l':e,'1M':f}}}D 5B(a,o,b,c){F d=a.1M;8(a.1V=='42'){H 0}8(d=='N'){d=o.1K.1M/o.1K.E*b}O 8(d<10){d=c/d}8(d<1){H 0}8(a.1V=='1w'){d=d/2}H 1H.78(d)}D 4T(o,t,c){F a=(Y(o.E.4C))?o.E.4C:o.E.M+1;8(t=='4m'||t=='4j'){F f=t}O 8(a>t){18(c,'2p 6O E ('+t+' Q, '+a+' 6P): 8V 8W.');F f='4j'}O{F f='4m'}F s=(f=='4m')?'2N':'3a',h=2y('3t',c);8(o.N.W){o.N.W[f]()[s](h)}8(o.14.W){o.14.W[f]()[s](h)}8(o.16.W){o.16.W[f]()[s](h)}8(o.1b.1A){o.1b.1A[f]()[s](h)}}D 3A(o,f,c){8(o.1U||o.3z)H;F a=(f=='2N'||f=='3a')?f:L,51=2y('8X',c);8(o.N.W&&a){o.N.W[a](51)}8(o.14.W){F b=a||(f==0)?'3a':'2N';o.14.W[b](51)}8(o.16.W){F b=a||(f==o.E.M)?'3a':'2N';o.16.W[b](51)}}D 3S(a,b){8(1o(b)){b=b.1h(a)}O 8(1z(b)){b={}}H b}D 6l(a,b){b=3S(a,b);8(Y(b)){b={'M':b}}O 8(b=='1d'){b={'M':b,'P':b,'1e':b}}O 8(!1T(b)){b={}}H b}D 6m(a,b){b=3S(a,b);8(Y(b)){8(b<=50){b={'E':b}}O{b={'1M':b}}}O 8(1p(b)){b={'2u':b}}O 8(!1T(b)){b={}}H b}D 52(a,b){b=3S(a,b);8(1p(b)){F c=65(b);8(c==-1){b=$(b)}O{b=c}}H b}D 6n(a,b){b=52(a,b);8(2v(b)){b={'W':b}}O 8(1k(b)){b={'1G':b}}O 8(Y(b)){b={'2K':b}}8(b.1f){8(1p(b.1f)||2v(b.1f)){b.1f={'2q':b.1f}}}H b}D 6z(a,b){8(1o(b.W)){b.W=b.W.1h(a)}8(1p(b.W)){b.W=$(b.W)}8(!1k(b.1G)){b.1G=J}8(!Y(b.5U)){b.5U=0}8(1z(b.4X)){b.4X=J}8(!1k(b.5V)){b.5V=J}8(!Y(b.2K)){b.2K=(b.1M<10)?8Y:b.1M*5}8(b.1f){8(1o(b.1f.2q)){b.1f.2q=b.1f.2q.1h(a)}8(1p(b.1f.2q)){b.1f.2q=$(b.1f.2q)}8(b.1f.2q){8(!1o(b.1f.4B)){b.1f.4B=$.1s.1v.7u}8(!Y(b.1f.5u)){b.1f.5u=50}}O{b.1f=L}}H b}D 5a(a,b){b=52(a,b);8(2v(b)){b={'W':b}}O 8(Y(b)){b={'2Y':b}}H b}D 5j(a,b){8(1o(b.W)){b.W=b.W.1h(a)}8(1p(b.W)){b.W=$(b.W)}8(1p(b.2Y)){b.2Y=65(b.2Y)}H b}D 6o(a,b){b=52(a,b);8(2v(b)){b={'1A':b}}O 8(1k(b)){b={'4Y':b}}H b}D 6A(a,b){8(1o(b.1A)){b.1A=b.1A.1h(a)}8(1p(b.1A)){b.1A=$(b.1A)}8(!Y(b.E)){b.E=L}8(!1k(b.4Y)){b.4Y=L}8(!1o(b.3K)&&!53(b.3K)){b.3K=$.1s.1v.7s}8(!Y(b.4S)){b.4S=0}H b}D 6p(a,b){8(1o(b)){b=b.1h(a)}8(1z(b)){b={'4h':L}}8(3p(b)){b={'4h':b}}O 8(Y(b)){b={'E':b}}H b}D 6B(a,b){8(!1k(b.4h)){b.4h=J}8(!1k(b.5R)){b.5R=L}8(!1T(b.2G)){b.2G={}}8(!1k(b.2G.7y)){b.2G.7y=L}H b}D 6q(a,b){8(1o(b)){b=b.1h(a)}8(3p(b)){b={}}O 8(Y(b)){b={'E':b}}O 8(1z(b)){b=L}H b}D 6C(a,b){H b}D 3J(a,b,c,d,e){8(1p(a)){a=$(a,e)}8(1T(a)){a=$(a,e)}8(2v(a)){a=e.13().7a(a);8(!1k(c)){c=L}}O{8(!1k(c)){c=J}}8(!Y(a)){a=0}8(!Y(b)){b=0}8(c){a+=d.X}a+=b;8(d.Q>0){2h(a>=d.Q){a-=d.Q}2h(a<0){a+=d.Q}}H a}D 4D(i,o,s){F t=0,x=0;1j(F a=s;a>=0;a--){F j=i.1N(a);t+=(j.2f(':M'))?j[o.d['2w']](J):0;8(t>o.3U){H x}8(a==0){a=i.S}x++}}D 7c(i,o,s){H 66(i,o.E.1t,o.E.U.4t,s)}D 6T(i,o,s,m){H 66(i,o.E.1t,m,s)}D 66(i,f,m,s){F t=0,x=0;1j(F a=s,l=i.S;a>=0;a--){x++;8(x==l){H x}F j=i.1N(a);8(j.2f(f)){t++;8(t==m){H x}}8(a==0){a=l}}}D 5x(a,o){H o.E.U.4t||a.13().19(0,o.E.M).1t(o.E.1t).S}D 32(i,o,s){F t=0,x=0;1j(F a=s,l=i.S-1;a<=l;a++){F j=i.1N(a);t+=(j.2f(':M'))?j[o.d['2w']](J):0;8(t>o.3U){H x}x++;8(x==l+1){H x}8(a==l){a=-1}}}D 5I(i,o,s,l){F v=32(i,o,s);8(!o.1U){8(s+v>l){v=l-s}}H v}D 3W(i,o,s){H 68(i,o.E.1t,o.E.U.4t,s,o.1U)}D 6Z(i,o,s,m){H 68(i,o.E.1t,m+1,s,o.1U)-1}D 68(i,f,m,s,c){F t=0,x=0;1j(F a=s,l=i.S-1;a<=l;a++){x++;8(x>=l){H x}F j=i.1N(a);8(j.2f(f)){t++;8(t==m){H x}}8(a==l){a=-1}}}D 3I(i,o){H i.19(0,o.E.M)}D 6V(i,o,n){H i.19(n,o.E.U.20+n)}D 6W(i,o){H i.19(0,o.E.M)}D 71(i,o){H i.19(0,o.E.U.20)}D 72(i,o,n){H i.19(n,o.E.M+n)}D 4x(i,o,d){8(o.1R){8(!1p(d)){d='2a'}i.1W(D(){F j=$(1l),m=4k(j.Z(o.d['1S']),10);8(!Y(m)){m=0}j.1q(d,m)})}}D 1Y(i,o,m){8(o.1R){F x=(1k(m))?m:L;8(!Y(m)){m=0}4x(i,o,'7z');i.1W(D(){F j=$(1l);j.Z(o.d['1S'],((x)?j.1q('7z'):m+j.1q('2a')))})}}D 41(i){i.1W(D(){F j=$(1l);j.1q('7A',j.7B('7C')||'')})}D 4U(i){i.1W(D(){F j=$(1l);j.7B('7C',j.1q('7A')||'')})}D 5r(o,b){F c=o.E.M,7D=o.E[o.d['P']],69=o[o.d['1e']],7E=3V(69);b.1W(D(){F a=$(1l),6a=7D-7F(a,o,'8Z');a[o.d['P']](6a);8(7E){a[o.d['1e']](4s(6a,69))}})}D 4Q(a,o){F b=a.36(),$i=a.13(),$v=3I($i,o),54=4I(4J($v,o,J),o,L);b.Z(54);8(o.1R){F p=o.1i,r=p[o.d[1]];8(o.1B&&r<0){r=0}F c=$v.2P();c.Z(o.d['1S'],c.1q('2a')+r);a.Z(o.d['3q'],p[o.d[0]]);a.Z(o.d['1m'],p[o.d[3]])}a.Z(o.d['P'],54[o.d['P']]+(2R($i,o,'P')*2));a.Z(o.d['1e'],6b($i,o,'1e'));H 54}D 4J(i,o,a){H[2R(i,o,'P',a),6b(i,o,'1e',a)]}D 6b(i,o,a,b){8(!1k(b)){b=L}8(Y(o[o.d[a]])&&b){H o[o.d[a]]}8(Y(o.E[o.d[a]])){H o.E[o.d[a]]}a=(a.6c().3R('P')>-1)?'2w':'3n';H 4n(i,o,a)}D 4n(i,o,b){F s=0;1j(F a=0,l=i.S;a<l;a++){F j=i.1N(a);F m=(j.2f(':M'))?j[o.d[b]](J):0;8(s<m){s=m}}H s}D 2R(i,o,b,c){8(!1k(c)){c=L}8(Y(o[o.d[b]])&&c){H o[o.d[b]]}8(Y(o.E[o.d[b]])){H o.E[o.d[b]]*i.S}F d=(b.6c().3R('P')>-1)?'2w':'3n',s=0;1j(F a=0,l=i.S;a<l;a++){F j=i.1N(a);s+=(j.2f(':M'))?j[o.d[d]](J):0}H s}D 5d(a,o,d){F b=a.2f(':M');8(b){a.4j()}F s=a.36()[o.d[d]]();8(b){a.4m()}H s}D 5e(o,a){H(Y(o[o.d['P']]))?o[o.d['P']]:a}D 6d(i,o,b){F s=L,v=L;1j(F a=0,l=i.S;a<l;a++){F j=i.1N(a);F c=(j.2f(':M'))?j[o.d[b]](J):0;8(s===L){s=c}O 8(s!=c){v=J}8(s==0){v=J}}H v}D 7F(i,o,d){H i[o.d['90'+d]](J)-i[o.d[d.6c()]]()}D 4s(s,o){8(3V(o)){o=4k(o.19(0,-1),10);8(!Y(o)){H s}s*=o/2I}H s}D I(n,c,a,b,d){8(!1k(a)){a=J}8(!1k(b)){b=J}8(!1k(d)){d=L}8(a){n=c.3y.45+n}8(b){n=n+'.'+c.3y.7r}8(b&&d){n+=c.3T}H n}D 2y(n,c){H(1p(c.63[n]))?c.63[n]:n}D 4I(a,o,p){8(!1k(p)){p=J}F b=(o.1R&&p)?o.1i:[0,0,0,0];F c={};c[o.d['P']]=a[0]+b[1]+b[3];c[o.d['1e']]=a[1]+b[0]+b[2];H c}D 3e(c,d){F e=[];1j(F a=0,7G=c.S;a<7G;a++){1j(F b=0,7H=d.S;b<7H;b++){8(d[b].3R(2X c[a])>-1&&1z(e[b])){e[b]=c[a];17}}}H e}D 6x(p){8(1z(p)){H[0,0,0,0]}8(Y(p)){H[p,p,p,p]}8(1p(p)){p=p.3Q('91').7I('').3Q('92').7I('').3Q(' ')}8(!2V(p)){H[0,0,0,0]}1j(F i=0;i<4;i++){p[i]=4k(p[i],10)}1F(p.S){R 0:H[0,0,0,0];R 1:H[p[0],p[0],p[0],p[0]];R 2:H[p[0],p[1],p[0],p[1]];R 3:H[p[0],p[1],p[2],p[1]];2J:H[p[0],p[1],p[2],p[3]]}}D 4H(a,o){F x=(Y(o[o.d['P']]))?1H.2z(o[o.d['P']]-2R(a,o,'P')):0;1F(o.1B){R'1m':H[0,x];R'35':H[x,0];R'5f':2J:H[1H.2z(x/2),1H.4l(x/2)]}}D 6r(o){F a=[['P','7J','2w','1e','7K','3n','1m','3q','1S',0,1,2,3],['1e','7K','3n','P','7J','2w','3q','1m','5p',3,2,1,0]];F b=a[0].S,7L=(o.2l=='35'||o.2l=='1m')?0:1;F c={};1j(F d=0;d<b;d++){c[a[0][d]]=a[7L][d]}H c}D 4E(x,o,a,b){F v=x;8(1o(a)){v=a.1h(b,v)}O 8(1p(a)){F p=a.3Q('+'),m=a.3Q('-');8(m.S>p.S){F c=J,6e=m[0],30=m[1]}O{F c=L,6e=p[0],30=p[1]}1F(6e){R'93':v=(x%2==1)?x-1:x;17;R'94':v=(x%2==0)?x-1:x;17;2J:v=x;17}30=4k(30,10);8(Y(30)){8(c){30=-30}v+=30}}8(!Y(v)||v<1){v=1}H v}D 2x(x,o,a,b){H 6f(4E(x,o,a,b),o.E.U)}D 6f(v,i){8(Y(i.34)&&v<i.34){v=i.34}8(Y(i.1X)&&v>i.1X){v=i.1X}8(v<1){v=1}H v}D 5k(s){8(!2V(s)){s=[[s]]}8(!2V(s[0])){s=[s]}1j(F j=0,l=s.S;j<l;j++){8(1p(s[j][0])){s[j][0]=$(s[j][0])}8(!1k(s[j][1])){s[j][1]=J}8(!1k(s[j][2])){s[j][2]=J}8(!Y(s[j][3])){s[j][3]=0}}H s}D 65(k){8(k=='35'){H 39}8(k=='1m'){H 37}8(k=='5c'){H 38}8(k=='7h'){H 40}H-1}D 5H(n,a,c){8(n){F v=a.1P(I('4p',c));$.1s.1v.25.64(n,v)}}D 7m(n){F c=$.1s.1v.25.3F(n);H(c=='')?0:c}D 6E(a,b){F c={};1j(F p=0,l=b.S;p<l;p++){c[b[p]]=a.Z(b[p])}H c}D 6s(a,b,c,d){8(!1T(a.U)){a.U={}}8(!1T(a.3M)){a.3M={}}8(a.3m==0&&Y(d)){a.3m=d}8(1T(a.M)){a.U.34=a.M.34;a.U.1X=a.M.1X;a.M=L}O 8(1p(a.M)){8(a.M=='1d'){a.U.1d=J}O{a.U.2c=a.M}a.M=L}O 8(1o(a.M)){a.U.2c=a.M;a.M=L}8(!1p(a.1t)){a.1t=(c.1t(':3t').S>0)?':M':'*'}8(!a[b.d['P']]){8(b.2H){18(J,'7M a '+b.d['P']+' 1j 75 E!');a[b.d['P']]=4n(c,b,'2w')}O{a[b.d['P']]=(6d(c,b,'2w'))?'1d':c[b.d['2w']](J)}}8(!a[b.d['1e']]){a[b.d['1e']]=(6d(c,b,'3n'))?'1d':c[b.d['3n']](J)}a.3M.P=a.P;a.3M.1e=a.1e;H a}D 6w(a,b){8(a.E[a.d['P']]=='1d'){a.E.U.1d=J}8(!a.E.U.1d){8(Y(a[a.d['P']])){a.E.M=1H.4l(a[a.d['P']]/a.E[a.d['P']])}O{a.E.M=1H.4l(b/a.E[a.d['P']]);a[a.d['P']]=a.E.M*a.E[a.d['P']];8(!a.E.U.2c){a.1B=L}}8(a.E.M=='95'||a.E.M<1){18(J,'2p a 5K 28 4f M E: 7M 46 "1d".');a.E.U.1d=J}}H a}D 6t(a,b,c){8(a=='N'){a=4n(c,b,'2w')}H a}D 6u(a,b,c){8(a=='N'){a=4n(c,b,'3n')}8(!a){a=b.E[b.d['1e']]}H a}D 5i(o,a){F p=4H(3I(a,o),o);o.1i[o.d[1]]=p[1];o.1i[o.d[3]]=p[0];H o}D 5g(o,a,b){F c=6f(1H.2z(o[o.d['P']]/o.E[o.d['P']]),o.E.U);8(c>a.S){c=a.S}F d=1H.4l(o[o.d['P']]/c);o.E.M=c;o.E[o.d['P']]=d;o[o.d['P']]=c*d;H o}D 3N(p){8(1p(p)){F i=(p.3R('96')>-1)?J:L,r=(p.3R('3g')>-1)?J:L}O{F i=r=L}H[i,r]}D 97(a){H(Y(a))?a:3O}D 6g(a){H(a===3O)}D 1z(a){H(6g(a)||2X a=='7N'||a===''||a==='7N')}D 2V(a){H(a 2W 98)}D 2v(a){H(a 2W 7O)}D 1T(a){H((a 2W 99||2X a=='2A')&&!6g(a)&&!2v(a)&&!2V(a))}D Y(a){H((a 2W 4e||2X a=='28')&&!9a(a))}D 1p(a){H((a 2W 9b||2X a=='2M')&&!1z(a)&&!3p(a)&&!53(a))}D 1o(a){H(a 2W 9c||2X a=='D')}D 1k(a){H(a 2W 9d||2X a=='3d'||3p(a)||53(a))}D 3p(a){H(a===J||a==='J')}D 53(a){H(a===L||a==='L')}D 3V(x){H(1p(x)&&x.19(-1)=='%')}D 2o(){H 7v 7w().2o()}D 3X(o,n){18(J,o+' 2f 9e, 9f 1j 9g 9h 9i 9j. 9k '+n+' 9l.')}D 18(d,m){8(!1z(3l.6h)&&!1z(3l.6h.7P)){8(1T(d)){F s=' ('+d.4o+')';d=d.18}O{F s=''}8(!d){H L}8(1p(m)){m='1v'+s+': '+m}O{m=['1v'+s+':',m]}3l.6h.7P(m)}H L}$.1L($.2u,{'9m':D(t){F a=t*t;H t*(-a*t+4*a-6*t+4)},'9n':D(t){H t*(4*t*t-9*t+6)},'9o':D(t){F a=t*t;H t*(33*a*a-9p*a*t+9q*a-67*t+15)}})})(7O);`,62,585,"|||||||opts|if|||||||||||||||||||||||||||||||function|items|var|conf|return|cf_e|true|itms|false|visible|auto|else|width|total|case|length|trigger|visibleConf|scrl|button|first|is_number|css||bind|tt0|children|prev||next|break|debug|slice|anims|pagination|push|variable|height|progress|stopPropagation|call|padding|for|is_boolean|this|left|wrp|is_function|is_string|data|swipe|fn|filter|tmrs|carouFredSel|fade|_onafter|_moveitems|is_undefined|container|align|_s_paddingold|_s_paddingcur|opacity|switch|play|Math|cover|_position|scroll|extend|duration|eq|_a_wrapper|triggerHandler|mousewheel|usePadding|marginRight|is_object|circular|fx|each|max|sz_resetMargin|i_cur_l|old|i_old_l|uncover|unbind||cookie|isScrolling|isPaused|number|a_cfs|_cfs_origCssMargin|clbk|adjust|isStopped|stopImmediatePropagation|is|queu|while|i_new|w_siz|nr|direction|avail_primary|synchronise|getTime|Not|bar|i_new_l|a_cur|remove|easing|is_jquery|outerWidth|cf_getItemsAdjust|cf_c|ceil|object|pR|_s_paddingnew|preventDefault|a_itm|pauseOnHover|options|responsive|100|default|timeoutDuration|startTime|string|removeClass|queue|last|i_skp|ms_getTotalSize|a_old|a_lef|a_dur|is_array|instanceof|typeof|key|transition|adj|opts_orig|gn_getVisibleItemsNext||min|right|parent||||addClass|pause|perc|boolean|cf_sortParams|scrolling|resume|onAfter|i_old|crossfade|slideTo|window|start|outerHeight|_cfs_triggerEvent|is_true|top|position|wrapper|hidden|sc_clearTimers|timePassed|Carousel|sc_startScroll|events|infinite|nv_enableNavi|i_siz|i_siz_vis|_a_paddingold|_a_paddingcur|get|onBefore|updatePageStatus|gi_getCurrentItems|gn_getItemIndex|anchorBuilder|event|sizesConf|bt_pauseOnHoverConfig|null|ns2|split|indexOf|go_getObject|serialNumber|maxDimension|is_percentage|gn_getVisibleItemsNextFilter|deprecated|orgCSS|zIndex||sz_storeOrigCss|none|sc_stopScroll|dur2|prefix|to|appendTo|sc_setScroll||sc_fireCallbacks|currentPage|end|before|Number|of|document|onTouch|onResize|hide|parseInt|floor|show|ms_getTrueLargestSize|selector|currentPosition|destroy|primarySizePercentage|ms_getPercentage|org|onTimeoutStart|onTimeoutPause|onTimeoutEnd|sz_storeMargin|stopped|pre|post|updater|minimum|gn_getVisibleItemsPrev|cf_getAdjust|onEnd|clone|cf_getAlignPadding|cf_mapWrapperSizes|ms_getSizes|a_wsz|a_new|not|a_cfs_vis|updateSizes|eval|sz_setSizes|pgs|deviation|nv_showNavi|sz_restoreOrigCss|mouseenter|mouseleave|pauseOnEvent|keys|throttle||di|go_getNaviObject|is_false|sz|element|starting_position|_cfs_isCarousel||_cfs_init|go_getPrevNextObject|defaults|up|ms_getParentSize|ms_getMaxDimension|center|in_getResponsiveValues|bottom|in_getAlignPadding|go_complementPrevNextObject|cf_getSynchArr|onPauseStart|onPausePause|onPauseEnd|pauseDuration|marginBottom|newPosition|sz_setResponsiveSizes|_cfs_unbind_events|finish|interval|type|conditions|gn_getVisibleOrg|backward|sc_hideHiddenItems|a_lef_vis|sc_getDuration|_a_paddingnew|sc_showHiddenItems|sc_mapCallbackArguments|sc_afterScroll|sc_fireQueue|cf_setCookie|gn_getVisibleItemsNextTestCircular|slideToPage|valid|linkAnchors|value|_cfs_bind_buttons|click|_cfs_unbind_buttons|scrolled|onMouse|swP|swN|delay|pauseOnResize|debounce|onWindowResize|_windowHeight|nh||ns3|continue|classnames|set|cf_getKeyCode|gn_getItemsPrevFilter||gn_getItemsNextFilter|seco|nw|ms_getLargestSize|toLowerCase|ms_hasVariableSizes|sta|cf_getItemAdjustMinMax|is_null|console|caroufredsel|No|found|go_getItemsObject|go_getScrollObject|go_getAutoObject|go_getPaginationObject|go_getSwipeObject|go_getMousewheelObject|cf_getDimensions|in_complementItems|in_complementPrimarySize|in_complementSecondarySize|upDateOnWindowResize|in_complementVisibleItems|cf_getPadding|500|go_complementAutoObject|go_complementPaginationObject|go_complementSwipeObject|go_complementMousewheelObject|_cfs_build|in_mapCss|textAlign|float|marginTop|marginLeft|absolute|_cfs_origCssZindex|_cfs_bind_events|stop|paused|enough|needed|page|slide_|configuration|gn_getScrollItemsPrevFilter|Scrolling|gi_getOldItemsPrev|gi_getNewItemsPrev|directscroll|concat|gn_getScrollItemsNextFilter|forward|gi_getOldItemsNext|gi_getNewItemsNext|jumpToStart|after|the|append|removeItem|round|hash|index|selected|gn_getVisibleItemsPrevFilter|Item|keyup|keyCode|scN|down|cursor|mcN|configs|classname|cf_getCookie|random|itm|onCreate|swing|namespace|pageAnchorBuilder|span|progressbarUpdater|new|Date|_cfs_isHidden|triggerOnTouchEnd|_cfs_tempCssMargin|_cfs_origCss|attr|style|newS|secp|ms_getPaddingBorderMargin|l1|l2|join|innerWidth|innerHeight|dx|Set|undefined|jQuery|log|caroufredsel_cookie_|relative|fixed|overflow|setInterval|setTimeout|or|Callback|returned|Page|resumed|currently|slide_prev|prependTo|slide_next|prevPage|nextPage|prepend|carousel|insertItem|Correct|insert|Appending|item|add|detach|currentVisible|body|find|Preventing|non|sliding|replaceWith|widths|heights|automatically|ontouchstart|in|swipeUp|swipeDown|swipeLeft|swipeRight|move|200|300|resize|wrap|class|animate|unshift|location|cfs|div|caroufredsel_wrapper|href|charAt|setTime|1000|expires|toGMTString|path|ease|orgDuration|shift|clearTimeout|clearInterval|skipped|Hiding|navigation|disabled|2500|Width|outer|px|em|even|odd|Infinity|immediate|bt_mousesheelNumber|Array|Object|isNaN|String|Function|Boolean|DEPRECATED|support|it|will|be|removed|Use|instead|quadratic|cubic|elastic|106|126".split("|"),0,{})),(function(e){var n,w,l,c,m,p,T,A,D,U,F=0,_={},O=[],v=0,h={},S=[],k=null,N=new Image,G=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,K=/[^\.]\.(swf)\s*$/i,te,X=1,V=0,ie="",R,Y,L=!1,Q=e.extend(e("<div/>")[0],{prop:0}),oe=e.browser.msie&&e.browser.version<7&&!window.XMLHttpRequest,b=function(){w.hide(),N.onerror=N.onload=null,k&&k.abort(),n.empty()},Le=function(){if(_.onError(O,F,_)===!1){w.hide(),L=!1;return}_.titleShow=!1,_.width="auto",_.height="auto",n.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>'),J()},ce=function(){var le=O[F],Oe,ft,Ct,Rt,Wt,nn;if(b(),_=e.extend({},e.fn.fancybox.defaults,typeof e(le).data("fancybox")=="undefined"?_:e(le).data("fancybox")),nn=_.onStart(O,F,_),nn===!1){L=!1;return}else typeof nn=="object"&&(_=e.extend(_,nn));if(Ct=_.title||(le.nodeName?e(le).attr("title"):le.title)||"",le.nodeName&&!_.orig&&(_.orig=e(le).children("img:first").length?e(le).children("img:first"):e(le)),Ct===""&&_.orig&&_.titleFromAlt&&(Ct=_.orig.attr("alt")),Oe=_.href||(le.nodeName?e(le).attr("href"):le.href)||null,(/^(?:javascript)/i.test(Oe)||Oe=="#")&&(Oe=null),_.type?(ft=_.type,Oe||(Oe=_.content)):_.content?ft="html":Oe&&(Oe.match(G)?ft="image":Oe.match(K)?ft="swf":e(le).hasClass("iframe")?ft="iframe":Oe.indexOf("#")===0?ft="inline":ft="ajax"),!ft){Le();return}switch(ft=="inline"&&(le=Oe.substr(Oe.indexOf("#")),ft=e(le).length>0?"inline":"ajax"),_.type=ft,_.href=Oe,_.title=Ct,_.autoDimensions&&(_.type=="html"||_.type=="inline"||_.type=="ajax"?(_.width="auto",_.height="auto"):_.autoDimensions=!1),_.modal&&(_.overlayShow=!0,_.hideOnOverlayClick=!1,_.hideOnContentClick=!1,_.enableEscapeButton=!1,_.showCloseButton=!1),_.padding=parseInt(_.padding,10),_.margin=parseInt(_.margin,10),n.css("padding",_.padding+_.margin),e(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){e(this).replaceWith(p.children())}),ft){case"html":n.html(_.content),J();break;case"inline":if(e(le).parent().is("#fancybox-content")===!0){L=!1;return}e('<div class="fancybox-inline-tmp" />').hide().insertBefore(e(le)).bind("fancybox-cleanup",function(){e(this).replaceWith(p.children())}).bind("fancybox-cancel",function(){e(this).replaceWith(n.children())}),e(le).appendTo(n),J();break;case"image":L=!1,e.fancybox.showActivity(),N=new Image,N.onerror=function(){Le()},N.onload=function(){L=!0,N.onerror=N.onload=null,me()},N.src=Oe;break;case"swf":_.scrolling="no",Rt='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+_.width+'" height="'+_.height+'"><param name="movie" value="'+Oe+'"></param>',Wt="",e.each(_.swf,function(rn,Kt){Rt+='<param name="'+rn+'" value="'+Kt+'"></param>',Wt+=" "+rn+'="'+Kt+'"'}),Rt+='<embed src="'+Oe+'" type="application/x-shockwave-flash" width="'+_.width+'" height="'+_.height+'"'+Wt+"></embed></object>",n.html(Rt),J();break;case"ajax":L=!1,e.fancybox.showActivity(),_.ajax.win=_.ajax.success,k=e.ajax(e.extend({},_.ajax,{url:Oe,data:_.ajax.data||{},error:function(rn,Kt,Vt){rn.status>0&&Le()},success:function(rn,Kt,Vt){var Qt=typeof Vt=="object"?Vt:k;if(Qt.status==200){if(typeof _.ajax.win=="function")if(nn=_.ajax.win(Oe,rn,Kt,Vt),nn===!1){w.hide();return}else(typeof nn=="string"||typeof nn=="object")&&(rn=nn);n.html(rn),J()}}}));break;case"iframe":f();break}},J=function(){var le=_.width,Oe=_.height;le.toString().indexOf("%")>-1?le=parseInt((e(window).width()-_.margin*2)*parseFloat(le)/100,10)+"px":le=le=="auto"?"auto":le+"px",Oe.toString().indexOf("%")>-1?Oe=parseInt((e(window).height()-_.margin*2)*parseFloat(Oe)/100,10)+"px":Oe=Oe=="auto"?"auto":Oe+"px",n.wrapInner('<div style="width:'+le+";height:"+Oe+";overflow: "+(_.scrolling=="auto"?"auto":_.scrolling=="yes"?"scroll":"hidden")+';position:relative;"></div>'),_.width=n.width(),_.height=n.height(),f()},me=function(){_.width=N.width,_.height=N.height,e("<img />").attr({id:"fancybox-img",src:N.src,alt:_.title}).appendTo(n),f()},f=function(){e("#fancybox-outer").css("background","white");var le,Oe;if(w.hide(),c.is(":visible")&&h.onCleanup(S,v,h)===!1){e.event.trigger("fancybox-cancel"),L=!1;return}if(L=!0,e(p.add(l)).unbind(),e(window).unbind("resize.fb scroll.fb"),e(document).unbind("keydown.fb"),c.is(":visible")&&h.titlePosition!=="outside"&&c.css("height",c.height()),S=O,v=F,h=_,h.overlayShow?(l.css({"background-color":h.overlayColor,opacity:h.overlayOpacity,cursor:h.hideOnOverlayClick?"pointer":"auto",height:e(document).height()}),l.is(":visible")||(oe&&e("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"}),l.show())):l.hide(),Y=Pe(),je(),c.is(":visible")){e(T.add(D).add(U)).hide(),le=c.position(),R={top:le.top,left:le.left,width:c.width(),height:c.height()},Oe=R.width==Y.width&&R.height==Y.height,p.fadeTo(h.changeFade,.3,function(){var ft=function(){p.html(n.contents()).fadeTo(h.changeFade,1,ot)};e.event.trigger("fancybox-change"),p.empty().removeAttr("filter").css({"border-width":h.padding,width:Y.width-h.padding*2,height:_.autoDimensions?"auto":Y.height-V-h.padding*2}),Oe?ft():(Q.prop=0,e(Q).animate({prop:1},{duration:h.changeSpeed,easing:h.easingChange,step:Ue,complete:ft}))});return}if(c.removeAttr("style"),p.css("border-width",h.padding),h.transitionIn=="elastic"){R=xt(),p.html(n.contents()),c.show(),h.opacity&&(Y.opacity=0),Q.prop=0,e(Q).animate({prop:1},{duration:h.speedIn,easing:h.easingIn,step:Ue,complete:ot});return}h.titlePosition=="inside"&&V>0&&A.show(),p.css({width:Y.width-h.padding*2,height:_.autoDimensions?"auto":Y.height-V-h.padding*2}).html(n.contents()),c.css(Y).fadeIn(h.transitionIn=="none"?0:h.speedIn,ot)},Re=function(le){return le&&le.length?h.titlePosition=="float"?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+le+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+h.titlePosition+'">'+le+"</div>":!1},je=function(){if(ie=h.title||"",V=0,A.empty().removeAttr("style").removeClass(),h.titleShow===!1){A.hide();return}if(ie=e.isFunction(h.titleFormat)?h.titleFormat(ie,S,v,h):Re(ie),!ie||ie===""){A.hide();return}switch(A.addClass("fancybox-title-"+h.titlePosition).html(ie).appendTo("body").show(),h.titlePosition){case"inside":A.css({width:Y.width-h.padding*2,marginLeft:h.padding,marginRight:h.padding}),V=A.outerHeight(!0),A.appendTo(m),Y.height+=V;break;case"over":A.css({marginLeft:h.padding,width:Y.width-h.padding*2,bottom:h.padding}).appendTo(m);break;case"float":A.css("left",parseInt((A.width()-Y.width-40)/2,10)*-1).appendTo(c);break;default:A.css({width:Y.width-h.padding*2,paddingLeft:h.padding,paddingRight:h.padding}).appendTo(c);break}A.hide()},Me=function(){if((h.enableEscapeButton||h.enableKeyboardNav)&&e(document).bind("keydown.fb",function(le){le.keyCode==27&&h.enableEscapeButton?(le.preventDefault(),e.fancybox.close()):(le.keyCode==37||le.keyCode==39)&&h.enableKeyboardNav&&le.target.tagName!=="INPUT"&&le.target.tagName!=="TEXTAREA"&&le.target.tagName!=="SELECT"&&(le.preventDefault(),e.fancybox[le.keyCode==37?"prev":"next"]())}),!h.showNavArrows){D.hide(),U.hide();return}(h.cyclic&&S.length>1||v!==0)&&D.show(),(h.cyclic&&S.length>1||v!=S.length-1)&&U.show()},ot=function(){e.support.opacity||(p.get(0).style.removeAttribute("filter"),c.get(0).style.removeAttribute("filter")),_.autoDimensions&&p.css("height","auto"),c.css("height","auto"),ie&&ie.length&&A.show(),h.showCloseButton&&T.show(),Me(),h.hideOnContentClick&&p.bind("click",e.fancybox.close),h.hideOnOverlayClick&&l.bind("click",e.fancybox.close),e(window).bind("resize.fb",e.fancybox.resize),h.centerOnScroll&&e(window).bind("scroll.fb",e.fancybox.center),h.type=="iframe"&&e('<iframe id="fancybox-frame" name="fancybox-frame'+new Date().getTime()+'" frameborder="0" hspace="0" '+(e.browser.msie?'allowtransparency="true""':"")+' scrolling="'+_.scrolling+'" src="'+h.href+'"></iframe>').appendTo(p),c.show(),L=!1,e.fancybox.center(),h.onComplete(S,v,h),Tt()},Tt=function(){var le,Oe;S.length-1>v&&(le=S[v+1].href,typeof le!="undefined"&&le.match(G)&&(Oe=new Image,Oe.src=le)),v>0&&(le=S[v-1].href,typeof le!="undefined"&&le.match(G)&&(Oe=new Image,Oe.src=le))},Ue=function(le){var Oe={width:parseInt(R.width+(Y.width-R.width)*le,10),height:parseInt(R.height+(Y.height-R.height)*le,10),top:parseInt(R.top+(Y.top-R.top)*le,10),left:parseInt(R.left+(Y.left-R.left)*le,10)};typeof Y.opacity!="undefined"&&(Oe.opacity=le<.5?.5:le),c.css(Oe),p.css({width:Oe.width-h.padding*2,height:Oe.height-V*le-h.padding*2})},et=function(){return[e(window).width()-h.margin*2,e(window).height()-h.margin*2,e(document).scrollLeft()+h.margin,e(document).scrollTop()+h.margin]},Pe=function(){var le=et(),Oe={},ft=h.autoScale,Ct=h.padding*2,Rt;return h.width.toString().indexOf("%")>-1?Oe.width=parseInt(le[0]*parseFloat(h.width)/100,10):Oe.width=h.width+Ct,h.height.toString().indexOf("%")>-1?Oe.height=parseInt(le[1]*parseFloat(h.height)/100,10):Oe.height=h.height+Ct,ft&&(Oe.width>le[0]||Oe.height>le[1])&&(_.type=="image"||_.type=="swf"?(Rt=h.width/h.height,Oe.width>le[0]&&(Oe.width=le[0],Oe.height=parseInt((Oe.width-Ct)/Rt+Ct,10)),Oe.height>le[1]&&(Oe.height=le[1],Oe.width=parseInt((Oe.height-Ct)*Rt+Ct,10))):(Oe.width=Math.min(Oe.width,le[0]),Oe.height=Math.min(Oe.height,le[1]))),Oe.top=parseInt(Math.max(le[3]-20,le[3]+(le[1]-Oe.height-40)*.5),10),Oe.left=parseInt(Math.max(le[2]-20,le[2]+(le[0]-Oe.width-40)*.5),10),Oe},We=function(le){var Oe=le.offset();return Oe.top+=parseInt(le.css("paddingTop"),10)||0,Oe.left+=parseInt(le.css("paddingLeft"),10)||0,Oe.top+=parseInt(le.css("border-top-width"),10)||0,Oe.left+=parseInt(le.css("border-left-width"),10)||0,Oe.width=le.width(),Oe.height=le.height(),Oe},xt=function(){var le=_.orig?e(_.orig):!1,Oe={},ft,Ct;return le&&le.length?(ft=We(le),Oe={width:ft.width+h.padding*2,height:ft.height+h.padding*2,top:ft.top-h.padding-20,left:ft.left-h.padding-20}):(Ct=et(),Oe={width:h.padding*2,height:h.padding*2,top:parseInt(Ct[3]+Ct[1]*.5,10),left:parseInt(Ct[2]+Ct[0]*.5,10)}),Oe},Et=function(){if(!w.is(":visible")){clearInterval(te);return}e("div",w).css("top",X*-40+"px"),X=(X+1)%12};e.fn.fancybox=function(le){return e(this).length?(e(this).data("fancybox",e.extend({},le,e.metadata?e(this).metadata():{})).unbind("click.fb").bind("click.fb",function(Oe){if(Oe.preventDefault(),!L){L=!0,e(this).blur(),O=[],F=0;var ft=e(this).attr("rel")||"";!ft||ft==""||ft==="nofollow"?O.push(this):(O=e("a[rel="+ft+"], area[rel="+ft+"]"),F=O.index(this)),ce()}}),this):this},e.fancybox=function(le){var Oe;if(!L){if(L=!0,Oe=typeof arguments[1]!="undefined"?arguments[1]:{},O=[],F=parseInt(Oe.index,10)||0,e.isArray(le)){for(var ft=0,Ct=le.length;ft<Ct;ft++)typeof le[ft]=="object"?e(le[ft]).data("fancybox",e.extend({},Oe,le[ft])):le[ft]=e({}).data("fancybox",e.extend({content:le[ft]},Oe));O=jQuery.merge(O,le)}else typeof le=="object"?e(le).data("fancybox",e.extend({},Oe,le)):le=e({}).data("fancybox",e.extend({content:le},Oe)),O.push(le);(F>O.length||F<0)&&(F=0),ce()}},e.fancybox.showActivity=function(){clearInterval(te),w.show(),te=setInterval(Et,66)},e.fancybox.hideActivity=function(){w.hide()},e.fancybox.next=function(){return e.fancybox.pos(v+1)},e.fancybox.prev=function(){return e.fancybox.pos(v-1)},e.fancybox.pos=function(le){L||(le=parseInt(le),O=S,le>-1&&le<S.length?(F=le,ce()):h.cyclic&&S.length>1&&(F=le>=S.length?0:S.length-1,ce()))},e.fancybox.cancel=function(){L||(L=!0,e.event.trigger("fancybox-cancel"),b(),_.onCancel(O,F,_),L=!1)},e.fancybox.close=function(){if(L||c.is(":hidden"))return;if(L=!0,h&&(typeof h.onCleanup!="function"||h.onCleanup(S,v,h)===!1)){L=!1;return}b(),e(T.add(D).add(U)).hide(),e(p.add(l)).unbind(),e(window).unbind("resize.fb scroll.fb"),e(document).unbind("keydown.fb"),p.find("iframe").attr("src",oe&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank"),h.titlePosition!=="inside"&&A.empty(),c.stop();function le(){l.fadeOut("fast"),A.empty().hide(),c.hide(),e.event.trigger("fancybox-cleanup"),p.empty(),h.onClosed(S,v,h),S=_=[],v=F=0,h=_={},L=!1}if(h.transitionOut=="elastic"){R=xt();var Oe=c.position();Y={top:Oe.top,left:Oe.left,width:c.width(),height:c.height()},h.opacity&&(Y.opacity=1),A.empty().hide(),Q.prop=1,e(Q).animate({prop:0},{duration:h.speedOut,easing:h.easingOut,step:Ue,complete:le})}else c.fadeOut(h.transitionOut=="none"?0:h.speedOut,le)},e.fancybox.resize=function(){l.is(":visible")&&l.css("height",e(document).height()),e.fancybox.center(!0)},e.fancybox.center=function(){if(!(h&&h.center===!1)){var le,Oe;L||(Oe=arguments[0]===!0?1:0,le=et(),!(!Oe&&(c.width()>le[0]||c.height()>le[1]))&&c.stop().animate({top:parseInt(Math.max(le[3]-20,le[3]+(le[1]-p.height()-40)*.5-h.padding)),left:parseInt(Math.max(le[2]-20,le[2]+(le[0]-p.width()-40)*.5-h.padding))},typeof arguments[0]=="number"?arguments[0]:200))}},e.fancybox.init=function(){e("#fancybox-wrap").length||(e("body").append(n=e('<div id="fancybox-tmp"></div>'),w=e('<div id="fancybox-loading"><div></div></div>'),l=e('<div id="fancybox-overlay"></div>'),c=e('<div id="fancybox-wrap"></div>')),m=e('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(c),m.append(p=e('<div id="fancybox-content"></div>'),T=e('<a id="fancybox-close"></a>'),A=e('<div id="fancybox-title"></div>'),D=e('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),U=e('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>')),T.click(e.fancybox.close),w.click(e.fancybox.cancel),D.click(function(le){le.preventDefault(),e.fancybox.prev()}),U.click(function(le){le.preventDefault(),e.fancybox.next()}),e.fn.mousewheel&&c.bind("mousewheel.fb",function(le,Oe){L?le.preventDefault():(e(le.target).get(0).clientHeight==0||e(le.target).get(0).scrollHeight===e(le.target).get(0).clientHeight)&&(le.preventDefault(),e.fancybox[Oe>0?"prev":"next"]())}),e.support.opacity||c.addClass("fancybox-ie"),oe&&(w.addClass("fancybox-ie6"),c.addClass("fancybox-ie6"),e('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(m)))},e.fn.fancybox.defaults={padding:10,margin:40,opacity:!1,modal:!1,cyclic:!1,scrolling:"auto",width:560,height:340,autoScale:!0,autoDimensions:!0,centerOnScroll:!1,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:!0,hideOnContentClick:!1,overlayShow:!0,overlayOpacity:.7,overlayColor:"#777",titleShow:!0,titlePosition:"float",titleFormat:null,titleFromAlt:!1,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:!0,showNavArrows:!0,enableEscapeButton:!0,enableKeyboardNav:!0,center:!0,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}},e(document).ready(function(){e.fancybox.init()})})(jQuery),(function(e){function n(c){var m=c||window.event,p=[].slice.call(arguments,1),T=0,A=!0,D=0,U=0;return c=e.event.fix(m),c.type="mousewheel",m.wheelDelta&&(T=m.wheelDelta/120),m.detail&&(T=-m.detail/3),U=T,m.axis!==void 0&&m.axis===m.HORIZONTAL_AXIS&&(U=0,D=-1*T),m.wheelDeltaY!==void 0&&(U=m.wheelDeltaY/120),m.wheelDeltaX!==void 0&&(D=-1*m.wheelDeltaX/120),p.unshift(c,T,D,U),(e.event.dispatch||e.event.handle).apply(this,p)}var w=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var l=w.length;l;)e.event.fixHooks[w[--l]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var c=w.length;c;)this.addEventListener(w[--c],n,!1);else this.onmousewheel=n},teardown:function(){if(this.removeEventListener)for(var c=w.length;c;)this.removeEventListener(w[--c],n,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(c){return c?this.bind("mousewheel",c):this.trigger("mousewheel")},unmousewheel:function(c){return this.unbind("mousewheel",c)}})})(jQuery),(function(e){var n={init:function(p){var m={set_width:!1,set_height:!1,horizontalScroll:!1,scrollInertia:950,mouseWheel:!0,mouseWheelPixels:"auto",autoDraggerLength:!0,autoHideScrollbar:!1,snapAmount:null,snapOffset:0,scrollButtons:{enable:!1,scrollType:"continuous",scrollSpeed:"auto",scrollAmount:40},advanced:{updateOnBrowserResize:!0,updateOnContentResize:!1,autoExpandHorizontalScroll:!1,autoScrollOnFocus:!0,normalizeMouseWheelDelta:!1},contentTouchScroll:!0,callbacks:{onScrollStart:function(){},onScroll:function(){},onTotalScroll:function(){},onTotalScrollBack:function(){},onTotalScrollOffset:0,onTotalScrollBackOffset:0,whileScrolling:function(){}},theme:"light"},p=e.extend(!0,m,p);return this.each(function(){var T=e(this);if(p.set_width&&T.css("width",p.set_width),p.set_height&&T.css("height",p.set_height),!e(document).data("mCustomScrollbar-index"))e(document).data("mCustomScrollbar-index","1");else{var A=parseInt(e(document).data("mCustomScrollbar-index"));e(document).data("mCustomScrollbar-index",A+1)}T.wrapInner("<div class='mCustomScrollBox mCS-"+p.theme+"' id='mCSB_"+e(document).data("mCustomScrollbar-index")+"' style='position:relative; height:100%; overflow:hidden; max-width:100%;' />").addClass("mCustomScrollbar _mCS_"+e(document).data("mCustomScrollbar-index"));var D=T.children(".mCustomScrollBox");if(p.horizontalScroll){D.addClass("mCSB_horizontal").wrapInner("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />");var U=D.children(".mCSB_h_wrapper");U.wrapInner("<div class='mCSB_container' style='position:absolute; left:0;' />").children(".mCSB_container").css({width:U.children().outerWidth(),position:"relative"}).unwrap()}else D.wrapInner("<div class='mCSB_container' style='position:relative; top:0;' />");var F=D.children(".mCSB_container");e.support.touch&&F.addClass("mCS_touch"),F.after("<div class='mCSB_scrollTools' style='position:absolute;'><div class='mCSB_draggerContainer'><div class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' style='position:relative;'></div></div><div class='mCSB_draggerRail'></div></div></div>");var _=D.children(".mCSB_scrollTools"),O=_.children(".mCSB_draggerContainer"),v=O.children(".mCSB_dragger");if(p.horizontalScroll?v.data("minDraggerWidth",v.width()):v.data("minDraggerHeight",v.height()),p.scrollButtons.enable&&(p.horizontalScroll?_.prepend("<a class='mCSB_buttonLeft' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonRight' oncontextmenu='return false;'></a>"):_.prepend("<a class='mCSB_buttonUp' oncontextmenu='return false;'></a>").append("<a class='mCSB_buttonDown' oncontextmenu='return false;'></a>")),D.bind("scroll",function(){T.is(".mCS_disabled")||D.scrollTop(0).scrollLeft(0)}),T.data({mCS_Init:!0,mCustomScrollbarIndex:e(document).data("mCustomScrollbar-index"),horizontalScroll:p.horizontalScroll,scrollInertia:p.scrollInertia,scrollEasing:"mcsEaseOut",mouseWheel:p.mouseWheel,mouseWheelPixels:p.mouseWheelPixels,autoDraggerLength:p.autoDraggerLength,autoHideScrollbar:p.autoHideScrollbar,snapAmount:p.snapAmount,snapOffset:p.snapOffset,scrollButtons_enable:p.scrollButtons.enable,scrollButtons_scrollType:p.scrollButtons.scrollType,scrollButtons_scrollSpeed:p.scrollButtons.scrollSpeed,scrollButtons_scrollAmount:p.scrollButtons.scrollAmount,autoExpandHorizontalScroll:p.advanced.autoExpandHorizontalScroll,autoScrollOnFocus:p.advanced.autoScrollOnFocus,normalizeMouseWheelDelta:p.advanced.normalizeMouseWheelDelta,contentTouchScroll:p.contentTouchScroll,onScrollStart_Callback:p.callbacks.onScrollStart,onScroll_Callback:p.callbacks.onScroll,onTotalScroll_Callback:p.callbacks.onTotalScroll,onTotalScrollBack_Callback:p.callbacks.onTotalScrollBack,onTotalScroll_Offset:p.callbacks.onTotalScrollOffset,onTotalScrollBack_Offset:p.callbacks.onTotalScrollBackOffset,whileScrolling_Callback:p.callbacks.whileScrolling,bindEvent_scrollbar_drag:!1,bindEvent_content_touch:!1,bindEvent_scrollbar_click:!1,bindEvent_mousewheel:!1,bindEvent_buttonsContinuous_y:!1,bindEvent_buttonsContinuous_x:!1,bindEvent_buttonsPixels_y:!1,bindEvent_buttonsPixels_x:!1,bindEvent_focusin:!1,bindEvent_autoHideScrollbar:!1,mCSB_buttonScrollRight:!1,mCSB_buttonScrollLeft:!1,mCSB_buttonScrollDown:!1,mCSB_buttonScrollUp:!1}),p.horizontalScroll)T.css("max-width")!=="none"&&(p.advanced.updateOnContentResize||(p.advanced.updateOnContentResize=!0));else if(T.css("max-height")!=="none"){var h=!1,S=parseInt(T.css("max-height"));T.css("max-height").indexOf("%")>=0&&(h=S,S=T.parent().height()*h/100),T.css("overflow","hidden"),D.css("max-height",S)}if(T.mCustomScrollbar("update"),p.advanced.updateOnBrowserResize){var k,N=e(window).width(),G=e(window).height();e(window).bind("resize."+T.data("mCustomScrollbarIndex"),function(){k&&clearTimeout(k),k=setTimeout(function(){if(!T.is(".mCS_disabled")&&!T.is(".mCS_destroyed")){var X=e(window).width(),V=e(window).height();(N!==X||G!==V)&&(T.css("max-height")!=="none"&&h&&D.css("max-height",T.parent().height()*h/100),T.mCustomScrollbar("update"),N=X,G=V)}},150)})}if(p.advanced.updateOnContentResize){var K;if(p.horizontalScroll)var te=F.outerWidth();else var te=F.outerHeight();K=setInterval(function(){if(p.horizontalScroll){p.advanced.autoExpandHorizontalScroll&&F.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:F.outerWidth(),position:"relative"}).unwrap();var X=F.outerWidth()}else var X=F.outerHeight();X!=te&&(T.mCustomScrollbar("update"),te=X)},300)}})},update:function(){var c=e(this),m=c.children(".mCustomScrollBox"),p=m.children(".mCSB_container");p.removeClass("mCS_no_scrollbar"),c.removeClass("mCS_disabled mCS_destroyed"),m.scrollTop(0).scrollLeft(0);var T=m.children(".mCSB_scrollTools"),A=T.children(".mCSB_draggerContainer"),D=A.children(".mCSB_dragger");if(c.data("horizontalScroll")){var U=T.children(".mCSB_buttonLeft"),F=T.children(".mCSB_buttonRight"),_=m.width();c.data("autoExpandHorizontalScroll")&&p.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:p.outerWidth(),position:"relative"}).unwrap();var O=p.outerWidth()}else var v=T.children(".mCSB_buttonUp"),h=T.children(".mCSB_buttonDown"),S=m.height(),k=p.outerHeight();if(k>S&&!c.data("horizontalScroll")){T.css("display","block");var N=A.height();if(c.data("autoDraggerLength")){var G=Math.round(S/k*N),K=D.data("minDraggerHeight");if(G<=K)D.css({height:K});else if(G>=N-10){var te=N-10;D.css({height:te})}else D.css({height:G});D.children(".mCSB_dragger_bar").css({"line-height":D.height()+"px"})}var X=D.height(),V=(k-S)/(N-X);c.data("scrollAmount",V).mCustomScrollbar("scrolling",m,p,A,D,v,h,U,F);var ie=Math.abs(p.position().top);c.mCustomScrollbar("scrollTo",ie,{scrollInertia:0,trigger:"internal"})}else if(O>_&&c.data("horizontalScroll")){T.css("display","block");var R=A.width();if(c.data("autoDraggerLength")){var Y=Math.round(_/O*R),L=D.data("minDraggerWidth");if(Y<=L)D.css({width:L});else if(Y>=R-10){var Q=R-10;D.css({width:Q})}else D.css({width:Y})}var oe=D.width(),V=(O-_)/(R-oe);c.data("scrollAmount",V).mCustomScrollbar("scrolling",m,p,A,D,v,h,U,F);var ie=Math.abs(p.position().left);c.mCustomScrollbar("scrollTo",ie,{scrollInertia:0,trigger:"internal"})}else m.unbind("mousewheel focusin"),c.data("horizontalScroll")?D.add(p).css("left",0):D.add(p).css("top",0),T.css("display","none"),p.addClass("mCS_no_scrollbar"),c.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1})},scrolling:function(c,m,p,T,A,D,U,F){var _=e(this);if(!_.data("bindEvent_scrollbar_drag")){var O,v;e.support.msPointer?(T.bind("MSPointerDown",function(L){L.preventDefault(),_.data({on_drag:!0}),T.addClass("mCSB_dragger_onDrag");var Q=e(this),oe=Q.offset(),b=L.originalEvent.pageX-oe.left,Le=L.originalEvent.pageY-oe.top;b<Q.width()&&b>0&&Le<Q.height()&&Le>0&&(O=Le,v=b)}),e(document).bind("MSPointerMove."+_.data("mCustomScrollbarIndex"),function(L){if(L.preventDefault(),_.data("on_drag")){var Q=T,oe=Q.offset(),b=L.originalEvent.pageX-oe.left,Le=L.originalEvent.pageY-oe.top;h(O,v,Le,b)}}).bind("MSPointerUp."+_.data("mCustomScrollbarIndex"),function(L){_.data({on_drag:!1}),T.removeClass("mCSB_dragger_onDrag")})):(T.bind("mousedown touchstart",function(L){L.preventDefault(),L.stopImmediatePropagation();var Q=e(this),oe=Q.offset(),b,Le;if(L.type==="touchstart"){var ce=L.originalEvent.touches[0]||L.originalEvent.changedTouches[0];b=ce.pageX-oe.left,Le=ce.pageY-oe.top}else _.data({on_drag:!0}),T.addClass("mCSB_dragger_onDrag"),b=L.pageX-oe.left,Le=L.pageY-oe.top;b<Q.width()&&b>0&&Le<Q.height()&&Le>0&&(O=Le,v=b)}).bind("touchmove",function(L){L.preventDefault(),L.stopImmediatePropagation();var Q=L.originalEvent.touches[0]||L.originalEvent.changedTouches[0],oe=e(this),b=oe.offset(),Le=Q.pageX-b.left,ce=Q.pageY-b.top;h(O,v,ce,Le)}),e(document).bind("mousemove."+_.data("mCustomScrollbarIndex"),function(L){if(_.data("on_drag")){var Q=T,oe=Q.offset(),b=L.pageX-oe.left,Le=L.pageY-oe.top;h(O,v,Le,b)}}).bind("mouseup."+_.data("mCustomScrollbarIndex"),function(L){_.data({on_drag:!1}),T.removeClass("mCSB_dragger_onDrag")})),_.data({bindEvent_scrollbar_drag:!0})}function h(L,Q,oe,b){_.data("horizontalScroll")?_.mCustomScrollbar("scrollTo",T.position().left-Q+b,{moveDragger:!0,trigger:"internal"}):_.mCustomScrollbar("scrollTo",T.position().top-L+oe,{moveDragger:!0,trigger:"internal"})}if(e.support.touch&&_.data("contentTouchScroll")&&!_.data("bindEvent_content_touch")){var S,k,N,G,K,te,X;m.bind("touchstart",function(L){L.stopImmediatePropagation(),S=L.originalEvent.touches[0]||L.originalEvent.changedTouches[0],k=e(this),N=k.offset(),K=S.pageX-N.left,G=S.pageY-N.top,te=G,X=K}),m.bind("touchmove",function(L){L.preventDefault(),L.stopImmediatePropagation(),S=L.originalEvent.touches[0]||L.originalEvent.changedTouches[0],k=e(this).parent(),N=k.offset(),K=S.pageX-N.left,G=S.pageY-N.top,_.data("horizontalScroll")?_.mCustomScrollbar("scrollTo",X-K,{trigger:"internal"}):_.mCustomScrollbar("scrollTo",te-G,{trigger:"internal"})})}if(_.data("bindEvent_scrollbar_click")||(p.bind("click",function(L){var Q=(L.pageY-p.offset().top)*_.data("scrollAmount"),oe=e(L.target);_.data("horizontalScroll")&&(Q=(L.pageX-p.offset().left)*_.data("scrollAmount")),(oe.hasClass("mCSB_draggerContainer")||oe.hasClass("mCSB_draggerRail"))&&_.mCustomScrollbar("scrollTo",Q,{trigger:"internal",scrollEasing:"draggerRailEase"})}),_.data({bindEvent_scrollbar_click:!0})),_.data("mouseWheel")&&(_.data("bindEvent_mousewheel")||(c.bind("mousewheel",function(L,Q){var oe,b=_.data("mouseWheelPixels"),Le=Math.abs(m.position().top),ce=T.position().top,J=p.height()-T.height();_.data("normalizeMouseWheelDelta")&&(Q<0?Q=-1:Q=1),b==="auto"&&(b=100+Math.round(_.data("scrollAmount")/2)),_.data("horizontalScroll")&&(ce=T.position().left,J=p.width()-T.width(),Le=Math.abs(m.position().left)),(Q>0&&ce!==0||Q<0&&ce!==J)&&(L.preventDefault(),L.stopImmediatePropagation()),oe=Le-Q*b,_.mCustomScrollbar("scrollTo",oe,{trigger:"internal"})}),_.data({bindEvent_mousewheel:!0}))),_.data("scrollButtons_enable"))if(_.data("scrollButtons_scrollType")==="pixels"){let L=function(Q){T.data("preventAction")||(T.data("preventAction",!0),_.mCustomScrollbar("scrollTo",Q,{trigger:"internal"}))};_.data("horizontalScroll")?(F.add(U).unbind("mousedown touchstart MSPointerDown mouseup MSPointerUp mouseout MSPointerOut touchend",V,ie),_.data({bindEvent_buttonsContinuous_x:!1}),_.data("bindEvent_buttonsPixels_x")||(F.bind("click",function(Q){Q.preventDefault(),L(Math.abs(m.position().left)+_.data("scrollButtons_scrollAmount"))}),U.bind("click",function(Q){Q.preventDefault(),L(Math.abs(m.position().left)-_.data("scrollButtons_scrollAmount"))}),_.data({bindEvent_buttonsPixels_x:!0}))):(D.add(A).unbind("mousedown touchstart MSPointerDown mouseup MSPointerUp mouseout MSPointerOut touchend",V,ie),_.data({bindEvent_buttonsContinuous_y:!1}),_.data("bindEvent_buttonsPixels_y")||(D.bind("click",function(Q){Q.preventDefault(),L(Math.abs(m.position().top)+_.data("scrollButtons_scrollAmount"))}),A.bind("click",function(Q){Q.preventDefault(),L(Math.abs(m.position().top)-_.data("scrollButtons_scrollAmount"))}),_.data({bindEvent_buttonsPixels_y:!0})))}else{let L=function(){var Q=_.data("scrollButtons_scrollSpeed");return _.data("scrollButtons_scrollSpeed")==="auto"&&(Q=Math.round((_.data("scrollInertia")+100)/40)),Q};if(_.data("horizontalScroll")){if(F.add(U).unbind("click"),_.data({bindEvent_buttonsPixels_x:!1}),!_.data("bindEvent_buttonsContinuous_x")){F.bind("mousedown touchstart MSPointerDown",function(Q){Q.preventDefault();var oe=L();_.data({mCSB_buttonScrollRight:setInterval(function(){_.mCustomScrollbar("scrollTo",Math.abs(m.position().left)+oe,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var V=function(Q){Q.preventDefault(),clearInterval(_.data("mCSB_buttonScrollRight"))};F.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",V),U.bind("mousedown touchstart MSPointerDown",function(Q){Q.preventDefault();var oe=L();_.data({mCSB_buttonScrollLeft:setInterval(function(){_.mCustomScrollbar("scrollTo",Math.abs(m.position().left)-oe,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var ie=function(Q){Q.preventDefault(),clearInterval(_.data("mCSB_buttonScrollLeft"))};U.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",ie),_.data({bindEvent_buttonsContinuous_x:!0})}}else if(D.add(A).unbind("click"),_.data({bindEvent_buttonsPixels_y:!1}),!_.data("bindEvent_buttonsContinuous_y")){D.bind("mousedown touchstart MSPointerDown",function(Q){Q.preventDefault();var oe=L();_.data({mCSB_buttonScrollDown:setInterval(function(){_.mCustomScrollbar("scrollTo",Math.abs(m.position().top)+oe,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var R=function(Q){Q.preventDefault(),clearInterval(_.data("mCSB_buttonScrollDown"))};D.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",R),A.bind("mousedown touchstart MSPointerDown",function(Q){Q.preventDefault();var oe=L();_.data({mCSB_buttonScrollUp:setInterval(function(){_.mCustomScrollbar("scrollTo",Math.abs(m.position().top)-oe,{trigger:"internal",scrollEasing:"easeOutCirc"})},17)})});var Y=function(Q){Q.preventDefault(),clearInterval(_.data("mCSB_buttonScrollUp"))};A.bind("mouseup touchend MSPointerUp mouseout MSPointerOut",Y),_.data({bindEvent_buttonsContinuous_y:!0})}}_.data("autoScrollOnFocus")&&(_.data("bindEvent_focusin")||(c.bind("focusin",function(){c.scrollTop(0).scrollLeft(0);var L=e(document.activeElement);if(L.is("input,textarea,select,button,a[tabindex],area,object")){var Q=m.position().top,oe=L.position().top,b=c.height()-L.outerHeight();_.data("horizontalScroll")&&(Q=m.position().left,oe=L.position().left,b=c.width()-L.outerWidth()),(Q+oe<0||Q+oe>b)&&_.mCustomScrollbar("scrollTo",oe,{trigger:"internal"})}}),_.data({bindEvent_focusin:!0}))),_.data("autoHideScrollbar")&&(_.data("bindEvent_autoHideScrollbar")||(c.bind("mouseenter",function(L){c.addClass("mCS-mouse-over"),w.showScrollbar.call(c.children(".mCSB_scrollTools"))}).bind("mouseleave touchend",function(L){c.removeClass("mCS-mouse-over"),L.type==="mouseleave"&&w.hideScrollbar.call(c.children(".mCSB_scrollTools"))}),_.data({bindEvent_autoHideScrollbar:!0})))},scrollTo:function(c,A){var p=e(this),T={moveDragger:!1,trigger:"external",callbacks:!0,scrollInertia:p.data("scrollInertia"),scrollEasing:p.data("scrollEasing")},A=e.extend(T,A),D,U=p.children(".mCustomScrollBox"),F=U.children(".mCSB_container"),_=U.children(".mCSB_scrollTools"),O=_.children(".mCSB_draggerContainer"),v=O.children(".mCSB_dragger"),h=draggerSpeed=A.scrollInertia,S,k,N,G;if(!F.hasClass("mCS_no_scrollbar")&&(p.data({mCS_trigger:A.trigger}),p.data("mCS_Init")&&(A.callbacks=!1),c||c===0)){if(typeof c=="number")A.moveDragger?(D=c,p.data("horizontalScroll")?c=v.position().left*p.data("scrollAmount"):c=v.position().top*p.data("scrollAmount"),draggerSpeed=0):D=c/p.data("scrollAmount");else if(typeof c=="string"){var K;c==="top"?K=0:c==="bottom"&&!p.data("horizontalScroll")?K=F.outerHeight()-U.height():c==="left"?K=0:c==="right"&&p.data("horizontalScroll")?K=F.outerWidth()-U.width():c==="first"?K=p.find(".mCSB_container").find(":first"):c==="last"?K=p.find(".mCSB_container").find(":last"):K=p.find(c),K.length===1?(p.data("horizontalScroll")?c=K.position().left:c=K.position().top,D=c/p.data("scrollAmount")):D=c=K}if(p.data("horizontalScroll")){p.data("onTotalScrollBack_Offset")&&(k=-p.data("onTotalScrollBack_Offset")),p.data("onTotalScroll_Offset")&&(G=U.width()-F.outerWidth()+p.data("onTotalScroll_Offset")),D<0?(D=c=0,clearInterval(p.data("mCSB_buttonScrollLeft")),k||(S=!0)):D>=O.width()-v.width()?(D=O.width()-v.width(),c=U.width()-F.outerWidth(),clearInterval(p.data("mCSB_buttonScrollRight")),G||(N=!0)):c=-c;var te=p.data("snapAmount");te&&(c=Math.round(c/te)*te-p.data("snapOffset")),w.mTweenAxis.call(this,v[0],"left",Math.round(D),draggerSpeed,A.scrollEasing),w.mTweenAxis.call(this,F[0],"left",Math.round(c),h,A.scrollEasing,{onStart:function(){A.callbacks&&!p.data("mCS_tweenRunning")&&X("onScrollStart"),p.data("autoHideScrollbar")&&w.showScrollbar.call(_)},onUpdate:function(){A.callbacks&&X("whileScrolling")},onComplete:function(){A.callbacks&&(X("onScroll"),(S||k&&F.position().left>=k)&&X("onTotalScrollBack"),(N||G&&F.position().left<=G)&&X("onTotalScroll")),v.data("preventAction",!1),p.data("mCS_tweenRunning",!1),p.data("autoHideScrollbar")&&(U.hasClass("mCS-mouse-over")||w.hideScrollbar.call(_))}})}else{p.data("onTotalScrollBack_Offset")&&(k=-p.data("onTotalScrollBack_Offset")),p.data("onTotalScroll_Offset")&&(G=U.height()-F.outerHeight()+p.data("onTotalScroll_Offset")),D<0?(D=c=0,clearInterval(p.data("mCSB_buttonScrollUp")),k||(S=!0)):D>=O.height()-v.height()?(D=O.height()-v.height(),c=U.height()-F.outerHeight(),clearInterval(p.data("mCSB_buttonScrollDown")),G||(N=!0)):c=-c;var te=p.data("snapAmount");te&&(c=Math.round(c/te)*te-p.data("snapOffset")),w.mTweenAxis.call(this,v[0],"top",Math.round(D),draggerSpeed,A.scrollEasing),w.mTweenAxis.call(this,F[0],"top",Math.round(c),h,A.scrollEasing,{onStart:function(){A.callbacks&&!p.data("mCS_tweenRunning")&&X("onScrollStart"),p.data("autoHideScrollbar")&&w.showScrollbar.call(_)},onUpdate:function(){A.callbacks&&X("whileScrolling")},onComplete:function(){A.callbacks&&(X("onScroll"),(S||k&&F.position().top>=k)&&X("onTotalScrollBack"),(N||G&&F.position().top<=G)&&X("onTotalScroll")),v.data("preventAction",!1),p.data("mCS_tweenRunning",!1),p.data("autoHideScrollbar")&&(U.hasClass("mCS-mouse-over")||w.hideScrollbar.call(_))}})}p.data("mCS_Init")&&p.data({mCS_Init:!1})}function X(V){switch(this.mcs={top:F.position().top,left:F.position().left,draggerTop:v.position().top,draggerLeft:v.position().left,topPct:Math.round(100*Math.abs(F.position().top)/Math.abs(F.outerHeight()-U.height())),leftPct:Math.round(100*Math.abs(F.position().left)/Math.abs(F.outerWidth()-U.width()))},V){case"onScrollStart":p.data("mCS_tweenRunning",!0).data("onScrollStart_Callback").call(p,this.mcs);break;case"whileScrolling":p.data("whileScrolling_Callback").call(p,this.mcs);break;case"onScroll":p.data("onScroll_Callback").call(p,this.mcs);break;case"onTotalScrollBack":p.data("onTotalScrollBack_Callback").call(p,this.mcs);break;case"onTotalScroll":p.data("onTotalScroll_Callback").call(p,this.mcs);break}}},stop:function(){var c=e(this),m=c.children().children(".mCSB_container"),p=c.children().children().children().children(".mCSB_dragger");w.mTweenAxisStop.call(this,m[0]),w.mTweenAxisStop.call(this,p[0])},disable:function(c){var m=e(this),p=m.children(".mCustomScrollBox"),T=p.children(".mCSB_container"),A=p.children(".mCSB_scrollTools"),D=A.children().children(".mCSB_dragger");p.unbind("mousewheel focusin mouseenter mouseleave touchend"),T.unbind("touchstart touchmove"),c&&(m.data("horizontalScroll")?D.add(T).css("left",0):D.add(T).css("top",0)),A.css("display","none"),T.addClass("mCS_no_scrollbar"),m.data({bindEvent_mousewheel:!1,bindEvent_focusin:!1,bindEvent_content_touch:!1,bindEvent_autoHideScrollbar:!1}).addClass("mCS_disabled")},destroy:function(){var c=e(this);c.removeClass("mCustomScrollbar _mCS_"+c.data("mCustomScrollbarIndex")).addClass("mCS_destroyed").children().children(".mCSB_container").unwrap().children().unwrap().siblings(".mCSB_scrollTools").remove(),e(document).unbind("mousemove."+c.data("mCustomScrollbarIndex")+" mouseup."+c.data("mCustomScrollbarIndex")+" MSPointerMove."+c.data("mCustomScrollbarIndex")+" MSPointerUp."+c.data("mCustomScrollbarIndex")),e(window).unbind("resize."+c.data("mCustomScrollbarIndex"))}},w={showScrollbar:function(){this.stop().animate({opacity:1},"fast")},hideScrollbar:function(){this.stop().animate({opacity:0},"fast")},mTweenAxis:function(c,m,p,T,A,U){var U=U||{},F=U.onStart||function(){},_=U.onUpdate||function(){},O=U.onComplete||function(){},v=K(),h,S=0,k=c.offsetTop,N=c.style;m==="left"&&(k=c.offsetLeft);var G=p-k;ie(),V();function K(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():new Date().getTime()}function te(){S||F.call(),S=K()-v,X(),S>=c._time&&(c._time=S>c._time?S+h-(S-c._time):S+h-1,c._time<S+1&&(c._time=S+1)),c._time<T?c._id=_request(te):O.call()}function X(){T>0?(c.currVal=R(c._time,k,G,T,A),N[m]=Math.round(c.currVal)+"px"):N[m]=p+"px",_.call()}function V(){h=1e3/60,c._time=S+h,_request=window.requestAnimationFrame?window.requestAnimationFrame:function(Y){return X(),setTimeout(Y,.01)},c._id=_request(te)}function ie(){c._id!=null&&(window.requestAnimationFrame?window.cancelAnimationFrame(c._id):clearTimeout(c._id),c._id=null)}function R(Y,L,Q,oe,b){switch(b){case"linear":return Q*Y/oe+L;case"easeOutQuad":return Y/=oe,-Q*Y*(Y-2)+L;break;case"easeInOutQuad":if(Y/=oe/2,Y<1)return Q/2*Y*Y+L;return Y--,-Q/2*(Y*(Y-2)-1)+L;break;case"easeOutCubic":return Y/=oe,Y--,Q*(Y*Y*Y+1)+L;break;case"easeOutQuart":return Y/=oe,Y--,-Q*(Y*Y*Y*Y-1)+L;break;case"easeOutQuint":return Y/=oe,Y--,Q*(Y*Y*Y*Y*Y+1)+L;break;case"easeOutCirc":return Y/=oe,Y--,Q*Math.sqrt(1-Y*Y)+L;break;case"easeOutSine":return Q*Math.sin(Y/oe*(Math.PI/2))+L;case"easeOutExpo":return Q*(-Math.pow(2,-10*Y/oe)+1)+L;case"mcsEaseOut":var Le=(Y/=oe)*Y,ce=Le*Y;return L+Q*(.499999999999997*ce*Le+-2.5*Le*Le+5.5*ce+-6.5*Le+4*Y);case"draggerRailEase":if(Y/=oe/2,Y<1)return Q/2*Y*Y*Y+L;return Y-=2,Q/2*(Y*Y*Y+2)+L;break}}},mTweenAxisStop:function(c){c._id!=null&&(window.requestAnimationFrame?window.cancelAnimationFrame(c._id):clearTimeout(c._id),c._id=null)},rafPolyfill:function(){for(var c=["ms","moz","webkit","o"],m=c.length;--m>-1&&!window.requestAnimationFrame;)window.requestAnimationFrame=window[c[m]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[m]+"CancelAnimationFrame"]||window[c[m]+"CancelRequestAnimationFrame"]}};w.rafPolyfill.call(),e.support.touch="ontouchstart"in window,e.support.msPointer=window.navigator.msPointerEnabled;var l=document.location.protocol=="https:"?"https:":"http:";e.event.special.mousewheel||document.write('<script src="'+l+'//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.0.6/jquery.mousewheel.min.js"><\/script>'),e.fn.mCustomScrollbar=function(c){if(n[c])return n[c].apply(this,Array.prototype.slice.call(arguments,1));if(typeof c=="object"||!c)return n.init.apply(this,arguments);e.error("Method "+c+" does not exist")}})(jQuery);/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 20112014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */(function(e){if(e.support.touch="ontouchend"in document,!e.support.touch)return;var n=e.ui.mouse.prototype,w=n._mouseInit,l=n._mouseDestroy,c;function m(p,T){if(!(p.originalEvent.touches.length>1)){p.preventDefault();var A=p.originalEvent.changedTouches[0],D=document.createEvent("MouseEvents");D.initMouseEvent(T,!0,!0,window,1,A.screenX,A.screenY,A.clientX,A.clientY,!1,!1,!1,!1,0,null),console.log("dispatch simulated event: "+T),p.target.dispatchEvent(D)}}n._touchStart=function(p){console.log("mouseProto._touchStart");var T=this;c||!T._mouseCapture(p.originalEvent.changedTouches[0])||(c=!0,T._touchMoved=!1,m(p,"mouseover"),m(p,"mousemove"),m(p,"mousedown"))},n._touchMove=function(p){console.log("mouseProto._touchMove"),c&&(this._touchMoved=!0,m(p,"mousemove"))},n._touchEnd=function(p){c&&(m(p,"mouseup"),m(p,"mouseout"),this._touchMoved||m(p,"click"),c=!1)},n._mouseInit=function(){var p=this;p.element.bind({touchstart:e.proxy(p,"_touchStart"),touchmove:e.proxy(p,"_touchMove"),touchend:e.proxy(p,"_touchEnd")}),w.call(p)},n._mouseDestroy=function(){var p=this;p.element.unbind({touchstart:e.proxy(p,"_touchStart"),touchmove:e.proxy(p,"_touchMove"),touchend:e.proxy(p,"_touchEnd")}),l.call(p)}})(jQuery),(function(e,n){typeof exports=="object"&&typeof module<"u"?n(exports):typeof define=="function"&&define.amd?define(["exports"],n):(e=typeof globalThis<"u"?globalThis:e||self,n(e.Annotorious={}))})(void 0,function(e){"use strict";var n=Object.defineProperty,w=(t,r,o)=>r in t?n(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o,l=(t,r,o)=>w(t,typeof r!="symbol"?r+"":r,o);function c(){}function m(t,r){for(const o in r)t[o]=r[o];return t}function p(t){return t()}function T(){return Object.create(null)}function A(t){t.forEach(p)}function D(t){return typeof t=="function"}function U(t,r){return t!=t?r==r:t!==r||t&&typeof t=="object"||typeof t=="function"}function F(t){return Object.keys(t).length===0}function _(t,...r){if(t==null){for(const s of r)s(void 0);return c}const o=t.subscribe(...r);return o.unsubscribe?()=>o.unsubscribe():o}function O(t,r,o){t.$$.on_destroy.push(_(r,o))}function v(t,r,o,s){if(t){const d=h(t,r,o,s);return t[0](d)}}function h(t,r,o,s){return t[1]&&s?m(o.ctx.slice(),t[1](s(r))):o.ctx}function S(t,r,o,s){if(t[2]&&s){const d=t[2](s(o));if(r.dirty===void 0)return d;if(typeof d=="object"){const g=[],x=Math.max(r.dirty.length,d.length);for(let C=0;C<x;C+=1)g[C]=r.dirty[C]|d[C];return g}return r.dirty|d}return r.dirty}function k(t,r,o,s,d,g){if(d){const x=h(r,o,s,g);t.p(x,d)}}function N(t){if(t.ctx.length>32){const r=[],o=t.ctx.length/32;for(let s=0;s<o;s++)r[s]=-1;return r}return-1}function G(t){const r={};for(const o in t)o[0]!=="$"&&(r[o]=t[o]);return r}function K(t){return t!=null?t:""}function te(t,r){t.appendChild(r)}function X(t,r,o){t.insertBefore(r,o||null)}function V(t){t.parentNode&&t.parentNode.removeChild(t)}function ie(t,r){for(let o=0;o<t.length;o+=1)t[o]&&t[o].d(r)}function R(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Y(t){return document.createTextNode(t)}function L(){return Y(" ")}function Q(){return Y("")}function oe(t,r,o,s){return t.addEventListener(r,o,s),()=>t.removeEventListener(r,o,s)}function b(t,r,o){o==null?t.removeAttribute(r):t.getAttribute(r)!==o&&t.setAttribute(r,o)}function Le(t){return Array.from(t.childNodes)}function ce(t,r,o){t.classList.toggle(r,!!o)}function J(t,r,{bubbles:o=!1,cancelable:s=!1}={}){return new CustomEvent(t,{detail:r,bubbles:o,cancelable:s})}let me;function f(t){me=t}function Re(){if(!me)throw new Error("Function called outside component initialization");return me}function je(t){Re().$$.on_mount.push(t)}function Me(){const t=Re();return(r,o,{cancelable:s=!1}={})=>{const d=t.$$.callbacks[r];if(d){const g=J(r,o,{cancelable:s});return d.slice().forEach(x=>{x.call(t,g)}),!g.defaultPrevented}return!0}}function ot(t,r){const o=t.$$.callbacks[r.type];o&&o.slice().forEach(s=>s.call(this,r))}const Tt=[],Ue=[];let et=[];const Pe=[],We=Promise.resolve();let xt=!1;function Et(){xt||(xt=!0,We.then(Rt))}function le(){return Et(),We}function Oe(t){et.push(t)}const ft=new Set;let Ct=0;function Rt(){if(Ct!==0)return;const t=me;do{try{for(;Ct<Tt.length;){const r=Tt[Ct];Ct++,f(r),Wt(r.$$)}}catch(r){throw Tt.length=0,Ct=0,r}for(f(null),Tt.length=0,Ct=0;Ue.length;)Ue.pop()();for(let r=0;r<et.length;r+=1){const o=et[r];ft.has(o)||(ft.add(o),o())}et.length=0}while(Tt.length);for(;Pe.length;)Pe.pop()();xt=!1,ft.clear(),f(t)}function Wt(t){if(t.fragment!==null){t.update(),A(t.before_update);const r=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,r),t.after_update.forEach(Oe)}}function nn(t){const r=[],o=[];et.forEach(s=>t.indexOf(s)===-1?r.push(s):o.push(s)),o.forEach(s=>s()),et=r}const rn=new Set;let Kt;function Vt(){Kt={r:0,c:[],p:Kt}}function Qt(){Kt.r||A(Kt.c),Kt=Kt.p}function st(t,r){t&&t.i&&(rn.delete(t),t.i(r))}function pt(t,r,o,s){if(t&&t.o){if(rn.has(t))return;rn.add(t),Kt.c.push(()=>{rn.delete(t),s&&(o&&t.d(1),s())}),t.o(r)}else s&&s()}function qt(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Mt(t){t&&t.c()}function ue(t,r,o){const{fragment:s,after_update:d}=t.$$;s&&s.m(r,o),Oe(()=>{const g=t.$$.on_mount.map(p).filter(D);t.$$.on_destroy?t.$$.on_destroy.push(...g):A(g),t.$$.on_mount=[]}),d.forEach(Oe)}function se(t,r){const o=t.$$;o.fragment!==null&&(nn(o.after_update),A(o.on_destroy),o.fragment&&o.fragment.d(r),o.on_destroy=o.fragment=null,o.ctx=[])}function Ne(t,r){t.$$.dirty[0]===-1&&(Tt.push(t),Et(),t.$$.dirty.fill(0)),t.$$.dirty[r/31|0]|=1<<r%31}function Xe(t,r,o,s,d,g,x=null,C=[-1]){const I=me;f(t);const H=t.$$={fragment:null,ctx:[],props:g,update:c,not_equal:d,bound:T(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(I?I.$$.context:[])),callbacks:T(),dirty:C,skip_bound:!1,root:r.target||I.$$.root};x&&x(H.root);let W=!1;if(H.ctx=o?o(t,r.props||{},(B,ne,...we)=>{const ge=we.length?we[0]:ne;return H.ctx&&d(H.ctx[B],H.ctx[B]=ge)&&(!H.skip_bound&&H.bound[B]&&H.bound[B](ge),W&&Ne(t,B)),ne}):[],H.update(),W=!0,A(H.before_update),H.fragment=s?s(H.ctx):!1,r.target){if(r.hydrate){const B=Le(r.target);H.fragment&&H.fragment.l(B),B.forEach(V)}else H.fragment&&H.fragment.c();r.intro&&st(t.$$.fragment),ue(t,r.target,r.anchor),Rt()}f(I)}class it{constructor(){l(this,"$$"),l(this,"$$set")}$destroy(){se(this,1),this.$destroy=c}$on(r,o){if(!D(o))return c;const s=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return s.push(o),()=>{const d=s.indexOf(o);d!==-1&&s.splice(d,1)}}$set(r){this.$$set&&!F(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}}const vt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(vt);var at=(t=>(t.ELLIPSE="ELLIPSE",t.MULTIPOLYGON="MULTIPOLYGON",t.POLYGON="POLYGON",t.POLYLINE="POLYLINE",t.RECTANGLE="RECTANGLE",t.LINE="LINE",t))(at||{});function _t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kt={exports:{}};(function(t){(function(){function r(C,I){var H=C.x-I.x,W=C.y-I.y;return H*H+W*W}function o(C,I,H){var W=I.x,B=I.y,ne=H.x-W,we=H.y-B;if(ne!==0||we!==0){var ge=((C.x-W)*ne+(C.y-B)*we)/(ne*ne+we*we);ge>1?(W=H.x,B=H.y):ge>0&&(W+=ne*ge,B+=we*ge)}return ne=C.x-W,we=C.y-B,ne*ne+we*we}function s(C,I){for(var H=C[0],W=[H],B,ne=1,we=C.length;ne<we;ne++)B=C[ne],r(B,H)>I&&(W.push(B),H=B);return H!==B&&W.push(B),W}function d(C,I,H,W,B){for(var ne=W,we,ge=I+1;ge<H;ge++){var de=o(C[ge],C[I],C[H]);de>ne&&(we=ge,ne=de)}ne>W&&(we-I>1&&d(C,I,we,W,B),B.push(C[we]),H-we>1&&d(C,we,H,W,B))}function g(C,I){var H=C.length-1,W=[C[0]];return d(C,0,H,I,W),W.push(C[H]),W}function x(C,I,H){if(C.length<=2)return C;var W=I!==void 0?I*I:1;return C=H?C:s(C,W),C=g(C,W),C}t.exports=x,t.exports.default=x})()})(kt);var Nt=kt.exports;const Gt=_t(Nt),Bt={},Jt=(t,r)=>Bt[t]=r,un=t=>Bt[t.type].area(t),mn=(t,r,o,s)=>Bt[t.type].intersects(t,r,o,s),jt=t=>{let r=1/0,o=1/0,s=-1/0,d=-1/0;return t.forEach(([g,x])=>{r=Math.min(r,g),o=Math.min(o,x),s=Math.max(s,g),d=Math.max(d,x)}),{minX:r,minY:o,maxX:s,maxY:d}},vn=t=>{let r=0,o=t.length-1;for(let s=0;s<t.length;s++)r+=(t[o][0]+t[s][0])*(t[o][1]-t[s][1]),o=s;return Math.abs(.5*r)},dn=(t,r,o)=>{let s=!1;for(let d=0,g=t.length-1;d<t.length;g=d++){const x=t[d][0],C=t[d][1],I=t[g][0],H=t[g][1];C>o!=H>o&&r<(I-x)*(o-C)/(H-C)+x&&(s=!s)}return s},Bn=(t,r=!0)=>{let o="M ";return t.forEach(([s,d],g)=>{g===0?o+=`${s},${d}`:o+=` L ${s},${d}`}),r&&(o+=" Z"),o},tn=(t,r=1)=>{const o=t.map(([s,d])=>({x:s,y:d}));return Gt(o,r,!0).map(s=>[s.x,s.y])},wn=(t,r)=>{const o=Math.abs(r[0]-t[0]),s=Math.abs(r[1]-t[1]);return Math.sqrt(Math.pow(o,2)+Math.pow(s,2))},Kn={area:t=>Math.PI*t.geometry.rx*t.geometry.ry,intersects:(t,r,o)=>{const{cx:s,cy:d,rx:g,ry:x}=t.geometry,C=0,I=Math.cos(C),H=Math.sin(C),W=r-s,B=o-d,ne=I*W+H*B,we=H*W-I*B;return ne*ne/(g*g)+we*we/(x*x)<=1}};Jt(at.ELLIPSE,Kn);const Ii={area:t=>0,intersects:(t,r,o,s=2)=>{const[[d,g],[x,C]]=t.geometry.points,I=Math.abs((C-g)*r-(x-d)*o+x*g-C*d),H=wn([d,g],[x,C]);return I/H<=s}};Jt(at.LINE,Ii);const Pi={area:t=>{const{polygons:r}=t.geometry;return r.reduce((o,s)=>{const[d,...g]=s.rings,x=vn(d.points),C=g.reduce((I,H)=>I+vn(H.points),0);return o+x-C},0)},intersects:(t,r,o)=>{const{polygons:s}=t.geometry;for(const d of s){const[g,...x]=d.rings;if(dn(g.points,r,o)){let C=!1;for(const I of x)if(dn(I.points,r,o)){C=!0;break}if(!C)return!0}}return!1}},On=t=>{const r=t.reduce((o,s)=>[...o,...s.rings[0].points],[]);return jt(r)},fn=t=>t.rings.map(r=>Bn(r.points)).join(" "),li=t=>t.polygons.reduce((r,o)=>[...r,...o.rings.reduce((s,d)=>[...s,...d.points],[])],[]),Di=(t,r=1)=>{const o=t.geometry.polygons.map(d=>{const g=d.rings.map(C=>{const I=tn(C.points,r);return{...C,points:I}}),x=jt(g[0].points);return{...d,rings:g,bounds:x}}),s=On(o);return{...t,geometry:{...t.geometry,polygons:o,bounds:s}}};Jt(at.MULTIPOLYGON,Pi);const Oi={area:t=>{const r=t.geometry.points;return vn(r)},intersects:(t,r,o)=>{const s=t.geometry.points;return dn(s,r,o)}},_n=(t,r=1)=>{const o=tn(t.geometry.points,r),s=jt(o);return{...t,geometry:{...t.geometry,bounds:s,points:o}}};Jt(at.POLYGON,Oi);const Sn={area:t=>{const r=t.geometry;if(!r.closed||r.points.length<3)return 0;const o=Ln(r.points,r.closed);return vn(o)},intersects:(t,r,o,s=2)=>{const d=t.geometry;if(d.closed){const g=Ln(d.points,d.closed);return dn(g,r,o)}else return Li(d,[r,o],s)}},Ln=(t,r=!1)=>{const o=[];for(let s=0;s<t.length;s++){const d=t[s],g=t[(s+1)%t.length];if(o.push(d.point),(s<t.length-1||r)&&(d.type==="CURVE"||g.type=="CURVE")){const x=Jn(d.point,d.type==="CURVE"&&d.outHandle||d.point,g.type==="CURVE"&&g.inHandle||g.point,g.point,10);o.push(...x.slice(1))}}return o},Jn=(t,r,o,s,d=10)=>{const g=[];for(let x=0;x<=d;x++){const C=x/d,I=Math.pow(1-C,3)*t[0]+3*Math.pow(1-C,2)*C*r[0]+3*(1-C)*Math.pow(C,2)*o[0]+Math.pow(C,3)*s[0],H=Math.pow(1-C,3)*t[1]+3*Math.pow(1-C,2)*C*r[1]+3*(1-C)*Math.pow(C,2)*o[1]+Math.pow(C,3)*s[1];g.push([I,H])}return g},Li=(t,r,o)=>{for(let s=0;s<t.points.length-1;s++){const d=t.points[s],g=t.points[s+1];if(d.type==="CURVE"||g.type==="CURVE"){const x=Jn(d.point,d.type==="CURVE"&&d.outHandle||d.point,g.type==="CURVE"&&g.inHandle||g.point,g.point,20);for(let C=0;C<x.length-1;C++)if(ci(r,x[C],x[C+1])<=o)return!0}else if(ci(r,d.point,g.point)<=o)return!0}return!1},ci=(t,r,o)=>{const[s,d]=t,[g,x]=r,[C,I]=o,H=C-g,W=I-x,B=Math.sqrt(H*H+W*W);if(B===0)return Math.sqrt((s-g)*(s-g)+(d-x)*(d-x));const ne=((s-g)*H+(d-x)*W)/(B*B);return ne<=0?Math.sqrt((s-g)*(s-g)+(d-x)*(d-x)):ne>=1?Math.sqrt((s-C)*(s-C)+(d-I)*(d-I)):Math.abs((I-x)*s-(C-g)*d+C*x-I*g)/B},Gn=t=>{if(!t.points||t.points.length===0)return"";const r=[],o=t.points[0];r.push(`M ${o.point[0]} ${o.point[1]}`);for(let s=1;s<t.points.length;s++){const d=t.points[s],g=t.points[s-1];if(d.type==="CURVE"||g.type==="CURVE"){const x=g.type==="CURVE"&&g.outHandle||g.point,C=d.type==="CURVE"&&d.inHandle||d.point,I=d.point;r.push(`C ${x[0]} ${x[1]} ${C[0]} ${C[1]} ${I[0]} ${I[1]}`)}else r.push(`L ${d.point[0]} ${d.point[1]}`)}if(t.closed){const s=t.points[t.points.length-1],d=t.points[0];if(s.type==="CURVE"||d.type==="CURVE"){const g=s.outHandle||s.point,x=d.inHandle||d.point,C=d.point;r.push(`C ${g[0]} ${g[1]} ${x[0]} ${x[1]} ${C[0]} ${C[1]}`)}r.push("Z")}return r.join(" ")};Jt(at.POLYLINE,Sn);const ui={area:t=>t.geometry.w*t.geometry.h,intersects:(t,r,o)=>r>=t.geometry.x&&r<=t.geometry.x+t.geometry.w&&o>=t.geometry.y&&o<=t.geometry.y+t.geometry.h};Jt(at.RECTANGLE,ui);const Nn=t=>Fn(t.target),Fn=t=>{var r,o;return(t==null?void 0:t.annotation)!==void 0&&((o=(r=t==null?void 0:t.selector)==null?void 0:r.geometry)==null?void 0:o.bounds)!==void 0},di=(t,r=!1)=>{const o=typeof t=="string"?t:t.value,s=/(xywh)=(pixel|percent)?:?(.+?),(.+?),(.+?),(.+)*/g,d=[...o.matchAll(s)][0],[g,x,C,I,H,W,B]=d;if(x!=="xywh")throw new Error("Unsupported MediaFragment: "+o);if(C&&C!=="pixel")throw new Error(`Unsupported MediaFragment unit: ${C}`);const[ne,we,ge,de]=[I,H,W,B].map(parseFloat);return{type:at.RECTANGLE,geometry:{x:ne,y:we,w:ge,h:de,bounds:{minX:ne,minY:r?we-de:we,maxX:ne+ge,maxY:r?we:we+de}}}},fi=t=>{const{x:r,y:o,w:s,h:d}=t;return{type:"FragmentSelector",conformsTo:"http://www.w3.org/TR/media-frags/",value:`xywh=pixel:${r},${o},${s},${d}`}},pi="http://www.w3.org/2000/svg",$n=t=>{const r=s=>{Array.from(s.attributes).forEach(d=>{d.name.startsWith("on")&&s.removeAttribute(d.name)})},o=t.getElementsByTagName("script");return Array.from(o).reverse().forEach(s=>s.parentNode.removeChild(s)),Array.from(t.querySelectorAll("*")).forEach(r),t},Ni=t=>{const r=new XMLSerializer().serializeToString(t.documentElement).replace("<svg>",`<svg xmlns="${pi}">`);return new DOMParser().parseFromString(r,"image/svg+xml").documentElement},Yn=t=>{const r=new DOMParser().parseFromString(t,"image/svg+xml"),o=r.lookupPrefix(pi),s=r.lookupNamespaceURI(null);return o||s?$n(r).firstChild:$n(Ni(r)).firstChild},hi=t=>{const r=ei(t),o=[];let s=[],d=[0,0];for(const g of r)switch(g.type.toUpperCase()){case"M":s.length>0&&(o.push({points:s}),s=[]),d=[g.args[0],g.args[1]],s.push([...d]);break;case"L":d=[g.args[0],g.args[1]],s.push([...d]);break;case"H":d=[g.args[0],d[1]],s.push([...d]);break;case"V":d=[d[0],g.args[0]],s.push([...d]);break;case"C":d=[g.args[4],g.args[5]],s.push([...d]);break;case"Z":break;default:console.warn(`Unsupported SVG path command: ${g.type}`);break}if(s.length>2&&o.push({points:s}),o.length>0){const g=jt(o[0].points);return{rings:o,bounds:g}}},Fi=t=>{const{point:r,inHandle:o,outHandle:s}=t;if(!o||!s)return!1;const d=o[0]-r[0],g=o[1]-r[1],x=s[0]-r[0],C=s[1]-r[1],I=d*C-g*x;return Math.abs(I)<.01},gi=t=>{const r=ei(t);let o=[],s=[0,0],d=!1;for(let x=0;x<r.length;x++){const C=r[x];switch(C.type.toUpperCase()){case"M":s=[C.args[0],C.args[1]],o.push({type:"CORNER",point:[...s]});break;case"L":s=[C.args[0],C.args[1]],o.push({type:"CORNER",point:[...s]});break;case"C":const I=[C.args[0],C.args[1]],H=[C.args[2],C.args[3]],W=[C.args[4],C.args[5]];if(o.length>0){const ne=o[o.length-1];(I[0]!==ne.point[0]||I[1]!==ne.point[1])&&(ne.type="CURVE",ne.outHandle=I)}const B={type:H[0]!==W[0]||H[1]!==W[1]?"CURVE":"CORNER",point:W};B.type==="CURVE"&&(B.inHandle=H),o.push(B),s=W;break;case"Z":d=!0;break;default:console.warn(`Unsupported SVG path command: ${C.type}`);break}}o=o.map(x=>Fi(x)?{...x,locked:!0}:x);const g=jt(Ln(o,d));return{points:o,closed:d,bounds:g}},ei=t=>{const r=[],o=t.replace(/,/g," ").trim(),s=/([MmLlHhVvCcZz])\s*([^MmLlHhVvCcZz]*)/g;let d;for(;(d=s.exec(o))!==null;){const[,g,x]=d,C=x.trim()===""?[]:x.trim().split(/\s+/).map(Number).filter(I=>!isNaN(I));r.push({type:g,args:C})}return r},ti=t=>{const[r,o,s]=t.match(/(<polygon points=["|'])([^("|')]*)/)||[],d=s.split(" ").map(g=>g.split(",").map(parseFloat));return{type:at.POLYGON,geometry:{points:d,bounds:jt(d)}}},mi=t=>{const r=Yn(t),o=parseFloat(r.getAttribute("cx")),s=parseFloat(r.getAttribute("cy")),d=parseFloat(r.getAttribute("rx")),g=parseFloat(r.getAttribute("ry")),x={minX:o-d,minY:s-g,maxX:o+d,maxY:s+g};return{type:at.ELLIPSE,geometry:{cx:o,cy:s,rx:d,ry:g,bounds:x}}},En=t=>{const r=Yn(t),o=parseFloat(r.getAttribute("x1")),s=parseFloat(r.getAttribute("x2")),d=parseFloat(r.getAttribute("y1")),g=parseFloat(r.getAttribute("y2")),x={minX:Math.min(o,s),minY:Math.min(d,g),maxX:Math.max(o,s),maxY:Math.max(d,g)};return{type:at.LINE,geometry:{points:[[o,d],[s,g]],bounds:x}}},xn=t=>{const r=Yn(t),o=r.nodeName==="path"?r:Array.from(r.querySelectorAll("path"))[0],s=o==null?void 0:o.getAttribute("d");if(!s)throw new Error("Could not parse SVG path");const d=gi(s);if(!d)throw new Error("Could not parse SVG path");return{type:at.POLYLINE,geometry:d}},vi=t=>{const r=Yn(t),o=(r.nodeName==="path"?[r]:Array.from(r.querySelectorAll("path"))).map(g=>g.getAttribute("d")||"").map(g=>hi(g)).filter(Boolean),s=o.reduce((g,x)=>[...g,...x.rings[0].points],[]),d=jt(s);return o.length===1&&o[0].rings.length===1?{type:at.POLYGON,geometry:{points:s,bounds:d}}:{type:at.MULTIPOLYGON,geometry:{polygons:o,bounds:d}}},yi=t=>{const r=typeof t=="string"?t:t.value;if(r.includes("<polygon points="))return ti(r);if(r.includes("<path ")&&(r.includes(" C ")||!r.includes("Z")))return xn(r);if(r.includes("<path "))return vi(r);if(r.includes("<ellipse "))return mi(r);if(r.includes("<line "))return En(r);throw"Unsupported SVG shape: "+r},Mn=t=>`<g>${t.polygons.map(r=>`<path fill-rule="evenodd" d="${fn(r)}" />`).join("")}</g>`,Xn=t=>{let r;switch(t.type){case at.POLYGON:{const o=t.geometry,{points:s}=o;r=`<svg><polygon points="${s.map(d=>d.join(",")).join(" ")}" /></svg>`;break}case at.ELLIPSE:{const o=t.geometry;r=`<svg><ellipse cx="${o.cx}" cy="${o.cy}" rx="${o.rx}" ry="${o.ry}" /></svg>`;break}case at.MULTIPOLYGON:{const o=t.geometry;r=`<svg>${Mn(o)}</svg>`;break}case at.LINE:{const o=t.geometry,[[s,d],[g,x]]=o.points;r=`<svg><line x1="${s}" y1="${d}" x2="${g}" y2="${x}" /></svg>`;break}case at.POLYLINE:r=`<svg><path d="${Gn(t.geometry)}" /></svg>`}if(r)return{type:"SvgSelector",value:r};throw`Unsupported shape type: ${t.type}`},on=[];for(let t=0;t<256;++t)on.push((t+256).toString(16).slice(1));function An(t,r=0){return(on[t[r+0]]+on[t[r+1]]+on[t[r+2]]+on[t[r+3]]+"-"+on[t[r+4]]+on[t[r+5]]+"-"+on[t[r+6]]+on[t[r+7]]+"-"+on[t[r+8]]+on[t[r+9]]+"-"+on[t[r+10]]+on[t[r+11]]+on[t[r+12]]+on[t[r+13]]+on[t[r+14]]+on[t[r+15]]).toLowerCase()}let Hn;const hn=new Uint8Array(16);function kn(){if(!Hn){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Hn=crypto.getRandomValues.bind(crypto)}return Hn(hn)}const bi={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Hi(t,r,o){var g,x;var s;t=t||{};const d=(x=(g=t.random)!=null?g:(s=t.rng)==null?void 0:s.call(t))!=null?x:kn();if(d.length<16)throw new Error("Random bytes length must be >= 16");return d[6]=d[6]&15|64,d[8]=d[8]&63|128,An(d)}function Rn(t,r,o){return bi.randomUUID&&!t?bi.randomUUID():Hi(t)}var Vn=Object.prototype.hasOwnProperty;function pn(t,r){var o,s;if(t===r)return!0;if(t&&r&&(o=t.constructor)===r.constructor){if(o===Date)return t.getTime()===r.getTime();if(o===RegExp)return t.toString()===r.toString();if(o===Array){if((s=t.length)===r.length)for(;s--&&pn(t[s],r[s]););return s===-1}if(!o||typeof t=="object"){s=0;for(o in t)if(Vn.call(t,o)&&++s&&!Vn.call(r,o)||!(o in r)||!pn(t[o],r[o]))return!1;return Object.keys(r).length===s}}return t!==t&&r!==r}function jn(){}function Ri(t,r){return t!=t?r==r:t!==r||t&&typeof t=="object"||typeof t=="function"}const Cn=[];function a(t,r=jn){let o;const s=new Set;function d(C){if(Ri(t,C)&&(t=C,o)){const I=!Cn.length;for(const H of s)H[1](),Cn.push(H,t);if(I){for(let H=0;H<Cn.length;H+=2)Cn[H][0](Cn[H+1]);Cn.length=0}}}function g(C){d(C(t))}function x(C,I=jn){const H=[C,I];return s.add(H),s.size===1&&(o=r(d,g)||jn),C(t),()=>{s.delete(H),s.size===0&&o&&(o(),o=null)}}return{set:d,update:g,subscribe:x}}const u=t=>{const{subscribe:r,set:o}=a();let s;return r(d=>s=d),t.observe(({changes:d})=>{if(s){(d.deleted||[]).some(x=>x.id===s)&&o(void 0);const g=(d.updated||[]).find(({oldValue:x})=>x.id===s);g&&o(g.newValue.id)}}),{get current(){return s},subscribe:r,set:o}};var y=(t=>(t.EDIT="EDIT",t.SELECT="SELECT",t.NONE="NONE",t))(y||{});const E={selected:[]},P=(t,r,o)=>{const{subscribe:s,set:d}=a(E);let g=r,x=E;s(de=>x=de);const C=()=>{pn(x,E)||d(E)},I=()=>{var de;return((de=x.selected)==null?void 0:de.length)===0},H=de=>{if(I())return!1;const ze=typeof de=="string"?de:de.id;return x.selected.some(Se=>Se.id===ze)},W=(de,ze)=>{let Se;if(Array.isArray(de)){if(Se=de.map(ve=>t.getAnnotation(ve)).filter(Boolean),Se.length<de.length){console.warn("Invalid selection: "+de.filter(ve=>!Se.some(He=>He.id===ve)));return}}else{const ve=t.getAnnotation(de);if(!ve){console.warn("Invalid selection: "+de);return}Se=[ve]}const Fe=Se.reduce((ve,He)=>{const Ge=ge(He);return Ge==="EDIT"?[...ve,{id:He.id,editable:!0}]:Ge==="SELECT"?[...ve,{id:He.id}]:ve},[]);d({selected:Fe,event:ze})},B=(de,ze)=>{const Se=Array.isArray(de)?de:[de],Fe=Se.map(ve=>t.getAnnotation(ve)).filter(ve=>!!ve);d({selected:Fe.map(ve=>{const He=ze===void 0?ge(ve)==="EDIT":ze;return{id:ve.id,editable:He}})}),Fe.length!==Se.length&&console.warn("Invalid selection",de)},ne=de=>{if(I())return!1;const{selected:ze}=x;ze.some(({id:Se})=>de.includes(Se))&&d({selected:ze.filter(({id:Se})=>!de.includes(Se))})},we=de=>{g=de,B(x.selected.map(({id:ze})=>ze))},ge=de=>z(de,g,o);return t.observe(({changes:de})=>ne((de.deleted||[]).map(ze=>ze.id))),{get event(){return x?x.event:null},get selected(){return x?[...x.selected]:null},get userSelectAction(){return g},clear:C,evalSelectAction:ge,isEmpty:I,isSelected:H,setSelected:B,setUserSelectAction:we,subscribe:s,userSelect:W}},z=(t,r,o)=>{const s=o?o.serialize(t):t;return typeof r=="function"?r(s):r||"EDIT"},M=[];for(let t=0;t<256;++t)M.push((t+256).toString(16).slice(1));function Z(t,r=0){return(M[t[r+0]]+M[t[r+1]]+M[t[r+2]]+M[t[r+3]]+"-"+M[t[r+4]]+M[t[r+5]]+"-"+M[t[r+6]]+M[t[r+7]]+"-"+M[t[r+8]]+M[t[r+9]]+"-"+M[t[r+10]]+M[t[r+11]]+M[t[r+12]]+M[t[r+13]]+M[t[r+14]]+M[t[r+15]]).toLowerCase()}let fe;const ae=new Uint8Array(16);function _e(){if(!fe){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");fe=crypto.getRandomValues.bind(crypto)}return fe(ae)}const pe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ye={randomUUID:pe};function Ce(t,r,o){var g,x;var s;t=t||{};const d=(x=(g=t.random)!=null?g:(s=t.rng)==null?void 0:s.call(t))!=null?x:_e();if(d.length<16)throw new Error("Random bytes length must be >= 16");return d[6]=d[6]&15|64,d[8]=d[8]&63|128,Z(d)}function lt(t,r,o){return ye.randomUUID&&!t?ye.randomUUID():Ce(t)}const $e=t=>{const r=o=>{const s={...o};return o.created&&typeof o.created=="string"&&(s.created=new Date(o.created)),o.updated&&typeof o.updated=="string"&&(s.updated=new Date(o.updated)),s};return{...t,bodies:(t.bodies||[]).map(r),target:r(t.target)}},ct=(t,r,o,s)=>({id:lt(),annotation:typeof t=="string"?t:t.id,created:o||new Date,creator:s,...r}),ht=(t,r)=>{const o=new Set(t.bodies.map(s=>s.id));return r.bodies.filter(s=>!o.has(s.id))},Xt=(t,r)=>{const o=new Set(r.bodies.map(s=>s.id));return t.bodies.filter(s=>!o.has(s.id))},Yt=(t,r)=>r.bodies.map(o=>{const s=t.bodies.find(d=>d.id===o.id);return{newBody:o,oldBody:s&&!pn(s,o)?s:void 0}}).filter(({oldBody:o})=>o).map(({oldBody:o,newBody:s})=>({oldBody:o,newBody:s})),bt=(t,r)=>!pn(t.target,r.target),q=(t,r)=>{const o=ht(t,r),s=Xt(t,r),d=Yt(t,r);return{oldValue:t,newValue:r,bodiesCreated:o.length>0?o:void 0,bodiesDeleted:s.length>0?s:void 0,bodiesUpdated:d.length>0?d:void 0,targetUpdated:bt(t,r)?{oldTarget:t.target,newTarget:r.target}:void 0}};var ee=(t=>(t.LOCAL="LOCAL",t.REMOTE="REMOTE",t.SILENT="SILENT",t))(ee||{});const be=(t,r)=>{var o,s;const{changes:d,origin:g}=r;if(!(t.options.origin?t.options.origin===g:g!=="SILENT"))return!1;if(t.options.ignore){const{ignore:x}=t.options,C=I=>I&&I.length>0;if(!(C(d.created)||C(d.deleted))){const I=(o=d.updated)==null?void 0:o.some(W=>C(W.bodiesCreated)||C(W.bodiesDeleted)||C(W.bodiesUpdated)),H=(s=d.updated)==null?void 0:s.some(W=>W.targetUpdated);if(x==="BODY_ONLY"&&I&&!H||x==="TARGET_ONLY"&&H&&!I)return!1}}if(t.options.annotations){const x=new Set([...(d.created||[]).map(C=>C.id),...(d.deleted||[]).map(C=>C.id),...(d.updated||[]).map(({oldValue:C})=>C.id)]);return!!(Array.isArray(t.options.annotations)?t.options.annotations:[t.options.annotations]).find(C=>x.has(C))}else return!0},xe=(t,r)=>{const o=new Set((t.created||[]).map(B=>B.id)),s=new Set((t.updated||[]).map(({newValue:B})=>B.id)),d=new Set((r.created||[]).map(B=>B.id)),g=new Set((r.deleted||[]).map(B=>B.id)),x=new Set((r.updated||[]).map(({oldValue:B})=>B.id)),C=new Set((r.updated||[]).filter(({oldValue:B})=>o.has(B.id)||s.has(B.id)).map(({oldValue:B})=>B.id)),I=[...(t.created||[]).filter(B=>!g.has(B.id)).map(B=>x.has(B.id)?r.updated.find(({oldValue:ne})=>ne.id===B.id).newValue:B),...r.created||[]],H=[...(t.deleted||[]).filter(B=>!d.has(B.id)),...(r.deleted||[]).filter(B=>!o.has(B.id))],W=[...(t.updated||[]).filter(({newValue:B})=>!g.has(B.id)).map(B=>{const{oldValue:ne,newValue:we}=B;if(x.has(we.id)){const ge=r.updated.find(de=>de.oldValue.id===we.id).newValue;return q(ne,ge)}else return B}),...(r.updated||[]).filter(({oldValue:B})=>!C.has(B.id))];return{created:I,deleted:H,updated:W}},De=t=>{const r=t.id===void 0?lt():t.id;return{...t,id:r,bodies:t.bodies===void 0?[]:t.bodies.map(o=>({...o,annotation:r})),target:{...t.target,annotation:r}}},Ae=t=>t.id!==void 0,Ve=()=>{const t=new Map,r=new Map,o=[],s=(Ee,Ie={})=>{o.push({onChange:Ee,options:Ie})},d=Ee=>{const Ie=o.findIndex(he=>he.onChange==Ee);Ie>-1&&o.splice(Ie,1)},g=(Ee,Ie)=>{const he={origin:Ee,changes:{created:Ie.created||[],updated:Ie.updated||[],deleted:Ie.deleted||[]},state:[...t.values()]};o.forEach(Te=>{be(Te,he)&&Te.onChange(he)})},x=(Ee,Ie=ee.LOCAL)=>{if(Ee.id&&t.get(Ee.id))throw Error(`Cannot add annotation ${Ee.id} - exists already`);{const he=De(Ee);t.set(he.id,he),he.bodies.forEach(Te=>r.set(Te.id,he.id)),g(Ie,{created:[he]})}},C=(Ee,Ie)=>{const he=De(typeof Ee=="string"?Ie:Ee),Te=typeof Ee=="string"?Ee:Ee.id,Qe=Te&&t.get(Te);if(Qe){const qe=q(Qe,he);return Te===he.id?t.set(Te,he):(t.delete(Te),t.set(he.id,he)),Qe.bodies.forEach(nt=>r.delete(nt.id)),he.bodies.forEach(nt=>r.set(nt.id,he.id)),qe}else console.warn(`Cannot update annotation ${Te} - does not exist`)},I=(Ee,Ie=ee.LOCAL,he=ee.LOCAL)=>{const Te=Ae(Ie)?he:Ie,Qe=C(Ee,Ie);Qe&&g(Te,{updated:[Qe]})},H=(Ee,Ie=ee.LOCAL)=>{t.get(Ee.id)?I(Ee,Ie):x(Ee,Ie)},W=(Ee,Ie=ee.LOCAL)=>{const he=Ee.reduce((Te,Qe)=>{const qe=C(Qe);return qe?[...Te,qe]:Te},[]);he.length>0&&g(Ie,{updated:he})},B=(Ee,Ie=ee.LOCAL)=>{const he=Ee.map(De),{toAdd:Te,toUpdate:Qe}=he.reduce((nt,At)=>t.get(At.id)?{...nt,toUpdate:[...nt.toUpdate,At]}:{...nt,toAdd:[...nt.toAdd,At]},{toAdd:[],toUpdate:[]}),qe=Qe.map(nt=>C(nt,Ie)).filter(Boolean);Te.forEach(nt=>{t.set(nt.id,nt),nt.bodies.forEach(At=>r.set(At.id,nt.id))}),g(Ie,{created:Te,updated:qe})},ne=(Ee,Ie=ee.LOCAL)=>{const he=t.get(Ee.annotation);if(he){const Te={...he,bodies:[...he.bodies,Ee]};t.set(he.id,Te),r.set(Ee.id,Te.id),g(Ie,{updated:[{oldValue:he,newValue:Te,bodiesCreated:[Ee]}]})}else console.warn(`Attempt to add body to missing annotation: ${Ee.annotation}`)},we=()=>[...t.values()],ge=(Ee=ee.LOCAL)=>{const Ie=[...t.values()];t.clear(),r.clear(),g(Ee,{deleted:Ie})},de=(Ee,Ie=!0,he=ee.LOCAL)=>{const Te=Ee.map(De);if(Ie){const Qe=[...t.values()];t.clear(),r.clear(),Te.forEach(qe=>{t.set(qe.id,qe),qe.bodies.forEach(nt=>r.set(nt.id,qe.id))}),g(he,{created:Te,deleted:Qe})}else{const Qe=Ee.reduce((qe,nt)=>{const At=nt.id&&t.get(nt.id);return At?[...qe,At]:qe},[]);if(Qe.length>0)throw Error(`Bulk insert would overwrite the following annotations: ${Qe.map(qe=>qe.id).join(", ")}`);Te.forEach(qe=>{t.set(qe.id,qe),qe.bodies.forEach(nt=>r.set(nt.id,qe.id))}),g(he,{created:Te})}},ze=Ee=>{const Ie=typeof Ee=="string"?Ee:Ee.id,he=t.get(Ie);if(he)return t.delete(Ie),he.bodies.forEach(Te=>r.delete(Te.id)),he;console.warn(`Attempt to delete missing annotation: ${Ie}`)},Se=(Ee,Ie=ee.LOCAL)=>{const he=ze(Ee);he&&g(Ie,{deleted:[he]})},Fe=(Ee,Ie=ee.LOCAL)=>{const he=Ee.reduce((Te,Qe)=>{const qe=ze(Qe);return qe?[...Te,qe]:Te},[]);he.length>0&&g(Ie,{deleted:he})},ve=Ee=>{const Ie=t.get(Ee.annotation);if(Ie){const he=Ie.bodies.find(Te=>Te.id===Ee.id);if(he){r.delete(he.id);const Te={...Ie,bodies:Ie.bodies.filter(Qe=>Qe.id!==Ee.id)};return t.set(Ie.id,Te),{oldValue:Ie,newValue:Te,bodiesDeleted:[he]}}else console.warn(`Attempt to delete missing body ${Ee.id} from annotation ${Ee.annotation}`)}else console.warn(`Attempt to delete body from missing annotation ${Ee.annotation}`)},He=(Ee,Ie=ee.LOCAL)=>{const he=ve(Ee);he&&g(Ie,{updated:[he]})},Ge=(Ee,Ie=ee.LOCAL)=>{const he=Ee.map(Te=>ve(Te)).filter(Boolean);he.length>0&&g(Ie,{updated:he})},tt=Ee=>{const Ie=t.get(Ee);return Ie?{...Ie}:void 0},Ye=Ee=>{const Ie=r.get(Ee);if(Ie){const he=tt(Ie).bodies.find(Te=>Te.id===Ee);if(he)return he;console.error(`Store integrity error: body ${Ee} in index, but not in annotation`)}else console.warn(`Attempt to retrieve missing body: ${Ee}`)},gt=(Ee,Ie)=>{if(Ee.annotation!==Ie.annotation)throw"Annotation integrity violation: annotation ID must be the same when updating bodies";const he=t.get(Ee.annotation);if(he){const Te=he.bodies.find(qe=>qe.id===Ee.id),Qe={...he,bodies:he.bodies.map(qe=>qe.id===Te.id?Ie:qe)};return t.set(he.id,Qe),Te.id!==Ie.id&&(r.delete(Te.id),r.set(Ie.id,Qe.id)),{oldValue:he,newValue:Qe,bodiesUpdated:[{oldBody:Te,newBody:Ie}]}}else console.warn(`Attempt to add body to missing annotation ${Ee.annotation}`)},ut=(Ee,Ie,he=ee.LOCAL)=>{const Te=gt(Ee,Ie);Te&&g(he,{updated:[Te]})},Lt=(Ee,Ie=ee.LOCAL)=>{const he=Ee.map(Te=>gt({id:Te.id,annotation:Te.annotation},Te)).filter(Boolean);g(Ie,{updated:he})},It=Ee=>{const Ie=t.get(Ee.annotation);if(Ie){const he={...Ie,target:{...Ie.target,...Ee}};return t.set(Ie.id,he),{oldValue:Ie,newValue:he,targetUpdated:{oldTarget:Ie.target,newTarget:Ee}}}else console.warn(`Attempt to update target on missing annotation: ${Ee.annotation}`)};return{addAnnotation:x,addBody:ne,all:we,bulkAddAnnotations:de,bulkDeleteAnnotations:Fe,bulkDeleteBodies:Ge,bulkUpdateAnnotations:W,bulkUpdateBodies:Lt,bulkUpdateTargets:(Ee,Ie=ee.LOCAL)=>{const he=Ee.map(Te=>It(Te)).filter(Boolean);he.length>0&&g(Ie,{updated:he})},bulkUpsertAnnotations:B,clear:ge,deleteAnnotation:Se,deleteBody:He,getAnnotation:tt,getBody:Ye,observe:s,unobserve:d,updateAnnotation:I,updateBody:ut,updateTarget:(Ee,Ie=ee.LOCAL)=>{const he=It(Ee);he&&g(Ie,{updated:[he]})},upsertAnnotation:H}},Je=t=>({...t,subscribe:r=>{const o=s=>r(s.state);return t.observe(o),r(t.all()),()=>t.unobserve(o)}});let Ze=()=>({emit(t,...r){for(let o=this.events[t]||[],s=0,d=o.length;s<d;s++)o[s](...r)},events:{},on(t,r){var o;return((o=this.events)[t]||(o[t]=[])).push(r),()=>{var s;this.events[t]=(s=this.events[t])==null?void 0:s.filter(d=>r!==d)}}});const mt=250,Ft=(t,r)=>{const o=Ze(),s=(r==null?void 0:r.changes)||[];let d=r?r.pointer:-1,g=!1,x=0;const C=ge=>{if(!g){const{changes:de}=ge,ze=performance.now();if(ze-x>mt)s.splice(d+1),s.push(de),d=s.length-1;else{const Se=s.length-1;s[Se]=xe(s[Se],de)}x=ze}g=!1};t.observe(C,{origin:ee.LOCAL});const I=ge=>ge&&ge.length>0&&t.bulkDeleteAnnotations(ge),H=ge=>ge&&ge.length>0&&t.bulkAddAnnotations(ge,!1),W=ge=>ge&&ge.length>0&&t.bulkUpdateAnnotations(ge.map(({oldValue:de})=>de)),B=ge=>ge&&ge.length>0&&t.bulkUpdateAnnotations(ge.map(({newValue:de})=>de)),ne=ge=>ge&&ge.length>0&&t.bulkAddAnnotations(ge,!1),we=ge=>ge&&ge.length>0&&t.bulkDeleteAnnotations(ge);return{canRedo:()=>s.length-1>d,canUndo:()=>d>-1,destroy:()=>t.unobserve(C),getHistory:()=>({changes:[...s],pointer:d}),on:(ge,de)=>o.on(ge,de),redo:()=>{if(s.length-1>d){g=!0;const{created:ge,updated:de,deleted:ze}=s[d+1];H(ge),B(de),we(ze),o.emit("redo",s[d+1]),d+=1}},undo:()=>{if(d>-1){g=!0;const{created:ge,updated:de,deleted:ze}=s[d];I(ge),W(de),ne(ze),o.emit("undo",s[d]),d-=1}}}},re=()=>{const{subscribe:t,set:r}=a([]);return{subscribe:t,set:r}},ke=(t,r,o,s)=>{const{hover:d,selection:g,store:x,viewport:C}=t,I=new Map;let H=[],W,B;const ne=(Se,Fe)=>{I.has(Se)?I.get(Se).push(Fe):I.set(Se,[Fe])},we=(Se,Fe)=>{const ve=I.get(Se);if(ve){const He=ve.indexOf(Fe);He!==-1&&ve.splice(He,1)}},ge=(Se,Fe,ve)=>{I.has(Se)&&setTimeout(()=>{I.get(Se).forEach(He=>{if(o){const Ge=Array.isArray(Fe)?Fe.map(Ye=>o.serialize(Ye)):o.serialize(Fe),tt=ve?ve instanceof PointerEvent?ve:o.serialize(ve):void 0;He(Ge,tt)}else He(Fe,ve)})},1)},de=()=>{const{selected:Se}=g,Fe=(Se||[]).map(({id:ve})=>x.getAnnotation(ve));Fe.forEach(ve=>{const He=H.find(Ge=>Ge.id===ve.id);(!He||!pn(He,ve))&&ge("updateAnnotation",ve,He)}),H=H.map(ve=>Fe.find(({id:He})=>He===ve.id)||ve)};g.subscribe(({selected:Se})=>{if(!(H.length===0&&Se.length===0)){if(H.length===0&&Se.length>0)H=Se.map(({id:Fe})=>x.getAnnotation(Fe));else if(H.length>0&&Se.length===0)H.forEach(Fe=>{const ve=x.getAnnotation(Fe.id);ve&&!pn(ve,Fe)&&ge("updateAnnotation",ve,Fe)}),H=[];else{const Fe=new Set(H.map(He=>He.id)),ve=new Set(Se.map(({id:He})=>He));H.filter(He=>!ve.has(He.id)).forEach(He=>{const Ge=x.getAnnotation(He.id);Ge&&!pn(Ge,He)&&ge("updateAnnotation",Ge,He)}),H=[...H.filter(He=>ve.has(He.id)),...Se.filter(({id:He})=>!Fe.has(He)).map(({id:He})=>x.getAnnotation(He))]}ge("selectionChanged",H)}}),d.subscribe(Se=>{!W&&Se?ge("mouseEnterAnnotation",x.getAnnotation(Se)):W&&!Se?ge("mouseLeaveAnnotation",x.getAnnotation(W)):W&&Se&&(ge("mouseLeaveAnnotation",x.getAnnotation(W)),ge("mouseEnterAnnotation",x.getAnnotation(Se))),W=Se}),C==null||C.subscribe(Se=>ge("viewportIntersect",Se.map(Fe=>x.getAnnotation(Fe)))),x.observe(Se=>{s&&(B&&clearTimeout(B),B=setTimeout(de,1e3));const{created:Fe,deleted:ve}=Se.changes;(Fe||[]).forEach(He=>ge("createAnnotation",He)),(ve||[]).forEach(He=>ge("deleteAnnotation",He)),(Se.changes.updated||[]).filter(He=>[...He.bodiesCreated||[],...He.bodiesDeleted||[],...He.bodiesUpdated||[]].length>0).forEach(({oldValue:He,newValue:Ge})=>{const tt=H.find(Ye=>Ye.id===He.id)||He;H=H.map(Ye=>Ye.id===He.id?Ge:Ye),ge("updateAnnotation",Ge,tt)})},{origin:ee.LOCAL}),x.observe(Se=>{if(H){const Fe=new Set(H.map(He=>He.id)),ve=(Se.changes.updated||[]).filter(({newValue:He})=>Fe.has(He.id)).map(({newValue:He})=>He);ve.length>0&&(H=H.map(He=>ve.find(Ge=>Ge.id===He.id)||He))}},{origin:ee.REMOTE});const ze=Se=>Fe=>{const{updated:ve}=Fe;Se?(ve||[]).forEach(He=>ge("updateAnnotation",He.oldValue,He.newValue)):(ve||[]).forEach(He=>ge("updateAnnotation",He.newValue,He.oldValue))};return r.on("undo",ze(!0)),r.on("redo",ze(!1)),{on:ne,off:we,emit:ge}},Ke=t=>r=>r.reduce((o,s)=>{const{parsed:d,error:g}=t.parse(s);return g?{parsed:o.parsed,failed:[...o.failed,s]}:d?{parsed:[...o.parsed,d],failed:o.failed}:{...o}},{parsed:[],failed:[]}),Be=(t,r,o)=>{const{store:s,selection:d}=t,g=Se=>{if(o){const{parsed:Fe,error:ve}=o.parse(Se);Fe?s.addAnnotation(Fe,ee.REMOTE):console.error(ve)}else s.addAnnotation($e(Se),ee.REMOTE)},x=()=>d.clear(),C=()=>s.clear(),I=Se=>{const Fe=s.getAnnotation(Se);return o&&Fe?o.serialize(Fe):Fe},H=()=>o?s.all().map(o.serialize):s.all(),W=()=>{var Se;const Fe=(((Se=d.selected)==null?void 0:Se.map(ve=>ve.id))||[]).map(ve=>s.getAnnotation(ve)).filter(Boolean);return o?Fe.map(o.serialize):Fe},B=(Se,Fe=!0)=>fetch(Se).then(ve=>ve.json()).then(ve=>(we(ve,Fe),ve)),ne=Se=>{if(typeof Se=="string"){const Fe=s.getAnnotation(Se);if(s.deleteAnnotation(Se),Fe)return o?o.serialize(Fe):Fe}else{const Fe=o?o.parse(Se).parsed:Se;if(Fe)return s.deleteAnnotation(Fe),Se}},we=(Se,Fe=!0)=>{if(o){const ve=o.parseAll||Ke(o),{parsed:He,failed:Ge}=ve(Se);Ge.length>0&&console.warn(`Discarded ${Ge.length} invalid annotations`,Ge),s.bulkAddAnnotations(He,Fe,ee.REMOTE)}else s.bulkAddAnnotations(Se.map($e),Fe,ee.REMOTE)},ge=(Se,Fe)=>{Se?d.setSelected(Se,Fe):d.clear()},de=Se=>{d.clear(),d.setUserSelectAction(Se)},ze=Se=>{if(o){const Fe=o.parse(Se).parsed,ve=o.serialize(s.getAnnotation(Fe.id));return s.updateAnnotation(Fe),ve}else{const Fe=s.getAnnotation(Se.id);return s.updateAnnotation($e(Se)),Fe}};return{addAnnotation:g,cancelSelected:x,canRedo:r.canRedo,canUndo:r.canUndo,clearAnnotations:C,getAnnotationById:I,getAnnotations:H,getHistory:r.getHistory,getSelected:W,loadAnnotations:B,redo:r.redo,removeAnnotation:ne,setAnnotations:we,setSelected:ge,setUserSelectAction:de,undo:r.undo,updateAnnotation:ze}},rt=(t,r,o)=>typeof r=="function"?r(t,o):r,Dt=(t,r)=>typeof t!="function"&&typeof r!="function"?{...t||{},...r||{}}:(o,s)=>{const d=typeof t=="function"?t(o,s):t,g=typeof r=="function"?r(o,s):r;return{...d||{},...g||{}}},zt="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let en=t=>crypto.getRandomValues(new Uint8Array(t)),Tn=(t,r,o)=>{let s=(2<<Math.log2(t.length-1))-1,d=-~(1.6*s*r/t.length);return(g=r)=>{let x="";for(;;){let C=o(d),I=d|0;for(;I--;)if(x+=t[C[I]&s]||"",x.length>=g)return x}}},cn=(t,r=21)=>Tn(t,r|0,en),wi=(t=21)=>{let r="",o=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)r+=zt[o[t]&63];return r};const Vi=()=>({isGuest:!0,id:cn("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_",20)()}),or=t=>{const r=JSON.stringify(t);let o=0;for(let s=0,d=r.length;s<d;s++){let g=r.charCodeAt(s);o=(o<<5)-o+g,o|=0}return`${o}`},_i=t=>t?typeof t=="object"?{...t}:t:void 0,uo=(t,r)=>(Array.isArray(t)?t:[t]).map(o=>{const{id:s,type:d,purpose:g,value:x,created:C,modified:I,creator:H,...W}=o;return{id:s||`temp-${or(o)}`,annotation:r,type:d,purpose:g,value:x,creator:_i(H),created:C?new Date(C):void 0,updated:I?new Date(I):void 0,...W}}),fo=t=>t.map(r=>{var o;const{annotation:s,created:d,updated:g,...x}=r,C={...x,created:d==null?void 0:d.toISOString(),modified:g==null?void 0:g.toISOString()};return(o=C.id)!=null&&o.startsWith("temp-")&&delete C.id,C}),po=["#ff7c00","#1ac938","#e8000b","#8b2be2","#9f4800","#f14cc1","#ffc400","#00d7ff","#023eff"],ho=()=>{const t=[...po];return{assignRandomColor:()=>{const r=Math.floor(Math.random()*t.length),o=t[r];return t.splice(r,1),o},releaseColor:r=>t.push(r)}};wi();const go=(t,r={strict:!0,invertY:!1})=>({parse:o=>ar(o,r),serialize:o=>sr(o,t,r)}),ar=(t,r={strict:!0,invertY:!1})=>{const o=t.id||Rn(),{creator:s,created:d,modified:g,body:x,...C}=t,I=uo(x||[],o),H=Array.isArray(t.target)?t.target[0]:t.target,W=typeof H=="string"?H:Array.isArray(H.selector)?H.selector[0]:H.selector,B=typeof W=="string"||(W==null?void 0:W.type)==="FragmentSelector"?di(W,r.invertY):(W==null?void 0:W.type)==="SvgSelector"?yi(W):void 0,ne=Array.isArray(C.target)?C.target[0]:C.targret;return B||!r.strict?{parsed:{...C,id:o,bodies:I,target:{created:d?new Date(d):void 0,creator:_i(s),updated:g?new Date(g):void 0,...typeof ne=="string"?{}:ne,annotation:o,selector:B||W}}}:{error:Error(`Invalid selector: ${JSON.stringify(W)}`)}},sr=(t,r,o={strict:!0,invertY:!1})=>{const{selector:s,creator:d,created:g,updated:x,updatedBy:C,...I}=t.target;let H;try{H=s.type==at.RECTANGLE?fi(s.geometry):Xn(s)}catch(B){if(o.strict)throw B;H=s}const W={...t,"@context":"http://www.w3.org/ns/anno.jsonld",id:t.id,type:"Annotation",body:fo(t.bodies),created:g==null?void 0:g.toISOString(),creator:d,modified:x==null?void 0:x.toISOString(),target:{...I,source:r,type:"SpecificResource",selector:H}};return delete W.bodies,"annotation"in W.target&&delete W.target.annotation,W},qn=[];function mo(t,r=c){let o;const s=new Set;function d(C){if(U(t,C)&&(t=C,o)){const I=!qn.length;for(const H of s)H[1](),qn.push(H,t);if(I){for(let H=0;H<qn.length;H+=2)qn[H][0](qn[H+1]);qn.length=0}}}function g(C){d(C(t))}function x(C,I=c){const H=[C,I];return s.add(H),s.size===1&&(o=r(d,g)||c),C(t),()=>{s.delete(H),s.size===0&&o&&(o(),o=null)}}return{set:d,update:g,subscribe:x}}const vo=(t,r)=>{const{naturalWidth:o,naturalHeight:s}=t;if(!o&&!s){const{width:d,height:g}=t;r.setAttribute("viewBox",`0 0 ${d} ${g}`),t.addEventListener("load",x=>{const C=x.target;r.setAttribute("viewBox",`0 0 ${C.naturalWidth} ${C.naturalHeight}`)})}else r.setAttribute("viewBox",`0 0 ${o} ${s}`)},lr=(t,r)=>{vo(t,r);const{subscribe:o,set:s}=mo(1);let d;return window.ResizeObserver&&(d=new ResizeObserver(()=>{const g=r.getBoundingClientRect(),{width:x,height:C}=r.viewBox.baseVal,I=Math.max(g.width/x,g.height/C);s(I)}),d.observe(r.parentElement)),{destroy:()=>{d&&d.disconnect()},subscribe:o}},zn=(t,r)=>{const o=typeof r=="function"?r(t):r;if(o){const{fill:s,fillOpacity:d,stroke:g,strokeWidth:x,strokeOpacity:C}=o;let I="";return s&&(I+=`fill:${s};`),d||d===0?I+=`fill-opacity:${d};`:s&&(I+="fill-opacity:0.25;"),g&&(I+=`stroke:${g};`,I+=`stroke-width:${x||"1"};`,I+=`stroke-opacity:${C||"1"};`),I}},ni=(t,r=0)=>{const{minX:o,minY:s,maxX:d,maxY:g}=t;return{x:o-r,y:s-r,w:d-o+2*r,h:g-s+2*r}},yn=typeof window>"u"||typeof navigator>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,yo=t=>({}),cr=t=>({grab:t[0]});function bo(t){let r,o,s,d;const g=t[8].default,x=v(g,t,t[7],cr);return{c(){r=R("g"),x&&x.c(),b(r,"class","a9s-annotation selected")},m(C,I){X(C,r,I),x&&x.m(r,null),o=!0,s||(d=[oe(r,"pointerup",t[2]),oe(r,"pointermove",t[1])],s=!0)},p(C,[I]){x&&x.p&&(!o||I&128)&&k(x,g,C,C[7],o?S(g,C[7],I,yo):N(C[7]),cr)},i(C){o||(st(x,C),o=!0)},o(C){pt(x,C),o=!1},d(C){C&&V(r),x&&x.d(C),s=!1,A(d)}}}function wo(t,r,o){let{$$slots:s={},$$scope:d}=r;const g=Me();let{shape:x}=r,{editor:C}=r,{transform:I}=r,{svgEl:H}=r,W,B,ne;const we=ze=>Se=>{if(W=ze,H){const{left:Fe,top:ve}=H.getBoundingClientRect(),He=Se.clientX-Fe,Ge=Se.clientY-ve;B=I.elementToImage(He,Ge)}else{const{offsetX:Fe,offsetY:ve}=Se;B=I.elementToImage(Fe,ve)}ne=x,Se.target.setPointerCapture(Se.pointerId),g("grab",Se)},ge=ze=>{if(W){const[Se,Fe]=I.elementToImage(ze.offsetX,ze.offsetY),ve=[Se-B[0],Fe-B[1]];o(3,x=C(ne,W,ve)),g("change",x)}},de=ze=>{ze.target.releasePointerCapture(ze.pointerId),W=void 0,ne=x,g("release",ze)};return t.$$set=ze=>{"shape"in ze&&o(3,x=ze.shape),"editor"in ze&&o(4,C=ze.editor),"transform"in ze&&o(5,I=ze.transform),"svgEl"in ze&&o(6,H=ze.svgEl),"$$scope"in ze&&o(7,d=ze.$$scope)},[we,ge,de,x,C,I,H,d,s]}class Ei extends it{constructor(r){super(),Xe(this,r,wo,bo,U,{shape:3,editor:4,transform:5,svgEl:6})}}function _o(t){let r,o,s,d,g,x,C,I,H=t[3]&&ur(t);return{c(){r=R("g"),o=R("circle"),H&&H.c(),d=R("circle"),b(o,"class","a9s-handle-buffer svelte-qtyc7s"),b(o,"cx",t[0]),b(o,"cy",t[1]),b(o,"r",s=t[5]+6/t[2]),b(o,"role","button"),b(o,"tabindex","0"),b(d,"class",g=K(`a9s-handle-dot${t[3]?" selected":""}`)+" svelte-qtyc7s"),b(d,"cx",t[0]),b(d,"cy",t[1]),b(d,"r",t[5]),b(r,"class",x=`a9s-handle ${t[8].class||""}`.trim())},m(W,B){X(W,r,B),te(r,o),H&&H.m(r,null),te(r,d),C||(I=[oe(o,"dblclick",t[12]),oe(o,"pointerenter",t[13]),oe(o,"pointerleave",t[14]),oe(o,"pointerdown",t[15]),oe(o,"pointerdown",t[6]),oe(o,"pointerup",t[16]),oe(o,"pointerup",t[7])],C=!0)},p(W,B){B&1&&b(o,"cx",W[0]),B&2&&b(o,"cy",W[1]),B&36&&s!==(s=W[5]+6/W[2])&&b(o,"r",s),W[3]?H?H.p(W,B):(H=ur(W),H.c(),H.m(r,d)):H&&(H.d(1),H=null),B&8&&g!==(g=K(`a9s-handle-dot${W[3]?" selected":""}`)+" svelte-qtyc7s")&&b(d,"class",g),B&1&&b(d,"cx",W[0]),B&2&&b(d,"cy",W[1]),B&32&&b(d,"r",W[5]),B&256&&x!==(x=`a9s-handle ${W[8].class||""}`.trim())&&b(r,"class",x)},d(W){W&&V(r),H&&H.d(),C=!1,A(I)}}}function Eo(t){let r,o,s,d,g,x,C,I,H;return{c(){r=R("g"),o=R("circle"),d=R("circle"),x=R("circle"),b(o,"cx",t[0]),b(o,"cy",t[1]),b(o,"r",s=t[5]*10),b(o,"class","a9s-touch-halo"),ce(o,"touched",t[4]),b(d,"cx",t[0]),b(d,"cy",t[1]),b(d,"r",g=t[5]+10/t[2]),b(d,"class","a9s-handle-buffer svelte-qtyc7s"),b(d,"role","button"),b(d,"tabindex","0"),b(x,"class","a9s-handle-dot"),b(x,"cx",t[0]),b(x,"cy",t[1]),b(x,"r",C=t[5]+2/t[2]),b(r,"class","a9s-touch-handle")},m(W,B){X(W,r,B),te(r,o),te(r,d),te(r,x),I||(H=[oe(d,"dblclick",t[9]),oe(d,"pointerdown",t[10]),oe(d,"pointerdown",t[6]),oe(d,"pointerup",t[11]),oe(d,"pointerup",t[7])],I=!0)},p(W,B){B&1&&b(o,"cx",W[0]),B&2&&b(o,"cy",W[1]),B&32&&s!==(s=W[5]*10)&&b(o,"r",s),B&16&&ce(o,"touched",W[4]),B&1&&b(d,"cx",W[0]),B&2&&b(d,"cy",W[1]),B&36&&g!==(g=W[5]+10/W[2])&&b(d,"r",g),B&1&&b(x,"cx",W[0]),B&2&&b(x,"cy",W[1]),B&36&&C!==(C=W[5]+2/W[2])&&b(x,"r",C)},d(W){W&&V(r),I=!1,A(H)}}}function ur(t){let r,o;return{c(){r=R("circle"),b(r,"class","a9s-handle-selected"),b(r,"cx",t[0]),b(r,"cy",t[1]),b(r,"r",o=t[5]+8/t[2])},m(s,d){X(s,r,d)},p(s,d){d&1&&b(r,"cx",s[0]),d&2&&b(r,"cy",s[1]),d&36&&o!==(o=s[5]+8/s[2])&&b(r,"r",o)},d(s){s&&V(r)}}}function xo(t){let r;function o(d,g){return yn?Eo:_o}let s=o()(t);return{c(){s.c(),r=Q()},m(d,g){s.m(d,g),X(d,r,g)},p(d,[g]){s.p(d,g)},i:c,o:c,d(d){d&&V(r),s.d(d)}}}function Co(t,r,o){let s,{x:d}=r,{y:g}=r,{scale:x}=r,{selected:C=void 0}=r,I=!1;const H=ve=>{ve.pointerType==="touch"&&o(4,I=!0)},W=()=>o(4,I=!1);function B(ve){ot.call(this,t,ve)}function ne(ve){ot.call(this,t,ve)}function we(ve){ot.call(this,t,ve)}function ge(ve){ot.call(this,t,ve)}function de(ve){ot.call(this,t,ve)}function ze(ve){ot.call(this,t,ve)}function Se(ve){ot.call(this,t,ve)}function Fe(ve){ot.call(this,t,ve)}return t.$$set=ve=>{o(8,r=m(m({},r),G(ve))),"x"in ve&&o(0,d=ve.x),"y"in ve&&o(1,g=ve.y),"scale"in ve&&o(2,x=ve.scale),"selected"in ve&&o(3,C=ve.selected)},t.$$.update=()=>{t.$$.dirty&4&&o(5,s=4/x)},r=G(r),[d,g,x,C,I,s,H,W,r,B,ne,we,ge,de,ze,Se,Fe]}class Un extends it{constructor(r){super(),Xe(this,r,Co,xo,U,{x:0,y:1,scale:2,selected:3})}}function To(t){let r,o,s,d,g,x,C;return{c(){r=R("g"),o=R("circle"),d=R("circle"),g=R("circle"),b(o,"class","a9s-polygon-midpoint-buffer svelte-12ykj76"),b(o,"cx",t[0]),b(o,"cy",t[1]),b(o,"r",s=1.75*t[2]),b(d,"class","a9s-polygon-midpoint-outer svelte-12ykj76"),b(d,"cx",t[0]),b(d,"cy",t[1]),b(d,"r",t[2]),b(g,"class","a9s-polygon-midpoint-inner svelte-12ykj76"),b(g,"cx",t[0]),b(g,"cy",t[1]),b(g,"r",t[2]),b(r,"class","a9s-polygon-midpoint svelte-12ykj76")},m(I,H){X(I,r,H),te(r,o),te(r,d),te(r,g),x||(C=[oe(o,"pointerdown",t[5]),oe(o,"pointerdown",t[3])],x=!0)},p(I,H){H&1&&b(o,"cx",I[0]),H&2&&b(o,"cy",I[1]),H&4&&s!==(s=1.75*I[2])&&b(o,"r",s),H&1&&b(d,"cx",I[0]),H&2&&b(d,"cy",I[1]),H&4&&b(d,"r",I[2]),H&1&&b(g,"cx",I[0]),H&2&&b(g,"cy",I[1]),H&4&&b(g,"r",I[2])},d(I){I&&V(r),x=!1,A(C)}}}function So(t){let r;return{c(){r=R("circle"),b(r,"cx",t[0]),b(r,"cy",t[1]),b(r,"r",t[2])},m(o,s){X(o,r,s)},p(o,s){s&1&&b(r,"cx",o[0]),s&2&&b(r,"cy",o[1]),s&4&&b(r,"r",o[2])},d(o){o&&V(r)}}}function Ao(t){let r;function o(d,g){return yn?So:To}let s=o()(t);return{c(){s.c(),r=Q()},m(d,g){s.m(d,g),X(d,r,g)},p(d,[g]){s.p(d,g)},i:c,o:c,d(d){d&&V(r),s.d(d)}}}function ko(t,r,o){let s,{x:d}=r,{y:g}=r,{scale:x}=r;const C=H=>{H.pointerType};function I(H){ot.call(this,t,H)}return t.$$set=H=>{"x"in H&&o(0,d=H.x),"y"in H&&o(1,g=H.y),"scale"in H&&o(4,x=H.scale)},t.$$.update=()=>{t.$$.dirty&16&&o(2,s=4/x)},[d,g,s,C,x,I]}class ji extends it{constructor(r){super(),Xe(this,r,ko,Ao,U,{x:0,y:1,scale:4})}}function zi(t){const r=t.slice(),o=r[10][r[6]];return r[28]=o.point,r}function dr(t,r,o){const s=t.slice();return s[28]=r[o],s[30]=o,s}function Ui(t){const r=t.slice(),o=r[10][r[6]];return r[28]=o.point,r}function Wi(t){const r=t.slice(),o=r[10][r[6]];return r[28]=o.point,r}function fr(t){let r,o,s,d;return{c(){r=R("circle"),b(r,"cx",o=t[28][0]),b(r,"cy",s=t[28][1]),b(r,"r",d=ii/t[3]),b(r,"class","svelte-1h2slbm")},m(g,x){X(g,r,x)},p(g,x){x[0]&1088&&o!==(o=g[28][0])&&b(r,"cx",o),x[0]&1088&&s!==(s=g[28][1])&&b(r,"cy",s),x[0]&8&&d!==(d=ii/g[3])&&b(r,"r",d)},d(g){g&&V(r)}}}function pr(t){let r,o,s,d,g,x,C,I,H,W;return{c(){r=R("mask"),o=R("rect"),C=R("circle"),b(o,"x",s=t[9].x),b(o,"y",d=t[9].y),b(o,"width",g=t[9].w),b(o,"height",x=t[9].h),b(o,"class","svelte-1h2slbm"),b(C,"cx",I=t[28][0]),b(C,"cy",H=t[28][1]),b(C,"r",W=ii/t[3]),b(C,"class","svelte-1h2slbm"),b(r,"id",`${t[19]}-inner`),b(r,"class","a9s-polygon-editor-mask svelte-1h2slbm")},m(B,ne){X(B,r,ne),te(r,o),te(r,C)},p(B,ne){ne[0]&512&&s!==(s=B[9].x)&&b(o,"x",s),ne[0]&512&&d!==(d=B[9].y)&&b(o,"y",d),ne[0]&512&&g!==(g=B[9].w)&&b(o,"width",g),ne[0]&512&&x!==(x=B[9].h)&&b(o,"height",x),ne[0]&1088&&I!==(I=B[28][0])&&b(C,"cx",I),ne[0]&1088&&H!==(H=B[28][1])&&b(C,"cy",H),ne[0]&8&&W!==(W=ii/B[3])&&b(C,"r",W)},d(B){B&&V(r)}}}function hr(t){let r,o;return r=new Un({props:{class:"a9s-corner-handle",x:t[28][0],y:t[28][1],scale:t[3],selected:t[8].includes(t[30])}}),r.$on("pointerenter",t[11]),r.$on("pointerleave",t[12]),r.$on("pointerdown",t[15]),r.$on("pointerdown",function(){D(t[27](`HANDLE-${t[30]}`))&&t[27](`HANDLE-${t[30]}`).apply(this,arguments)}),r.$on("pointerup",t[16](t[30])),{c(){Mt(r.$$.fragment)},m(s,d){ue(r,s,d),o=!0},p(s,d){t=s;const g={};d[0]&32&&(g.x=t[28][0]),d[0]&32&&(g.y=t[28][1]),d[0]&8&&(g.scale=t[3]),d[0]&256&&(g.selected=t[8].includes(t[30])),r.$set(g)},i(s){o||(st(r.$$.fragment,s),o=!0)},o(s){pt(r.$$.fragment,s),o=!1},d(s){se(r,s)}}}function gr(t){let r,o;return r=new ji({props:{x:t[28][0],y:t[28][1],scale:t[3]}}),r.$on("pointerdown",function(){D(t[18](t[6]))&&t[18](t[6]).apply(this,arguments)}),{c(){Mt(r.$$.fragment)},m(s,d){ue(r,s,d),o=!0},p(s,d){t=s;const g={};d[0]&1088&&(g.x=t[28][0]),d[0]&1088&&(g.y=t[28][1]),d[0]&8&&(g.scale=t[3]),r.$set(g)},i(s){o||(st(r.$$.fragment,s),o=!0)},o(s){pt(r.$$.fragment,s),o=!1},d(s){se(r,s)}}}function Io(t){let r,o,s,d,g,x,C,I,H,W,B,ne,we,ge,de,ze,Se,Fe,ve,He,Ge,tt=t[6]!==void 0&&!t[7]&&fr(Wi(t)),Ye=t[6]!==void 0&&!t[7]&&pr(Ui(t)),gt=qt(t[5].points),ut=[];for(let Ee=0;Ee<gt.length;Ee+=1)ut[Ee]=hr(dr(t,gt,Ee));const Lt=Ee=>pt(ut[Ee],1,1,()=>{ut[Ee]=null});let It=t[6]!==void 0&&!t[7]&&gr(zi(t));return{c(){r=R("defs"),o=R("mask"),s=R("rect"),I=R("polygon"),tt&&tt.c(),Ye&&Ye.c(),W=L(),B=R("polygon"),we=L(),ge=R("polygon"),ze=L();for(let Ee=0;Ee<ut.length;Ee+=1)ut[Ee].c();Se=L(),It&&It.c(),Fe=Q(),b(s,"x",d=t[9].x),b(s,"y",g=t[9].y),b(s,"width",x=t[9].w),b(s,"height",C=t[9].h),b(s,"class","svelte-1h2slbm"),b(I,"points",H=t[5].points.map(mr).join(" ")),b(I,"class","svelte-1h2slbm"),b(o,"id",`${t[19]}-outer`),b(o,"class","a9s-polygon-editor-mask svelte-1h2slbm"),b(B,"class","a9s-outer"),b(B,"mask",`url(#${t[19]}-outer)`),b(B,"points",ne=t[5].points.map(vr).join(" ")),b(ge,"class","a9s-inner a9s-shape-handle"),b(ge,"mask",`url(#${t[19]}-inner)`),b(ge,"style",t[1]),b(ge,"points",de=t[5].points.map(yr).join(" "))},m(Ee,Ie){X(Ee,r,Ie),te(r,o),te(o,s),te(o,I),tt&&tt.m(o,null),Ye&&Ye.m(r,null),X(Ee,W,Ie),X(Ee,B,Ie),X(Ee,we,Ie),X(Ee,ge,Ie),X(Ee,ze,Ie);for(let he=0;he<ut.length;he+=1)ut[he]&&ut[he].m(Ee,Ie);X(Ee,Se,Ie),It&&It.m(Ee,Ie),X(Ee,Fe,Ie),ve=!0,He||(Ge=[oe(B,"pointerup",t[14]),oe(B,"pointerdown",function(){D(t[27]("SHAPE"))&&t[27]("SHAPE").apply(this,arguments)}),oe(ge,"pointermove",t[13]),oe(ge,"pointerup",t[14]),oe(ge,"pointerdown",function(){D(t[27]("SHAPE"))&&t[27]("SHAPE").apply(this,arguments)})],He=!0)},p(Ee,Ie){if(t=Ee,(!ve||Ie[0]&512&&d!==(d=t[9].x))&&b(s,"x",d),(!ve||Ie[0]&512&&g!==(g=t[9].y))&&b(s,"y",g),(!ve||Ie[0]&512&&x!==(x=t[9].w))&&b(s,"width",x),(!ve||Ie[0]&512&&C!==(C=t[9].h))&&b(s,"height",C),(!ve||Ie[0]&32&&H!==(H=t[5].points.map(mr).join(" ")))&&b(I,"points",H),t[6]!==void 0&&!t[7]?tt?tt.p(Wi(t),Ie):(tt=fr(Wi(t)),tt.c(),tt.m(o,null)):tt&&(tt.d(1),tt=null),t[6]!==void 0&&!t[7]?Ye?Ye.p(Ui(t),Ie):(Ye=pr(Ui(t)),Ye.c(),Ye.m(r,null)):Ye&&(Ye.d(1),Ye=null),(!ve||Ie[0]&32&&ne!==(ne=t[5].points.map(vr).join(" ")))&&b(B,"points",ne),(!ve||Ie[0]&2)&&b(ge,"style",t[1]),(!ve||Ie[0]&32&&de!==(de=t[5].points.map(yr).join(" ")))&&b(ge,"points",de),Ie[0]&134322472){gt=qt(t[5].points);let he;for(he=0;he<gt.length;he+=1){const Te=dr(t,gt,he);ut[he]?(ut[he].p(Te,Ie),st(ut[he],1)):(ut[he]=hr(Te),ut[he].c(),st(ut[he],1),ut[he].m(Se.parentNode,Se))}for(Vt(),he=gt.length;he<ut.length;he+=1)Lt(he);Qt()}t[6]!==void 0&&!t[7]?It?(It.p(zi(t),Ie),Ie[0]&192&&st(It,1)):(It=gr(zi(t)),It.c(),st(It,1),It.m(Fe.parentNode,Fe)):It&&(Vt(),pt(It,1,1,()=>{It=null}),Qt())},i(Ee){if(!ve){for(let Ie=0;Ie<gt.length;Ie+=1)st(ut[Ie]);st(It),ve=!0}},o(Ee){ut=ut.filter(Boolean);for(let Ie=0;Ie<ut.length;Ie+=1)pt(ut[Ie]);pt(It),ve=!1},d(Ee){Ee&&(V(r),V(W),V(B),V(we),V(ge),V(ze),V(Se),V(Fe)),tt&&tt.d(),Ye&&Ye.d(),ie(ut,Ee),It&&It.d(Ee),He=!1,A(Ge)}}}function Po(t){let r,o;return r=new Ei({props:{shape:t[0],transform:t[2],editor:t[17],svgEl:t[4],$$slots:{default:[Io,({grab:s})=>({27:s}),({grab:s})=>[s?134217728:0]]},$$scope:{ctx:t}}}),r.$on("change",t[20]),r.$on("grab",t[21]),r.$on("release",t[22]),{c(){Mt(r.$$.fragment)},m(s,d){ue(r,s,d),o=!0},p(s,d){const g={};d[0]&1&&(g.shape=s[0]),d[0]&4&&(g.transform=s[2]),d[0]&16&&(g.svgEl=s[4]),d[0]&134219754|d[1]&1&&(g.$$scope={dirty:d,ctx:s}),r.$set(g)},i(s){o||(st(r.$$.fragment,s),o=!0)},o(s){pt(r.$$.fragment,s),o=!1},d(s){se(r,s)}}}const Do=250,Oo=1e3,Lo=12,ii=4.5,mr=t=>t.join(","),vr=t=>t.join(","),yr=t=>t.join(",");function No(t,r,o){let s,d,g;const x=Me();let{shape:C}=r,{computedStyle:I}=r,{transform:H}=r,{viewportScale:W=1}=r,{svgEl:B}=r,ne,we=!1,ge,de=[];const ze=()=>o(7,we=!0),Se=()=>o(7,we=!1),Fe=he=>{if(de.length>0||!d.some(St=>St.visible)){o(6,ne=void 0);return}const[Te,Qe]=H.elementToImage(he.offsetX,he.offsetY),qe=St=>Math.pow(St[0]-Te,2)+Math.pow(St[1]-Qe,2),nt=s.points.reduce((St,Pt)=>qe(Pt)<qe(St)?Pt:St),At=d.filter(St=>St.visible).reduce((St,Pt)=>qe(Pt.point)<qe(St.point)?Pt:St),wt=Math.pow(Oo/W,2);qe(nt)<wt||qe(At.point)<wt?o(6,ne=d.indexOf(At)):o(6,ne=void 0)},ve=()=>{document.activeElement!==B&&B.focus()},He=()=>{o(8,de=[]),ve()},Ge=he=>{o(7,we=!0),he.preventDefault(),he.stopPropagation(),ge=performance.now()},tt=he=>Te=>{if(!ge||yn||performance.now()-ge>Do)return;const Qe=de.includes(he);Te.metaKey||Te.ctrlKey||Te.shiftKey?Qe?o(8,de=de.filter(qe=>qe!==he)):o(8,de=[...de,he]):Qe&&de.length>1?o(8,de=[he]):Qe?o(8,de=[]):o(8,de=[he]),ve()},Ye=(he,Te,Qe)=>{ve();let qe;const nt=he.geometry;de.length>1?qe=nt.points.map(([wt,St],Pt)=>de.includes(Pt)?[wt+Qe[0],St+Qe[1]]:[wt,St]):Te==="SHAPE"?qe=nt.points.map(([wt,St])=>[wt+Qe[0],St+Qe[1]]):qe=nt.points.map(([wt,St],Pt)=>Te===`HANDLE-${Pt}`?[wt+Qe[0],St+Qe[1]]:[wt,St]);const At=jt(qe);return{...he,geometry:{points:qe,bounds:At}}},gt=he=>async Te=>{Te.stopPropagation();const Qe=[...s.points.slice(0,he+1),d[he].point,...s.points.slice(he+1)],qe=jt(Qe);x("change",{...C,geometry:{points:Qe,bounds:qe}}),await le();const nt=[...document.querySelectorAll(".a9s-handle")][he+1];if(nt!=null&&nt.firstChild){const At=new PointerEvent("pointerdown",{bubbles:!0,cancelable:!0,clientX:Te.clientX,clientY:Te.clientY,pointerId:Te.pointerId,pointerType:Te.pointerType,isPrimary:Te.isPrimary,buttons:Te.buttons});nt.firstChild.dispatchEvent(At)}},ut=()=>{if(s.points.length-de.length<3)return;const he=s.points.filter((Qe,qe)=>!de.includes(qe)),Te=jt(he);x("change",{...C,geometry:{points:he,bounds:Te}}),o(8,de=[])};je(()=>{if(yn)return;const he=Te=>{(Te.key==="Delete"||Te.key==="Backspace")&&(Te.preventDefault(),ut())};return B.addEventListener("pointermove",Fe),B.addEventListener("keydown",he),()=>{B.removeEventListener("pointermove",Fe),B.removeEventListener("keydown",he)}});const Lt=`polygon-mask-${Math.random().toString(36).substring(2,12)}`;function It(he){ot.call(this,t,he)}function Ee(he){ot.call(this,t,he)}function Ie(he){ot.call(this,t,he)}return t.$$set=he=>{"shape"in he&&o(0,C=he.shape),"computedStyle"in he&&o(1,I=he.computedStyle),"transform"in he&&o(2,H=he.transform),"viewportScale"in he&&o(3,W=he.viewportScale),"svgEl"in he&&o(4,B=he.svgEl)},t.$$.update=()=>{t.$$.dirty[0]&1&&o(5,s=C.geometry),t.$$.dirty[0]&40&&o(10,d=yn?[]:s.points.map((he,Te)=>{const Qe=Te===s.points.length-1?s.points[0]:s.points[Te+1],qe=(he[0]+Qe[0])/2,nt=(he[1]+Qe[1])/2,At=Math.sqrt(Math.pow(Qe[0]-qe,2)+Math.pow(Qe[1]-nt,2))>Lo/W;return{point:[qe,nt],visible:At}})),t.$$.dirty[0]&40&&o(9,g=ni(s.bounds,ii/W))},[C,I,H,W,B,s,ne,we,de,g,d,ze,Se,Fe,He,Ge,tt,Ye,gt,Lt,It,Ee,Ie]}class br extends it{constructor(r){super(),Xe(this,r,No,Po,U,{shape:0,computedStyle:1,transform:2,viewportScale:3,svgEl:4},null,[-1,-1])}}function Fo(t){let r,o,s,d,g,x,C,I,H,W,B,ne,we,ge,de,ze,Se,Fe,ve,He,Ge,tt,Ye,gt,ut,Lt,It,Ee,Ie,he,Te,Qe,qe,nt,At,wt,St,Pt,$t,ln,Zt,bn,In,yt,an,Ut,sn,gn,Wn,Pn,ir,Dn,Ht,rr,co;return Ut=new Un({props:{class:"a9s-corner-handle-topleft",x:t[5].x,y:t[5].y,scale:t[3]}}),Ut.$on("pointerdown",function(){D(t[12]("TOP_LEFT"))&&t[12]("TOP_LEFT").apply(this,arguments)}),gn=new Un({props:{class:"a9s-corner-handle-topright",x:t[5].x+t[5].w,y:t[5].y,scale:t[3]}}),gn.$on("pointerdown",function(){D(t[12]("TOP_RIGHT"))&&t[12]("TOP_RIGHT").apply(this,arguments)}),Pn=new Un({props:{class:"a9s-corner-handle-bottomright",x:t[5].x+t[5].w,y:t[5].y+t[5].h,scale:t[3]}}),Pn.$on("pointerdown",function(){D(t[12]("BOTTOM_RIGHT"))&&t[12]("BOTTOM_RIGHT").apply(this,arguments)}),Dn=new Un({props:{class:"a9s-corner-handle-bottomleft",x:t[5].x,y:t[5].y+t[5].h,scale:t[3]}}),Dn.$on("pointerdown",function(){D(t[12]("BOTTOM_LEFT"))&&t[12]("BOTTOM_LEFT").apply(this,arguments)}),{c(){r=R("defs"),o=R("mask"),s=R("rect"),I=R("rect"),we=L(),ge=R("rect"),ve=L(),He=R("rect"),ut=L(),Lt=R("rect"),he=L(),Te=R("rect"),At=L(),wt=R("rect"),ln=L(),Zt=R("rect"),an=L(),Mt(Ut.$$.fragment),sn=L(),Mt(gn.$$.fragment),Wn=L(),Mt(Pn.$$.fragment),ir=L(),Mt(Dn.$$.fragment),b(s,"class","rect-mask-bg svelte-1njczvj"),b(s,"x",d=t[6].x),b(s,"y",g=t[6].y),b(s,"width",x=t[6].w),b(s,"height",C=t[6].h),b(I,"class","rect-mask-fg svelte-1njczvj"),b(I,"x",H=t[5].x),b(I,"y",W=t[5].y),b(I,"width",B=t[5].w),b(I,"height",ne=t[5].h),b(o,"id",t[8]),b(o,"class","a9s-rectangle-editor-mask svelte-1njczvj"),b(ge,"class","a9s-outer"),b(ge,"mask",`url(#${t[8]})`),b(ge,"x",de=t[5].x),b(ge,"y",ze=t[5].y),b(ge,"width",Se=t[5].w),b(ge,"height",Fe=t[5].h),b(He,"class","a9s-inner a9s-shape-handle"),b(He,"style",t[1]),b(He,"x",Ge=t[5].x),b(He,"y",tt=t[5].y),b(He,"width",Ye=t[5].w),b(He,"height",gt=t[5].h),b(Lt,"class","a9s-edge-handle a9s-edge-handle-top"),b(Lt,"x",It=t[5].x),b(Lt,"y",Ee=t[5].y),b(Lt,"height",1),b(Lt,"width",Ie=t[5].w),b(Te,"class","a9s-edge-handle a9s-edge-handle-right"),b(Te,"x",Qe=t[5].x+t[5].w),b(Te,"y",qe=t[5].y),b(Te,"height",nt=t[5].h),b(Te,"width",1),b(wt,"class","a9s-edge-handle a9s-edge-handle-bottom"),b(wt,"x",St=t[5].x),b(wt,"y",Pt=t[5].y+t[5].h),b(wt,"height",1),b(wt,"width",$t=t[5].w),b(Zt,"class","a9s-edge-handle a9s-edge-handle-left"),b(Zt,"x",bn=t[5].x),b(Zt,"y",In=t[5].y),b(Zt,"height",yt=t[5].h),b(Zt,"width",1)},m(Ot,dt){X(Ot,r,dt),te(r,o),te(o,s),te(o,I),X(Ot,we,dt),X(Ot,ge,dt),X(Ot,ve,dt),X(Ot,He,dt),X(Ot,ut,dt),X(Ot,Lt,dt),X(Ot,he,dt),X(Ot,Te,dt),X(Ot,At,dt),X(Ot,wt,dt),X(Ot,ln,dt),X(Ot,Zt,dt),X(Ot,an,dt),ue(Ut,Ot,dt),X(Ot,sn,dt),ue(gn,Ot,dt),X(Ot,Wn,dt),ue(Pn,Ot,dt),X(Ot,ir,dt),ue(Dn,Ot,dt),Ht=!0,rr||(co=[oe(ge,"pointerdown",function(){D(t[12]("SHAPE"))&&t[12]("SHAPE").apply(this,arguments)}),oe(He,"pointerdown",function(){D(t[12]("SHAPE"))&&t[12]("SHAPE").apply(this,arguments)}),oe(Lt,"pointerdown",function(){D(t[12]("TOP"))&&t[12]("TOP").apply(this,arguments)}),oe(Te,"pointerdown",function(){D(t[12]("RIGHT"))&&t[12]("RIGHT").apply(this,arguments)}),oe(wt,"pointerdown",function(){D(t[12]("BOTTOM"))&&t[12]("BOTTOM").apply(this,arguments)}),oe(Zt,"pointerdown",function(){D(t[12]("LEFT"))&&t[12]("LEFT").apply(this,arguments)})],rr=!0)},p(Ot,dt){t=Ot,(!Ht||dt&64&&d!==(d=t[6].x))&&b(s,"x",d),(!Ht||dt&64&&g!==(g=t[6].y))&&b(s,"y",g),(!Ht||dt&64&&x!==(x=t[6].w))&&b(s,"width",x),(!Ht||dt&64&&C!==(C=t[6].h))&&b(s,"height",C),(!Ht||dt&32&&H!==(H=t[5].x))&&b(I,"x",H),(!Ht||dt&32&&W!==(W=t[5].y))&&b(I,"y",W),(!Ht||dt&32&&B!==(B=t[5].w))&&b(I,"width",B),(!Ht||dt&32&&ne!==(ne=t[5].h))&&b(I,"height",ne),(!Ht||dt&32&&de!==(de=t[5].x))&&b(ge,"x",de),(!Ht||dt&32&&ze!==(ze=t[5].y))&&b(ge,"y",ze),(!Ht||dt&32&&Se!==(Se=t[5].w))&&b(ge,"width",Se),(!Ht||dt&32&&Fe!==(Fe=t[5].h))&&b(ge,"height",Fe),(!Ht||dt&2)&&b(He,"style",t[1]),(!Ht||dt&32&&Ge!==(Ge=t[5].x))&&b(He,"x",Ge),(!Ht||dt&32&&tt!==(tt=t[5].y))&&b(He,"y",tt),(!Ht||dt&32&&Ye!==(Ye=t[5].w))&&b(He,"width",Ye),(!Ht||dt&32&&gt!==(gt=t[5].h))&&b(He,"height",gt),(!Ht||dt&32&&It!==(It=t[5].x))&&b(Lt,"x",It),(!Ht||dt&32&&Ee!==(Ee=t[5].y))&&b(Lt,"y",Ee),(!Ht||dt&32&&Ie!==(Ie=t[5].w))&&b(Lt,"width",Ie),(!Ht||dt&32&&Qe!==(Qe=t[5].x+t[5].w))&&b(Te,"x",Qe),(!Ht||dt&32&&qe!==(qe=t[5].y))&&b(Te,"y",qe),(!Ht||dt&32&&nt!==(nt=t[5].h))&&b(Te,"height",nt),(!Ht||dt&32&&St!==(St=t[5].x))&&b(wt,"x",St),(!Ht||dt&32&&Pt!==(Pt=t[5].y+t[5].h))&&b(wt,"y",Pt),(!Ht||dt&32&&$t!==($t=t[5].w))&&b(wt,"width",$t),(!Ht||dt&32&&bn!==(bn=t[5].x))&&b(Zt,"x",bn),(!Ht||dt&32&&In!==(In=t[5].y))&&b(Zt,"y",In),(!Ht||dt&32&&yt!==(yt=t[5].h))&&b(Zt,"height",yt);const Ti={};dt&32&&(Ti.x=t[5].x),dt&32&&(Ti.y=t[5].y),dt&8&&(Ti.scale=t[3]),Ut.$set(Ti);const Si={};dt&32&&(Si.x=t[5].x+t[5].w),dt&32&&(Si.y=t[5].y),dt&8&&(Si.scale=t[3]),gn.$set(Si);const Ai={};dt&32&&(Ai.x=t[5].x+t[5].w),dt&32&&(Ai.y=t[5].y+t[5].h),dt&8&&(Ai.scale=t[3]),Pn.$set(Ai);const ki={};dt&32&&(ki.x=t[5].x),dt&32&&(ki.y=t[5].y+t[5].h),dt&8&&(ki.scale=t[3]),Dn.$set(ki)},i(Ot){Ht||(st(Ut.$$.fragment,Ot),st(gn.$$.fragment,Ot),st(Pn.$$.fragment,Ot),st(Dn.$$.fragment,Ot),Ht=!0)},o(Ot){pt(Ut.$$.fragment,Ot),pt(gn.$$.fragment,Ot),pt(Pn.$$.fragment,Ot),pt(Dn.$$.fragment,Ot),Ht=!1},d(Ot){Ot&&(V(r),V(we),V(ge),V(ve),V(He),V(ut),V(Lt),V(he),V(Te),V(At),V(wt),V(ln),V(Zt),V(an),V(sn),V(Wn),V(ir)),se(Ut,Ot),se(gn,Ot),se(Pn,Ot),se(Dn,Ot),rr=!1,A(co)}}}function Ho(t){let r,o;return r=new Ei({props:{shape:t[0],transform:t[2],editor:t[7],svgEl:t[4],$$slots:{default:[Fo,({grab:s})=>({12:s}),({grab:s})=>s?4096:0]},$$scope:{ctx:t}}}),r.$on("grab",t[9]),r.$on("change",t[10]),r.$on("release",t[11]),{c(){Mt(r.$$.fragment)},m(s,d){ue(r,s,d),o=!0},p(s,[d]){const g={};d&1&&(g.shape=s[0]),d&4&&(g.transform=s[2]),d&16&&(g.svgEl=s[4]),d&12394&&(g.$$scope={dirty:d,ctx:s}),r.$set(g)},i(s){o||(st(r.$$.fragment,s),o=!0)},o(s){pt(r.$$.fragment,s),o=!1},d(s){se(r,s)}}}function Ro(t,r,o){let s,d,{shape:g}=r,{computedStyle:x}=r,{transform:C}=r,{viewportScale:I=1}=r,{svgEl:H}=r;const W=(de,ze,Se)=>{const Fe=de.geometry.bounds;let[ve,He]=[Fe.minX,Fe.minY],[Ge,tt]=[Fe.maxX,Fe.maxY];const[Ye,gt]=Se;if(ze==="SHAPE")ve+=Ye,Ge+=Ye,He+=gt,tt+=gt;else{switch(ze){case"TOP":case"TOP_LEFT":case"TOP_RIGHT":{He+=gt;break}case"BOTTOM":case"BOTTOM_LEFT":case"BOTTOM_RIGHT":{tt+=gt;break}}switch(ze){case"LEFT":case"TOP_LEFT":case"BOTTOM_LEFT":{ve+=Ye;break}case"RIGHT":case"TOP_RIGHT":case"BOTTOM_RIGHT":{Ge+=Ye;break}}}const ut=Math.min(ve,Ge),Lt=Math.min(He,tt),It=Math.abs(Ge-ve),Ee=Math.abs(tt-He);return{...de,geometry:{x:ut,y:Lt,w:It,h:Ee,bounds:{minX:ut,minY:Lt,maxX:ut+It,maxY:Lt+Ee}}}},B=`rect-mask-${Math.random().toString(36).substring(2,12)}`;function ne(de){ot.call(this,t,de)}function we(de){ot.call(this,t,de)}function ge(de){ot.call(this,t,de)}return t.$$set=de=>{"shape"in de&&o(0,g=de.shape),"computedStyle"in de&&o(1,x=de.computedStyle),"transform"in de&&o(2,C=de.transform),"viewportScale"in de&&o(3,I=de.viewportScale),"svgEl"in de&&o(4,H=de.svgEl)},t.$$.update=()=>{t.$$.dirty&1&&o(5,s=g.geometry),t.$$.dirty&40&&o(6,d=ni(s.bounds,2/I))},[g,x,C,I,H,s,d,W,B,ne,we,ge]}class wr extends it{constructor(r){super(),Xe(this,r,Ro,Ho,U,{shape:0,computedStyle:1,transform:2,viewportScale:3,svgEl:4})}}var _r=Object.prototype.hasOwnProperty;function Bi(t,r){var o,s;if(t===r)return!0;if(t&&r&&(o=t.constructor)===r.constructor){if(o===Date)return t.getTime()===r.getTime();if(o===RegExp)return t.toString()===r.toString();if(o===Array){if((s=t.length)===r.length)for(;s--&&Bi(t[s],r[s]););return s===-1}if(!o||typeof t=="object"){s=0;for(o in t)if(_r.call(t,o)&&++s&&!_r.call(r,o)||!(o in r)||!Bi(t[o],r[o]))return!1;return Object.keys(r).length===s}}return t!==t&&r!==r}const Vo=12,jo=(t,r)=>t.polygons.reduce((o,s,d)=>{const g=s.rings.reduce((x,C,I)=>{const H=C.points.map((W,B)=>{const ne=B===C.points.length-1?C.points[0]:C.points[B+1],we=(W[0]+ne[0])/2,ge=(W[1]+ne[1])/2,de=Math.sqrt(Math.pow(ne[0]-we,2)+Math.pow(ne[1]-ge,2))>Vo/r;return{point:[we,ge],visible:de,elementIdx:d,ringIdx:I,pointIdx:B}});return[...x,...H]},[]);return[...o,...g]},[]);function Gi(t){const r=t.slice(),o=r[10][r[6]];return r[29]=o.point,r}function Er(t,r,o){const s=t.slice();return s[30]=r[o],s[32]=o,s}function xr(t,r,o){const s=t.slice();return s[33]=r[o],s[35]=o,s}function Cr(t,r,o){const s=t.slice();return s[29]=r[o],s[37]=o,s}function Yi(t){const r=t.slice(),o=r[10][r[6]];return r[29]=o.point,r}function Mi(t){const r=t.slice(),o=r[10][r[6]];return r[29]=o.point,r}function Tr(t){let r,o,s,d;return{c(){r=R("circle"),b(r,"cx",o=t[29][0]),b(r,"cy",s=t[29][1]),b(r,"r",d=ri/t[3]),b(r,"class","svelte-1vxo6dc")},m(g,x){X(g,r,x)},p(g,x){x[0]&1088&&o!==(o=g[29][0])&&b(r,"cx",o),x[0]&1088&&s!==(s=g[29][1])&&b(r,"cy",s),x[0]&8&&d!==(d=ri/g[3])&&b(r,"r",d)},d(g){g&&V(r)}}}function Sr(t){let r,o,s,d,g,x,C,I,H,W;return{c(){r=R("mask"),o=R("rect"),C=R("circle"),b(o,"x",s=t[9].x),b(o,"y",d=t[9].y),b(o,"width",g=t[9].w),b(o,"height",x=t[9].h),b(o,"class","svelte-1vxo6dc"),b(C,"cx",I=t[29][0]),b(C,"cy",H=t[29][1]),b(C,"r",W=ri/t[3]),b(C,"class","svelte-1vxo6dc"),b(r,"id",`${t[18]}-${t[32]}-inner`),b(r,"class","a9s-multipolygon-editor-mask svelte-1vxo6dc")},m(B,ne){X(B,r,ne),te(r,o),te(r,C)},p(B,ne){ne[0]&512&&s!==(s=B[9].x)&&b(o,"x",s),ne[0]&512&&d!==(d=B[9].y)&&b(o,"y",d),ne[0]&512&&g!==(g=B[9].w)&&b(o,"width",g),ne[0]&512&&x!==(x=B[9].h)&&b(o,"height",x),ne[0]&1088&&I!==(I=B[29][0])&&b(C,"cx",I),ne[0]&1088&&H!==(H=B[29][1])&&b(C,"cy",H),ne[0]&8&&W!==(W=ri/B[3])&&b(C,"r",W)},d(B){B&&V(r)}}}function Ar(t){let r,o;function s(...d){return t[19](t[32],t[35],t[37],...d)}return r=new Un({props:{class:"a9s-corner-handle",x:t[29][0],y:t[29][1],scale:t[3],selected:t[8].some(s)}}),r.$on("pointerenter",t[11]),r.$on("pointerleave",t[12]),r.$on("pointerdown",t[14]),r.$on("pointerdown",function(){D(t[28](`HANDLE-${t[32]}-${t[35]}-${t[37]}`))&&t[28](`HANDLE-${t[32]}-${t[35]}-${t[37]}`).apply(this,arguments)}),r.$on("pointerup",t[15](t[32],t[35],t[37])),{c(){Mt(r.$$.fragment)},m(d,g){ue(r,d,g),o=!0},p(d,g){t=d;const x={};g[0]&32&&(x.x=t[29][0]),g[0]&32&&(x.y=t[29][1]),g[0]&8&&(x.scale=t[3]),g[0]&256&&(x.selected=t[8].some(s)),r.$set(x)},i(d){o||(st(r.$$.fragment,d),o=!0)},o(d){pt(r.$$.fragment,d),o=!1},d(d){se(r,d)}}}function kr(t){let r,o,s=qt(t[33].points),d=[];for(let x=0;x<s.length;x+=1)d[x]=Ar(Cr(t,s,x));const g=x=>pt(d[x],1,1,()=>{d[x]=null});return{c(){for(let x=0;x<d.length;x+=1)d[x].c();r=Q()},m(x,C){for(let I=0;I<d.length;I+=1)d[I]&&d[I].m(x,C);X(x,r,C),o=!0},p(x,C){if(C[0]&268491048){s=qt(x[33].points);let I;for(I=0;I<s.length;I+=1){const H=Cr(x,s,I);d[I]?(d[I].p(H,C),st(d[I],1)):(d[I]=Ar(H),d[I].c(),st(d[I],1),d[I].m(r.parentNode,r))}for(Vt(),I=s.length;I<d.length;I+=1)g(I);Qt()}},i(x){if(!o){for(let C=0;C<s.length;C+=1)st(d[C]);o=!0}},o(x){d=d.filter(Boolean);for(let C=0;C<d.length;C+=1)pt(d[C]);o=!1},d(x){x&&V(r),ie(d,x)}}}function Ir(t){let r,o,s,d,g,x,C,I,H,W,B,ne,we,ge,de,ze,Se,Fe=t[6]!==void 0&&!t[7]&&Tr(Mi(t)),ve=t[6]!==void 0&&!t[7]&&Sr(Yi(t)),He=qt(t[30].rings),Ge=[];for(let Ye=0;Ye<He.length;Ye+=1)Ge[Ye]=kr(xr(t,He,Ye));const tt=Ye=>pt(Ge[Ye],1,1,()=>{Ge[Ye]=null});return{c(){r=R("g"),o=R("defs"),s=R("mask"),d=R("rect"),H=R("path"),Fe&&Fe.c(),ve&&ve.c(),B=R("path"),we=R("path");for(let Ye=0;Ye<Ge.length;Ye+=1)Ge[Ye].c();b(d,"x",g=t[9].x),b(d,"y",x=t[9].y),b(d,"width",C=t[9].w),b(d,"height",I=t[9].h),b(d,"class","svelte-1vxo6dc"),b(H,"d",W=fn(t[30])),b(H,"class","svelte-1vxo6dc"),b(s,"id",`${t[18]}-${t[32]}-outer`),b(s,"class","a9s-multipolygon-editor-mask svelte-1vxo6dc"),b(B,"class","a9s-outer"),b(B,"mask",`url(#${t[18]}-${t[32]}-outer)`),b(B,"fill-rule","evenodd"),b(B,"d",ne=fn(t[30])),b(we,"class","a9s-inner"),b(we,"mask",`url(#${t[18]}-${t[32]}-inner)`),b(we,"style",t[1]),b(we,"fill-rule","evenodd"),b(we,"d",ge=fn(t[30]))},m(Ye,gt){X(Ye,r,gt),te(r,o),te(o,s),te(s,d),te(s,H),Fe&&Fe.m(s,null),ve&&ve.m(o,null),te(r,B),te(r,we);for(let ut=0;ut<Ge.length;ut+=1)Ge[ut]&&Ge[ut].m(r,null);de=!0,ze||(Se=[oe(B,"pointerup",t[13]),oe(B,"pointerdown",function(){D(t[28]("SHAPE"))&&t[28]("SHAPE").apply(this,arguments)}),oe(we,"pointerup",t[13]),oe(we,"pointerdown",function(){D(t[28]("SHAPE"))&&t[28]("SHAPE").apply(this,arguments)})],ze=!0)},p(Ye,gt){if(t=Ye,(!de||gt[0]&512&&g!==(g=t[9].x))&&b(d,"x",g),(!de||gt[0]&512&&x!==(x=t[9].y))&&b(d,"y",x),(!de||gt[0]&512&&C!==(C=t[9].w))&&b(d,"width",C),(!de||gt[0]&512&&I!==(I=t[9].h))&&b(d,"height",I),(!de||gt[0]&32&&W!==(W=fn(t[30])))&&b(H,"d",W),t[6]!==void 0&&!t[7]?Fe?Fe.p(Mi(t),gt):(Fe=Tr(Mi(t)),Fe.c(),Fe.m(s,null)):Fe&&(Fe.d(1),Fe=null),t[6]!==void 0&&!t[7]?ve?ve.p(Yi(t),gt):(ve=Sr(Yi(t)),ve.c(),ve.m(o,null)):ve&&(ve.d(1),ve=null),(!de||gt[0]&32&&ne!==(ne=fn(t[30])))&&b(B,"d",ne),(!de||gt[0]&2)&&b(we,"style",t[1]),(!de||gt[0]&32&&ge!==(ge=fn(t[30])))&&b(we,"d",ge),gt[0]&268491048){He=qt(t[30].rings);let ut;for(ut=0;ut<He.length;ut+=1){const Lt=xr(t,He,ut);Ge[ut]?(Ge[ut].p(Lt,gt),st(Ge[ut],1)):(Ge[ut]=kr(Lt),Ge[ut].c(),st(Ge[ut],1),Ge[ut].m(r,null))}for(Vt(),ut=He.length;ut<Ge.length;ut+=1)tt(ut);Qt()}},i(Ye){if(!de){for(let gt=0;gt<He.length;gt+=1)st(Ge[gt]);de=!0}},o(Ye){Ge=Ge.filter(Boolean);for(let gt=0;gt<Ge.length;gt+=1)pt(Ge[gt]);de=!1},d(Ye){Ye&&V(r),Fe&&Fe.d(),ve&&ve.d(),ie(Ge,Ye),ze=!1,A(Se)}}}function Pr(t){let r,o;return r=new ji({props:{x:t[29][0],y:t[29][1],scale:t[3]}}),r.$on("pointerdown",function(){D(t[17](t[6]))&&t[17](t[6]).apply(this,arguments)}),{c(){Mt(r.$$.fragment)},m(s,d){ue(r,s,d),o=!0},p(s,d){t=s;const g={};d[0]&1088&&(g.x=t[29][0]),d[0]&1088&&(g.y=t[29][1]),d[0]&8&&(g.scale=t[3]),r.$set(g)},i(s){o||(st(r.$$.fragment,s),o=!0)},o(s){pt(r.$$.fragment,s),o=!1},d(s){se(r,s)}}}function zo(t){let r,o,s,d=qt(t[5].polygons),g=[];for(let I=0;I<d.length;I+=1)g[I]=Ir(Er(t,d,I));const x=I=>pt(g[I],1,1,()=>{g[I]=null});let C=t[6]!==void 0&&!t[7]&&Pr(Gi(t));return{c(){for(let I=0;I<g.length;I+=1)g[I].c();r=L(),C&&C.c(),o=Q()},m(I,H){for(let W=0;W<g.length;W+=1)g[W]&&g[W].m(I,H);X(I,r,H),C&&C.m(I,H),X(I,o,H),s=!0},p(I,H){if(H[0]&268763114){d=qt(I[5].polygons);let W;for(W=0;W<d.length;W+=1){const B=Er(I,d,W);g[W]?(g[W].p(B,H),st(g[W],1)):(g[W]=Ir(B),g[W].c(),st(g[W],1),g[W].m(r.parentNode,r))}for(Vt(),W=d.length;W<g.length;W+=1)x(W);Qt()}I[6]!==void 0&&!I[7]?C?(C.p(Gi(I),H),H[0]&192&&st(C,1)):(C=Pr(Gi(I)),C.c(),st(C,1),C.m(o.parentNode,o)):C&&(Vt(),pt(C,1,1,()=>{C=null}),Qt())},i(I){if(!s){for(let H=0;H<d.length;H+=1)st(g[H]);st(C),s=!0}},o(I){g=g.filter(Boolean);for(let H=0;H<g.length;H+=1)pt(g[H]);pt(C),s=!1},d(I){I&&(V(r),V(o)),ie(g,I),C&&C.d(I)}}}function Uo(t){let r,o;return r=new Ei({props:{shape:t[0],transform:t[2],editor:t[16],svgEl:t[4],$$slots:{default:[zo,({grab:s})=>({28:s}),({grab:s})=>[s?268435456:0]]},$$scope:{ctx:t}}}),r.$on("change",t[20]),r.$on("grab",t[21]),r.$on("release",t[22]),{c(){Mt(r.$$.fragment)},m(s,d){ue(r,s,d),o=!0},p(s,d){const g={};d[0]&1&&(g.shape=s[0]),d[0]&4&&(g.transform=s[2]),d[0]&16&&(g.svgEl=s[4]),d[0]&268437482|d[1]&128&&(g.$$scope={dirty:d,ctx:s}),r.$set(g)},i(s){o||(st(r.$$.fragment,s),o=!0)},o(s){pt(r.$$.fragment,s),o=!1},d(s){se(r,s)}}}const Wo=250,Bo=1e3,ri=4.5;function Go(t,r,o){let s,d,g;const x=Me();let{shape:C}=r,{computedStyle:I}=r,{transform:H}=r,{viewportScale:W=1}=r,{svgEl:B}=r,ne,we=!1,ge,de=[];const ze=()=>o(7,we=!0),Se=()=>o(7,we=!1),Fe=Te=>{if(de.length>0||!d.some(Pt=>Pt.visible)){o(6,ne=void 0);return}const[Qe,qe]=H.elementToImage(Te.offsetX,Te.offsetY),nt=Pt=>Math.pow(Pt[0]-Qe,2)+Math.pow(Pt[1]-qe,2),At=li(s).reduce((Pt,$t)=>nt($t)<nt(Pt)?$t:Pt),wt=d.filter(Pt=>Pt.visible).reduce((Pt,$t)=>nt($t.point)<nt(Pt.point)?$t:Pt),St=Math.pow(Bo/W,2);nt(At)<St||nt(wt.point)<St?o(6,ne=d.indexOf(wt)):o(6,ne=void 0)},ve=()=>{document.activeElement!==B&&B.focus()},He=()=>{o(8,de=[]),ve()},Ge=Te=>{o(7,we=!0),Te.preventDefault(),Te.stopPropagation(),ge=performance.now()},tt=(Te,Qe,qe)=>nt=>{if(!ge||yn||performance.now()-ge>Wo)return;const At=St=>St.polygon===Te&&St.ring===Qe&&St.point===qe,wt=de.some(At);nt.metaKey||nt.ctrlKey||nt.shiftKey?wt?o(8,de=de.filter(St=>!At(St))):o(8,de=[...de,{polygon:Te,ring:Qe,point:qe}]):wt&&de.length>1?o(8,de=[{polygon:Te,ring:Qe,point:qe}]):wt?o(8,de=[]):o(8,de=[{polygon:Te,ring:Qe,point:qe}]),ve()},Ye=(Te,Qe,qe)=>{ve();const nt=Te.geometry.polygons;let At;if(Qe==="SHAPE")At=nt.map(wt=>{const St=wt.rings.map(($t,ln)=>({points:$t.points.map((Zt,bn)=>[Zt[0]+qe[0],Zt[1]+qe[1]])})),Pt=jt(St[0].points);return{rings:St,bounds:Pt}});else{const[wt,St,Pt,$t]=Qe.split("-").map(ln=>parseInt(ln));At=nt.map((ln,Zt)=>{if(Zt===St){const bn=ln.rings.map((yt,an)=>an===Pt?{points:yt.points.map((Ut,sn)=>sn===$t?[Ut[0]+qe[0],Ut[1]+qe[1]]:Ut)}:yt),In=jt(bn[0].points);return{rings:bn,bounds:In}}else return ln})}return{...Te,geometry:{polygons:At,bounds:On(At)}}},gt=Te=>async Qe=>{Qe.stopPropagation();const qe=d[Te],nt=s.polygons.map((wt,St)=>{if(St===qe.elementIdx){const Pt=wt.rings.map((ln,Zt)=>Zt===qe.ringIdx?{points:[...ln.points.slice(0,qe.pointIdx+1),qe.point,...ln.points.slice(qe.pointIdx+1)]}:ln),$t=jt(Pt[0].points);return{rings:Pt,bounds:$t}}else return wt});x("change",{...C,geometry:{polygons:nt,bounds:On(nt)}}),await le();const At=[...document.querySelectorAll(".a9s-handle")][Te+1];if(At!=null&&At.firstChild){const wt=new PointerEvent("pointerdown",{bubbles:!0,cancelable:!0,clientX:Qe.clientX,clientY:Qe.clientY,pointerId:Qe.pointerId,pointerType:Qe.pointerType,isPrimary:Qe.isPrimary,buttons:Qe.buttons});At.firstChild.dispatchEvent(wt)}},ut=()=>{const Te=s.polygons.map((Qe,qe)=>{if(de.some(nt=>nt.polygon===qe)){const nt=Qe.rings.map((wt,St)=>{const Pt=de.filter($t=>$t.polygon===qe&&$t.ring===St);return Pt.length&&wt.points.length-Pt.length>=3?{points:wt.points.filter(($t,ln)=>!Pt.some(Zt=>Zt.point===ln))}:wt}),At=jt(nt[0].points);return{rings:nt,bounds:At}}else return Qe});!Bi(s.polygons,Te)&&(x("change",{...C,geometry:{polygons:Te,bounds:On(Te)}}),o(8,de=[]))};je(()=>{if(yn)return;const Te=Qe=>{(Qe.key==="Delete"||Qe.key==="Backspace")&&(Qe.preventDefault(),ut())};return B.addEventListener("pointermove",Fe),B.addEventListener("keydown",Te),()=>{B.removeEventListener("pointermove",Fe),B.removeEventListener("keydown",Te)}});const Lt=`polygon-mask-${Math.random().toString(36).substring(2,12)}`,It=(Te,Qe,qe,{polygon:nt,ring:At,point:wt})=>nt===Te&&At===Qe&&wt===qe;function Ee(Te){ot.call(this,t,Te)}function Ie(Te){ot.call(this,t,Te)}function he(Te){ot.call(this,t,Te)}return t.$$set=Te=>{"shape"in Te&&o(0,C=Te.shape),"computedStyle"in Te&&o(1,I=Te.computedStyle),"transform"in Te&&o(2,H=Te.transform),"viewportScale"in Te&&o(3,W=Te.viewportScale),"svgEl"in Te&&o(4,B=Te.svgEl)},t.$$.update=()=>{t.$$.dirty[0]&1&&o(5,s=C.geometry),t.$$.dirty[0]&40&&o(10,d=yn?[]:jo(s,W)),t.$$.dirty[0]&40&&o(9,g=ni(s.bounds,ri/W))},[C,I,H,W,B,s,ne,we,de,g,d,ze,Se,He,Ge,tt,Ye,gt,Lt,It,Ee,Ie,he]}class Yo extends it{constructor(r){super(),Xe(this,r,Go,Uo,U,{shape:0,computedStyle:1,transform:2,viewportScale:3,svgEl:4},null,[-1,-1])}}const Dr=new Map([[at.RECTANGLE,wr],[at.POLYGON,br],[at.MULTIPOLYGON,Yo]]),Or=t=>Dr.get(t.type),Lr=(t,r)=>Dr.set(t,r);function Mo(t,r,o){let s;const d=Me();let{annotation:g}=r,{editor:x}=r,{style:C}=r,{target:I}=r,{transform:H}=r,{viewportScale:W}=r,B;return je(()=>(o(6,B=new x({target:I,props:{shape:g.target.selector,computedStyle:s,transform:H,viewportScale:W,svgEl:I.closest("svg")}})),B.$on("change",ne=>{B.$$set({shape:ne.detail}),d("change",ne.detail)}),B.$on("grab",ne=>d("grab",ne.detail)),B.$on("release",ne=>d("release",ne.detail)),()=>{B.$destroy()})),t.$$set=ne=>{"annotation"in ne&&o(0,g=ne.annotation),"editor"in ne&&o(1,x=ne.editor),"style"in ne&&o(2,C=ne.style),"target"in ne&&o(3,I=ne.target),"transform"in ne&&o(4,H=ne.transform),"viewportScale"in ne&&o(5,W=ne.viewportScale)},t.$$.update=()=>{t.$$.dirty&5&&o(7,s=zn(g,C)),t.$$.dirty&65&&g&&(B==null||B.$set({shape:g.target.selector})),t.$$.dirty&80&&B&&B.$set({transform:H}),t.$$.dirty&96&&B&&B.$set({viewportScale:W}),t.$$.dirty&192&&B&&s&&B.$set({computedStyle:s})},[g,x,C,I,H,W,B,s]}class Nr extends it{constructor(r){super(),Xe(this,r,Mo,null,U,{annotation:0,editor:1,style:2,target:3,transform:4,viewportScale:5})}}function Xo(t,r,o){const s=Me();let{drawingMode:d}=r,{target:g}=r,{tool:x}=r,{transform:C}=r,{viewportScale:I}=r,H;return je(()=>{const W=g.closest("svg"),B=[],ne=(we,ge,de)=>{W==null||W.addEventListener(we,ge,de),B.push(()=>W==null?void 0:W.removeEventListener(we,ge,de))};return o(5,H=new x({target:g,props:{addEventListener:ne,drawingMode:d,transform:C,viewportScale:I}})),H.$on("create",we=>s("create",we.detail)),()=>{B.forEach(we=>we()),H.$destroy()}}),t.$$set=W=>{"drawingMode"in W&&o(0,d=W.drawingMode),"target"in W&&o(1,g=W.target),"tool"in W&&o(2,x=W.tool),"transform"in W&&o(3,C=W.transform),"viewportScale"in W&&o(4,I=W.viewportScale)},t.$$.update=()=>{t.$$.dirty&40&&H&&H.$set({transform:C}),t.$$.dirty&48&&H&&H.$set({viewportScale:I})},[d,g,x,C,I,H]}class Fr extends it{constructor(r){super(),Xe(this,r,Xo,null,U,{drawingMode:0,target:1,tool:2,transform:3,viewportScale:4})}}function Hr(t){let r,o,s,d,g,x,C,I,H,W;return{c(){r=R("defs"),o=R("mask"),s=R("rect"),I=R("rect"),H=R("rect"),W=R("rect"),b(s,"class","rect-mask-bg svelte-1a76qe7"),b(s,"x",d=t[1]-t[5]),b(s,"y",g=t[2]-t[5]),b(s,"width",x=t[3]+2*t[5]),b(s,"height",C=t[4]+2*t[5]),b(I,"class","rect-mask-fg svelte-1a76qe7"),b(I,"x",t[1]),b(I,"y",t[2]),b(I,"width",t[3]),b(I,"height",t[4]),b(o,"id",t[6]),b(o,"class","a9s-rubberband-rectangle-mask svelte-1a76qe7"),b(H,"class","a9s-outer"),b(H,"mask",`url(#${t[6]})`),b(H,"x",t[1]),b(H,"y",t[2]),b(H,"width",t[3]),b(H,"height",t[4]),b(W,"class","a9s-inner"),b(W,"x",t[1]),b(W,"y",t[2]),b(W,"width",t[3]),b(W,"height",t[4])},m(B,ne){X(B,r,ne),te(r,o),te(o,s),te(o,I),X(B,H,ne),X(B,W,ne)},p(B,ne){ne&34&&d!==(d=B[1]-B[5])&&b(s,"x",d),ne&36&&g!==(g=B[2]-B[5])&&b(s,"y",g),ne&40&&x!==(x=B[3]+2*B[5])&&b(s,"width",x),ne&48&&C!==(C=B[4]+2*B[5])&&b(s,"height",C),ne&2&&b(I,"x",B[1]),ne&4&&b(I,"y",B[2]),ne&8&&b(I,"width",B[3]),ne&16&&b(I,"height",B[4]),ne&2&&b(H,"x",B[1]),ne&4&&b(H,"y",B[2]),ne&8&&b(H,"width",B[3]),ne&16&&b(H,"height",B[4]),ne&2&&b(W,"x",B[1]),ne&4&&b(W,"y",B[2]),ne&8&&b(W,"width",B[3]),ne&16&&b(W,"height",B[4])},d(B){B&&(V(r),V(H),V(W))}}}function qo(t){let r,o=t[0]&&Hr(t);return{c(){r=R("g"),o&&o.c(),b(r,"class","a9s-annotation a9s-rubberband")},m(s,d){X(s,r,d),o&&o.m(r,null)},p(s,[d]){s[0]?o?o.p(s,d):(o=Hr(s),o.c(),o.m(r,null)):o&&(o.d(1),o=null)},i:c,o:c,d(s){s&&V(r),o&&o.d()}}}function Qo(t,r,o){let s;const d=Me();let{addEventListener:g}=r,{drawingMode:x}=r,{transform:C}=r,{viewportScale:I=1}=r,H,W,B,ne,we,ge,de;const ze=Ge=>{const tt=Ge;H=performance.now(),x==="drag"&&(o(0,W=C.elementToImage(tt.offsetX,tt.offsetY)),B=W,o(1,ne=W[0]),o(2,we=W[1]),o(3,ge=1),o(4,de=1))},Se=Ge=>{const tt=Ge;W&&(B=C.elementToImage(tt.offsetX,tt.offsetY),o(1,ne=Math.min(B[0],W[0])),o(2,we=Math.min(B[1],W[1])),o(3,ge=Math.abs(B[0]-W[0])),o(4,de=Math.abs(B[1]-W[1])))},Fe=Ge=>{const tt=Ge,Ye=performance.now()-H;if(x==="click"){if(Ye>300)return;W?ve():(o(0,W=C.elementToImage(tt.offsetX,tt.offsetY)),B=W,o(1,ne=W[0]),o(2,we=W[1]),o(3,ge=1),o(4,de=1))}else W&&(Ye>300||ge*de>100?(tt.stopPropagation(),ve()):(o(0,W=void 0),B=void 0))},ve=()=>{if(ge*de>15){const Ge={type:at.RECTANGLE,geometry:{bounds:{minX:ne,minY:we,maxX:ne+ge,maxY:we+de},x:ne,y:we,w:ge,h:de}};d("create",Ge)}o(0,W=void 0),B=void 0};je(()=>{g("pointerdown",ze),g("pointermove",Se),g("pointerup",Fe,!0)});const He=`rect-mask-${Math.random().toString(36).substring(2,12)}`;return t.$$set=Ge=>{"addEventListener"in Ge&&o(7,g=Ge.addEventListener),"drawingMode"in Ge&&o(8,x=Ge.drawingMode),"transform"in Ge&&o(9,C=Ge.transform),"viewportScale"in Ge&&o(10,I=Ge.viewportScale)},t.$$.update=()=>{t.$$.dirty&1024&&o(5,s=2/I)},[W,ne,we,ge,de,s,He,g,x,C,I]}class Rr extends it{constructor(r){super(),Xe(this,r,Qo,qo,U,{addEventListener:7,drawingMode:8,transform:9,viewportScale:10})}}function Xi(t){const r=t.slice(),o=r[2].map(s=>s.join(",")).join(" ");return r[19]=o,r}function Vr(t){let r,o,s,d,g,x,C,I,H,W,B,ne,we,ge,de=t[1]&&jr(t);return{c(){r=R("defs"),o=R("mask"),s=R("rect"),I=R("polygon"),W=R("polygon"),ne=R("polygon"),de&&de.c(),ge=Q(),b(s,"x",d=t[3].x),b(s,"y",g=t[3].y),b(s,"width",x=t[3].w),b(s,"height",C=t[3].h),b(s,"class","svelte-18wrg3t"),b(I,"points",H=t[19]),b(I,"class","svelte-18wrg3t"),b(o,"id",t[5]),b(o,"class","a9s-rubberband-polygon-mask svelte-18wrg3t"),b(W,"class","a9s-outer"),b(W,"mask",`url(#${t[5]})`),b(W,"points",B=t[19]),b(ne,"class","a9s-inner"),b(ne,"points",we=t[19])},m(ze,Se){X(ze,r,Se),te(r,o),te(o,s),te(o,I),X(ze,W,Se),X(ze,ne,Se),de&&de.m(ze,Se),X(ze,ge,Se)},p(ze,Se){Se&8&&d!==(d=ze[3].x)&&b(s,"x",d),Se&8&&g!==(g=ze[3].y)&&b(s,"y",g),Se&8&&x!==(x=ze[3].w)&&b(s,"width",x),Se&8&&C!==(C=ze[3].h)&&b(s,"height",C),Se&4&&H!==(H=ze[19])&&b(I,"points",H),Se&4&&B!==(B=ze[19])&&b(W,"points",B),Se&4&&we!==(we=ze[19])&&b(ne,"points",we),ze[1]?de?de.p(ze,Se):(de=jr(ze),de.c(),de.m(ge.parentNode,ge)):de&&(de.d(1),de=null)},d(ze){ze&&(V(r),V(W),V(ne),V(ge)),de&&de.d(ze)}}}function jr(t){let r,o,s;return{c(){r=R("circle"),b(r,"class","a9s-handle svelte-18wrg3t"),b(r,"cx",o=t[0][0][0]),b(r,"cy",s=t[0][0][1]),b(r,"r",t[4])},m(d,g){X(d,r,g)},p(d,g){g&1&&o!==(o=d[0][0][0])&&b(r,"cx",o),g&1&&s!==(s=d[0][0][1])&&b(r,"cy",s),g&16&&b(r,"r",d[4])},d(d){d&&V(r)}}}function Zo(t){let r,o=t[3]&&Vr(Xi(t));return{c(){r=R("g"),o&&o.c(),b(r,"class","a9s-annotation a9s-rubberband")},m(s,d){X(s,r,d),o&&o.m(r,null)},p(s,[d]){s[3]?o?o.p(Xi(s),d):(o=Vr(Xi(s)),o.c(),o.m(r,null)):o&&(o.d(1),o=null)},i:c,o:c,d(s){s&&V(r),o&&o.d()}}}const Ko=20,Jo=1500;function $o(t,r,o){let s,d,g;const x=Me();let{addEventListener:C}=r,{drawingMode:I}=r,{transform:H}=r,{viewportScale:W=1}=r,B,ne=[],we,ge,de=!1;const ze=tt=>{const Ye=tt,{timeStamp:gt,offsetX:ut,offsetY:Lt}=Ye;if(B={timeStamp:gt,offsetX:ut,offsetY:Lt},I==="drag"&&ne.length===0){const It=H.elementToImage(Ye.offsetX,Ye.offsetY);ne.push(It),o(10,we=It)}},Se=tt=>{const Ye=tt;if(ge&&clearTimeout(ge),ne.length>0){if(o(10,we=H.elementToImage(Ye.offsetX,Ye.offsetY)),ne.length>2){const gt=wn(we,ne[0])*W;o(1,de=gt<Ko)}Ye.pointerType==="touch"&&(ge=setTimeout(()=>{ve()},Jo))}},Fe=tt=>{const Ye=tt;if(ge&&clearTimeout(ge),I==="click"){const gt=Ye.timeStamp-B.timeStamp,ut=wn([B.offsetX,B.offsetY],[Ye.offsetX,Ye.offsetY]);if(gt>300||ut>15)return;if(de)He();else if(ne.length===0){const Lt=H.elementToImage(Ye.offsetX,Ye.offsetY);ne.push(Lt),o(10,we=Lt)}else ne.push(we)}else{if(ne.length===1&&wn(ne[0],we)<=4){o(0,ne=[]),o(10,we=void 0);return}Ye.stopImmediatePropagation(),de?He():ne.push(we)}},ve=()=>{if(!we)return;const tt=ne.slice(0,-1);if(tt.length<3)return;const Ye={type:at.POLYGON,geometry:{bounds:jt(ne),points:tt}};un(Ye)>4&&(o(0,ne=[]),o(10,we=void 0),x("create",Ye))},He=()=>{const tt={type:at.POLYGON,geometry:{bounds:jt(ne),points:[...ne]}};o(0,ne=[]),o(10,we=void 0),x("create",tt)};je(()=>{C("pointerdown",ze,!0),C("pointermove",Se),C("pointerup",Fe,!0),C("dblclick",ve,!0)});const Ge=`polygon-mask-${Math.random().toString(36).substring(2,12)}`;return t.$$set=tt=>{"addEventListener"in tt&&o(6,C=tt.addEventListener),"drawingMode"in tt&&o(7,I=tt.drawingMode),"transform"in tt&&o(8,H=tt.transform),"viewportScale"in tt&&o(9,W=tt.viewportScale)},t.$$.update=()=>{t.$$.dirty&512&&o(4,s=4/W),t.$$.dirty&1027&&o(2,d=we?de?ne:[...ne,we]:[]),t.$$.dirty&516&&o(3,g=d.length>0?ni(jt(d),2/W):void 0)},[ne,de,d,g,s,Ge,C,I,H,W,we]}class ea extends it{constructor(r){super(),Xe(this,r,$o,Zo,U,{addEventListener:6,drawingMode:7,transform:8,viewportScale:9})}}const qi=new Map([["rectangle",{tool:Rr}],["polygon",{tool:ea}]]),Qi=()=>[...qi.keys()],Zi=t=>qi.get(t),zr=(t,r,o={})=>qi.set(t,{tool:r,opts:o});function ta(t){let r,o,s,d,g;return{c(){r=R("g"),o=R("ellipse"),d=R("ellipse"),b(o,"class","a9s-outer"),b(o,"style",s=t[1]?"display:none;":void 0),b(o,"cx",t[2]),b(o,"cy",t[3]),b(o,"rx",t[4]),b(o,"ry",t[5]),b(d,"class","a9s-inner"),b(d,"style",t[1]),b(d,"cx",t[2]),b(d,"cy",t[3]),b(d,"rx",t[4]),b(d,"ry",t[5]),b(r,"class","a9s-annotation"),b(r,"data-id",g=t[0].id)},m(x,C){X(x,r,C),te(r,o),te(r,d)},p(x,[C]){C&2&&s!==(s=x[1]?"display:none;":void 0)&&b(o,"style",s),C&2&&b(d,"style",x[1]),C&1&&g!==(g=x[0].id)&&b(r,"data-id",g)},i:c,o:c,d(x){x&&V(r)}}}function na(t,r,o){let s,{annotation:d}=r,{geom:g}=r,{style:x}=r;const{cx:C,cy:I,rx:H,ry:W}=g;return t.$$set=B=>{"annotation"in B&&o(0,d=B.annotation),"geom"in B&&o(6,g=B.geom),"style"in B&&o(7,x=B.style)},t.$$.update=()=>{t.$$.dirty&129&&o(1,s=zn(d,x))},[d,s,C,I,H,W,g,x]}class ia extends it{constructor(r){super(),Xe(this,r,na,ta,U,{annotation:0,geom:6,style:7})}}function ra(t){let r,o,s,d,g;return{c(){r=R("g"),o=R("line"),d=R("line"),b(o,"class","a9s-outer"),b(o,"style",s=t[1]?"display:none;":void 0),b(o,"x1",t[2]),b(o,"y1",t[3]),b(o,"x2",t[4]),b(o,"y2",t[5]),b(d,"class","a9s-inner"),b(d,"style",t[1]),b(d,"x1",t[2]),b(d,"y1",t[3]),b(d,"x2",t[4]),b(d,"y2",t[5]),b(r,"class","a9s-annotation"),b(r,"data-id",g=t[0].id)},m(x,C){X(x,r,C),te(r,o),te(r,d)},p(x,[C]){C&2&&s!==(s=x[1]?"display:none;":void 0)&&b(o,"style",s),C&2&&b(d,"style",x[1]),C&1&&g!==(g=x[0].id)&&b(r,"data-id",g)},i:c,o:c,d(x){x&&V(r)}}}function oa(t,r,o){let s,{annotation:d}=r,{geom:g}=r,{style:x}=r;const{points:C}=g,[[I,H],[W,B]]=C;return t.$$set=ne=>{"annotation"in ne&&o(0,d=ne.annotation),"geom"in ne&&o(6,g=ne.geom),"style"in ne&&o(7,x=ne.style)},t.$$.update=()=>{t.$$.dirty&129&&o(1,s=zn(d,x))},[d,s,I,H,W,B,g,x]}class aa extends it{constructor(r){super(),Xe(this,r,oa,ra,U,{annotation:0,geom:6,style:7})}}function Ur(t,r,o){const s=t.slice();return s[5]=r[o],s}function Wr(t){let r,o,s;return{c(){r=R("path"),s=R("path"),b(r,"class","a9s-outer"),b(r,"style",o=t[1]?"display:none;":void 0),b(r,"fill-rule","evenodd"),b(r,"d",fn(t[5])),b(s,"class","a9s-inner"),b(s,"style",t[1]),b(s,"fill-rule","evenodd"),b(s,"d",fn(t[5]))},m(d,g){X(d,r,g),X(d,s,g)},p(d,g){g&2&&o!==(o=d[1]?"display:none;":void 0)&&b(r,"style",o),g&2&&b(s,"style",d[1])},d(d){d&&(V(r),V(s))}}}function sa(t){let r,o,s=qt(t[2]),d=[];for(let g=0;g<s.length;g+=1)d[g]=Wr(Ur(t,s,g));return{c(){r=R("g");for(let g=0;g<d.length;g+=1)d[g].c();b(r,"class","a9s-annotation"),b(r,"data-id",o=t[0].id)},m(g,x){X(g,r,x);for(let C=0;C<d.length;C+=1)d[C]&&d[C].m(r,null)},p(g,[x]){if(x&6){s=qt(g[2]);let C;for(C=0;C<s.length;C+=1){const I=Ur(g,s,C);d[C]?d[C].p(I,x):(d[C]=Wr(I),d[C].c(),d[C].m(r,null))}for(;C<d.length;C+=1)d[C].d(1);d.length=s.length}x&1&&o!==(o=g[0].id)&&b(r,"data-id",o)},i:c,o:c,d(g){g&&V(r),ie(d,g)}}}function la(t,r,o){let s,{annotation:d}=r,{geom:g}=r,{style:x}=r;const{polygons:C}=g;return t.$$set=I=>{"annotation"in I&&o(0,d=I.annotation),"geom"in I&&o(3,g=I.geom),"style"in I&&o(4,x=I.style)},t.$$.update=()=>{t.$$.dirty&17&&o(1,s=zn(d,x))},[d,s,C,g,x]}class ca extends it{constructor(r){super(),Xe(this,r,la,sa,U,{annotation:0,geom:3,style:4})}}function ua(t){let r,o,s,d,g;return{c(){r=R("g"),o=R("polygon"),d=R("polygon"),b(o,"class","a9s-outer"),b(o,"style",s=t[1]?"display:none;":void 0),b(o,"points",t[2].map(da).join(" ")),b(d,"class","a9s-inner"),b(d,"style",t[1]),b(d,"points",t[2].map(fa).join(" ")),b(r,"class","a9s-annotation"),b(r,"data-id",g=t[0].id)},m(x,C){X(x,r,C),te(r,o),te(r,d)},p(x,[C]){C&2&&s!==(s=x[1]?"display:none;":void 0)&&b(o,"style",s),C&2&&b(d,"style",x[1]),C&1&&g!==(g=x[0].id)&&b(r,"data-id",g)},i:c,o:c,d(x){x&&V(r)}}}const da=t=>t.join(","),fa=t=>t.join(",");function pa(t,r,o){let s,{annotation:d}=r,{geom:g}=r,{style:x}=r;const{points:C}=g;return t.$$set=I=>{"annotation"in I&&o(0,d=I.annotation),"geom"in I&&o(3,g=I.geom),"style"in I&&o(4,x=I.style)},t.$$.update=()=>{t.$$.dirty&17&&o(1,s=zn(d,x))},[d,s,C,g,x]}class ha extends it{constructor(r){super(),Xe(this,r,pa,ua,U,{annotation:0,geom:3,style:4})}}function ga(t){let r,o,s,d,g,x,C;return{c(){r=R("g"),o=R("path"),g=R("path"),b(o,"class",s=K(`a9s-outer ${t[1]}`)+" svelte-1w0132l"),b(o,"style",d=t[3]?"display:none;":void 0),b(o,"d",t[2]),b(g,"class",x=K(`a9s-inner ${t[1]}`)+" svelte-1w0132l"),b(g,"style",t[3]),b(g,"d",t[2]),b(r,"class","a9s-annotation"),b(r,"data-id",C=t[0].id)},m(I,H){X(I,r,H),te(r,o),te(r,g)},p(I,[H]){H&2&&s!==(s=K(`a9s-outer ${I[1]}`)+" svelte-1w0132l")&&b(o,"class",s),H&8&&d!==(d=I[3]?"display:none;":void 0)&&b(o,"style",d),H&4&&b(o,"d",I[2]),H&2&&x!==(x=K(`a9s-inner ${I[1]}`)+" svelte-1w0132l")&&b(g,"class",x),H&8&&b(g,"style",I[3]),H&4&&b(g,"d",I[2]),H&1&&C!==(C=I[0].id)&&b(r,"data-id",C)},i:c,o:c,d(I){I&&V(r)}}}function ma(t,r,o){let s,d,g,{annotation:x}=r,{geom:C}=r,{style:I}=r;return t.$$set=H=>{"annotation"in H&&o(0,x=H.annotation),"geom"in H&&o(4,C=H.geom),"style"in H&&o(5,I=H.style)},t.$$.update=()=>{t.$$.dirty&33&&o(3,s=zn(x,I)),t.$$.dirty&16&&o(2,d=Gn(C)),t.$$.dirty&16&&o(1,g=C.closed?"closed":"open")},[x,g,d,s,C,I]}class va extends it{constructor(r){super(),Xe(this,r,ma,ga,U,{annotation:0,geom:4,style:5})}}function ya(t){let r,o,s,d,g;return{c(){r=R("g"),o=R("rect"),d=R("rect"),b(o,"class","a9s-outer"),b(o,"style",s=t[5]?"display:none;":void 0),b(o,"x",t[4]),b(o,"y",t[3]),b(o,"width",t[2]),b(o,"height",t[1]),b(d,"class","a9s-inner"),b(d,"style",t[5]),b(d,"x",t[4]),b(d,"y",t[3]),b(d,"width",t[2]),b(d,"height",t[1]),b(r,"class","a9s-annotation"),b(r,"data-id",g=t[0].id)},m(x,C){X(x,r,C),te(r,o),te(r,d)},p(x,[C]){C&32&&s!==(s=x[5]?"display:none;":void 0)&&b(o,"style",s),C&16&&b(o,"x",x[4]),C&8&&b(o,"y",x[3]),C&4&&b(o,"width",x[2]),C&2&&b(o,"height",x[1]),C&32&&b(d,"style",x[5]),C&16&&b(d,"x",x[4]),C&8&&b(d,"y",x[3]),C&4&&b(d,"width",x[2]),C&2&&b(d,"height",x[1]),C&1&&g!==(g=x[0].id)&&b(r,"data-id",g)},i:c,o:c,d(x){x&&V(r)}}}function ba(t,r,o){let s,d,g,x,C,{annotation:I}=r,{geom:H}=r,{style:W}=r;return t.$$set=B=>{"annotation"in B&&o(0,I=B.annotation),"geom"in B&&o(6,H=B.geom),"style"in B&&o(7,W=B.style)},t.$$.update=()=>{t.$$.dirty&129&&o(5,s=zn(I,W)),t.$$.dirty&64&&o(4,{x:d,y:g,w:x,h:C}=H,d,(o(3,g),o(6,H)),(o(2,x),o(6,H)),(o(1,C),o(6,H)))},[I,C,x,g,d,s,H,W]}class wa extends it{constructor(r){super(),Xe(this,r,ba,ya,U,{annotation:0,geom:6,style:7})}}const _a={elementToImage:(t,r)=>[t,r]},Br=t=>({elementToImage:(r,o)=>{const s=t.getBoundingClientRect(),d=t.createSVGPoint();d.x=r+s.x,d.y=o+s.y;const{x:g,y:x}=d.matrixTransform(t.getScreenCTM().inverse());return[g,x]}}),Ea=250,Gr=(t,r)=>{const o=Me();let s;return{onPointerDown:()=>s=performance.now(),onPointerUp:d=>{if(performance.now()-s<Ea){const{x:g,y:x}=Ki(d,t),C=yn?10:2,I=r.getAt(g,x,void 0,C);I?o("click",{originalEvent:d,annotation:I}):o("click",{originalEvent:d})}}}},Ki=(t,r)=>{const o=r.createSVGPoint(),s=r.getBoundingClientRect(),d=t.clientX-s.x,g=t.clientY-s.y,{left:x,top:C}=r.getBoundingClientRect();return o.x=d+x,o.y=g+C,o.matrixTransform(r.getScreenCTM().inverse())};function Yr(t,r,o){const s=t.slice();return s[39]=r[o],s}function Mr(t,r,o){const s=t.slice();return s[42]=r[o],s}function Ji(t){const r=t.slice(),o=r[42].target.selector;return r[45]=o,r}function Xr(t){let r=t[42],o,s,d=qr(t);return{c(){d.c(),o=Q()},m(g,x){d.m(g,x),X(g,o,x),s=!0},p(g,x){x[0]&131072&&U(r,r=g[42])?(Vt(),pt(d,1,1,c),Qt(),d=qr(g),d.c(),st(d,1),d.m(o.parentNode,o)):d.p(g,x)},i(g){s||(st(d),s=!0)},o(g){pt(d),s=!1},d(g){g&&V(o),d.d(g)}}}function xa(t){let r,o;return r=new aa({props:{annotation:t[42],geom:t[45].geometry,style:t[1]}}),{c(){Mt(r.$$.fragment)},m(s,d){ue(r,s,d),o=!0},p(s,d){const g={};d[0]&131072&&(g.annotation=s[42]),d[0]&131072&&(g.geom=s[45].geometry),d[0]&2&&(g.style=s[1]),r.$set(g)},i(s){o||(st(r.$$.fragment,s),o=!0)},o(s){pt(r.$$.fragment,s),o=!1},d(s){se(r,s)}}}function Ca(t){let r,o;return r=new va({props:{annotation:t[42],geom:t[45].geometry,style:t[1]}}),{c(){Mt(r.$$.fragment)},m(s,d){ue(r,s,d),o=!0},p(s,d){const g={};d[0]&131072&&(g.annotation=s[42]),d[0]&131072&&(g.geom=s[45].geometry),d[0]&2&&(g.style=s[1]),r.$set(g)},i(s){o||(st(r.$$.fragment,s),o=!0)},o(s){pt(r.$$.fragment,s),o=!1},d(s){se(r,s)}}}function Ta(t){let r,o;return r=new ca({props:{annotation:t[42],geom:t[45].geometry,style:t[1]}}),{c(){Mt(r.$$.fragment)},m(s,d){ue(r,s,d),o=!0},p(s,d){const g={};d[0]&131072&&(g.annotation=s[42]),d[0]&131072&&(g.geom=s[45].geometry),d[0]&2&&(g.style=s[1]),r.$set(g)},i(s){o||(st(r.$$.fragment,s),o=!0)},o(s){pt(r.$$.fragment,s),o=!1},d(s){se(r,s)}}}function Sa(t){let r,o;return r=new ha({props:{annotation:t[42],geom:t[45].geometry,style:t[1]}}),{c(){Mt(r.$$.fragment)},m(s,d){ue(r,s,d),o=!0},p(s,d){const g={};d[0]&131072&&(g.annotation=s[42]),d[0]&131072&&(g.geom=s[45].geometry),d[0]&2&&(g.style=s[1]),r.$set(g)},i(s){o||(st(r.$$.fragment,s),o=!0)},o(s){pt(r.$$.fragment,s),o=!1},d(s){se(r,s)}}}function Aa(t){let r,o;return r=new wa({props:{annotation:t[42],geom:t[45].geometry,style:t[1]}}),{c(){Mt(r.$$.fragment)},m(s,d){ue(r,s,d),o=!0},p(s,d){const g={};d[0]&131072&&(g.annotation=s[42]),d[0]&131072&&(g.geom=s[45].geometry),d[0]&2&&(g.style=s[1]),r.$set(g)},i(s){o||(st(r.$$.fragment,s),o=!0)},o(s){pt(r.$$.fragment,s),o=!1},d(s){se(r,s)}}}function ka(t){var r;let o,s;return o=new ia({props:{annotation:t[42],geom:(r=t[45])==null?void 0:r.geometry,style:t[1]}}),{c(){Mt(o.$$.fragment)},m(d,g){ue(o,d,g),s=!0},p(d,g){var x;const C={};g[0]&131072&&(C.annotation=d[42]),g[0]&131072&&(C.geom=(x=d[45])==null?void 0:x.geometry),g[0]&2&&(C.style=d[1]),o.$set(C)},i(d){s||(st(o.$$.fragment,d),s=!0)},o(d){pt(o.$$.fragment,d),s=!1},d(d){se(o,d)}}}function qr(t){let r,o,s,d;const g=[ka,Aa,Sa,Ta,Ca,xa],x=[];function C(I,H){var W,B,ne,we,ge,de;return((W=I[45])==null?void 0:W.type)===at.ELLIPSE?0:((B=I[45])==null?void 0:B.type)===at.RECTANGLE?1:((ne=I[45])==null?void 0:ne.type)===at.POLYGON?2:((we=I[45])==null?void 0:we.type)===at.MULTIPOLYGON?3:((ge=I[45])==null?void 0:ge.type)===at.POLYLINE?4:((de=I[45])==null?void 0:de.type)===at.LINE?5:-1}return~(r=C(t))&&(o=x[r]=g[r](t)),{c(){o&&o.c(),s=Q()},m(I,H){~r&&x[r].m(I,H),X(I,s,H),d=!0},p(I,H){let W=r;r=C(I),r===W?~r&&x[r].p(I,H):(o&&(Vt(),pt(x[W],1,1,()=>{x[W]=null}),Qt()),~r?(o=x[r],o?o.p(I,H):(o=x[r]=g[r](I),o.c()),st(o,1),o.m(s.parentNode,s)):o=null)},i(I){d||(st(o),d=!0)},o(I){pt(o),d=!1},d(I){I&&V(s),~r&&x[r].d(I)}}}function Qr(t){let r=Nn(t[42])&&!t[10](t[42]),o,s,d=r&&Xr(Ji(t));return{c(){d&&d.c(),o=Q()},m(g,x){d&&d.m(g,x),X(g,o,x),s=!0},p(g,x){x[0]&132096&&(r=Nn(g[42])&&!g[10](g[42])),r?d?(d.p(Ji(g),x),x[0]&132096&&st(d,1)):(d=Xr(Ji(g)),d.c(),st(d,1),d.m(o.parentNode,o)):d&&(Vt(),pt(d,1,1,()=>{d=null}),Qt())},i(g){s||(st(d),s=!0)},o(g){pt(d),s=!1},d(g){g&&V(o),d&&d.d(g)}}}function Zr(t){let r,o,s,d;const g=[Pa,Ia],x=[];function C(I,H){return I[6]?0:I[15]&&I[0]?1:-1}return~(r=C(t))&&(o=x[r]=g[r](t)),{c(){o&&o.c(),s=Q()},m(I,H){~r&&x[r].m(I,H),X(I,s,H),d=!0},p(I,H){let W=r;r=C(I),r===W?~r&&x[r].p(I,H):(o&&(Vt(),pt(x[W],1,1,()=>{x[W]=null}),Qt()),~r?(o=x[r],o?o.p(I,H):(o=x[r]=g[r](I),o.c()),st(o,1),o.m(s.parentNode,s)):o=null)},i(I){d||(st(o),d=!0)},o(I){pt(o),d=!1},d(I){I&&V(s),~r&&x[r].d(I)}}}function Ia(t){let r=`${t[2]}-${t[7]}`,o,s,d=Kr(t);return{c(){d.c(),o=Q()},m(g,x){d.m(g,x),X(g,o,x),s=!0},p(g,x){x[0]&132&&U(r,r=`${g[2]}-${g[7]}`)?(Vt(),pt(d,1,1,c),Qt(),d=Kr(g),d.c(),st(d,1),d.m(o.parentNode,o)):d.p(g,x)},i(g){s||(st(d),s=!0)},o(g){pt(d),s=!1},d(g){g&&V(o),d.d(g)}}}function Pa(t){let r,o,s=qt(t[6]),d=[];for(let x=0;x<s.length;x+=1)d[x]=$r(Yr(t,s,x));const g=x=>pt(d[x],1,1,()=>{d[x]=null});return{c(){for(let x=0;x<d.length;x+=1)d[x].c();r=Q()},m(x,C){for(let I=0;I<d.length;I+=1)d[I]&&d[I].m(x,C);X(x,r,C),o=!0},p(x,C){if(C[0]&8659266){s=qt(x[6]);let I;for(I=0;I<s.length;I+=1){const H=Yr(x,s,I);d[I]?(d[I].p(H,C),st(d[I],1)):(d[I]=$r(H),d[I].c(),st(d[I],1),d[I].m(r.parentNode,r))}for(Vt(),I=s.length;I<d.length;I+=1)g(I);Qt()}},i(x){if(!o){for(let C=0;C<s.length;C+=1)st(d[C]);o=!0}},o(x){d=d.filter(Boolean);for(let C=0;C<d.length;C+=1)pt(d[C]);o=!1},d(x){x&&V(r),ie(d,x)}}}function Kr(t){let r,o;return r=new Fr({props:{target:t[8],tool:t[15],drawingMode:t[14],transform:t[13],viewportScale:t[18]}}),r.$on("create",t[22]),{c(){Mt(r.$$.fragment)},m(s,d){ue(r,s,d),o=!0},p(s,d){const g={};d[0]&256&&(g.target=s[8]),d[0]&32768&&(g.tool=s[15]),d[0]&16384&&(g.drawingMode=s[14]),d[0]&8192&&(g.transform=s[13]),d[0]&262144&&(g.viewportScale=s[18]),r.$set(g)},i(s){o||(st(r.$$.fragment,s),o=!0)},o(s){pt(r.$$.fragment,s),o=!1},d(s){se(r,s)}}}function Jr(t){let r,o;return r=new Nr({props:{target:t[8],editor:t[39].editor,annotation:t[39].annotation,style:t[1],transform:t[13],viewportScale:t[18]}}),r.$on("change",function(){D(t[23](t[39].annotation))&&t[23](t[39].annotation).apply(this,arguments)}),{c(){Mt(r.$$.fragment)},m(s,d){ue(r,s,d),o=!0},p(s,d){t=s;const g={};d[0]&256&&(g.target=t[8]),d[0]&64&&(g.editor=t[39].editor),d[0]&64&&(g.annotation=t[39].annotation),d[0]&2&&(g.style=t[1]),d[0]&8192&&(g.transform=t[13]),d[0]&262144&&(g.viewportScale=t[18]),r.$set(g)},i(s){o||(st(r.$$.fragment,s),o=!0)},o(s){pt(r.$$.fragment,s),o=!1},d(s){se(r,s)}}}function $r(t){let r=t[39].annotation.id,o,s,d=Jr(t);return{c(){d.c(),o=Q()},m(g,x){d.m(g,x),X(g,o,x),s=!0},p(g,x){x[0]&64&&U(r,r=g[39].annotation.id)?(Vt(),pt(d,1,1,c),Qt(),d=Jr(g),d.c(),st(d,1),d.m(o.parentNode,o)):d.p(g,x)},i(g){s||(st(d),s=!0)},o(g){pt(d),s=!1},d(g){g&&V(o),d.d(g)}}}function Da(t){let r,o,s,d,g,x,C=qt(t[17].filter(t[34])),I=[];for(let B=0;B<C.length;B+=1)I[B]=Qr(Mr(t,C,B));const H=B=>pt(I[B],1,1,()=>{I[B]=null});let W=t[8]&&Zr(t);return{c(){r=R("svg"),o=R("g");for(let B=0;B<I.length;B+=1)I[B].c();s=R("g"),W&&W.c(),b(s,"class","drawing"),b(r,"role","application"),b(r,"tabindex",0),b(r,"class","a9s-annotationlayer"),ce(r,"drawing",t[15]),ce(r,"editing",t[5]),ce(r,"hidden",!t[3]),ce(r,"hover",t[16])},m(B,ne){X(B,r,ne),te(r,o);for(let we=0;we<I.length;we+=1)I[we]&&I[we].m(o,null);te(r,s),W&&W.m(s,null),t[35](s),t[36](r),d=!0,g||(x=[oe(r,"pointerup",function(){D(t[11])&&t[11].apply(this,arguments)}),oe(r,"pointerdown",function(){D(t[12])&&t[12].apply(this,arguments)}),oe(r,"pointermove",t[24])],g=!0)},p(B,ne){if(t=B,ne[0]&132098){C=qt(t[17].filter(t[34]));let we;for(we=0;we<C.length;we+=1){const ge=Mr(t,C,we);I[we]?(I[we].p(ge,ne),st(I[we],1)):(I[we]=Qr(ge),I[we].c(),st(I[we],1),I[we].m(o,null))}for(Vt(),we=C.length;we<I.length;we+=1)H(we);Qt()}t[8]?W?(W.p(t,ne),ne[0]&256&&st(W,1)):(W=Zr(t),W.c(),st(W,1),W.m(s,null)):W&&(Vt(),pt(W,1,1,()=>{W=null}),Qt()),(!d||ne[0]&32768)&&ce(r,"drawing",t[15]),(!d||ne[0]&32)&&ce(r,"editing",t[5]),(!d||ne[0]&8)&&ce(r,"hidden",!t[3]),(!d||ne[0]&65536)&&ce(r,"hover",t[16])},i(B){if(!d){for(let ne=0;ne<C.length;ne+=1)st(I[ne]);st(W),d=!0}},o(B){I=I.filter(Boolean);for(let ne=0;ne<I.length;ne+=1)pt(I[ne]);pt(W),d=!1},d(B){B&&V(r),ie(I,B),W&&W.d(),t[35](null),t[36](null),g=!1,A(x)}}}function Oa(t,r,o){let s,d,g,x,C,I,H,W,B,ne,we,ge,de=c,ze=()=>(de(),de=_(Te,yt=>o(18,ge=yt)),Te);t.$$.on_destroy.push(()=>de());let{drawingEnabled:Se}=r,{image:Fe}=r,{preferredDrawingMode:ve}=r,{state:He}=r,{style:Ge=void 0}=r,{toolName:tt=Qi()[0]}=r,{user:Ye}=r,{visible:gt=!0}=r,ut=0;const Lt=()=>o(7,ut+=1),It=()=>tt,Ee=()=>Se;let Ie,he,Te;je(()=>ze(o(9,Te=lr(Fe,he))));const{hover:Qe,selection:qe,store:nt}=He;O(t,Qe,yt=>o(16,B=yt)),O(t,qe,yt=>o(33,ne=yt)),O(t,nt,yt=>o(17,we=yt));let At,wt;const St=yt=>{At&&nt.unobserve(At);const an=yt.filter(({editable:Ut})=>Ut).map(({id:Ut})=>Ut);an.length>0?(o(5,wt=an.map(Ut=>nt.getAnnotation(Ut)).filter(Ut=>Ut&&Nn(Ut))),At=Ut=>{const{updated:sn}=Ut.changes;o(5,wt=sn==null?void 0:sn.map(gn=>gn.newValue))},nt.observe(At,{annotations:an})):o(5,wt=void 0)},Pt=yt=>{const an=Rn(),Ut={id:an,bodies:[],target:{annotation:an,selector:yt.detail,creator:Ye,created:new Date}};nt.addAnnotation(Ut),qe.setSelected(Ut.id)},$t=yt=>an=>{var Ut;const{target:sn}=yt,gn=600*1e3,Wn=((Ut=sn.creator)==null?void 0:Ut.id)!==Ye.id||!sn.created||new Date().getTime()-sn.created.getTime()>gn;nt.updateTarget({...sn,selector:an.detail,created:Wn?sn.created:new Date,updated:Wn?new Date:void 0,updatedBy:Wn?Ye:void 0})},ln=yt=>{const{x:an,y:Ut}=Ki(yt,he),sn=nt.getAt(an,Ut,void 0,2);sn?B!==sn.id&&Qe.set(sn.id):Qe.set(void 0)},Zt=yt=>Nn(yt);function bn(yt){Ue[yt?"unshift":"push"](()=>{Ie=yt,o(8,Ie)})}function In(yt){Ue[yt?"unshift":"push"](()=>{he=yt,o(4,he)})}return t.$$set=yt=>{"drawingEnabled"in yt&&o(0,Se=yt.drawingEnabled),"image"in yt&&o(25,Fe=yt.image),"preferredDrawingMode"in yt&&o(26,ve=yt.preferredDrawingMode),"state"in yt&&o(27,He=yt.state),"style"in yt&&o(1,Ge=yt.style),"toolName"in yt&&o(2,tt=yt.toolName),"user"in yt&&o(28,Ye=yt.user),"visible"in yt&&o(3,gt=yt.visible)},t.$$.update=()=>{t.$$.dirty[0]&4&&o(15,{tool:s,opts:d}=Zi(tt)||{tool:void 0,opts:void 0},s,(o(32,d),o(2,tt))),t.$$.dirty[0]&67108864|t.$$.dirty[1]&2&&o(14,g=(d==null?void 0:d.drawingMode)||ve),t.$$.dirty[0]&16&&o(13,x=Br(he)),t.$$.dirty[0]&16&&o(12,{onPointerDown:C,onPointerUp:I}=Gr(he,nt),C,(o(11,I),o(4,he))),t.$$.dirty[1]&4&&St(ne.selected),t.$$.dirty[0]&32&&o(6,H=wt?wt.map(yt=>({annotation:yt,editor:Or(yt.target.selector)})).filter(yt=>yt.editor):void 0),t.$$.dirty[0]&64&&o(10,W=yt=>H&&H.some(an=>an.annotation.id===yt.id))},[Se,Ge,tt,gt,he,wt,H,ut,Ie,Te,W,I,C,x,g,s,B,we,ge,Qe,qe,nt,Pt,$t,ln,Fe,ve,He,Ye,Lt,It,Ee,d,ne,Zt,bn,In]}class eo extends it{constructor(r){super(),Xe(this,r,Oa,Da,U,{drawingEnabled:0,image:25,preferredDrawingMode:26,state:27,style:1,toolName:2,user:28,visible:3,cancelDrawing:29,getDrawingTool:30,isDrawingEnabled:31},null,[-1,-1])}get cancelDrawing(){return this.$$.ctx[29]}get getDrawingTool(){return this.$$.ctx[30]}get isDrawingEnabled(){return this.$$.ctx[31]}}function to(t,r,o=0,s=t.length-1,d=La){for(;s>o;){if(s-o>600){const I=s-o+1,H=r-o+1,W=Math.log(I),B=.5*Math.exp(2*W/3),ne=.5*Math.sqrt(W*B*(I-B)/I)*(H-I/2<0?-1:1),we=Math.max(o,Math.floor(r-H*B/I+ne)),ge=Math.min(s,Math.floor(r+(I-H)*B/I+ne));to(t,r,we,ge,d)}const g=t[r];let x=o,C=s;for(oi(t,o,r),d(t[s],g)>0&&oi(t,o,s);x<C;){for(oi(t,x,C),x++,C--;d(t[x],g)<0;)x++;for(;d(t[C],g)>0;)C--}d(t[o],g)===0?oi(t,o,C):(C++,oi(t,C,s)),C<=r&&(o=C+1),r<=C&&(s=C-1)}}function oi(t,r,o){const s=t[r];t[r]=t[o],t[o]=s}function La(t,r){return t<r?-1:t>r?1:0}class Na{constructor(r=9){this._maxEntries=Math.max(4,r),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(r){let o=this.data;const s=[];if(!Ci(r,o))return s;const d=this.toBBox,g=[];for(;o;){for(let x=0;x<o.children.length;x++){const C=o.children[x],I=o.leaf?d(C):C;Ci(r,I)&&(o.leaf?s.push(C):er(r,I)?this._all(C,s):g.push(C))}o=g.pop()}return s}collides(r){let o=this.data;if(!Ci(r,o))return!1;const s=[];for(;o;){for(let d=0;d<o.children.length;d++){const g=o.children[d],x=o.leaf?this.toBBox(g):g;if(Ci(r,x)){if(o.leaf||er(r,x))return!0;s.push(g)}}o=s.pop()}return!1}load(r){if(!(r&&r.length))return this;if(r.length<this._minEntries){for(let s=0;s<r.length;s++)this.insert(r[s]);return this}let o=this._build(r.slice(),0,r.length-1,0);if(!this.data.children.length)this.data=o;else if(this.data.height===o.height)this._splitRoot(this.data,o);else{if(this.data.height<o.height){const s=this.data;this.data=o,o=s}this._insert(o,this.data.height-o.height-1,!0)}return this}insert(r){return r&&this._insert(r,this.data.height-1),this}clear(){return this.data=Zn([]),this}remove(r,o){if(!r)return this;let s=this.data;const d=this.toBBox(r),g=[],x=[];let C,I,H;for(;s||g.length;){if(s||(s=g.pop(),I=g[g.length-1],C=x.pop(),H=!0),s.leaf){const W=Fa(r,s.children,o);if(W!==-1)return s.children.splice(W,1),g.push(s),this._condense(g),this}!H&&!s.leaf&&er(s,d)?(g.push(s),x.push(C),C=0,I=s,s=s.children[0]):I?(C++,s=I.children[C],H=!1):s=null}return this}toBBox(r){return r}compareMinX(r,o){return r.minX-o.minX}compareMinY(r,o){return r.minY-o.minY}toJSON(){return this.data}fromJSON(r){return this.data=r,this}_all(r,o){const s=[];for(;r;)r.leaf?o.push(...r.children):s.push(...r.children),r=s.pop();return o}_build(r,o,s,d){const g=s-o+1;let x=this._maxEntries,C;if(g<=x)return C=Zn(r.slice(o,s+1)),Qn(C,this.toBBox),C;d||(d=Math.ceil(Math.log(g)/Math.log(x)),x=Math.ceil(g/Math.pow(x,d-1))),C=Zn([]),C.leaf=!1,C.height=d;const I=Math.ceil(g/x),H=I*Math.ceil(Math.sqrt(x));no(r,o,s,H,this.compareMinX);for(let W=o;W<=s;W+=H){const B=Math.min(W+H-1,s);no(r,W,B,I,this.compareMinY);for(let ne=W;ne<=B;ne+=I){const we=Math.min(ne+I-1,B);C.children.push(this._build(r,ne,we,d-1))}}return Qn(C,this.toBBox),C}_chooseSubtree(r,o,s,d){for(;d.push(o),!(o.leaf||d.length-1===s);){let g=1/0,x=1/0,C;for(let I=0;I<o.children.length;I++){const H=o.children[I],W=$i(H),B=Va(r,H)-W;B<x?(x=B,g=W<g?W:g,C=H):B===x&&W<g&&(g=W,C=H)}o=C||o.children[0]}return o}_insert(r,o,s){const d=s?r:this.toBBox(r),g=[],x=this._chooseSubtree(d,this.data,o,g);for(x.children.push(r),si(x,d);o>=0&&g[o].children.length>this._maxEntries;)this._split(g,o),o--;this._adjustParentBBoxes(d,g,o)}_split(r,o){const s=r[o],d=s.children.length,g=this._minEntries;this._chooseSplitAxis(s,g,d);const x=this._chooseSplitIndex(s,g,d),C=Zn(s.children.splice(x,s.children.length-x));C.height=s.height,C.leaf=s.leaf,Qn(s,this.toBBox),Qn(C,this.toBBox),o?r[o-1].children.push(C):this._splitRoot(s,C)}_splitRoot(r,o){this.data=Zn([r,o]),this.data.height=r.height+1,this.data.leaf=!1,Qn(this.data,this.toBBox)}_chooseSplitIndex(r,o,s){let d,g=1/0,x=1/0;for(let C=o;C<=s-o;C++){const I=ai(r,0,C,this.toBBox),H=ai(r,C,s,this.toBBox),W=ja(I,H),B=$i(I)+$i(H);W<g?(g=W,d=C,x=B<x?B:x):W===g&&B<x&&(x=B,d=C)}return d||s-o}_chooseSplitAxis(r,o,s){const d=r.leaf?this.compareMinX:Ha,g=r.leaf?this.compareMinY:Ra,x=this._allDistMargin(r,o,s,d),C=this._allDistMargin(r,o,s,g);x<C&&r.children.sort(d)}_allDistMargin(r,o,s,d){r.children.sort(d);const g=this.toBBox,x=ai(r,0,o,g),C=ai(r,s-o,s,g);let I=xi(x)+xi(C);for(let H=o;H<s-o;H++){const W=r.children[H];si(x,r.leaf?g(W):W),I+=xi(x)}for(let H=s-o-1;H>=o;H--){const W=r.children[H];si(C,r.leaf?g(W):W),I+=xi(C)}return I}_adjustParentBBoxes(r,o,s){for(let d=s;d>=0;d--)si(o[d],r)}_condense(r){for(let o=r.length-1,s;o>=0;o--)r[o].children.length===0?o>0?(s=r[o-1].children,s.splice(s.indexOf(r[o]),1)):this.clear():Qn(r[o],this.toBBox)}}function Fa(t,r,o){if(!o)return r.indexOf(t);for(let s=0;s<r.length;s++)if(o(t,r[s]))return s;return-1}function Qn(t,r){ai(t,0,t.children.length,r,t)}function ai(t,r,o,s,d){d||(d=Zn(null)),d.minX=1/0,d.minY=1/0,d.maxX=-1/0,d.maxY=-1/0;for(let g=r;g<o;g++){const x=t.children[g];si(d,t.leaf?s(x):x)}return d}function si(t,r){return t.minX=Math.min(t.minX,r.minX),t.minY=Math.min(t.minY,r.minY),t.maxX=Math.max(t.maxX,r.maxX),t.maxY=Math.max(t.maxY,r.maxY),t}function Ha(t,r){return t.minX-r.minX}function Ra(t,r){return t.minY-r.minY}function $i(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function xi(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Va(t,r){return(Math.max(r.maxX,t.maxX)-Math.min(r.minX,t.minX))*(Math.max(r.maxY,t.maxY)-Math.min(r.minY,t.minY))}function ja(t,r){const o=Math.max(t.minX,r.minX),s=Math.max(t.minY,r.minY),d=Math.min(t.maxX,r.maxX),g=Math.min(t.maxY,r.maxY);return Math.max(0,d-o)*Math.max(0,g-s)}function er(t,r){return t.minX<=r.minX&&t.minY<=r.minY&&r.maxX<=t.maxX&&r.maxY<=t.maxY}function Ci(t,r){return r.minX<=t.maxX&&r.minY<=t.maxY&&r.maxX>=t.minX&&r.maxY>=t.minY}function Zn(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function no(t,r,o,s,d){const g=[r,o];for(;g.length;){if(o=g.pop(),r=g.pop(),o-r<=s)continue;const x=r+Math.ceil((o-r)/s/2)*s;to(t,x,r,o,d),g.push(r,x,x,o)}}const za=()=>{const t=new Na,r=new Map,o=()=>[...r.values()],s=()=>{t.clear(),r.clear()},d=x=>{if(!Fn(x))return;const{minX:C,minY:I,maxX:H,maxY:W}=x.selector.geometry.bounds,B={minX:C,minY:I,maxX:H,maxY:W,target:x};t.insert(B),r.set(x.annotation,B)},g=x=>{if(!Fn(x))return;const C=r.get(x.annotation);C&&t.remove(C),r.delete(x.annotation)};return{all:o,clear:s,getAt:(x,C,I=0)=>{const H=t.search({minX:x-I,minY:C-I,maxX:x+I,maxY:C+I}).map(W=>W.target).filter(W=>W.selector.type===at.RECTANGLE||mn(W.selector,x,C,I));return H.length>0?(H.sort((W,B)=>un(W.selector)-un(B.selector)),H):[]},getIntersecting:(x,C,I,H)=>t.search({minX:x,minY:C,maxX:x+I,maxY:C+H}).map(W=>W.target),insert:d,remove:g,set:(x,C=!0)=>{C&&s();const I=x.reduce((H,W)=>{if(Fn(W)){const{minX:B,minY:ne,maxX:we,maxY:ge}=W.selector.geometry.bounds;return[...H,{minX:B,minY:ne,maxX:we,maxY:ge,target:W}]}else return H},[]);I.forEach(H=>r.set(H.target.annotation,H)),t.load(I)},size:()=>t.all().length,update:(x,C)=>{g(x),d(C)}}},io=t=>{const r=Ve(),o=za(),s=P(r,t.userSelectAction,t.adapter),d=u(r),g=re();return r.observe(({changes:x})=>{o.set((x.created||[]).map(C=>C.target),!1),(x.deleted||[]).forEach(C=>o.remove(C.target)),(x.updated||[]).forEach(({oldValue:C,newValue:I})=>o.update(C.target,I.target))}),{store:{...r,getAt:(x,C,I,H)=>{const W=o.getAt(x,C,H);if(I)return W.map(B=>r.getAnnotation(B.annotation)).filter(Boolean).filter(I)[0];{const B=W[0];return B?r.getAnnotation(B.annotation):void 0}},getIntersecting:(x,C,I,H)=>o.getIntersecting(x,C,I,H).map(W=>r.getAnnotation(W.annotation)).filter(Boolean)},selection:s,hover:d,viewport:g}},ro=t=>{const r=io(t);return{...r,store:Je(r.store)}},oo=t=>{let r,o;if(t.nodeName==="CANVAS")r=t,o=r.getContext("2d",{willReadFrequently:!0});else{const d=t;r=document.createElement("canvas"),r.width=d.width,r.height=d.height,o=r.getContext("2d",{willReadFrequently:!0}),o.drawImage(d,0,0,d.width,d.height)}let s=0;for(let d=1;d<10;d++)for(let g=1;g<10;g++){const x=Math.round(g*r.width/10),C=Math.round(d*r.height/10),I=o.getImageData(x,C,1,1).data,H=(.299*I[0]+.587*I[1]+.114*I[2])/255;s+=H}return s/81},ao=t=>{const r=oo(t),o=r>.6?"dark":"light";return console.log(`[Annotorious] Image brightness: ${r.toFixed(1)}. Setting ${o} theme.`),o},tr=(t,r,o)=>r.setAttribute("data-theme",o==="auto"?ao(t):o),so=(t,r)=>({...t,drawingEnabled:t.drawingEnabled===void 0?r.drawingEnabled:t.drawingEnabled,drawingMode:t.drawingMode||r.drawingMode,userSelectAction:t.userSelectAction||r.userSelectAction,theme:t.theme||r.theme}),nr=typeof navigator>"u"?!1:navigator.userAgent.indexOf("Mac OS X")!==-1,lo=(t,r)=>{const o=r||document,s=x=>{const C=x;C.key==="z"&&C.ctrlKey?t.undo():C.key==="y"&&C.ctrlKey&&t.redo()},d=x=>{const C=x;C.key==="z"&&C.metaKey&&(C.shiftKey?t.redo():t.undo())},g=()=>{nr?o.removeEventListener("keydown",d):o.removeEventListener("keydown",s)};return nr?o.addEventListener("keydown",d):o.addEventListener("keydown",s),{destroy:g}},Ua=(t,r={})=>{if(!t)throw"Missing argument: image";const o=typeof t=="string"?document.getElementById(t):t,s=so(r,{drawingEnabled:!0,drawingMode:"drag",userSelectAction:y.EDIT,theme:"light"}),d=ro(s),{selection:g,store:x}=d,C=Ft(x,s.initialHistory),I=ke(d,C,s.adapter,s.autoSave),H=document.createElement("DIV");H.style.position="relative",H.style.display="inline-block",o.style.display="block",o.parentNode.insertBefore(H,o),H.appendChild(o);const W=lo(C);let B=Vi();tr(o,H,s.theme);const ne=new eo({target:H,props:{drawingEnabled:!!s.drawingEnabled,image:o,preferredDrawingMode:s.drawingMode,state:d,style:s.style,user:B}});ne.$on("click",Ee=>{const{originalEvent:Ie,annotation:he}=Ee.detail;he?g.userSelect(he.id,Ie):g.isEmpty()||g.clear()});const we=Be(d,C,s.adapter),ge=()=>ne.cancelDrawing(),de=()=>{ne.$destroy(),H.parentNode.insertBefore(o,H),H.parentNode.removeChild(H),W.destroy(),C.destroy()},ze=()=>ne.getDrawingTool(),Se=()=>B,Fe=()=>ne.isDrawingEnabled(),ve=(Ee,Ie,he)=>zr(Ee,Ie,he),He=(Ee,Ie)=>Lr(Ee,Ie),Ge=Ee=>{if(!Zi(Ee))throw`No drawing tool named ${Ee}`;ne.$set({toolName:Ee})},tt=Ee=>ne.$set({drawingEnabled:Ee}),Ye=Ee=>{console.warn("Filter not implemented yet")},gt=Ee=>ne.$set({style:Ee}),ut=Ee=>tr(o,H,Ee),Lt=Ee=>{B=Ee,ne.$set({user:Ee})},It=Ee=>ne.$set({visible:Ee});return{...we,cancelDrawing:ge,destroy:de,getDrawingTool:ze,getUser:Se,isDrawingEnabled:Fe,listDrawingTools:Qi,on:I.on,off:I.off,registerDrawingTool:ve,registerShapeEditor:He,setDrawingEnabled:tt,setDrawingTool:Ge,setFilter:Ye,setStyle:gt,setTheme:ut,setUser:Lt,setVisible:It,element:H,state:d}};e.Editor=Ei,e.EditorMount=Nr,e.Handle=Un,e.IdentityTransform=_a,e.MidpointHandle=ji,e.PolygonEditor=br,e.RectangleEditor=wr,e.RectangleUtil=ui,e.RubberbandRectangle=Rr,e.SVGAnnotationLayer=eo,e.ShapeType=at,e.ToolMount=Fr,e.UserSelectAction=y,e.W3CImageFormat=go,e.addEventListeners=Gr,e.approximateAsPolygon=Ln,e.boundsFromMultiPolygonElements=On,e.boundsFromPoints=jt,e.chainStyles=Dt,e.computeArea=un,e.computePolygonArea=vn,e.computeSVGPath=Gn,e.computeStyle=rt,e.createBody=ct,e.createImageAnnotator=Ua,e.createImageAnnotatorState=io,e.createSVGTransform=Br,e.createSvelteImageAnnotatorState=ro,e.defaultColorProvider=ho,e.detectTheme=ao,e.distance=wn,e.enableResponsive=lr,e.fillDefaults=so,e.getAllCorners=li,e.getEditor=Or,e.getMaskDimensions=ni,e.getSVGPoint=Ki,e.getTool=Zi,e.initKeyboardCommands=lo,e.intersects=mn,e.isImageAnnotation=Nn,e.isImageAnnotationTarget=Fn,e.isMac=nr,e.isPointInPolygon=dn,e.isTouch=yn,e.listDrawingTools=Qi,e.multipolygonElementToPath=fn,e.parseFragmentSelector=di,e.parseSVGSelector=yi,e.parseW3CImageAnnotation=ar,e.pointsToPath=Bn,e.registerEditor=Lr,e.registerShapeUtil=Jt,e.registerTool=zr,e.sampleBrightness=oo,e.serializeFragmentSelector=fi,e.serializeSVGSelector=Xn,e.serializeW3CImageAnnotation=sr,e.setTheme=tr,e.simplifyMultiPolygon=Di,e.simplifyPoints=tn,e.simplifyPolygon=_n,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})});var SceneMaker=SceneMaker||{};SceneMaker.Locales={en:{"i.ActionEvent":"Triggering event:","i.ActionEventPuzzleSolved":"Puzzle solved","i.ActionEventSlideRevealed":"Screen or view accessed","i.ActionEventSlideRevealedFirstTime":"Screen or view accessed for the first time","i.ActionParamsPuzzle":"Puzzle:","i.ActionParamsPuzzleSolution":"Puzzle solution:","i.ActionParamsScreen":"Screen:","i.ActionParamsScreenReplacement":"Replace with:","i.ActionParamsSlide":"Screen or view:","i.ActionParamsText":"Text:","i.ActionParamsURL":"URL:","i.ActionParamsView":"View","i.ActionType":"Action:","i.ActionTypeChangeBackground":"Change background of screen or view","i.ActionTypeChangeScreen":"Change screen","i.ActionTypeDisableHotzone":"Disable zone","i.ActionTypeEnableHotzone":"Enable zone","i.ActionTypeGoToScreen":"Go to screen","i.ActionTypeHideHotspot":"Hide hotspot","i.ActionTypeOpenLink":"Open link","i.ActionTypeOpenView":"Open view","i.ActionTypePlaySound":"Play sound","i.ActionTypeShowHotspot":"Show hotspot","i.ActionTypeShowText":"Show text","i.ActionTypeSolvePuzzle":"Solve escape room puzzle","i.ActionTypeStopSound":"Stop sound","i.ActionWarningChangeBackground":"If the new background image has different dimensions from the original, the position of the zones will vary.","i.AddCaption":"Caption","i.AddContent":"Add Content","i.AddHotspot":"Add hotspot","i.AddImageURL":"Add image URL","i.AddMultimediaURL":"Add video or audio URL (YouTube or HTML5)","i.AddScreen":"Add Screen","i.AddView":"Add View","i.AddWebURL":"Add web URL","i.AddZone":"Add zone","i.AreYouSure":"Are you sure?","i.AreYouSureContent":"Are you sure you want to delete this content?","i.AreYouSureDeleteHotspot":"Are you sure you want to delete this hotspot?","i.AreYouSureDeleteHotzone":"Are you sure you want to delete this zone?","i.AreYouSureDeleteScreen":"Are you sure you want to delete this screen?","i.AreYouSureDeleteView":"Are you sure you want to delete this view?","i.AspectRatio":"Aspect ratio","i.Background":"Background","i.cancel":"cancel","i.Continue":"Continue","i.CursorVisibility":"Cursor on hover:","i.CursorVisibilityDefault":"No change","i.CursorVisibilityPointer":"Pointer","i.Delete":"Delete","i.delete":"delete","i.Description":"Description","i.Done":"Done","i.Enabled":"Enabled:","i.Exit":"Exit","i.ExitConfirmation":"You are about to leave Scene Maker. Any changes not saved will be lost.","i.ExitConfirmationMenu":"The scene has been modified. Closing without saving will discard your changes. What would you like to do?","i.exitWSaving":"exit without saving","i.HotspotActions":"Actions to perform when the hotspot is clicked","i.HotspotID":"Hotspot ID:","i.HotzoneActions":"Actions to perform when the zone is clicked","i.HotzoneID":"Zone ID:","i.Image":"Image","i.ImageSource":"Source:","i.ImageSourceGallery":"Gallery","i.ImageSourceURL":"URL","i.ImageURL":"URL:","i.LockAspectRatio":"Maintain aspect ratio:","i.Multimedia":"Video & audio","i.NewAction":"Add action","i.no":"no","i.No":"No","i.NoSlidesOnSaveNotification":"Create at least one screen before saving.","i.Object":"Object","i.Ok":"Ok","i.OSettingsPreview":"Include preview param in the URL.","i.OSettingsUnload":"Unload the web page when hiding the view.","i.Position":"Position","i.PositionX":"X (px):","i.PositionY":"Y (px):","i.Preview":"Preview","i.Properties":"Properties","i.PuzzleOption":"Puzzle #{number}","i.Rotation":"Rotation angle (\xB0):","i.Save":"Save","i.saveAndExit":"save and exit","i.Saved":"Saved","i.Saving":"Saving","i.SceneActions":"Actions","i.SceneCaption":"Scene caption","i.SceneCaptionText":"Text","i.SceneCaptionMode":"Display mode:","i.SceneCaptionModeClosable":"Can be closed","i.SceneCaptionModeFixed":"Always visible","i.SceneCaptionModeMinimizable":"Can be minimized","i.Screen":"Screen","i.ScreenOption":"Screen #{number}","i.Settings":"Settings","i.Size":"Size","i.SizeHeight":"Height (px):","i.SizeWidth":"Width (px):","i.Text":"Text","i.Title":"Scene title","i.Unspecified":"Unspecified","i.Untitled":"Untitled","i.Url":"Url","i.url":"url","i.Video":"Video","i.View":"View","i.ViewOption":"View #{viewNumber} - Screen #{screenNumber}","i.Views":"Views","i.ViewsType":"Choose view type","i.ViewsTypeImage":"Image","i.ViewsTypeOther":"Other content","i.Visibility":"Visibility:","i.VisibilityHidden":"Hidden","i.VisibilityVisible":"Visible","i.WrongResource":"This resource is corrupted or incompatible with the current version of Scene Maker and cannot be loaded.","i.yes":"yes","i.Yes":"Yes","i.ZoneTooltip":"Click here to add content"},es:{"i.ActionEvent":"Evento desencadenante:","i.ActionEventPuzzleSolved":"Reto resuelto","i.ActionEventSlideRevealed":"Pantalla o vista accedida","i.ActionEventSlideRevealedFirstTime":"Pantalla o vista accedida por primera vez","i.ActionParamsPuzzle":"Reto:","i.ActionParamsPuzzleSolution":"Soluci\xF3n del reto:","i.ActionParamsScreen":"Pantalla:","i.ActionParamsScreenReplacement":"Reemplazar con:","i.ActionParamsSlide":"Pantalla o vista:","i.ActionParamsText":"Texto:","i.ActionParamsURL":"URL:","i.ActionParamsView":"Vista","i.ActionType":"Acci\xF3n:","i.ActionTypeChangeBackground":"Cambiar fondo de una pantalla o vista","i.ActionTypeChangeScreen":"Cambiar pantalla","i.ActionTypeDisableHotzone":"Deshabilitar zona","i.ActionTypeEnableHotzone":"Habilitar zona","i.ActionTypeGoToScreen":"Ir a la pantalla","i.ActionTypeHideHotspot":"Ocultar hotspot","i.ActionTypeOpenLink":"Abrir enlace","i.ActionTypeOpenView":"Abrir vista","i.ActionTypePlaySound":"Reproducir sonido","i.ActionTypeShowHotspot":"Mostrar hotspot","i.ActionTypeShowText":"Mostrar texto","i.ActionTypeSolvePuzzle":"Resolver reto de la escape room","i.ActionTypeStopSound":"Detener sonido","i.ActionWarningChangeBackground":"Si la nueva imagen de fondo tiene dimensiones diferentes a la original, la posici\xF3n de las zonas variar\xE1.","i.AddCaption":"R\xF3tulo","i.AddContent":"A\xF1adir contenido","i.AddHotspot":"A\xF1adir hotspot","i.AddImageURL":"A\xF1adir URL de una imagen","i.AddMultimediaURL":"A\xF1adir URL de video o audio (YouTube o HTML5)","i.AddScreen":"A\xF1adir pantalla","i.AddView":"A\xF1adir vista","i.AddWebURL":"A\xF1adir URL de una web","i.AddZone":"A\xF1adir zona","i.AreYouSure":"\xBFEst\xE1 seguro?","i.AreYouSureContent":"\xBFEst\xE1 seguro de que desea eliminar este contenido?","i.AreYouSureDeleteHotspot":"\xBFEst\xE1 seguro de que desea eliminar este hotspot?","i.AreYouSureDeleteHotzone":"\xBFEst\xE1 seguro de que desea eliminar esta zona?","i.AreYouSureDeleteScreen":"\xBFEst\xE1 seguro de que desea eliminar esta pantalla?","i.AreYouSureDeleteView":"\xBFEst\xE1 seguro de que desea eliminar esta vista?","i.AspectRatio":"Relaci\xF3n de aspecto","i.Background":"Fondo","i.cancel":"cancelar","i.Continue":"Continuar","i.CursorVisibility":"Cursor al pasar el rat\xF3n:","i.CursorVisibilityDefault":"No cambiar","i.CursorVisibilityPointer":"Puntero","i.Delete":"Borrar","i.delete":"borrar","i.Description":"Descripci\xF3n","i.Done":"Hecho","i.Enabled":"Habilitado:","i.Exit":"Salir","i.ExitConfirmation":"Est\xE1 a punto de salir de Scene Maker. Los cambios no guardados se perder\xE1n.","i.ExitConfirmationMenu":"El escenario ha sido modificado. Si cierra sin guardar, se perder\xE1n los cambios. \xBFQu\xE9 desea hacer?","i.exitWSaving":"salir sin guardar","i.HotspotActions":"Acciones al hacer clic en el hotspot","i.HotspotID":"ID del hotspot:","i.HotzoneActions":"Acciones al hacer clic en la zona","i.HotzoneID":"ID de la zona:","i.Image":"Imagen","i.ImageSource":"Fuente:","i.ImageSourceGallery":"Galer\xEDa","i.ImageSourceURL":"URL","i.ImageURL":"URL:","i.LockAspectRatio":"Mantener relaci\xF3n de aspecto:","i.Multimedia":"V\xEDdeo & audio","i.NewAction":"A\xF1adir acci\xF3n","i.no":"no","i.No":"No","i.NoSlidesOnSaveNotification":"Cree al menos una pantalla antes de guardar.","i.Object":"Objeto","i.Ok":"Aceptar","i.OSettingsPreview":"Incluir par\xE1metro de previsualizaci\xF3n en la URL.","i.OSettingsUnload":"Cerrar la p\xE1gina web al ocultar la vista.","i.Position":"Posici\xF3n","i.PositionX":"X (px):","i.PositionY":"Y (px):","i.Preview":"Vista previa","i.Properties":"Propiedades","i.PuzzleOption":"Reto #{number}","i.Rotation":"\xC1ngulo de rotaci\xF3n (\xB0):","i.Save":"Guardar","i.saveAndExit":"guardar y salir","i.Saved":"Guardado","i.Saving":"Guardando","i.SceneActions":"Acciones","i.SceneCaption":"R\xF3tulo de la escena","i.SceneCaptionText":"Texto","i.SceneCaptionMode":"Modo de visualizaci\xF3n:","i.SceneCaptionModeClosable":"Se puede cerrar","i.SceneCaptionModeFixed":"Siempre visible","i.SceneCaptionModeMinimizable":"Se puede minimizar","i.Screen":"Pantalla","i.ScreenOption":"Pantalla #{number}","i.Settings":"Configuraci\xF3n","i.Size":"Tama\xF1o","i.SizeHeight":"Alto (px):","i.SizeWidth":"Ancho (px):","i.Text":"Texto","i.Title":"T\xEDtulo del escenario","i.Unspecified":"No especificado","i.Untitled":"Sin t\xEDtulo","i.Url":"Url","i.url":"url","i.Video":"Video","i.View":"Vista","i.ViewOption":"Vista #{viewNumber} - Pantalla #{screenNumber}","i.Views":"Vistas","i.ViewsType":"Elige tipo de vista","i.ViewsTypeImage":"Imagen","i.ViewsTypeOther":"Otro contenido","i.Visibility":"Visibilidad:","i.VisibilityHidden":"Oculto","i.VisibilityVisible":"Visible","i.WrongResource":"Este recurso est\xE1 da\xF1ado o es incompatible con la versi\xF3n actual de Scene Maker y no se puede cargar.","i.yes":"s\xED","i.Yes":"S\xED","i.ZoneTooltip":"Haz clic aqu\xED para a\xF1adir contenido"},sr:{"i.ActionEvent":"Triger Doga\u0111aj:","i.ActionEventPuzzleSolved":"Zagonetka re\u0161ena","i.ActionEventSlideRevealed":"Pristupljeno je ekranu ili prikazu","i.ActionEventSlideRevealedFirstTime":"Prvi put je pristupljeno ekranu ili prikazu","i.ActionParamsPuzzle":"Zagonetka:","i.ActionParamsPuzzleSolution":"Re\u0161enje zagonetke:","i.ActionParamsScreen":"Ekran:","i.ActionParamsScreenReplacement":"Zameni sa:","i.ActionParamsSlide":"Ekran ili prikaz:","i.ActionParamsText":"Tekst:","i.ActionParamsURL":"URL:","i.ActionParamsView":"Prikaz","i.ActionType":"Akcija:","i.ActionTypeChangeBackground":"Promeni pozadinu ekrana ili prikaza","i.ActionTypeChangeScreen":"Promeni ekran","i.ActionTypeDisableHotzone":"Onemoguc\u0301i zonu","i.ActionTypeEnableHotzone":"Omoguc\u0301i zonu","i.ActionTypeGoToScreen":"Idi na ekran","i.ActionTypeHideHotspot":"Sakrij hotspot","i.ActionTypeOpenLink":"Otvori link","i.ActionTypeOpenView":"Otvori prikaz","i.ActionTypePlaySound":"Reprodukuj zvuk","i.ActionTypeShowHotspot":"Prika\u017Ei hotspot","i.ActionTypeShowText":"Prika\u017Ei tekst","i.ActionTypeSolvePuzzle":"Re\u0161i zagonetku escape sobe","i.ActionTypeStopSound":"Zaustavi zvuk","i.ActionWarningChangeBackground":"Ako nova pozadinska slika ima druga\u010Dije dimenzije od originalne, polo\u017Eaj zona c\u0301e varirati.","i.AddCaption":"Natpis","i.AddContent":"Dodaj sadr\u017Eaj","i.AddHotspot":"Dodaj hotspot","i.AddImageURL":"Dodaj URL slike","i.AddMultimediaURL":"Dodaj URL videa ili audio zapisa (YouTube ili HTML5)","i.AddScreen":"Dodaj ekran","i.AddView":"Dodaj prikaz","i.AddWebURL":"Dodaj veb URL","i.AddZone":"Dodaj zonu","i.AreYouSure":"Da li ste sigurni?","i.AreYouSureContent":"Da li ste sigurni da \u017Eelite da obri\u0161ete ovaj sadr\u017Eaj?","i.AreYouSureDeleteHotspot":"Da li ste sigurni da \u017Eelite da obri\u0161ete ovaj hotspot?","i.AreYouSureDeleteHotzone":"Da li ste sigurni da \u017Eelite da obri\u0161ete ovu zonu?","i.AreYouSureDeleteScreen":"Da li ste sigurni da \u017Eelite da obri\u0161ete ovaj ekran?","i.AreYouSureDeleteView":"Da li ste sigurni da \u017Eelite da obri\u0161ete ovaj prikaz?","i.AspectRatio":"Odnos \u0161irine i visine (aspect ratio)","i.Background":"Pozadina","i.cancel":"otka\u017Ei","i.Continue":"Nastavi","i.CursorVisibility":"Kursor pri zadr\u017Eavanju mi\u0161em (on hover):","i.CursorVisibilityDefault":"Bez promena","i.CursorVisibilityPointer":"Pokaziva\u010D","i.Delete":"Obri\u0161i","i.delete":"Obri\u0161i","i.Description":"Opis","i.Done":"Gotovo","i.Enabled":"Omoguc\u0301eno:","i.Exit":"Izlaz","i.ExitConfirmation":"Upravo c\u0301ete napustiti Scene Maker. Sve izmene koje nisu sa\u010Duvane bic\u0301e izgubljene.","i.ExitConfirmationMenu":"Scena je izmenjena. Zatvaranje bez \u010Duvanja c\u0301e odbaciti va\u0161e izmene. \u0160ta \u017Eelite da uradite?","i.exitWSaving":"izlaz bez \u010Duvanja","i.HotspotActions":"Radnje koje se izvr\u0161avaju kada se klikne na hotspot","i.HotspotID":"ID hotspota:","i.HotzoneActions":"Radnje koje se izvr\u0161avaju kada se klikne na zonu","i.HotzoneID":"ID zone:","i.Image":"Slika","i.ImageSource":"Izvor:","i.ImageSourceGallery":"Galerija","i.ImageSourceURL":"URL","i.ImageURL":"URL:","i.LockAspectRatio":"Odr\u017Eavaj odnos \u0161irine i visine (aspect ratio):","i.Multimedia":"Video i audio","i.NewAction":"Dodaj akciju","i.no":"ne","i.No":"Ne","i.NoSlidesOnSaveNotification":"Napravi barem jedan ekran pre \u010Duvanja.","i.Object":"Objekat","i.Ok":"U redu","i.OSettingsPreview":"Uklju\u010Di parametar pregleda u URL.","i.OSettingsUnload":"Isprazni veb stranicu prilikom skrivanja prikaza.","i.Position":"Polo\u017Eaj","i.PositionX":"X (px):","i.PositionY":"Y (px):","i.Preview":"Pregled","i.Properties":"Svojstva","i.PuzzleOption":"Slagalica #{number}","i.Rotation":"Ugao rotacije (\xB0):","i.Save":"Sa\u010Duvaj","i.saveAndExit":"sa\u010Duvaj i iza\u0111i","i.Saved":"Sa\u010Duvano","i.Saving":"\u010Cuva se","i.SceneActions":"Radnje","i.SceneCaption":"Natpis scene","i.SceneCaptionText":"Tekst","i.SceneCaptionMode":"Re\u017Eim prikaza:","i.SceneCaptionModeClosable":"Mo\u017Ee se zatvoriti","i.SceneCaptionModeFixed":"Uvek vidljivo","i.SceneCaptionModeMinimizable":"Mo\u017Ee se minimizirati","i.Screen":"Ekran","i.ScreenOption":"Ekran #{number}","i.Settings":"Pode\u0161avanja","i.Size":"Veli\u010Dina","i.SizeHeight":"Visina (px):","i.SizeWidth":"\u0160irina (px):","i.Text":"Tekst","i.Title":"Naslov scene","i.Unspecified":"Neodre\u0111eno","i.Untitled":"Bez naslova","i.Url":"URL","i.url":"url","i.Video":"Video","i.View":"Prikaz","i.ViewOption":"Prikaz #{viewNumber} - Ekran #{screenNumber}","i.Views":"Prikazi","i.ViewsType":"Izaberite tip prikaza","i.ViewsTypeImage":"Slika","i.ViewsTypeOther":"Drugi sadr\u017Eaj","i.Visibility":"Vidljivost:","i.VisibilityHidden":"Sakriveno","i.VisibilityVisible":"Vidljivo","i.WrongResource":"Ovaj resurs je o\u0161tec\u0301en ili nije kompatibilan sa trenutnom verzijom Scene Maker-a i ne mo\u017Ee se u\u010Ditati.","i.yes":"da","i.Yes":"Da","i.ZoneTooltip":"Kliknite ovde da biste dodali sadr\u017Eaj"}},SceneMaker.Constant=SceneMaker.Constant||{},SceneMaker.Constant.NONE="none",SceneMaker.Constant.UNKNOWN="Unknown",SceneMaker.Constant.SCREEN="screen",SceneMaker.Constant.VIEW="view",SceneMaker.Constant.VIEW_IMAGE="view_image",SceneMaker.Constant.VIEW_CONTENT="view_content",SceneMaker.Constant.TEXT="text",SceneMaker.Constant.IMAGE="image",SceneMaker.Constant.AUDIO="audio",SceneMaker.Constant.VIDEO="video",SceneMaker.Constant.OBJECT="object",SceneMaker.Constant.IE="Internet Explorer",SceneMaker.Constant.FIREFOX="Mozilla Firefox",SceneMaker.Constant.CHROME="Google Chrome",SceneMaker.Constant.SAFARI="Safari",SceneMaker.Constant.ANDROID_BROWSER="Android Browser",SceneMaker.Constant.MEDIA={},SceneMaker.Constant.MEDIA.IMAGE="image",SceneMaker.Constant.MEDIA.HTML5_VIDEO="HTML5_VIDEO",SceneMaker.Constant.MEDIA.YOUTUBE_VIDEO="YouTube",SceneMaker.Constant.MEDIA.HTML5_AUDIO="HTML5_AUDIO",SceneMaker.Constant.MEDIA.WEB="web",SceneMaker.Constant.MEDIA.REUSABLE_PUZZLE_INSTANCE="reusable_puzzle_instance",SceneMaker.Constant.MEDIA.PDF="pdf",SceneMaker.Constant.MEDIA.DOC="doc",SceneMaker.Constant.MEDIA.PPT="ppt",SceneMaker.Constant.MEDIA.JSON="json",SceneMaker.Constant.WRAPPER={},SceneMaker.Constant.WRAPPER.EMBED="EMBED",SceneMaker.Constant.WRAPPER.OBJECT="OBJECT",SceneMaker.Constant.WRAPPER.IFRAME="IFRAME",SceneMaker.Constant.WRAPPER.VIDEO="VIDEO",SceneMaker.Constant.WRAPPER.AUDIO="AUDIO",SceneMaker.Constant.WRAPPER.IMAGE="IMG",SceneMaker.Configuration=(function(e,n,w){var l,c=function(p){typeof p=="undefined"&&(p={}),l=p,e.ImagesPath=l.ImagesPath,e.StylesheetsPath=l.StylesheetsPath,e.PreviewPath=l.PreviewPath,e.UploadScenePath=l.UploadScenePath},m=function(){return typeof l=="undefined"?{}:l};return{init:c,getConfiguration:m}})(SceneMaker,jQuery),SceneMaker.User=(function(e,n,w){var l,c=function(F){var _={};typeof F=="object"&&(_=F.user),p(_)},m=function(){return Object.keys(l).length>0?l:w},p=function(F){typeof F=="object"?l=F:l={}},T=function(){return l&&typeof l.token=="string"&&l.id},A=function(){return l.name},D=function(){return l.id},U=function(){return l.token};return{init:c,getUser:m,setUser:p,isLogged:T,getName:A,getId:D,getToken:U}})(SceneMaker,jQuery),SceneMaker.I18n=(function(e,n,w){var l="en",c,m,p,T,A,D,U=function(L,Q){var oe=e.Configuration.getConfiguration();if(c=O(),p=F(),h(oe.defaultLanguage)&&(l=oe.defaultLanguage),h(L.lang))T=L.lang;else{var b=navigator.language||navigator.userLanguage;h(b)?T=b:typeof Q=="object"&&h(Q.language)?T=Q.language:T=l}D=e.Locales,typeof m=="object"?A=m:A=D},F=function(){for(var L=[],Q=O(),oe=0;oe<Q.length;oe++)for(var b=Object.keys(Q[oe]),Le=0;Le<b.length;Le++)L.indexOf(b[Le])==-1&&L.push(b[Le]);return L},_=function(){return p instanceof Array?p:F()},O=function(){var L=[],Q=e.Configuration.getConfiguration();return typeof e.Locales=="object"&&L.push(e.Locales),typeof Q=="object"&&typeof Q.locales=="object"&&(L.push(Q.locales),m=Q.locales),L},v=function(){return c instanceof Array?c:O()},h=function(L){return typeof L=="string"&&_().indexOf(L)!=-1},S=function(){n("[i18n-key]").each(function(L,Q){var oe=V(n(Q).attr("i18n-key"));if(typeof oe!="undefined")switch(Q.tagName){case"INPUT":k(Q,oe);break;case"TEXTAREA":G(Q,oe);break;case"DIV":N(Q,oe);break;case"LI":K(Q,oe);break;case"IMG":te(Q,oe);break;default:X(Q,oe);break}}),n("[i18n-key-tooltip]").each(function(L,Q){var oe=V(n(Q).attr("i18n-key-tooltip"));typeof oe!="undefined"&&n(Q).attr("title",oe)}),n("[i18n-key-href]").each(function(L,Q){var oe=V(n(Q).attr("i18n-key-href"));typeof oe!="undefined"&&n(Q).attr("href",oe)})},k=function(L,Q){n(L).val()!==""&&n(L).val(Q),n(L).attr("placeholder")&&n(L).attr("placeholder",Q)},N=function(L,Q){n(L).attr("data-text")!=w&&n(L).attr("data-text",Q),n(L).attr("title")!=w&&n(L).attr("title",Q),n(L).attr("translateContent")==="true"&&n(L).html(Q)},G=function(L,Q){n(L).attr("placeholder",Q)},K=function(L,Q){n(L).attr("data-text")!=w?n(L).attr("data-text",Q):X(L,Q)},te=function(L,Q){var oe="src";typeof n(L).attr("srctoload")!="undefined"&&(oe="srctoload"),n(L).attr(oe,e.ImagesPath+Q)},X=function(L,Q){n(L).text(Q)},V=function(L,Q){var oe=ie(A,L,Q);if(typeof oe=="string"||(oe=ie(D,L,Q),typeof oe=="string"))return oe;var b=/^i\./g;return b.exec(L)!=null?w:L},ie=function(L,Q,oe){return typeof L[T]!="undefined"&&typeof L[T][Q]=="string"?R(L[T][Q],oe):T!=l&&typeof L[l]!="undefined"&&typeof L[l][Q]=="string"?R(L[l][Q],oe):w},R=function(L,Q){if(typeof Q!="object")return L;for(var oe in Q){var b="#{"+oe+"}";L.indexOf(b)!=-1&&(L=L.replaceAll(b,Q[oe]))}return L},Y=function(){return T};return{init:U,getAvailableLanguages:_,getAvailableLocales:v,getLanguage:Y,getTrans:V,translateUI:S}})(SceneMaker,jQuery),SceneMaker.Object=(function(e,n,w){var l=function(){e.Object.PDF.init(),e.Object.GoogleDOC.init()};function c(S,k,N){this.wrapper=S,this.source=k,this.type=N}var m=function(S){var k=null;if(typeof S=="string"){var N=new RegExp("^<video","g");N.exec(S)!==null&&(k="VIDEO");var G=new RegExp("^<audio","g");G.exec(S)!==null&&(k="AUDIO")}if(k===null||typeof k=="undefined"){var K=n(S)[0];typeof K!="undefined"&&(k=K.tagName)}var te=p(S,k),X;switch(k){case"VIDEO":X=e.Constant.MEDIA.HTML5_VIDEO;break;case"AUDIO":X=e.Constant.MEDIA.HTML5_AUDIO;break;case"IFRAME":default:X=v(te)}return new c(k,te,X)},p=function(S,k){var N=null;switch(k){case null:N=S;break;case e.Constant.WRAPPER.IMAGE:case e.Constant.WRAPPER.EMBED:case e.Constant.WRAPPER.IFRAME:N=n(S).attr("src");break;case e.Constant.WRAPPER.OBJECT:typeof n(S).attr("src")!="undefined"?N=n(S).attr("src"):typeof n(S).attr("data")!="undefined"&&(N=n(S).attr("data"));break;case e.Constant.WRAPPER.VIDEO:return e.Video.HTML5.getSources(S);case e.Constant.WRAPPER.AUDIO:return e.Audio.HTML5.getSources(S);default:e.Debugging.log("Unrecognized object wrapper: "+k);break}if(k==null||k==e.Constant.WRAPPER.IFRAME){var G=/(^https?:\/\/docs.google.com\/viewer\?url=)/g,K=N.match(G);K instanceof Array&&K.length===1&&(N=N.replace(K[0],"").replace("&embedded=true",""))}return N},T=/(http(s)?:\/\/)([aA-zZ0-9%=_&+?])+([./-][aA-zZ0-9%=_&+?]+)*[/]?/g,A=/(www[.])([aA-zZ0-9%=_&+?])+([./-][aA-zZ0-9%=_&+?]+)*[/]?/g,D=/(http(s)?:\/\/)?(((youtu.be\/)([aA-zZ0-9-]+))|((www.youtube.com\/((watch\?v=)|(embed\/)|(v\/)))([aA-z0-9-Z&=.])+))/g,U=/^https?:\/\/[^\/]+\/escapeRooms\/[A-Za-z0-9]+\/reusablePuzzleInstances\/[A-Za-z0-9]+\/render$/,F=["mp4","webm","ogg"],_=["jpg","jpeg","png","gif","bmp","svg"],O=["mp3","wav","ogg"],v=function(S){if(typeof S=="object"&&S!==null&&typeof S.length=="number"&&S.length>0&&(S=S[0]),typeof S!="string")return null;if(S.match(U)!==null)return e.Constant.MEDIA.REUSABLE_PUZZLE_INSTANCE;if(S.match(D)!==null)return e.Constant.MEDIA.YOUTUBE_VIDEO;S=S.split("?")[0];var k=h(S);return _.indexOf(k)!==-1?e.Constant.MEDIA.IMAGE:k==="pdf"?e.Constant.MEDIA.PDF:F.indexOf(k)!==-1?e.Constant.MEDIA.HTML5_VIDEO:O.indexOf(k)!==-1?e.Constant.MEDIA.HTML5_AUDIO:k==="json"?e.Constant.MEDIA.JSON:k==="doc"||k==="docx"?e.Constant.MEDIA.DOC:k==="ppt"||k==="pptx"||k==="odp"?e.Constant.MEDIA.PPT:S.match(T)!==null||S.match(A)!==null?e.Constant.MEDIA.WEB:k},h=function(S){return S.split(".").pop().split("&")[0].toLowerCase()};return{init:l,getExtensionFromSrc:h,getObjectInfo:m}})(SceneMaker,jQuery),SceneMaker.Object.PDF=(function(e,n,w){var l=!1,c=function(){l=e.Status.getDevice().features.pdfReader},m=function(T){return T=e.Utils.checkUrlProtocol(T),l?"<iframe src='"+T+"'></iframe>":e.Object.GoogleDOC.generateWrapper(T)},p=function(T,A){if(typeof A!="object"||typeof A.source!="string")return"";var D=T.style?T.style:"",U=m(A.source),F="objectelement";return A.extraClasses&&(F=F+" "+A.extraClasses),"<div id='"+T.id+"' class='"+F+"' objectStyle='"+D+`' objectWrapper="`+U+'"></div>'};return{init:c,generateWrapper:m,renderPDFFromJSON:p}})(SceneMaker,jQuery),SceneMaker.Object.GoogleDOC=(function(e,n,w){var l=function(){},c=function(m){return m=e.Utils.checkUrlProtocol(m),"<iframe src='https://docs.google.com/viewer?url="+m+"&embedded=true'></iframe>"};return{init:l,generateWrapper:c}})(SceneMaker,jQuery),SceneMaker.Renderer=(function(e,n,w){var l=function(){},c=function(h){var S=m(h);if(S){n("section.slides").append(n(S)),e.Marker.drawSlideWithMarkers(h);for(var k=h.views.length,N=0;N<k;N++){var G=h.views[N];e.Marker.drawSlideWithMarkers(G)}}},m=function(h){for(var S="",k=h.views.length,N=0;N<k;N++){var G=h.views[N];S+=p(G)}return n("<article type='"+h.type+"' id='"+h.id+"'>"+S+"</article>")},p=function(h){if(h.type===e.Constant.VIEW_CONTENT)return A(h);if(h.type===e.Constant.VIEW_IMAGE)return T(h)},T=function(h){var S="hide_in_screen",k="<div class='close_view' id='close"+h.id+"'></div>";return"<article class='"+S+"' type='"+e.Constant.VIEW_IMAGE+"' id='"+h.id+"'>"+k+"</article>"},A=function(h){for(var S="",k="hide_in_screen",N="<div class='close_view' id='close"+h.id+"'></div>",G=h.elements.length,K=0;K<G;K++){var te=h.elements[K];te.type===e.Constant.TEXT?S+=U(te):te.type===e.Constant.IMAGE?S+=F(te):te.type===e.Constant.VIDEO?S+=_(te):te.type===e.Constant.AUDIO?S+=O(te):te.type===e.Constant.OBJECT?(S+=v(te),k+=" object"):S+=D(te)}return"<article class='"+k+"' type='"+e.Constant.VIEW_CONTENT+"' id='"+h.id+"'>"+N+S+"</article>"},D=function(h){return"<div id='"+h.id+"' class='view_content_text'></div>"},U=function(h){return"<div id='"+h.id+"' class='view_content_text textArea'>"+h.body+"</div>"},F=function(h){var S=n("<div id='"+h.id+"' class='view_content_image_wrapper'></div>"),k=n("<img class='view_content_image' src='"+h.body+"' style='"+h.style+"' />");if(h.hyperlink){var N=n("<a href='"+h.hyperlink+"' target='blank_'></a>");n(N).append(k),n(S).append(N)}else n(S).append(k);return e.Utils.getOuterHTML(S)},_=function(h){var S="<div id='"+h.id+"' class='view_content_video_wrapper'>",k=e.Video.HTML5.renderVideoFromJSON(h,{id:e.Utils.getId(h.id+"_video"),extraClasses:["view_content_video"],timestamp:!0});return S=S+k+"</div>",S},O=function(h){var S="<div id='"+h.id+"' class='view_content_audio_wrapper'>",k=e.Audio.HTML5.renderAudioFromJSON(h,{id:e.Utils.getId(h.id+"_audio"),extraClasses:["view_content_audio"],timestamp:!0});return S=S+k+"</div>",S},v=function(h){var S=h.settings||{},k=S.unloadObject===!1?"unloadableObject":"",N=e.Object.getObjectInfo(h.body);switch(N.type){case e.Constant.MEDIA.YOUTUBE_VIDEO:return e.Video.Youtube.renderVideoFromJSON(h,{extraClasses:"objectelement youtubeelement "+k});case e.Constant.MEDIA.PDF:return e.Object.PDF.renderPDFFromJSON(h,{extraClasses:k,source:N.source});default:var G=n(h.body),K=G.attr("src");typeof K!="undefined"&&(K=e.Utils.checkWebUrl(K),(N.type===e.Constant.MEDIA.REUSABLE_PUZZLE_INSTANCE||S.addPreviewParamToObject===!0)&&(K=e.Utils.addParamToUrl(K,"escapp_preview",""+e.Status.isPreview())),G.attr("src",K)),N.type===e.Constant.MEDIA.REUSABLE_PUZZLE_INSTANCE&&G.attr("reusablepuzzleinstance","true");var te=e.Utils.getOuterHTML(G),X=h.style?h.style:"";return"<div id='"+h.id+"' class='objectelement "+k+"' objectStyle='"+X+"' objectWrapper='"+te+"'></div>"}};return{init:l,renderScreen:c}})(SceneMaker,jQuery),SceneMaker.Scene=(function(e,n){var w=function(l,c){e.ViewerAdapter.applyAspectRatio(l.aspectRatio),e.Renderer.init();for(var m=l.screens,p=0;p<m.length;p++)e.Renderer.renderScreen(m[p]);typeof c=="function"&&c()};return{init:w}})(SceneMaker),SceneMaker.ObjectPlayer=(function(e,n,w){var l=function(p){n.each(p.children(".objectelement"),function(T,A){if(!n(A).hasClass("loadedObject")){if(n(A).addClass("loadedObject"),n(A).hasClass("youtubeelement")){e.Video.Youtube.loadYoutubeObject(A);return}var D=n(n(A).attr("objectWrapper"));n(A).html("<div style='"+n(A).attr("objectStyle")+"'>"+e.Utils.getOuterHTML(D)+"</div>")}})},c=function(p){n.each(n(p).children('.objectelement:not(".unloadableObject")'),function(T,A){n(A).removeClass("loadedObject"),n(A).html("")})},m=function(p){n(".current").hasClass("object")&&l(n(".current"))};return{loadObject:l,unloadObject:c,aftersetupSize:m}})(SceneMaker,jQuery),SceneMaker.Video=(function(e,n,w){var l=function(){e.Video.HTML5.init(),e.Video.Youtube.init()};return{init:l}})(SceneMaker,jQuery);var youtubePlayers={},YT=YT||{};YT.PlayerState=YT.PlayerState||{},YT.PlayerState.UNSTARTED=-1,YT.PlayerState.ENDED=0,YT.PlayerState.PLAYING=1,YT.PlayerState.PAUSED=2,YT.PlayerState.BUFFERING=3,YT.PlayerState.CUED=5;var _youTubeIframeApiReady=!1;function onYouTubeIframeAPIReady(){_youTubeIframeApiReady=!0}SceneMaker.Video.Youtube=(function(e,n,w){var l=!0,c=function(){m(),setTimeout(function(){l=!1},11e3)},m=function(){var v=document.createElement("script");v.src="https://www.youtube.com/iframe_api";var h=document.getElementsByTagName("script")[0];h.parentNode.insertBefore(v,h)},p=function(){return!!(window.YT&&_youTubeIframeApiReady===!0)},T=function(v,k){var S=v.body||v.source,k=k||{};return k.id=v.id?v.id:e.Utils.getId(),k.objectStyle=v.style,A(S,k)},A=function(v,h){var S=h&&h.id?h.id:e.Utils.getId(),k=e.Utils.getId(),N="",G="";h&&(h.extraClasses&&(N=N+" "+h.extraClasses),h.objectStyle?G="objectStyle='"+h.objectStyle+"' ":h.style&&(G="objectStyle='"+h.style+"' "));var K="<div id='"+S+"' ytContainerId='"+k+"' class='"+N+"' "+G+" source='"+v+"'></div>";return K},D=function(v,h){var S=1,k=U,N=F;if(h&&(typeof h.controls=="boolean"&&(S=h.controls===!0?1:0),typeof h.onReadyCallback=="function"&&(k=h.onReadyCallback),typeof h.onPlayerError=="function"&&(N=h.onPlayerError)),!p()){if(l)setTimeout(function(){D(v,h)},1e3);else{n(v).html("<img src='"+e.ImagesPath+"adverts/advert_content_unavailable.png'/>"),n(v).addClass("videoOfflineContainer");var G=n(v).find("img");n(G).load(function(V){n(G).css("margin-top",(n(v).height()-n(G).height())/2+"px")}),N()}return}var K=_(n(v).attr("source"));if(K===null){N();return}var te=n(v).attr("ytContainerId"),X=typeof n(v).attr("objectStyle")!="undefined"?"style='"+n(v).attr("objectStyle")+"' ":"";n(v).html("<div id='"+te+"' videotype='"+e.Constant.MEDIA.YOUTUBE_VIDEO+"' "+X+"'></div>"),youtubePlayers[te]=new YT.Player(te,{height:"100%",width:"100%",videoId:K,playerVars:{autoplay:0,controls:S,enablejsapi:1,showinfo:0,wmode:"transparent",rel:0},events:{onReady:k,onError:N}}),n("#"+te).attr("wmode","transparent")},U=function(v){},F=function(v){},_=function(v){var h=null;if(!v)return h;var S=/https?:\/\/?youtu.be\/([aA-zZ0-9-]+)/g,k=/(https?:\/\/)?(www.youtube.com\/watch\?v=|embed\/)([aA-zZ0-9-]+)[&=.]*/g,N=/(https?:\/\/)?(www.youtube.com\/v\/)([aA-zZ0-9-]+)/g,G=/(https?:\/\/)?(www.youtube.com\/embed\/)([aA-zZ0-9-]+)/g;if(v.match(S)!=null){var K=S.exec(v);return K&&K[1]&&(h=K[1]),h}if(v.match(k)!=null){var K=v.split("&")[0],K=k.exec(v);return K&&K[3]&&(h=K[3]),h}if(v.match(N)!=null){var K=v.split("&")[0],K=N.exec(v);return K&&K[3]&&(h=K[3]),h}if(v.match(G)!=null){var K=v.split("&")[0],K=G.exec(v);return K&&K[3]&&(h=K[3]),h}return h},O=function(v){return"https://www.youtube.com/embed/"+e.Video.Youtube.getYoutubeIdFromURL(e.Object.getObjectInfo(v).source)};return{init:c,renderVideoFromJSON:T,renderVideoFromSource:A,loadYoutubeObject:D,getYoutubeIdFromURL:_,getEmbedSource:O}})(SceneMaker,jQuery),SceneMaker.Video.HTML5=(function(e,n,w){var l=function(){},c=function(){var h=n("video, audio");n.each(h,function(S,k){var N=k.tagName==="VIDEO";N&&n(k).focus(function(G){this.blur()})})},m=function(h){var S=n(h).find("video, audio");n.each(S,function(k,N){n(N).attr("wasplayingonslideleave")=="true"?N.play():n(N).attr("wasplayingonslideleave")=="false"||typeof n(N).attr("wasplayingonslideleave")=="undefined"&&n(N).attr("autoplayonslideenter")=="true"&&N.play()})},p=function(h){var S=n(h).find("video, audio");n.each(S,function(k,N){var G=!N.paused;n(N).attr("wasplayingonslideleave",G),G&&N.pause()})},T=function(h,S){var k=S||{};return typeof k.id=="undefined"&&(k.id=typeof h!="undefined"&&h.id?h.id:e.Utils.getId()),typeof k.controls=="undefined"&&(k.controls=h.controls),k.style=h.style,k.autoplay=h.autoplay,k.loop=h.loop,A(O(h),k)},A=function(h,S){var k=n("<video></video>");if(n(k).attr("preload","metadata"),S&&S.extraAttrs)for(var N in S.extraAttrs)n(k).attr(N,S.extraAttrs[N]);if(S){if(S.id&&n(k).attr("id",S.id),typeof S.onVideoReady=="string")try{for(var G=S.onVideoReady.split("."),K=window[G[0]],te=1;te<G.length;te++)K=K[G[te]];typeof K=="function"&&n(k).attr("onloadeddata",S.onVideoReady+"(this)")}catch(ie){}if(S.extraClasses)for(var X=S.extraClasses.length,V=0;V<X;V++)n(k).addClass(S.extraClasses[V]);S.controls!==!1&&n(k).attr("controls","controls"),typeof S.autoplay!="undefined"&&n(k).attr("autoplayonslideenter",S.autoplay),typeof S.poster=="string"&&n(k).attr("poster",S.poster),S.loop===!0&&n(k).attr("loop","loop"),S.style&&n(k).attr("style",S.style)}return typeof n(k).attr("onloadeddata")=="undefined"&&n(k).attr("onloadeddata","SceneMaker.Video.HTML5.onVideoReady(this)"),k=e.Utils.getOuterHTML(k),k=k.split("</video>")[0],(!S||S.loadSources!==!1)&&(n.each(h,function(ie,R){if(typeof R.src=="string"){var Y=R.src;typeof S!="undefined"&&S.timestamp===!0&&(Y=e.Utils.addParamToUrl(Y,"timestamp",""+new Date().getTime()));var L=R.mimeType?"type='"+R.mimeType+"' ":"";k=k+"<source src='"+Y+"' "+L+">"}}),h.length>0&&(k=k+"<p>Your browser does not support HTML5 video.</p>")),k=k+"</video>",k},D=function(h,S,N){var N=N||{};n.each(h,function(G,K){if(typeof K.src=="string"){var te=K.src;N.timestamp===!0&&(te=e.Utils.addParamToUrl(te,"timestamp",""+new Date().getTime()));var X=K.mimeType?"type='"+K.mimeType+"' ":"";n(S).append("<source src='"+te+"' "+X+">")}}),h.length>0&&n(S).append("<p>Your browser does not support HTML5 video.</p>")},U=function(h){typeof h!="undefined"&&(h.readyState==4||h.readyState==3)&&n(h).attr("loaded","true")},F=function(h){if(typeof h=="string"){for(var S=[],k=new RegExp(`src=('||")([a-z-.://0-9]+)`,"g"),N;N=k.exec(h);)N.length>2&&S.push(N[2]),k.lastIndex=N.index+1;return S.map(function(G){return{src:G,mimeType:_(G)}})}try{return n(h).find("source").map(function(){return{src:this.src,mimeType:_(this.src)}})}catch(G){return[]}return[]},_=function(h){var S=e.Object.getObjectInfo(h).source;return"video/"+S.split(".").pop().split("?")[0]},O=function(h){if(typeof h!="object")return[];if(typeof h.sources=="string")try{var S=JSON.parse(h.sources)}catch(k){return[]}else if(typeof h.sources=="object")var S=h.sources;return S},v=function(h){if(typeof h=="string"){var S=new RegExp(`poster=('||")([a-z.://0-9?=%]+)`,"g"),k=S.exec(h);return typeof k!="undefined"&&k!=null&&k.length>2?k[2]:w}return n(h).attr("poster")};return{init:l,setMultimediaEvents:c,playMultimedia:m,stopMultimedia:p,renderVideoFromJSON:T,renderVideoFromSources:A,addSourcesToVideoTag:D,getSources:F,getSourcesFromJSON:O,getPoster:v,onVideoReady:U}})(SceneMaker,jQuery),SceneMaker.Audio=(function(e,n,w){var l=function(){e.Audio.HTML5.init()};return{init:l}})(SceneMaker,jQuery),SceneMaker.Audio.HTML5=(function(e,n,w){var l,c=function(){var v=new Audio;l={player:v,url:w},v.addEventListener("ended",()=>{l.url=w})},m=function(v){typeof l=="undefined"||typeof l.player=="undefined"||typeof v=="string"&&l.url===v||(l.url=v,l.player.pause(),l.player.currentTime=0,l.player.src=v,l.player.play().then(()=>{}).catch(h=>{l.url=w}))},p=function(v){typeof l=="undefined"||typeof l.player=="undefined"||typeof v=="string"&&l.url===v&&(l.player.pause(),l.url=w)},T=function(v,h){var S=h||{};return typeof S.id=="undefined"&&(S.id=typeof v!="undefined"&&v.id?v.id:e.Utils.getId()),typeof S.controls=="undefined"&&(S.controls=v.controls),S.style=v.style,S.autoplay=v.autoplay,S.loop=v.loop,A(_(v),S)},A=function(v,h){var S=n("<audio></audio>");if(n(S).attr("preload","metadata"),n(S).addClass("veaudioelement"),h&&h.extraAttrs)for(var k in h.extraAttrs)n(S).attr(k,h.extraAttrs[k]);if(h){if(h.id&&n(S).attr("id",h.id),typeof h.onAudioReady=="string")try{for(var N=h.onAudioReady.split("."),G=window[N[0]],K=1;K<N.length;K++)G=G[N[K]];typeof G=="function"&&n(S).attr("onloadeddata",h.onAudioReady+"(this)")}catch(V){}if(h.extraClasses)for(var te=h.extraClasses.length,X=0;X<te;X++)n(S).addClass(h.extraClasses[X]);h.controls!==!1&&n(S).attr("controls","controls"),typeof h.autoplay!="undefined"&&n(S).attr("autoplayonslideenter",h.autoplay),h.loop===!0&&n(S).attr("loop","loop"),h.style&&n(S).attr("style",h.style)}return typeof n(S).attr("onloadeddata")=="undefined"&&n(S).attr("onloadeddata","SceneMaker.Audio.HTML5.onAudioReady(this)"),S=e.Utils.getOuterHTML(S),S=S.split("</audio>")[0],(!h||h.loadSources!==!1)&&(n.each(v,function(V,ie){if(typeof ie.src=="string"){var R=ie.src;typeof h!="undefined"&&h.timestamp===!0&&(R=e.Utils.addParamToUrl(R,"timestamp",""+new Date().getTime()));var Y=ie.mimeType?"type='"+ie.mimeType+"' ":"";S=S+"<source src='"+R+"' "+Y+">"}}),v.length>0&&(S=S+"<p>Your browser does not support HTML5 audio.</p>")),S=S+"</audio>",S},D=function(v,h,k){var k=k||{};n.each(v,function(N,G){if(typeof G.src=="string"){var K=G.src;k.timestamp===!0&&(K=e.Utils.addParamToUrl(K,"timestamp",""+new Date().getTime()));var te=G.mimeType?"type='"+G.mimeType+"' ":"";n(h).append("<source src='"+K+"' "+te+">")}}),v.length>0&&n(h).append("<p>Your browser does not support HTML5 audio.</p>")},U=function(v){typeof v!="undefined"&&(v.readyState==4||v.readyState==3)&&n(v).attr("loaded","true")},F=function(v){if(typeof v=="string"){var h=e.Video.HTML5.getSources(v);return h.map(function(S){return{src:S.src,mimeType:O(S.src)}})}try{return n(v).find("source").map(function(){return{src:this.src,mimeType:O(this.src)}})}catch(S){return[]}return[]},_=function(v){return e.Video.HTML5.getSourcesFromJSON(v)},O=function(v){var h=e.Object.getObjectInfo(v).source,S=h.split(".").pop().split("?")[0],k;switch(S){case"ogg":k="ogg";break;case"mp3":k="mpeg";break;case"wav":k="wav";break;default:k=S;break}return"audio/"+k};return{init:c,playAudio:m,stopAudio:p,renderAudioFromJSON:T,renderAudioFromSources:A,addSourcesToAudioTag:D,onAudioReady:U,getSources:F,getSourcesFromJSON:_,getAudioMimeType:O}})(SceneMaker,jQuery),SceneMaker.Events=(function(e,n,w){var l=!1,c=function(){m()},m=function(){if(!l){n("article").live("slideenter",e.Viewer.onSlideEnterViewer),n("article").live("slideleave",e.Viewer.onSlideLeaveViewer),n(document).on("click",".close_view",e.View.onCloseViewClicked),n(document).on("click",".captionHeaderWrapper img",e.Caption.onCaptionButtonClicked);var T=w;window.onresize=function(){typeof T=="undefined"?(T=!1,setTimeout(function(){T?(T=w,window.onresize()):(T=w,p())},600)):T=!0},n(window).on("orientationchange",function(){n(window).trigger("resize")}),window.onbeforeunload=function(){e.EventsNotifier.notifyEvent("EXIT")},l=!0}},p=function(){e.ViewerAdapter.updateInterface()};return{init:c,bindViewerEventListeners:m}})(SceneMaker,jQuery),SceneMaker.EventsNotifier=(function(e,n,w){var l,c=function(){l=new Array},m=function(A,D){A in l||(l[A]=[]),l[A].push(D)},p=function(A,D){A in l&&l[A].indexOf(D)!==-1&&l[A].splice(l[A].indexOf(D),1)},T=function(A,D,U){if(l){D=D||{},D.triggeredByUser=U!==!1;var F=l[A];if(F)for(var _=0;_<F.length;_++)F[_](D)}};return{init:c,notifyEvent:T,registerCallback:m,unRegisterCallback:p}})(SceneMaker,jQuery),SceneMaker.Viewer=(function(e,n,w){var l,c,m=function(){p(e.getOptions())},p=function(O){e.Editing=!1,n("body").addClass("SceneMakerViewerBody"),l=typeof O=="object"?O:{},e.Debugging.init(O),l.configuration&&e.Configuration&&e.Configuration.init(l.configuration);var v=O.scene;if(e.Utils.init(),e.I18n.init(l,v),e.Debugging.log(`

Scene Maker initiated with scene:
`),e.Debugging.log(JSON.stringify(v)),v=e.Utils.fixScene(v),v===null){e.Utils.showPNotValidDialog();return}c=v,e.Status.init(function(){T(O,v)})},T=function(O,v){e.Utils.Loader.loadLanguageCSS(),e.EventsNotifier.init(),e.Object.init(),e.Screen.init(),e.View.init(),e.Marker.init(),e.Actions.init(v),e.Caption.init(),e.Slides.init(),e.I18n.translateUI(),e.User.init(O),e.Events.init(),e.Video.init(),e.Audio.init(),e.FullScreen.init(),e.Scene.init(v,function(){A(O,v)})},A=function(O,v){e.Video.HTML5.setMultimediaEvents(),e.Screen.updateCurrentScreenFromHash(),e.Screen.updateScreens(),e.ViewerAdapter.init(O),e.Utils.Loader.preloadResources(v),e.Screen.getCurrentScreenNumber()>0&&e.Slides.triggerSlideEnterEvent(n(e.Screen.getCurrentScreen()).attr("id")),e.Status.isExternalDomain()||window.focus(),e.Escapp.init(O,v)},D=function(){return l},U=function(O){var v=O.target,h=e.Slides.isView(v),S=e.Slides.getCurrentSlide();O.stopPropagation(),h?(setTimeout(function(){var k=n(v);k.hasClass(e.Constant.OBJECT)&&n(S).attr("id")===n(e.Slides.getCurrentSlide()).attr("id")&&e.ObjectPlayer.loadObject(k)},400),e.Video.HTML5.playMultimedia(v)):e.Screen.onEnterScreen(v),e.Actions.checkActionsForSlideEnterEvent(v.id)},F=function(O){var v=O.target,h=e.Slides.isView(v);O.stopPropagation(),h?(n(v).hasClass(e.Constant.OBJECT)&&e.ObjectPlayer.unloadObject(n(v)),e.Video.HTML5.stopMultimedia(v)):e.Screen.onLeaveScreen(v)},_=function(){return c};return{init:m,getOptions:D,getCurrentScene:_,onSlideEnterViewer:U,onSlideLeaveViewer:F}})(SceneMaker,jQuery),SceneMaker.Debugging=(function(e,n,w){var l=!1,c,m=function(_){_&&typeof _.developping=="boolean"?(l=_.developping,l&&_.developmentSettings&&(c=_.developmentSettings)):(l=!1,c=null)},p=function(..._){window.console&&window.console.log&&l&&console.log(..._)},T=function(){l=!0},A=function(){l=!1},D=function(){return l},U=function(){return c?c.actionInit:"nothing"},F=function(){return c&&c.testing_scene?c.testing_scene:(p("Error: Please specify development settings"),null)};return{init:m,log:p,enableDevelopingMode:T,disableDevelopingMode:A,isDevelopping:D,getActionInit:U,getTestingScene:F}})(SceneMaker,jQuery),SceneMaker.Validator=(function(e,n,w){var l=function(){},c=function(m){if(!m||typeof m=="string"&&m.trim()==="")return!1;var p=e.Object.getObjectInfo(m);if(!p||!p.source||!p.type)return!1;if(typeof p.source=="string"){if(p.source.trim()==="")return!1}else if(typeof p.source=="object"){if(p.source.length<1)return!1}else return!1;return!0};return{init:l,validateObject:c}})(SceneMaker,jQuery),SceneMaker.Status=(function(e,n,w){var l,c,m,p,T,A,D,U=function(V){F(),_(),O(),v(),h(),e.Status.Device.init(function(ie){l=ie,typeof V=="function"&&V()})},F=function(){return c=window.location!=window.parent.location,c},_=function(){if(T=!1,F())try{for(var V=window.parent;V!=window.top;)if(typeof V.location.href=="undefined"){T=!0;break}else V=V.parent;typeof window.top.location.href=="undefined"&&(T=!0)}catch(ie){T=!0}return T},O=function(){if(m=w,p="undefined",c&&!T)try{switch(window.frameElement.tagName){case"OBJECT":case"IFRAME":default:p=window.frameElement.tagName,m=window.frameElement}}catch(V){}},v=function(){var V;try{V=document.location.protocol}catch(R){}if(typeof V=="string"){var ie=V.match(/[\w]+/);ie instanceof Array&&typeof ie[0]=="string"?V=ie[0]:V=w}typeof V=="string"?D=V:D="unknown"},h=function(){var V=e.Utils.getOptions();typeof V.preview=="boolean"?A=V.preview:A=!1},S=function(){return l},k=function(){return c},N=function(){return m},G=function(){return p},K=function(){return T},te=function(){return typeof D=="undefined"&&v(),D},X=function(){return A};return{init:U,getDevice:S,isExternalDomain:K,isEmbed:k,getContainer:N,getContainerType:G,getProtocol:te,isPreview:X}})(SceneMaker,jQuery),SceneMaker.Status.Device=(function(e,n,w){var l=function(F){e.Status.Device.Browser.init(),e.Status.Device.Features.init(),c(F)},c=function(F){var _={};_.browser=e.Status.Device.Browser.fillBrowser(),_.features={},m(_),p(_,function(){_.features=e.Status.Device.Features.fillFeatures(),typeof F=="function"&&F(_)})},m=function(F){F.iPhone=/iPhone/i.test(navigator.userAgent),F.iPad=/iPad/i.test(navigator.userAgent),F.iOS=F.iPhone||F.iPad,F.android=/android/i.test(navigator.userAgent)},p=function(F,_){F.iOS&&F.browser.name===e.Constant.SAFARI?U(_):F.android?F.browser.name===e.Constant.CHROME?D(_):F.browser.name===e.Constant.ANDROID_BROWSER&&A(_):typeof _=="function"&&_()},T=function(F,_){var O=n("head>meta[name='viewport']");O.length===0?n("head").prepend('<meta name="viewport" content="'+F+'"/>'):n(O).attr("content",F),setTimeout(function(){typeof _=="function"&&_()},1250)},A=function(F){T("user-scalable=yes",F)},D=function(F){T("width=device-width,height=device-height,user-scalable=yes",F)},U=function(F){T("user-scalable=yes",F)};return{init:l}})(SceneMaker,jQuery),SceneMaker.Status.Device.Browser=(function(e,n,w){var l="Microsoft Internet Explorer",c="Netscape",m=function(){},p=function(){var F={},_=A();if(_!==-1)return F.name=e.Constant.FIREFOX,F.version=_,F;if(_=D(),_!==-1)return F.name=e.Constant.CHROME,F.version=_,F;if(_=T(),_!==-1)return F.name=e.Constant.IE,F.version=_,F;if(_=U(),_!==-1){var O=/android/i.test(navigator.userAgent);return O?F.name=e.Constant.ANDROID_BROWSER:F.name=e.Constant.SAFARI,F.version=_,F}return F.name=e.Constant.UNKNOWN,F.version=-1,F},T=function(){var F=-1;if(navigator.appName===l){var _=navigator.userAgent,O=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");O.exec(_)!=null&&(F=parseFloat(RegExp.$1))}else if(navigator.appName===c){var _=navigator.userAgent,O=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");O.exec(_)!=null&&(F=parseFloat(RegExp.$1))}return F},A=function(){var F=-1;if(navigator.appName===c){var _=navigator.userAgent,O=new RegExp(".* Firefox/([0-9.]+)");O.exec(_)!=null&&(F=parseFloat(RegExp.$1))}return F},D=function(){var F=-1;if(navigator.appName===c){var _=navigator.userAgent,O=new RegExp(".* Chrome/([0-9.]+)");O.exec(_)!=null&&(F=parseFloat(RegExp.$1))}return F},U=function(){var F=-1;if(navigator.appName===c){var _=navigator.userAgent;if(_.indexOf("Safari")!==-1&&_.indexOf("Chrome")===-1&&_.indexOf("crmo")==-1){var F=-2,O=new RegExp(".* Version/([0-9.]+)");O.exec(_)!=null&&(F=parseFloat(RegExp.$1))}}return F};return{init:m,fillBrowser:p}})(SceneMaker,jQuery),SceneMaker.Status.Device.Features=(function(e,n,w){var l=function(){},c=function(){var p={};return p.fullscreen=e.FullScreen.isFullScreenSupported(),p.touchScreen="ontouchstart"in window,p.localStorage=m(),p.history=typeof history=="object"&&typeof history.back=="function"&&typeof history.go=="function",p.history&&typeof history.pushState=="function"?p.historypushState=!0:p.historypushState=!1,window.File&&window.FileReader&&window.FileList&&window.Blob?p.reader=!0:p.reader=!1,p.pdfReader=!1,typeof navigator.mimeTypes=="object"&&"application/pdf"in navigator.mimeTypes&&(p.pdfReader=!0),p},m=function(){var p=typeof Storage!="undefined";if(p)try{return localStorage.setItem("myKey","myKeyValue"),localStorage.getItem("myKey"),localStorage.removeItem("myKey"),!0}catch(T){return!1}else return!1};return{init:l,fillFeatures:c}})(SceneMaker,jQuery),SceneMaker.ViewerAdapter=(function(e,n,w){var l=!1,c,m,p,T,A,D,U,F,_,O=function(X){l||(l=!0,c=e.FullScreen.canFullScreen(),c=c&&!e.Status.isPreview(),n("#viewbar").show(),e.Status.isPreview()&&n("div#viewerpreview").show(),c?(e.FullScreen.enableFullScreen(),n("#page-fullscreen").show()):n("#page-fullscreen").hide(),S(),e.Text.init())},v=function(X){typeof X!="string"||["4:3","16:9"].indexOf(X)===-1||D!==X&&(D=X,n("body").attr("aspectRatio",X),X==="16:9"?(U=16/9,_referenceSlideWidth=1024,_=576):(U=4/3,_referenceSlideWidth=800,_=600))},h=function(){return D},S=function(){if(typeof U!="undefined"){var X=n(window).width(),V=n(window).height();X===m&&V===p||(m=X,p=V,k())}},k=function(){var X,V,ie=25,R=10,Y=N(p),L=p-Y,Q=m,oe=(Q-R)/(L-ie);if(oe>U){V=L-ie,X=V*U;var b=Q-X;if(b<R){var Le=R-b;X=X-Le}}else{X=Q-R,V=X/U;var ce=L-V;if(ce<ie){var J=ie-ce;V=V-J}}typeof A!="number"&&(A=_),typeof T!="number"&&(T=_referenceSlideWidth);var me=V/A;A=V,T=X,n("#viewbar").height(Y);var f=n(".slides > article"),Re=n(".slides > article > article"),je=n(".slides article");n(je).css("height",V),n(je).css("width",X);var Me=V/2+Y/2,ot=X/2;n(f).css("margin-top","-"+Me+"px"),n(Re).css("margin-top","-"+V/2+"px"),n(je).css("margin-left","-"+ot+"px");var Tt=3/100*X,Ue=5/100*X;n(je).css("padding-left",Ue),n(je).css("padding-right",Ue),n(je).css("padding-top",Tt),n(je).css("padding-bottom",Tt);var et=23;me<=1?et=et*te(me,.7):et=et*te(me,.2),n("div.close_view").css("width",et+"px"),n("div.close_view").css("height",et+"px"),n("#page-fullscreen").width(n("#page-fullscreen").height()),K(me),G(me),e.Text.aftersetupSize(me),e.ObjectPlayer.aftersetupSize(me),e.Screen.afterSetupSize(me)},N=function(X){var V=26,ie=40,R=X/_,Y=40*te(R,.7);return Math.min(Math.max(Y,V),ie)},G=function(X){var V=n("#fancybox-overlay");if(!(n(V).length<1||!n(V).is(":visible"))){var ie=n("#fancybox-wrap"),R=n("#fancybox-content"),Y=n("#"+n(R).attr("id")+" > div"),L=n(".current"),Q=n(L).cssNumber("padding-top"),oe=n(L).cssNumber("padding-left"),b=n(L).cssNumber("padding-right"),Le=n(L).offset(),ce=23;X<=1?ce=ce*te(X,.7):ce=ce*te(X,.2);var J=n("#fancybox-close");n(J).width(ce+"px"),n(J).height(ce+"px"),n(J).css("padding","10px"),n(J).css("padding-left","4px"),n(ie).css("margin-top","0px"),n(ie).css("margin-left","0px"),n(ie).width(n(L).width()+oe+b),n(ie).height(n(L).height()+2*Q),n(ie).css("top",Le.top+"px"),n(ie).css("left",Le.left+"px"),n(R).width("100%"),n(R).height("100%"),n(Y).width("100%"),n(Y).height("100%")}},K=function(X){var V=n("div[data-tippy-root]:visible");V.length>0&&V.each(function(ie,R){n("[markertooltipid="+n(R).attr("id")+"]").each(function(Y,L){typeof L._tippy!="undefined"&&(L._tippy.hide(),L._tippy.show())})})},te=function(X,V){var ie=(X-1)*V;return 1+ie};return{init:O,getAspectRatio:h,applyAspectRatio:v,updateInterface:S}})(SceneMaker,jQuery),SceneMaker.Text=(function(e,n,w){var l=12,c=function(){m(n("article > div.textArea")),n("article > div.textArea > table").each(function(_,O){m(n(O).find("caption")),n(O).find("td").each(function(K,te){m(te)});var v=n(O).attr("style");if(v){var h="",S=e.Utils.getWidthFromStyle(v);if(S){var k=S*100/800;h+="width:"+k+"%;"}var N=e.Utils.getHeightFromStyle(v);if(N){var G=N*100/600;h+="height:"+G+"%;"}h!==""&&n(O).attr("style",h)}})},m=function(_){T(n(_).find("font")),p(n(_).find("[style]"))},p=function(_){n(_).each(function(O,v){var h=n(v).attr("style");if(typeof h=="string"){var S=e.Utils.getFontSizeFromStyle(h);if(!(typeof S!="number"||isNaN(S))){var k=S/l+"rem",N=e.Utils.addFontSizeToStyle(h,k);n(v).attr("style",N)}}})},T=function(_){n(_).each(function(O,v){var h=n(v).attr("size");if(h){var S=parseInt(h);if(!isNaN(S)){n(v).hide();var k=F(S),N=k/l+"rem",G=n("<span style='font-size:"+N+"'></span>");n(G).html(n(v).html()),n(v).before(G),n(v).remove()}}})},A=function(_){_=_*D(_);var O=l,v=n("html");n(v).css("font-size",O*_+"px")},D=function(_){return _<.25?.5:U(_,.25,.3)?.55:U(_,.3,.35)?.65:U(_,.35,.4)?.7:U(_,.4,.5)?.8:U(_,.5,.6)?.85:U(_,.6,.75)?.9:U(_,.75,.95)?.95:(U(_,.95,1.5)||_>1.5,1)},U=function(_,O,v){return _>O&&_<=v},F=function(_){switch(_){case 7:return 48;case 6:return 32;case 5:return 24;case 4:return 18;case 3:return 16;case 2:return 14;case 1:return 12;default:break}};return{init:c,aftersetupSize:A}})(SceneMaker,jQuery),SceneMaker.Utils=(function(e,n){var w,l,c=function(){l||(l=new Array,w=[]),jQuery.fn.cssNumber=function(J){var me=parseInt(this.css(J),10);return isNaN(me)?0:me},jQuery.fn.reverse=[].reverse,String.prototype.replaceAll=function(J,me){var f=this;return f.replace(new RegExp(J.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),me)},Array.prototype.filter||(Array.prototype.filter=function(J){"use strict";if(this===void 0||this===null)throw new TypeError;var me=Object(this),f=me.length>>>0;if(typeof J!="function")throw new TypeError;for(var Re=[],je=arguments.length>=2?arguments[1]:void 0,Me=0;Me<f;Me++)if(Me in me){var ot=me[Me];J.call(je,ot,Me,me)&&Re.push(ot)}return Re}),Array.prototype.map||(Array.prototype.map=function(J){"use strict";if(this===void 0||this===null)throw new TypeError;var me=Object(this),f=me.length>>>0;if(typeof J!="function")throw new TypeError;for(var Re=new Array(f),je=arguments.length>=2?arguments[1]:void 0,Me=0;Me<f;Me++)Me in me&&(Re[Me]=J.call(je,me[Me],Me,me));return Re}),Array.prototype.indexOf||(Array.prototype.indexOf=function(J){var me=this.length>>>0,f=Number(arguments[1])||0;for(f=f<0?Math.ceil(f):Math.floor(f),f<0&&(f+=me);f<me;f++)if(f in this&&this[f]===J)return f;return-1}),Object.keys||(Object.keys=(function(){"use strict";var J=Object.prototype.hasOwnProperty,me=!{toString:null}.propertyIsEnumerable("toString"),f=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Re=f.length;return function(je){if(typeof je!="object"&&(typeof je!="function"||je===null))throw new TypeError("Object.keys called on non-object");var Me=[],ot,Tt;for(ot in je)J.call(je,ot)&&Me.push(ot);if(me)for(Tt=0;Tt<Re;Tt++)J.call(je,f[Tt])&&Me.push(f[Tt]);return Me}})()),typeof Array.prototype.forEach!="function"&&(Array.prototype.forEach=function(J){for(var me=0;me<this.length;me++)J.apply(this,[this[me],me,this])}),typeof String.prototype.trim!="function"&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),e.Utils.Loader.init()},m=function(){return e.Editing?e.Editor.getOptions():e.Viewer.getOptions()},p=function(J,me,f){if(me){var Re=J;J=J.replace(J[J.length-1],"")}else{typeof J!="string"&&(J="unicID"),typeof f!="string"&&(f=""),typeof l[J]=="undefined"&&(l[J]=0),l[J]=l[J]+1;var Re=J+f+l[J]}return $("#"+Re).length===0&&w.indexOf(Re)===-1?(w.push(Re),Re):p(J,!1,f)},T=function(J){w.indexOf(J)===-1&&w.push(J)},A=function(J,me){if(typeof J=="object"&&typeof me=="object"&&!(J instanceof Array)){let f=Object.keys(Object.assign({},J,me)),Re=f.length;for(let je=0;je<Re;je++)J[f[je]]=A(J[f[je]],me[f[je]]);return J}else return typeof me!="undefined"?me:J},D=function(J){return typeof J!="object"?null:J},U=function(J){return typeof $(J)[0].outerHTML=="undefined"?$(J).clone().wrap("<div></div>").parent().html():$(J)[0].outerHTML},F=function(J,me){if(typeof J!="string"||typeof me!="string")return J;var f=J.split("#");J=f[0];var Re=J.split("?");if(Re.length===2){J=Re[0];for(var je=Re[1],Me=[],Re=je.split("&"),ot=Re.length,Tt=0;Tt<ot;Tt++){var Ue=Re[Tt].split("=");Ue[0]!=me&&Me.push({key:Ue[0],value:Ue[1]})}for(var et=Me.length,Pe=0;Pe<et;Pe++){var We=Me[Pe];Pe===0?J=J+"?":J=J+"&",J=J+We.key+"="+We.value}}return f.length>1&&(J=J+"#"+f[1]),J},_=function(J,me,f){if(typeof J!="string"||typeof me!="string"||typeof f!="string")return J;J=F(J,me);var Re=J.split("#");J=Re[0];var je=me+"="+f;return J.indexOf("?")>-1?J+="&"+je:J+="?"+je,Re.length>1&&(J=J+"#"+Re[1]),J},O=function(J){var me={};if(typeof J!="string")return me;var f=J.split("?");if(f.length<=1)return me;for(var Re=f[1].split("#")[0].split("&"),je=0;je<Re.length;je++){var Me=Re[je].split("=");Me.length===2&&(me[Me[0]]=Me[1])}return me},v=function(){try{var J=window.location;if(typeof J=="undefined")return;var me=Math.max(1,Math.min(e.Screen.getScreensQuantity(),parseInt(J.hash.split("?")[0].split("#").pop())));return isNaN(me)?n:me}catch(f){return n}},h=function(J){return J.split("#")[0]},S=function(J){try{if(typeof J=="string"&&J.indexOf("url")===0&&J.length>3){var me=J[4];return me=='"'||me=="'"?J.substring(5,J.length-2):J.substring(4,J.length-1)}}catch(f){}return J},k=function(J,me){return G(J,me)[0]},N=function(J,me){return G(J,me)[1]},G=function(J,me){var f=[],Re=null,je=null;return $.each(J.split(";"),function(Me,ot){var Tt=/width:\s?([0-9]+(\.[0-9]+)?)%/g,Ue=/width:\s?([0-9]+(\.?[0-9]+)?)px/g,et=/height:\s?([0-9]+(\.[0-9]+)?)%/g,Pe=/height:\s?([0-9]+(\.?[0-9]+)?)px/g;if(ot.indexOf("width")!==-1){if(ot.match(Ue)){var We=Ue.exec(ot);We[1]&&(Re=We[1])}else if(ot.match(Tt)){var We=Tt.exec(ot);if(We[1]){var xt=We[1];me&&(Re=$(me).width()*xt/100)}}}else if(ot.indexOf("height")!==-1){if(ot.match(Pe)){var We=Pe.exec(ot);We[1]&&(je=We[1])}else if(ot.match(et)){var We=et.exec(ot);if(We[1]){var xt=We[1];me&&(je=$(me).height()*xt/100)}}}}),f.push(Re),f.push(je),f},K=function(J){if(J){var me=null;return $.each(J.split(";"),function(f,Re){var je=/font-size\s*:\s*((\d*\.)?\d+)px/i;if(Re.match(je)!=null){var Me=je.exec(Re);if(Me!==null&&Me[1]!==null)return me=parseFloat(Me[1]),!1}}),me}},te=function(J,me){if(typeof J!="string")return null;var f="";return $.each(J.split(";"),function(Re,je){je.indexOf("font-size")===-1&&je!==""&&(f=f+je+"; ")}),me&&(f=f+"font-size:"+me+";"),f},X=function(){var J={};J.width=650,J.height=220,J.text=e.I18n.getTrans("i.WrongResource");var me={};me.text=e.I18n.getTrans("i.Ok"),me.callback=function(){$.fancybox.close()},J.buttons=[me],e.Utils.showDialog(J)},V=function(J){ie();var me=$("#notification_template");if($(me).length!==0&&!(!J||!J.text)){var f="90%",Re,je=!1,Me;e.Editing&&(Me=e.ImagesPath+"thumbs/content_fail.png"),J.width&&(f=J.width),J.showCloseButton&&(je=J.showCloseButton),J.notificationIconSrc&&(Me=J.notificationIconSrc),Me||(J.textWrapperClass="forceCenter"),typeof f=="string"&&f.indexOf("%")!=0&&(f=f.split("%")[0].trim(),f=f*$(window).width()/100);var ot=$(me).parent();$(me).width(f);var Tt=$(me).find(".notification_row1"),Ue=$(me).find(".notification_row2"),et=$(Tt).find(".notificationIcon");if(Me&&($(et).attr("src",Me),$(et).css("display","inline")),J.notificationIconClass&&$(et).addClass(J.notificationIconClass),J.textWrapperClass&&$(Tt).addClass(J.textWrapperClass),J.buttonsWrapperClass&&$(Ue).addClass(J.buttonsWrapperClass),$(Tt).find(".notification_text").html(J.text),J.buttons){var Pe=J.buttons.length;$(J.buttons).reverse().each(function(Oe,ft){var Ct=Pe-Oe,Rt=$('<a href="#" buttonNumber="'+Ct+'" class="button notification_button">'+ft.text+"</a>");ft.extraclass&&$(Rt).addClass(ft.extraclass),$(Ue).append(Rt)})}if(J.middlerow){var We=document.createElement("div");$(We).addClass("notification_middlerow"),$(We).append(J.middlerow),J.middlerowExtraClass&&$(We).addClass(J.middlerowExtraClass),$(Ue).before(We)}e.Utils.addTempShown(ot);var xt=$(Tt).outerHeight(!0)+$(Ue).outerHeight(!0);if(J.middlerow){var We=$(me).find(".notification_middlerow");xt=xt+$(We).outerHeight(!0)}e.Utils.removeTempShown(ot);var Et=$(me).clone();$(Et).attr("id","notification_template_cloned"),$(ot).append(Et);var le=$("#notification_template_cloned");if(J.buttons){Ue=$(le).find(".notification_row2"),$(Ue).html("");var Pe=J.buttons.length;$(J.buttons).reverse().each(function(ft,Ct){var Rt=Pe-ft,Wt=$('<a href="#" buttonNumber="'+Rt+'" class="button notification_button">'+Ct.text+"</a>");Ct.extraclass&&$(Wt).addClass(Ct.extraclass),$(Ue).append(Wt),$(Ue).find(".button[buttonNumber='"+Rt+"']").click(function(nn){nn.preventDefault(),Ct.callback()})})}$("a#link_to_notification_template").fancybox({autoDimensions:!1,autoScale:!0,scrolling:"no",width:f,height:xt,padding:0,hideOnOverlayClick:!0,hideOnContentClick:!1,showCloseButton:je,onStart:function(Oe){},onComplete:function(Oe){},onClosed:function(Oe){ie(),J&&typeof J.onClosedCallback=="function"&&J.onClosedCallback()}}),$("a#link_to_notification_template").trigger("click")}},ie=function(){var J=$("#notification_template_wrapper");$(J).html("");var me=document.createElement("div");$(me).attr("id","notification_template");var f=document.createElement("div");$(f).addClass("notification_row1");var Re=document.createElement("img");$(Re).addClass("notificationIcon"),$(Re).attr("style","display:none");var je=document.createElement("span");$(je).addClass("notification_text"),$(f).append(Re),$(f).append(je),$(me).append(f);var Me=document.createElement("div");$(Me).addClass("notification_row2"),$(me).append(Me),$(J).append(me)},R=function(J){return Y(e.VERSION)>Y(J)},Y=function(J){var me=0,f=[100,10,1];try{for(var Re=J.split("."),je=0;je<Re.length;je++)me+=parseFloat(Re[je])*f[je]}catch(Me){return 0}return me},L={},Q=function(J){$(J).each(function(me,f){var Re=$(f).attr("id");typeof Re=="undefined"&&(Re=e.Utils.getId("TmpShownId"),$(f).attr("id",Re));var je=typeof L[Re]!="undefined"?L[Re]:0;L[Re]=je+1,je==0&&$(f).addClass("temp_shown")})},oe=function(J){$(J).each(function(me,f){var Re=$(f).attr("id");typeof Re=="undefined"&&(Re=e.Utils.getId("TmpShownId"),$(f).attr("id",Re));var je=typeof L[Re]!="undefined"?L[Re]:0,Me=Math.max(0,je-1);L[Re]=Me,Me==0&&setTimeout(function(){L[Re]===0&&$(f).removeClass("temp_shown")},1)})},b=function(J){if(typeof J=="string"){var me=J.match(/^https?:\/\//);if(me instanceof Array&&me.length===1){var f=me[0].replace("://",""),Re=e.Status.getProtocol();if(f!=Re)switch(Re){case"https":J="https"+J.replace(f,"");break;case"http":break;default:break}}}return J},Le=function(J){return typeof J!="string"||(J=b(J)),J},ce=function(J){if(typeof J!="string")return J;J=b(J);var me=e.Utils.getOptions();if(typeof me!="undefined"&&typeof me.escapp!="undefined"&&typeof me.escapp.endpoint=="string")try{var f=new URL(me.escapp.endpoint).hostname,Re=new URL(J).hostname;if(f===Re)return e.Utils.addParamToUrl(J,"escapp_preview",""+e.Status.isPreview())}catch(je){}return J};return{init:c,getOptions:m,getId:p,registerId:T,deepMerge:A,fixScene:D,getOuterHTML:U,getSrcFromCSS:S,addFontSizeToStyle:te,getFontSizeFromStyle:K,getWidthFromStyle:k,getHeightFromStyle:N,getPixelDimensionsFromStyle:G,addParamToUrl:_,removeParamFromUrl:F,getParamsFromUrl:O,removeHashFromUrlString:h,getScreenNumberFromHash:v,showDialog:V,showPNotValidDialog:X,isObseleteVersion:R,addTempShown:Q,removeTempShown:oe,checkUrlProtocol:b,checkWebUrl:Le,checkReusablePuzzleInstanceUrl:ce}})(SceneMaker),SceneMaker.Utils.Loader=(function(e,n){var w=function(){},l=function(k){if(k.screens&&Array.isArray(k.screens))for(let K=0;K<k.screens.length;K++){var N=k.screens[K];if(N.hotspots&&Array.isArray(N.hotspots))for(let te=0;te<N.hotspots.length;te++){var G=N.hotspots[te];if(G.actions&&Array.isArray(G.actions))for(let X=0;X<G.actions.length;X++)c(G.actions[X])}}},c=function(k){if(k.actionType&&k.actionParams&&typeof k.actionParams=="object")switch(k.actionType){case"changeBackground":typeof k.actionParams.url=="string"&&m([k.actionParams.url]);break;case"playSound":typeof k.actionParams.url=="string"&&p([k.actionParams.url]);break;default:break}},m=function(k){for(let N=0;N<k.length;N++){const G=new Image;G.src=k[N]}},p=function(k){for(let N=0;N<k.length;N++){const G=new Audio;G.src=k[N],G.preload="auto"}},T=function(k,N){if(!(typeof k!="string"||typeof N!="function")){var G=document.getElementsByTagName("head")[0];if(G){var K=document.createElement("script");K.setAttribute("src",k),K.setAttribute("type","text/javascript");var te=!1,X=function(){te||typeof N=="function"&&(te=!0,N())},V=function(){(this.readyState=="complete"||this.readyState=="loaded")&&X()};K.onreadystatechange=V,K.onload=X,G.appendChild(K)}}},A=function(k,N){var G=k;G.indexOf("http")!=0&&(G=e.StylesheetsPath+G,e.Status.getProtocol()==="file"&&G.indexOf("/")==0&&(G=G.replace("/","")));var K=document.getElementsByTagName("head")[0],te=document.createElement("link");if(te.type="text/css",te.rel="stylesheet",te.href=G,typeof N=="function"){var X=!1,V=function(){X||(X=!0,N())};te.onload=V,te.onerror=V;var ie=function(){(this.readyState=="complete"||this.readyState=="loaded")&&V()};te.onreadystatechange=ie}if(K.appendChild(te),typeof N=="function"){var R=document.createElement("img");R.onerror=function(){V()},R.src=G}},D=function(){var k=["es","sr"],N=e.I18n.getLanguage();k.indexOf(N)!=-1&&A("language/"+N+".css")},U,F=function(){v()||(U=Date.now(),$("#fancyLoad").trigger("click"))},_=function(k){var N=Date.now()-U;if(N<1250)setTimeout(function(){_(k)},Math.max(0,Math.min(1250-N,1250)));else{var G=!1,K=0;v()&&($.fancybox.close(),G=!0,K=800),typeof k=="function"&&setTimeout(function(){k(G)},K)}},O=function(){$("#fancybox-outer").css("background","rgba(255,255,255,0.9)"),$("#fancybox-wrap").css("margin-top","20px"),$("#fancybox-wrap").css("margin-left","20px")},v=function(){return $("#loading_fancy").is(":visible")},h=function(k,N){var G=document.createElement("img");$(G).addClass("loading_fancy_img"),$(G).attr("src",e.ImagesPath+"lightbox-ico-loading.gif"),N&&N.style&&$(G).addClass(N.style);var K=document.createElement("div");$(K).addClass("loading_fancy"),$(K).append(G),$(k).html(""),$(k).append(K),$(k).addClass("loadingtmpShown")},S=function(k){$(k).find(".loading_fancy_img").parent().remove(),$(k).removeClass("loadingtmpShown")};return{init:w,preloadResources:l,loadScript:T,loadCSS:A,loadLanguageCSS:D,prepareFancyboxForFullLoading:O,startLoading:F,stopLoading:_,startLoadingInContainer:h,stopLoadingInContainer:S}})(SceneMaker),SceneMaker.Slides=(function(e,n,w){var l=function(){},c=function(){var v=e.View.getCurrentView();return typeof v=="undefined"||v===null?e.Screen.getCurrentScreen():v},m=function(){var v=e.View.getCurrentViewNumber();return typeof v!="undefined"?v:e.Screen.getCurrentScreenNumber()},p=function(v){var h=n(v),S=h.attr("id");return h.find("img.slide_background#"+S+"_background")},T=function(v){var h=p(v);return h.length>0?h.attr("src"):w},A=function(v,h){var S=n(v);if(S.attr("type")!==e.Constant.VIEW_CONTENT){var k=p(S);k.attr("src",h)}},D=function(v){return v&&v.tagName==="ARTICLE"||typeof v=="object"&&v.length===1&&v[0].tagName==="ARTICLE"?n(v).attr("type"):typeof v=="object"&&typeof v.type=="string"?v.type:null},U=function(v){var h;return typeof v=="string"?h=v:h=n(v).attr("type"),h===e.Constant.SCREEN},F=function(v){var h;return typeof v=="string"?h=v:h=n(v).attr("type"),h===e.Constant.VIEW_IMAGE||h===e.Constant.VIEW_CONTENT},_=function(v){var h=n("#"+v)[0];if(typeof h!="undefined"){if(document.createEvent){var S=document.createEvent("Event");S.initEvent("slideenter",!0,!0),h.dispatchEvent(S)}else if(document.createEventObject){var S=document.createEventObject();h.fireEvent("onslideenter",S)}}},O=function(v){var h=n("#"+v)[0];if(typeof h!="undefined"){if(document.createEvent){var S=document.createEvent("Event");S.initEvent("slideleave",!0,!0),h.dispatchEvent(S)}else if(document.createEventObject){var S=document.createEventObject();h.fireEvent("onslideleave",S)}}};return{init:l,getCurrentSlide:c,getCurrentSlideNumber:m,getSlideBackgroundImg:p,getSlideBackground:T,changeSlideBackground:A,getSlideType:D,isScreen:U,isView:F,triggerSlideEnterEvent:_,triggerSlideLeaveEvent:O}})(SceneMaker,jQuery),SceneMaker.Screen=(function(e,n,w){var l,c,m=function(){},p=function(){return l},T=function(L){l=L,n.each(l,function(Q,oe){n(oe).attr("slidenumber",Q+1)})},A=function(){var L=n("section.slides > article");T(L),L.removeClass("current"),n(O(c+1)).addClass("current")},D=function(){return l[c]},U=function(){return c+1},F=function(L){_(L-1)},_=function(L){c=L},O=function(L){var Q=L-1;return Q<0||Q>=l.length?null:l[Q]},v=function(){var L=e.Utils.getScreenNumberFromHash();F(L||1)},h=function(){return n("section.slides > article").length},S=function(L){var Q=n(L).children("article.show_in_screen");if(Q.length===1){var oe=Q[0],b=n(oe).attr("id");e.Slides.triggerSlideEnterEvent(b)}},k=function(L){e.View.closeCurrentView()},N=function(L){K(1)},G=function(){K(-1)},K=function(L){var Q=c+L+1;Q=Math.min(Math.max(1,Q),l.length),te(Q)},te=function(L,Q){Q!==!0&&L===U()||L>l.length||L<=0||(!e.Editing&&n.fancybox&&n.fancybox.close(),e.View.closeCurrentView(),X(L))},X=function(L){var Q=L-1;Q<l.length&&Q>=0&&(Y(c+1),_(Q),A(),R(c+1))},V=function(){te(l.length)},ie=function(L,Q){},R=function(L){var Q=e.Screen.getScreenWithNumber(L);Q&&e.Slides.triggerSlideEnterEvent(Q.id)},Y=function(L){var Q=e.Screen.getScreenWithNumber(L);Q&&e.Slides.triggerSlideLeaveEvent(Q.id)};return{init:m,getScreens:p,setScreens:T,updateScreens:A,getCurrentScreen:D,getCurrentScreenNumber:U,setCurrentScreenNumber:F,getScreenWithNumber:O,updateCurrentScreenFromHash:v,getScreensQuantity:h,onEnterScreen:S,onLeaveScreen:k,forwardOneScreen:N,backwardOneScreen:G,goToScreenWithNumber:te,goToLastScreen:V,afterSetupSize:ie,triggerScreenEnterEvent:R,triggerScreenLeaveEvent:Y}})(SceneMaker,jQuery),SceneMaker.View=(function(e,n,w){var l=null,c=function(){},m=function(){return e.Editing?e.Editor.View.getCurrentView():l===null?null:n("#"+l)},p=function(){var _=m();if(typeof _=="undefined"||_===null)return w;var O=n(_).attr("slidenumber");if(typeof O=="string")try{return parseInt(O)}catch(v){return w}},T=function(_,O){return n(_).children("article[slidenumber='"+O+"']")},A=function(_){var O=_.target.id.substring(5);U(O)},D=function(_){var O=m();if(typeof O!="undefined"&&O!==null){var v=n(O).attr("id");if(_===v)return;U(v)}l=_,n("#"+_).removeClass("hide_in_screen"),n("#"+_).addClass("show_in_screen"),e.Slides.triggerSlideEnterEvent(_)},U=function(_){l=null,n("#"+_).removeClass("show_in_screen"),n("#"+_).addClass("hide_in_screen"),e.Slides.triggerSlideLeaveEvent(_)},F=function(){var _=m();typeof _!="undefined"&&_!==null&&U(n(_).attr("id"))};return{init:c,getCurrentView:m,getCurrentViewNumber:p,getViewWithNumber:T,onCloseViewClicked:A,openView:D,closeView:U,closeCurrentView:F}})(SceneMaker,jQuery),SceneMaker.Marker=(function(e,n,w){var l,c,m,p,T=function(){l={},c={},m={},p=e.ImagesPath+"hotspotgallery/hotspot.png"},A=function(){return p},D=function(N){var G=n("#"+N.id);if(typeof N.background=="string"){var K=N.id+"_background",te=n("<img>",{id:K,class:"slide_background",src:N.background});G.append(te)}if(Array.isArray(N.hotzones)&&N.hotzones.length>0)for(j in N.hotzones)F(G,N.hotzones[j]);if(Array.isArray(N.hotspots)&&N.hotspots.length>0)for(i in N.hotspots)U(G,N.hotspots[i]);typeof N.caption!="undefined"&&e.Caption.drawCaption(G,N.caption)},U=function(N,G){if(!(!G||!G.id)){var K=10;if(G.x&&G.y&&!(!G.width||G.width<=0)&&!(!G.height||G.height<=0)){typeof G.image!="string"&&(G.image=p);var te=parseFloat(G.rotationAngle);(typeof te!="number"||isNaN(te)||te<0||te>360)&&(te=0);var X="",V=G.visibility!=="hidden";V===!1&&(X+=" hotspot_hidden");var ie=G.cursorVisibility==="pointer";ie===!0&&(X+=" hotspot_cursor_pointer");var R=e.Slides.getSlideBackgroundImg(N),Y=n("<img>",{src:G.image,class:"hotspot"+X,id:G.id,rotationAngle:te,css:{position:"absolute",left:G.x+"%",top:G.y+"%",width:G.width+"%",height:G.height+"%",transform:"rotate("+te+"deg)"}}).appendTo(R.parent());if(Array.isArray(G.actions)&&G.actions.length>0){Y.addClass("hotspot_with_actions"),c[G.id]=G,Y.on("click",function(){S(G.id)});for(i in G.actions)e.Actions.addActionToHotspot(Y,G.actions[i])}}}},F=function(N,G){if(!(!G||!G.id)&&Array.isArray(G.points)){var K=N.attr("id"),te=G.id,X=O(K),V=v(te,G.points);X.addAnnotation(V),_(V.id,function(ie){if(G.cursorVisibility==="pointer"&&n(ie).attr("hotzone_cursor_visibility",G.cursorVisibility),G.enabled===!1?n(ie).attr("hotzone_enabled","false"):n(ie).attr("hotzone_enabled","true"),Array.isArray(G.actions)&&G.actions.length>0){m[te]=G;for(i in G.actions)e.Actions.addActionToHotzone(ie,G.actions[i])}})}},_=function(N,G){var K,te=Date.now();function X(){var V=h(N);return V.length>0?(clearInterval(K),G(V),!0):(Date.now()-te>=1e3&&clearInterval(K),!1)}setTimeout(function(){X()||(K=setInterval(X,200))},0)},O=function(N){if(typeof l[N]=="undefined"&&(l[N]={}),typeof l[N].annotator!="undefined")return l[N].annotator;var G=e.Slides.getSlideBackgroundImg(n("#"+N)),K=Annotorious.createImageAnnotator(G.attr("id"),{drawingEnabled:!1,userSelectAction:"SELECT",style:{fill:"#dddddd00",fillOpacity:0,stroke:"#00000000",strokeWidth:1}});return K.on("selectionChanged",function(te){Array.isArray(te)&&te.length===1&&k(te[0].id)}),l[N].annotator=K,K},v=function(N,G){var K=G.map(([L])=>L),te=G.map(([,L])=>L),X=Math.min(...K),V=Math.max(...K),ie=Math.min(...te),R=Math.max(...te),Y={id:N,target:{selector:{type:"POLYGON",geometry:{bounds:{minX:X,minY:ie,maxX:V,maxY:R},points:G}}}};return Y},h=function(N){return n("g.[data-id='"+N+"']")},S=function(N){e.Actions.performActions(c[N].actions,N)},k=function(N){var G=h(N);n(G).attr("hotzone_enabled")!=="false"&&e.Actions.performActions(m[N].actions,m[N].idAlias)};return{init:T,getDefaultHotspotImg:A,getHotzoneDOM:h,drawSlideWithMarkers:D,createAnnotationFromPointsArray:v}})(SceneMaker,jQuery),SceneMaker.FullScreen=(function(e,n,w){var l,c,m,p=function(){T(),A()},T=function(){try{var X=e.Status.getContainer();if(typeof X!="undefined"){if(typeof n(X).attr("allowfullscreen")=="undefined")n(X).attr("allowfullscreen","true"),n(X).attr("webkitAllowFullScreen","true"),n(X).attr("mozallowfullscreen","true");else if(n(X).attr("allowfullscreen")==="false"){n(X).removeAttr("allowfullscreen"),n(X).removeAttr("webkitAllowFullScreen"),n(X).removeAttr("mozallowfullscreen");return}var V=te();e.Status.getContainerType()==="OBJECT"&&(n(X).addClass("ScreenMakerFS"),n(V).addClass("ScreenMakerFS"),n(window.parent.document).find("head").append("<style>.ScreenMakerFS:full-screen, :full-screen > object.ScreenMakerFS {width: 100% !important;height: 100% !important;}</style>"),n(window.parent.document).find("head").append("<style>.ScreenMakerFS:-webkit-full-screen, :-webkit-full-screen > object.ScreenMakerFS {width: 100% !important;height: 100% !important;}</style>"),n(window.parent.document).find("head").append("<style>.ScreenMakerFS:-moz-full-screen, :-moz-full-screen > object.ScreenMakerFS {width: 100% !important;height: 100% !important;}</style>"))}}catch(ie){}},A=function(){k()?n("#page-fullscreen").removeClass("fsoff").addClass("fson"):n("#page-fullscreen").removeClass("fson").addClass("fsoff")},D=function(){var X=document.createElement("div");return!!(X&&(X.requestFullScreen||X.mozRequestFullScreen||X.webkitRequestFullScreen||X.msRequestFullscreen))},U=function(){return!e.Editing&&F()},F=function(){return e.Status.getDevice().features.fullscreen&&_(K())},_=function(X){return X.fullscreenEnabled||X.mozFullScreenEnabled||X.webkitFullscreenEnabled||X.msFullscreenEnabled},O=function(){n(document).on("click","#page-fullscreen",v),n(K()).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(X){c=l,l=G(K()),m=new Date,A()})},v=function(){var X=K(),V=te();k()?S(X):h(X,V)},h=function(X,V){V.requestFullscreen?V.requestFullscreen():V.mozRequestFullScreen?V.mozRequestFullScreen():V.webkitRequestFullscreen?(V.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT),setTimeout(function(){X.webkitCurrentFullScreenElement||V.webkitRequestFullScreen()},250)):V.msRequestFullscreen&&V.msRequestFullscreen()},S=function(X){X.exitFullscreen?X.exitFullscreen():X.cancelFullScreen?X.cancelFullScreen():X.mozCancelFullScreen?X.mozCancelFullScreen():X.webkitExitFullscreen?X.webkitExitFullscreen():X.webkitCancelFullScreen?X.webkitCancelFullScreen():X.msExitFullscreen&&X.msExitFullscreen()},k=function(){return e.Status.getContainerType()==="OBJECT"?N():n(G(K())).is("html")},N=function(){var X=G(K());return typeof X!="undefined"&&X!==null},G=function(X){return X.fullscreenElement||X.mozFullScreenElement||X.webkitFullscreenElement||X.msFullscreenElement},K=function(){return e.Status.getContainerType()=="OBJECT"?window.parent.document:document},te=function(){return e.Status.getContainerType()==="OBJECT"?e.Status.getContainer().parentElement:document.documentElement};return{init:p,isFullScreenSupported:D,canFullScreen:U,enableFullScreen:O,isFullScreen:k}})(SceneMaker,jQuery),SceneMaker.Editor=(function(e,n,w){var l,c,m=!1,p,T,A,D,U=e.Constant.NONE,F=function(){_(e.getOptions())},_=function(Pe){n("#waiting_overlay").show(),n("body").addClass("SceneMakerBody"),e.Editing=!0,e.Debugging.init(Pe);var We;Pe?(We=Pe.scene,l=Pe,Pe.configuration&&e.Configuration&&e.Configuration.init(Pe.configuration)):l={},We&&(m=!0),e.Utils.init(),e.I18n.init(l,We),e.Status.init(function(){O(Pe,We)})},O=function(Pe,We){if(e.Utils.Loader.loadLanguageCSS(),e.I18n.translateUI(),e.Object.init(),e.Editor.Dummies.init(),e.EventsNotifier.init(),e.Screen.init(),e.Editor.Screen.init(),e.View.init(),e.Editor.View.init(),e.Marker.init(),e.Editor.Marker.init(),e.Editor.Actions.init(),e.Editor.Caption.init(),e.Renderer.init(),e.Slides.init(),e.User.init(Pe),e.Video.init(),e.Audio.init(),e.Editor.Settings.init(),m){var We=e.Utils.fixScene(We);if(We===null){n("#waiting_overlay").hide(),e.Utils.showPNotValidDialog();return}c=We,e.Editor.Settings.loadSceneSettings(We),e.Editor.Renderer.init(We),te(),v(Pe,We)}else e.Editor.Settings.loadSceneSettings(),v(Pe,We)},v=function(Pe,We){if(m){var xt=e.Utils.getScreenNumberFromHash();xt?e.Screen.setCurrentScreenNumber(xt):e.Screen.setCurrentScreenNumber(1)}if(e.Screen.updateScreens(),e.Editor.Thumbnails.drawScreenThumbnails(function(){e.Editor.Thumbnails.selectThumbnail(e.Screen.getCurrentScreenNumber()),e.Editor.Thumbnails.moveThumbnailsToScreenWithNumber(e.Screen.getCurrentScreenNumber())}),m&&n(".object_wrapper").hide(),e.Editor.Text.init(),e.Editor.Image.init(),e.Editor.Video.init(),e.Editor.Audio.init(),e.Editor.Object.init(),e.Editor.Thumbnails.init(),e.Editor.Preview.init(),e.Editor.Tools.init(),e.Editor.Clipboard.init(),e.Editor.Events.init(),e.Editor.Utils.Loader.unloadAllObjects(),e.Screen.getCurrentScreenNumber()>0&&e.Slides.triggerSlideEnterEvent(n(e.Screen.getCurrentScreen()).attr("id")),!m){var Et=e.Editor.Dummies.getDummy(e.Constant.SCREEN,{slideNumber:1});e.Editor.Screen.addScreen(Et),e.Screen.goToScreenWithNumber(1)}m||e.Editor.Settings.displaySettings(),window.focus(),n("#waiting_overlay").hide()},h=function(Pe){var We=e.Screen.getCurrentScreen();if(e.Slides.isScreen(We)){var xt=n(Pe.currentTarget).attr("type"),Et=e.Editor.Dummies.getDummy(xt,{screenId:n(We).attr("id"),slideNumber:n(We).find("article").length+1});e.Editor.View.addView(We,Et),n.fancybox.close()}},S=function(Pe){n(this).removeClass("editable"),f(n(this));var We=n("#menuselect").clone();n(We).removeAttr("id"),n(We).find("a").css("display","none").addClass("thumb_shown"),e.Editor.Tools.hideZoneToolTip(n(this).find(".zone_tooltip")),n(this).append(We),e.Editor.Events.addZoneThumbsEvents(this)},k=function(){f(n(this).parent());var Pe={};Pe.width=375,Pe.height=135;var We=me().attr("type");We==="audio"&&(We="video"),Pe.notificationIconSrc=e.ImagesPath+"thumbs/"+We+".png",Pe.text=e.I18n.getTrans("i.AreYouSureContent");var xt={};xt.text=e.I18n.getTrans("i.no"),xt.callback=function(){n.fancybox.close()};var Et={};Et.text=e.I18n.getTrans("i.delete"),Et.callback=function(){var le=me();le.html(""),le.removeAttr("type"),le.addClass("editable"),e.Editor.Tools.addTooltipToZone(le),G(null),e.Editor.Slides.updateThumbnail(e.Slides.getCurrentSlide()),n.fancybox.close()},Pe.buttons=[xt,Et],e.Utils.showDialog(Pe)},N=function(Pe){G(n(this)),Pe.stopPropagation(),Pe.preventDefault()},G=function(Pe){f(Pe),te(),K(Pe),e.Editor.Tools.loadToolsForZone(Pe)},K=function(Pe){n(Pe).removeClass("zoneUnselected"),n(Pe).addClass("zoneSelected")},te=function(Pe){Pe?(n(Pe).removeClass("zoneSelected"),n(Pe).addClass("zoneUnselected")):(n(".zoneSelected").addClass("zoneUnselected"),n(".zoneSelected").removeClass("zoneSelected"))},X=function(Pe){var We=n(Pe.target),xt=n(We).parent();if(!n(We).hasClass("noSelectableElement")){if(n("#fancybox-content").is(":visible")||n(We).is("polygon")||n(xt).hasClass("selectable")||n(xt).hasClass("preventNoselectable")||jQuery.contains(n("#toolbar_wrapper")[0],Pe.target)||Pe.target.id==="toolbar_wrapper")return;var Et=!1;if(n(".cke_dialog").each(function(le,Oe){if(Oe&&jQuery.contains(Oe,Pe.target))return Et=!0,!1}),Et)return}V()},V=function(){e.Editor.Tools.cleanZoneTool(me()),f(null),te()},ie=function(Pe){Pe.append("<div class='delete_content'></div>")},R=function(Pe){var We=n(Pe.target);Pe.stopPropagation(),e.Slides.isScreen(We)?e.Editor.Screen.onEnterScreen(We):(e.Editor.Utils.Loader.loadObjectsInEditorSlide(We),setTimeout(function(){n(We).find(".object_wrapper").show()},500)),e.Editor.Thumbnails.selectThumbnail(e.Screen.getCurrentScreenNumber()),V(),e.Editor.Tools.loadToolsForSlide(We)},Y=function(Pe){var We=n(Pe.target);Pe.stopPropagation(),e.Slides.isScreen(We)?e.Editor.Screen.onLeaveScreen(We):(e.Editor.Utils.Loader.unloadObjectsInEditorSlide(We),n(".object_wrapper").hide())},L=function(){var Pe={},We=e.Utils.getOptions();return Pe=e.Editor.Settings.getSettings(),We&&typeof We.erId=="number"&&(Pe.erId=We.erId),Pe.screens=[],e.Editor.Utils.Loader.loadAllObjects(),n(".object_wrapper").show(),n("section.slides > article").each(function(xt,Et){var le={};e.Slides.isScreen(Et)&&(e.Utils.addTempShown(Et),le=e.Editor.Marker.saveSlideWithMarkers(Et),le.views=[],n(Et).find("article").each(function(Oe,ft){var Ct=Q(ft,Pe,!0);le.views.push(Ct)}),e.Utils.removeTempShown(Et),Pe.screens.push(le))}),e.Editor.Utils.Loader.unloadAllObjects(),e.Editor.Utils.Loader.loadObjectsInEditorSlide(e.Screen.getCurrentScreen()),e.Debugging.log(`

Scene Maker save the following scene:
`),e.Debugging.log(JSON.stringify(Pe)),Pe},Q=function(Pe,We){switch(n(Pe).attr("type")){case e.Constant.VIEW_IMAGE:return oe(Pe,We);case e.Constant.VIEW_CONTENT:return b(Pe,We)}},oe=function(Pe){e.Utils.addTempShown(Pe);var We=e.Editor.Marker.saveSlideWithMarkers(Pe);return e.Utils.removeTempShown(Pe),We},b=function(Pe,We){return slide={},slide.id=n(Pe).attr("id"),slide.type=n(Pe).attr("type"),slide.elements=[],e.Utils.addTempShown(Pe),n(Pe).find("div.view_content_zone").each(function(xt,Et){var le={};le.id=n(Et).attr("id"),le.type=n(Et).attr("type");var Oe=n(Et).attr("elSettings");if(typeof Oe=="string")try{le.settings=JSON.parse(Oe)}catch(st){}if(le.type==e.Constant.TEXT){var ft=e.Editor.Text.getCKEditorFromZone(Et);ft!==null?le.body=ft.getData():le.body=""}else if(le.type==e.Constant.IMAGE)le.body=n(Et).find("img").attr("src"),le.style=e.Editor.Utils.getStylesInPercentages(n(Et),n(Et).find("img")),n(Et).attr("hyperlink")&&(le.hyperlink=n(Et).attr("hyperlink"));else if(le.type==e.Constant.VIDEO){var Ct=n(Et).find("video"),Rt=n(Ct).attr("poster");typeof Rt=="string"&&(le.poster=Rt),le.style=e.Editor.Utils.getStylesForFitContent();var Wt="";n(Ct).find("source").each(function(st,pt){st!==0&&(Wt=Wt+",");var qt=e.Utils.removeParamFromUrl(n(pt).attr("src"),"timestamp"),Mt=typeof n(pt).attr("type")!="undefined"?', "type": "'+n(pt).attr("type")+'"':"";Wt=Wt+'{"src":"'+qt+'"'+Mt+"}"}),Wt="["+Wt+"]",le.sources=Wt}else if(le.type==e.Constant.AUDIO){var nn=n(Et).find("audio");le.style=e.Editor.Utils.getStylesForFitContent();var Wt="";n(nn).find("source").each(function(pt,qt){pt!==0&&(Wt=Wt+",");var Mt=e.Utils.removeParamFromUrl(n(qt).attr("src"),"timestamp"),ue=typeof n(qt).attr("type")!="undefined"?', "type": "'+n(qt).attr("type")+'"':"";Wt=Wt+'{"src":"'+Mt+'"'+ue+"}"}),Wt="["+Wt+"]",le.sources=Wt}else if(le.type===e.Constant.OBJECT){var rn=n(Et).find(".object_wrapper")[0],Kt=n(rn).children()[0],Vt=n(Kt).clone();Vt.removeAttr("style");var Qt=e.Utils.removeParamFromUrl(Vt.attr("src"),"escapp_preview");Vt.attr("src",Qt),le.body=e.Utils.getOuterHTML(Vt),le.style=e.Editor.Utils.getStylesForFitContent(),le.subtype=e.Object.getObjectInfo(Vt).type}else le.type;slide.elements.push(le)}),e.Utils.removeTempShown(Pe),slide},Le=function(Pe,We,xt,Et){if(e.Debugging.isDevelopping()){p=JSON.stringify(Pe),setTimeout(function(){xt()},5e3);return}var le=typeof p=="undefined"&&!m,Oe;le?Oe="POST":Oe="PUT";var ft={};typeof e.User.getToken()!="undefined"&&(ft.authenticity_token=e.User.getToken());var Ct=JSON.stringify(Pe);ft["scene[json]"]=Ct,n.ajax({type:Oe,url:e.UploadScenePath,data:ft,success:function(Rt){p=Ct,le&&typeof Rt!="undefined"&&Rt.uploadPath&&(e.UploadScenePath=e.Utils.checkUrlProtocol(Rt.uploadPath),e.Status.getDevice().features.historypushState&&window.top.history.replaceState("","",e.UploadScenePath)),typeof xt=="function"&&xt(Rt)},error:function(Rt,Wt){typeof Et=="function"&&Et()}})},ce=function(){return l},J=function(){var Pe=me();if(typeof Pe!="undefined"&&Pe!==null)return"ZONE";var We=e.Editor.Marker.getCurrentHotspot();if(typeof We!="undefined"&&We!==null)return"HOTSPOT";var xt=e.Editor.Marker.getCurrentHotzoneId();return typeof xt!="undefined"&&xt!==null?"HOTZONE":"NONE"},me=function(){return T||null},f=function(Pe){n(Pe).attr("id")!=n(T).attr("id")&&(A=T,T=Pe)},Re=function(){return A||null},je=function(){return D},Me=function(Pe){D=Pe},ot=function(Pe){return Pe&&n(Pe).find(".delete_content").length===0},Tt=function(){return U},Ue=function(Pe){U=Pe},et=function(){try{var Pe;if(typeof p!="undefined")Pe=p;else if(typeof c!="undefined")Pe=JSON.stringify(c);else return!0;var We=e.Editor.saveScene();return Pe!==JSON.stringify(We)}catch(xt){return!0}};return{init:F,getOptions:ce,getCurrentElementType:J,getCurrentArea:me,setCurrentArea:f,selectContentZone:G,getLastArea:Re,cleanArea:V,getCurrentContainer:je,setCurrentContainer:Me,getContentAddMode:Tt,setContentAddMode:Ue,isZoneEmpty:ot,saveScene:L,sendScene:Le,onSlideEnterEditor:R,onSlideLeaveEditor:Y,onViewThumbClicked:h,onEditableClicked:S,onSelectableClicked:N,onNoSelectableClicked:X,onDeleteItemClicked:k,addDeleteButton:ie,hasSceneChanged:et}})(SceneMaker,jQuery),SceneMaker.Editor.Slides=(function(e,n,w){var l=function(){var F=e.Slides.getCurrentSlide();e.Slides.isView(F)?e.Editor.View.removeView(F):e.Editor.Screen.removeScreen(F)},c=function(F){var _=e.Editor.Thumbnails.getThumbnailForSlide(F),O=e.Editor.Thumbnails.getThumbnailURLForSlide(F);n(_).error(function(v){m(F,_,e.Editor.Thumbnails.getDefaultThumbnailURLForSlide(F))}),m(F,_,O)},m=function(F,_,O){e.Slides.isScreen(F)&&n("#screen_selected > img").attr("src",O),n(_).attr("src",O)},p=function(){return!(n(".wysiwygInstance").is(":focus")||n("#fancybox-content").is(":visible")||n("input").is(":focus")||e.Editor&&e.Editor.getCurrentArea()!==null)},T=function(F,_){var O=n(F);if(O.attr("type")!==e.Constant.VIEW_CONTENT){var v=e.Slides.getSlideBackgroundImg(O);if(v.length===0){var h=O.attr("id")+"_background";v=n("<img>",{id:h,class:"slide_background"}),O.append(v)}v.attr("src",_),n(F).find("div.change_bg_button").hide(),e.Editor.Slides.updateThumbnail(F),e.Editor.Tools.loadToolsForSlide(F)}n.fancybox.close()},A=function(F){var _={};return n(F).find("div[type='text']").each(function(O,v){var h=n(v).attr("id"),S=e.Editor.Text.getCKEditorFromZone(v);h&&S!==null&&(_[h]=S.getData())}),_},D=function(F,_,O){O!==!0&&(O=!1);var v=n(F).find("article[type='"+e.Constant.VIEW_CONTENT+"']");e.Utils.addTempShown(F),e.Utils.addTempShown(v),n(F).find("div[type='text']").each(function(h,S){var k;if(O?k=n(S).attr("copyid"):k=n(S).attr("id"),k&&_[k]){var N=_[k];e.Editor.Text.launchTextEditor({},n(S),N)}}),e.Utils.removeTempShown(v),e.Utils.removeTempShown(F)},U=function(F){n(F).find("div[type='text'],div.wysiwygTextArea").each(function(_,O){n(O).html("")})};return{removeCurrentSlide:l,updateThumbnail:c,isSlideFocused:p,setSlideBackground:T,copyTextAreasOfSlide:A,loadTextAreasOfSlide:D,cleanTextAreasOfSlide:U}})(SceneMaker,jQuery),SceneMaker.Editor.Dummies=(function(e,n){var w=function(){},l=function(_,O){switch(_){case e.Constant.SCREEN:return typeof O.screenId=="undefined"&&(O.screenId=e.Utils.getId("article")),c(O);case e.Constant.VIEW_IMAGE:return typeof O.viewId=="undefined"&&(O.viewId=e.Utils.getId(O.screenId+"_article")),m(O);case e.Constant.VIEW_CONTENT:return typeof O.viewId=="undefined"&&(O.viewId=e.Utils.getId(O.screenId+"_article")),p(O)}},c=function(_){var O="<article id='article_id_to_change' type='"+e.Constant.SCREEN+"' slidenumber='slidenumber_to_change'><div class='change_bg_button'></div></article>";return F(O,_.slideNumber,_.screenId)},m=function(_){var O="<article id='article_id_to_change' type='"+e.Constant.VIEW_IMAGE+"' slidenumber='slidenumber_to_change'><div class='change_bg_button'></div></article>";return F(O,_.slideNumber,_.viewId)},p=function(_){var O="<article id='article_id_to_change' type='"+e.Constant.VIEW_CONTENT+"' slidenumber='slidenumber_to_change'><div id='div_id_to_change' class='view_content_zone editable selectable'></div></article>";return F(O,_.slideNumber,_.viewId,_.zoneIds)},T=function(_,O){switch(_.type){case e.Constant.SCREEN:return A(_,O);case e.Constant.VIEW_IMAGE:return D(_,O);case e.Constant.VIEW_CONTENT:return U(_,O)}},A=function(_,O){return O.screenId=_.id,c(O)},D=function(_,O){return O.viewId=_.id,m(O)},U=function(_,O){O.viewId=_.id;var v=[];for(el in _.elements)v.push(_.elements[el].id);O.zoneIds=v;var h=p(O);return h=h.replace(/editable /g,""),h},F=function(_,O,v,h){var S=_,k=0;if(typeof v!="undefined")e.Utils.registerId(v);else return;for(S.indexOf("article_id_to_change")!=-1&&(S=S.replace("article_id_to_change",v)),S.indexOf("slidenumber_to_change")!=-1&&(S=S.replace("slidenumber_to_change",O));S.indexOf("div_id_to_change")!=-1;){if(h){var N=h[k];k++,e.Utils.registerId(N)}else var N=e.Utils.getId(v+"_zone");S=S.replace("div_id_to_change",N)}return S};return{init:w,getDummy:l,getScaffoldForSlide:T}})(SceneMaker),SceneMaker.Editor.Renderer=(function(e,n,w){var l,c=function(_){l=!1,m(_)},m=function(_){l=!0;for(var O=_.screens,v=0;v<O.length;v++)p(O[v]);l=!1},p=function(_){var O={};O.slideNumber=e.Screen.getScreensQuantity()+1,O.screenId=_.id.toString();var v=e.Editor.Dummies.getScaffoldForSlide(_,O);if(v){e.Editor.Screen.appendScreen(v),e.Screen.updateScreens(),e.Screen.goToLastScreen();var h=n(v).attr("id"),S=n("#"+h),k=_.views;if(k)for(var N=k.length,G=0;G<N;G++){var K=k[G];T(K,{screenDOM:S,slideNumber:G+1})}e.Editor.Marker.drawSlideWithMakers(_,S)}},T=function(_,O){_.type===e.Constant.VIEW_CONTENT?U(_,O):_.type===e.Constant.VIEW_IMAGE&&D(_,O)},A=function(_,O){var v=e.Editor.Dummies.getScaffoldForSlide(_,{slideNumber:O.slideNumber});e.Editor.View.appendView(O.screenDOM,v)},D=function(_,O){A(_,O);var v=n("#"+_.id);e.Editor.Marker.drawSlideWithMakers(_,v)},U=function(_,O){A(_,O);var v=n("#"+_.id);e.Utils.addTempShown(v);for(var h=_.elements.length,S=0;S<h;S++){var k=_.elements[S],N=k.id,G=n("div#"+N);if(G.length!==0){if(k.settings){var K=JSON.stringify(k.settings);n(G).attr("elSettings",K)}if(k.type===e.Constant.TEXT)e.Editor.Text.launchTextEditor({},G,k.body);else if(k.type===e.Constant.IMAGE)e.Editor.Image.drawImage(k.body,G,k.style,k.hyperlink,k.options);else if(k.type===e.Constant.VIDEO){var te=[];typeof k.poster=="string"&&(te.poster=k.poster),te.autoplay=k.autoplay,e.Editor.Video.HTML5.drawVideo(e.Video.HTML5.getSourcesFromJSON(k),te,G,k.style)}else if(k.type===e.Constant.AUDIO){var te=[];te.autoplay=k.autoplay,e.Editor.Audio.HTML5.drawAudio(e.Audio.HTML5.getSourcesFromJSON(k),te,G,k.style)}else k.type===e.Constant.OBJECT&&e.Editor.Object.drawObject(k.body,{area:G,style:k.style});var X=!0;e.Editor.isZoneEmpty(G)&&(X=!1,n(G).addClass("editable")),e.Editor.Tools.addTooltipToZone(G,X)}}e.Utils.removeTempShown(v)},F=function(){return l};return{init:c,isRendering:F}})(SceneMaker,jQuery),SceneMaker.Editor.Carousel=(function(e,n,w){var l=function(h,S){if(h){var k=1,N=5,G=null,K="",te="",X=null,V=790,ie=!1,R=!0,Y=!1,L=null;S&&(S.rows&&(k=S.rows),S.rowItems&&(N=S.rowItems),S.scrollItems&&(G=S.scrollItems),S.styleClass&&(K=S.styleClass),S.titleClass&&(te=S.titleClass),S.callback&&(X=S.callback),S.width&&(V=S.width),S.startAtLastElement&&(ie=S.startAtLastElement),typeof S.pagination=="boolean"&&(R=S.pagination),typeof S.sortable=="boolean"&&(Y=S.sortable),S.afterCreateCarruselFunction&&(L=S.afterCreateCarruselFunction));var Q=k>1,oe="";if(K&&(oe="_"+K),G||(G=N),Q)var b="multiple_row"+oe;else var b="single_row"+oe;var Le=n("#"+h);Le.attr("class","image_carousel image_carousel_"+b),Le.removeAttr("id");var ce=document.createElement("div");n(ce).html(n(Le).html()),n(Le).html(""),ce.setAttribute("id",h);var J=document.createElement("div");J.setAttribute("class","clearfix");var me=document.createElement("a"),f=document.createElement("a");if(me.setAttribute("class","prev"),f.setAttribute("class","next"),n(me).addClass("prev_"+b),n(f).addClass("next_"+b),me.setAttribute("href","#"),f.setAttribute("href","#"),me.setAttribute("id","carousel_prev"+h),f.setAttribute("id","carousel_next"+h),n(me).html("<span>prev</span>"),n(f).html("<span>next</span>"),n(Le).append(J),n(Le).append(me),n(Le).append(f),R){var Re=document.createElement("div");Re.setAttribute("class","pagination pagination_"+b),Re.setAttribute("id","carousel_pag"+h),n(Le).append(Re)}if(n(ce).children().addClass("carousel_element_"+b),n(ce).children().each(function(Me,ot){n(ot).children().addClass("carousel_element_"+b)}),X&&typeof X=="function"&&n(ce).children().click(function(Me){X(Me)}),Q)c(h,Le,ce,k,N,G,b,V,L);else{if(n(Le).prepend(ce),ie)var je=n(ce).children().length-N+1;else var je=0;T(h,h,k,[],N,G,V,je,function(){R&&U(h),Y&&n("#"+h).sortable(),typeof L=="function"&&L()})}}},c=function(h,S,k,N,G,K,te,X,V){var ie=[],R=0,Y;for(Y=0;Y<N;Y++)window[k.id+"_row"+Y]=document.createElement("div"),window[k.id+"_row"+Y].setAttribute("id",k.id+"_row"+Y),window[k.id+"_row"+Y].setAttribute("class","carousel_wrapper_"+te),Y!=0&&ie.push(k.id+"_row"+Y);for(n(k).children().each(function(Q,oe){n(window[k.id+"_row"+Q%N]).append(oe)}),Y=N-1;Y>=0;Y--)if(n(S).prepend(window[k.id+"_row"+Y]),Y==0){var L=k.id+"_row"+Y;T(L,h,N,ie,G,K,X,null,function(){R++,m(R,N,V)})}else p(k.id+"_row"+Y,G,K,X,function(){R++,m(R,N,V)})},m=function(h,S,k){h===S&&typeof k=="function"&&k()},p=function(h,S,k,N,G){n("#"+h).carouFredSel({auto:!1,circular:!1,infinite:!1,width:N,scroll:{items:k,fx:"scroll",duration:1e3,timeoutDuration:2e3},items:{visible:{min:S,max:S}},onCreate:G})},T=function(h,S,k,N,G,K,te,X,V){if(X||(X=0),n("#"+h).carouFredSel({circular:!1,infinite:!1,auto:!1,width:te,scroll:{items:K,duration:1e3,timeoutDuration:2e3},items:{visible:{min:G,max:G},start:X},prev:{button:"#carousel_prev"+S},next:{button:"#carousel_next"+S},pagination:"#carousel_pag"+S,onCreate:V}),N){var ie="";n(N).each(function(R,Y){R!=0&&(ie=ie+", "),ie=ie+"#"+Y}),n("#"+h).trigger("configuration",["synchronise",ie])}n("#"+h).attr("rows",k)},A=function(h){n("#"+h).html("");var S=h+"_row0";if(n("#"+S).attr("rows")){var k=n("#"+S).attr("rows"),N;for(N=0;N<k;N++)D(h+"_row"+N);n("#"+S).attr("id",h)}else D(h)},D=function(h){var S=n("#"+h).parent().parent();n(S).hasClass("image_carousel")&&(n(S).removeClass(),n(S).html(""),n(S).attr("id",h))},U=function(h){var S=n("#"+h).parent().parent();n(S).hasClass("image_carousel")&&n(S).find(".pagination").attr("style","")},F=function(h,S){n(S).is("IMG")&&(S=n(S).parent()),n("#"+h).trigger("slideTo",S)},_=function(h,S){n("#"+h).trigger("next",S)},O=function(h,S){n("#"+h).trigger("prev",S)},v=function(h,S,k){n("#"+h).trigger("insertItem",[S,k])};return{createCarousel:l,cleanCarousel:A,goToElement:F,advanceCarousel:_,backCarousel:O,insertElement:v}})(SceneMaker,jQuery),SceneMaker.Editor.Scrollbar=(function(e,n,w){var l=function(p,T){if(p){var A=null,D=!1;T&&(T.callback&&(A=T.callback),T.horizontalScroll&&(D=T.horizontalScroll));var U=n("#"+p);n(U).mCustomScrollbar({scrollInertia:0,autoDraggerLength:!0,horizontalScroll:D}),n(U).find(".mCSB_container").css("margin-right","5px"),setTimeout(function(){n(U).mCustomScrollbar("update"),setTimeout(function(){T&&T.scrollTop===!0||n(U).mCustomScrollbar("scrollTo","bottom"),typeof A=="function"&&A()},150)},100)}},c=function(p){var T=n("#"+p);n(T).html(""),n(T).removeClass()},m=function(p,T){var A=n(T).attr("id"),D=typeof A=="string";if(!D){var U=e.Utils.getId("tmp");n(T).attr("id",U),A=U}n("#"+p).mCustomScrollbar("scrollTo","#"+A),D||n(T).removeAttr("id",U)};return{createScrollbar:l,cleanScrollbar:c,goToElement:m}})(SceneMaker,jQuery),SceneMaker.Editor.Video=(function(e,n,w){var l=null,c=e.Constant.NONE,m="tab_video_from_url_content",p=function(){e.Editor.Video.HTML5.init();var O=n("#"+m).find("input");n("#tab_video_from_url_content .previewButton").click(function(v){e.Validator.validateObject(n(O).val())?(l=e.Editor.Utils.autocompleteUrls(n(O).val()),e.Editor.Object.drawPreview("tab_video_from_url_content",l)):l=null})},T=function(O){n("#tab_video_from_url_content").find("input").val(""),e.Editor.Object.resetPreview("tab_video_from_url_content")},A=function(O){O&&(l=O,D())},D=function(){switch(c){case e.Constant.EVIDEO:e.Editor.EVideo.onVideoSelected(l);break;default:e.Editor.Object.drawPreviewObject(l)}c=e.Constant.NONE},U=function(){return c},F=function(O){switch(e.Editor.Utils.hideNonDefaultTabs(),O){case e.Constant.NONE:break;case e.Constant.EVIDEO:n("#tab_audio_soundcloud").hide();break}c=O},_=function(){var O="tab_video_from_url";return e.Configuration.getConfiguration().Youtube&&(O="tab_video_youtube"),O};return{init:p,onLoadTab:T,addVideo:A,addContent:D,getAddContentMode:U,setAddContentMode:F,getDefaultTab:_}})(SceneMaker,jQuery),SceneMaker.Editor.Audio=(function(e,n,w){var l=function(){e.Editor.Audio.HTML5.init()};return{init:l}})(SceneMaker,jQuery),SceneMaker.Editor.Audio.HTML5=(function(e,n,w){var l=function(){},c=function(D){var U=e.Audio.HTML5.getSources(D);if(U.length>0){var F={};F.timestamp=!0,p(U,F)}},m=function(D){var U={};U.timestamp=!0,p([{src:D}],U)},p=function(D,U,F,_){var O;F?O=F:O=e.Editor.getCurrentArea(),O.attr("type","audio");var v=!1;U&&U.autoplay&&(v=U.autoplay);var h=document.createElement("audio");h.setAttribute("class","view_content_audio"),h.setAttribute("controls","controls"),h.setAttribute("preload","metadata"),h.setAttribute("autoplayonslideenter",v),_&&h.setAttribute("style",_),n(O).html(""),n(O).append(h),e.Audio.HTML5.addSourcesToAudioTag(D,h,{timestamp:!0}),e.Editor.addDeleteButton(n(O)),e.Editor.Tools.loadToolsForZone(O)},T=function(D,U){var F=e.Audio.HTML5.getSources(D);if(F.length>0){var U=U||{};return e.Audio.HTML5.renderAudioFromSources(F,U)}},A=function(D,U){return e.Audio.HTML5.renderAudioFromSources([{src:D}],U)};return{init:l,drawAudioWithWrapper:c,drawAudioWithUrl:m,drawAudio:p,renderAudioFromWrapper:T,renderAudioWithURL:A}})(SceneMaker,jQuery),SceneMaker.Editor.Video.HTML5=(function(e,n,w){var l=function(){},c=function(D){var U=e.Video.HTML5.getSources(D);if(U.length>0){var F={},_=e.Video.HTML5.getPoster(D);typeof _=="string"&&(F.poster=_),F.timestamp=!0,p(U,F)}},m=function(D){var U={};U.timestamp=!0,p([{src:D}],U)},p=function(D,U,F,_){var O;F?O=F:O=e.Editor.getCurrentArea(),O.attr("type","video");var v,h=!1;U&&(U.poster&&(v=U.poster),U.autoplay&&(h=U.autoplay));var S=document.createElement("video");S.setAttribute("class","view_content_video"),S.setAttribute("controls","controls"),S.setAttribute("preload","metadata"),typeof v=="string"&&S.setAttribute("poster",v),S.setAttribute("autoplayonslideenter",h),_&&S.setAttribute("style",_),n(O).html(""),n(O).append(S),e.Video.HTML5.addSourcesToVideoTag(D,S,{timestamp:!0}),e.Editor.addDeleteButton(n(O)),e.Editor.Tools.loadToolsForZone(O)},T=function(D,U){var F=e.Video.HTML5.getSources(D);if(F.length>0){var U=U||{},_=e.Video.HTML5.getPoster(D);return typeof _=="string"&&(U.poster=_),e.Video.HTML5.renderVideoFromSources(F,U)}},A=function(D,U){return e.Video.HTML5.renderVideoFromSources([{src:D}],U)};return{init:l,drawVideoWithUrl:m,drawVideo:p,drawVideoWithWrapper:c,renderVideoFromWrapper:T,renderVideoWithURL:A}})(SceneMaker,jQuery),SceneMaker.Editor.Video.Youtube=(function(e,n,w){var l=function(T){var A=e.Video.Youtube.getYoutubeIdFromURL(T);return A!=null?c(A):"Youtube Video ID can't be founded."},c=function(T){var A="https://www.youtube.com/embed/"+T;A=e.Utils.addParamToUrl(A,"wmode","opaque");var D=typeof e.Editor.getCurrentArea()!="undefined"&&e.Editor.getCurrentArea()!=null?e.Editor.getCurrentArea():e.Editor.getCurrentContainer(),U=e.Editor.Utils.dimentionsToDraw(n(D).width(),n(D).height(),325,243),F="<iframe src='"+A+"' frameborder='0' style='width:"+U.width+"px; height:"+U.height+"px;'></iframe>";return F},m=function(T){var A=e.Video.Youtube.getYoutubeIdFromURL(T);return A!=null?p(A):"<p class='objectPreview'>Youtube Video ID can't be founded.</p>"},p=function(T){var A="https://www.youtube.com/embed/"+T;A=e.Utils.addParamToUrl(A,"wmode","opaque");var D='<iframe class="objectPreview" src="'+A+'" frameborder="0"></iframe>';return D};return{generateWrapperForYoutubeVideoUrl:l,generatePreviewWrapperForYoutubeVideoUrl:m}})(SceneMaker,jQuery),SceneMaker.Editor.Image=(function(e,n,w){var l=null,c=e.Constant.NONE,m="tab_pic_from_url_content",p="picture_url",T=function(){n("#"+m+" .previewButton").click(function(v){var h=n("#"+p).val();if(e.Validator.validateObject(h)){var S=e.Object.getObjectInfo(h).source;S!==null&&(l=e.Editor.Utils.autocompleteUrls(S),e.Editor.Object.drawPreview(m,l,{contentAddMode:c}))}})},A=function(v){v=="url"&&D()},D=function(){if(c===e.Constant.SCREEN){var v=n(e.Slides.getCurrentSlide()),h=e.Slides.getSlideBackground(v);if(typeof h=="string"){n("#"+p).val(h),n("#"+m+" .previewButton").trigger("click"),n("#"+m+" .previewimgbox button").hide();return}}l=null,e.Editor.Object.resetPreview(m),n("#"+p).val("")},U=function(){switch(c){case e.Constant.SCREEN:e.Editor.Slides.setSlideBackground(e.Slides.getCurrentSlide(),l);break;default:e.Editor.Object.drawPreviewObject(l,{forceType:e.Constant.MEDIA.IMAGE})}c=e.Constant.NONE},F=function(v,h,S,k,N){var G,K=!1;if(h?(G=h,K=!0):G=e.Editor.getCurrentArea(),!(typeof G=="undefined"||G===null)){var te;if(S)te=e.Editor.Utils.setStyleInPixels(S,G);else{var X=n(G).width();te="width:"+X+"px;"}var V=e.Utils.getId(),ie="draggable"+V;if(G.attr("type","image"),k&&G.attr("hyperlink",k),G.html("<img class='view_content_image' id='"+ie+"' draggable='true' title='Click to drag' src='"+v+"' style='"+te+"'/>"),!S){var R=n("#"+ie);n(R).load(function(){e.Utils.addTempShown([n(G).parent(),n(G),n(R)]);var Y=e.Editor.Utils.dimentionsToDraw(n(G).width(),n(G).height(),n(R).width(),n(R).height());e.Utils.removeTempShown([n(G).parent(),n(G),n(R)]),n(R).width(Y.width),Y.height>0&&n(R).height(Y.height)})}e.Editor.addDeleteButton(G),n("#"+ie).draggable({cursor:"move",stop:function(){n(this).parent().click()}}),K===!1&&e.Editor.Slides.updateThumbnail(e.Slides.getCurrentSlide())}},_=function(){return c},O=function(v){e.Editor.Utils.hideNonDefaultTabs(),c=v};return{init:T,onLoadTab:A,drawImage:F,addContent:U,getAddContentMode:_,setAddContentMode:O}})(SceneMaker,jQuery),SceneMaker.Editor.Object=(function(e,n,w){var l=null,c="tab_object_from_url_content",m="object_web_input",p,T=function(){e.Editor.Object.Web.init(),e.Editor.Object.GoogleDOC.init(),e.Editor.Object.PDF.init(),n("#"+c+" .previewButton").click(function(V){e.Validator.validateObject(n("#"+m).val())&&(l=e.Editor.Utils.autocompleteUrls(n("#"+m).val()),D(c,l))}),p=n('<a href="#objectSettings_fancybox" style="display:none"></a>'),n(p).fancybox({autoDimensions:!1,height:400,width:400,scrolling:"no",showCloseButton:!1,padding:0,onStart:function(V){te()},onComplete:function(V){},onClosed:function(V){}})},A=function(){l=null,F(c),n("#"+m).val("")},D=function(V,ie,R){n("#"+V+" .previewimgbox").css("background-image","none"),n("#"+V+" .previewimgbox img.imagePreview").remove(),n("#"+V+" .previewimgbox .objectPreview").remove();var Y=n(h(ie));n("#"+V+" .previewimgbox").append(Y),U(ie,Y),n("#"+V+" .previewimgbox button").show()},U=function(V,ie){var R=e.Object.getObjectInfo(V);if(R.wrapper===e.Constant.WRAPPER.VIDEO||R.wrapper===null&&R.type===e.Constant.MEDIA.HTML5_VIDEO){var Y=typeof R.source=="object"?R.source:[{src:R.source}];e.Video.HTML5.addSourcesToVideoTag(Y,ie,{timestamp:!0})}else if(R.wrapper===e.Constant.WRAPPER.AUDIO||R.wrapper===null&&R.type===e.Constant.MEDIA.HTML5_AUDIO){var Y=typeof R.source=="object"?R.source:[{src:R.source}];e.Audio.HTML5.addSourcesToAudioTag(Y,ie,{timestamp:!0})}},F=function(V){n("#"+V+" .previewimgbox button").hide(),n("#"+V+" .previewimgbox img.imagePreview").remove(),n("#"+V+" .previewimgbox .objectPreview").remove(),n("#"+V+" .previewimgbox").css("background-image","")},_=function(){O(l)},O=function(V,ie){V&&(k(V,ie),n.fancybox.close())},v=function(V,b){var R=n("#"+V).parent(),Y=n("#"+V).width()/n("#"+V).height(),L=Math.round(b/Y),Q=Math.round(b);n(R).width(Q),n(R).height(L);var oe=L,b=Q;n("#"+V).width(b),n("#"+V).height(oe)},h=function(V,ie){var R=e.Object.getObjectInfo(V),Y=R.type;if(ie&&typeof ie.forceType=="string"&&(Y=ie.forceType),Y===e.Constant.MEDIA.REUSABLE_PUZZLE_INSTANCE)return e.Editor.Object.Web.generatePreviewWrapperForReusablePuzzleInstance(R.source);switch(R.wrapper){case null:switch(Y){case e.Constant.MEDIA.IMAGE:return"<img class='imagePreview' src='"+V+"'></img>";case e.Constant.MEDIA.PDF:return e.Editor.Object.PDF.generatePreviewWrapper(V);case e.Constant.MEDIA.DOC:case e.Constant.MEDIA.PPT:return e.Editor.Object.GoogleDOC.generatePreviewWrapper(V);case e.Constant.MEDIA.YOUTUBE_VIDEO:return e.Editor.Video.Youtube.generatePreviewWrapperForYoutubeVideoUrl(V);case e.Constant.MEDIA.HTML5_VIDEO:return e.Editor.Video.HTML5.renderVideoWithURL(V,{loadSources:!1,extraClasses:["objectPreview"]});case e.Constant.MEDIA.HTML5_AUDIO:return e.Editor.Audio.HTML5.renderAudioWithURL(V,{loadSources:!1,extraClasses:["objectPreview"]});case e.Constant.MEDIA.WEB:return e.Editor.Object.Web.generatePreviewWrapperForWeb(V);default:e.Debugging.log("Unrecognized object source type")}break;case e.Constant.WRAPPER.IMAGE:return"<img class='imagePreview' src='"+R.source+"'></img>";case e.Constant.WRAPPER.EMBED:return S(V);case e.Constant.WRAPPER.OBJECT:return S(V);case e.Constant.WRAPPER.IFRAME:return S(V);case e.Constant.WRAPPER.VIDEO:return e.Editor.Video.HTML5.renderVideoFromWrapper(V,{loadSources:!1,extraClasses:["objectPreview"]});case e.Constant.WRAPPER.AUDIO:return e.Editor.Audio.HTML5.renderAudioFromWrapper(V,{loadSources:!1,extraClasses:["objectPreview"]});default:e.Debugging.log("Unrecognized object wrapper: "+R.wrapper);break}},S=function(V){var ie=n(V);return n(ie).addClass("objectPreview"),n(ie).attr("wmode","opaque"),n(ie).removeAttr("width"),n(ie).removeAttr("height"),typeof n(ie).attr("src")!="undefined"&&n(ie).attr("src",e.Utils.checkWebUrl(n(ie).attr("src"))),typeof n(ie).attr("scrolling")!="undefined"&&n(ie).attr("scrolling","auto"),ie},k=function(V,ie){if(e.Validator.validateObject(V)){ie=typeof ie=="undefined"?{}:ie;var R=e.Object.getObjectInfo(V),Y=e.Editor.getCurrentArea(),L="";if(ie&&(ie.area&&(Y=ie.area),ie.style&&(L=ie.style),ie.forceType&&(R.type=ie.forceType)),R.type===e.Constant.MEDIA.REUSABLE_PUZZLE_INSTANCE&&ie.wrapperGenerated!==!0)return ie.wrapperGenerated=!0,k(e.Editor.Object.Web.generateWrapperForReusablePuzzleInstance(R.source),ie);switch(R.wrapper){case null:switch(R.type){case e.Constant.MEDIA.IMAGE:e.Editor.Image.drawImage(V);break;case e.Constant.MEDIA.PDF:return ie.wrapperGenerated=!0,k(e.Editor.Object.PDF.generateWrapper(R.source),ie);case e.Constant.MEDIA.DOC:case e.Constant.MEDIA.PPT:return k(e.Editor.Object.GoogleDOC.generateWrapper(V),ie);case e.Constant.MEDIA.YOUTUBE_VIDEO:return k(e.Editor.Video.Youtube.generateWrapperForYoutubeVideoUrl(V),ie);case e.Constant.MEDIA.HTML5_VIDEO:e.Editor.Video.HTML5.drawVideoWithUrl(V);break;case e.Constant.MEDIA.HTML5_AUDIO:e.Editor.Audio.HTML5.drawAudioWithUrl(V);break;case e.Constant.MEDIA.WEB:return k(e.Editor.Object.Web.generateWrapperForWeb(V),ie);default:e.Debugging.log("Unrecognized object source type: "+R.type);break}break;case e.Constant.WRAPPER.IMAGE:e.Editor.Image.drawImage(R.source);break;case e.Constant.WRAPPER.EMBED:case e.Constant.WRAPPER.OBJECT:case e.Constant.WRAPPER.IFRAME:if([e.Constant.MEDIA.PDF].indexOf(R.type)!=-1&&!ie.wrapperGenerated)return k(R.source,ie);N(V,Y,L);break;case e.Constant.WRAPPER.VIDEO:e.Editor.Video.HTML5.drawVideoWithWrapper(V);break;case e.Constant.WRAPPER.AUDIO:e.Editor.Audio.HTML5.drawAudioWithWrapper(V);break;default:e.Debugging.log("Unrecognized object wrapper: "+R.wrapper);break}e.Editor.Tools.loadToolsForZone(Y)}},N=function(V,ie,R){ie.attr("type","object");var Y=document.createElement("div");R&&Y.setAttribute("style",R),n(Y).addClass("object_wrapper");var L=n(V);n(L).css("pointer-events","none"),n(L).attr("class","view_content_object"),n(L).attr("wmode","opaque"),typeof n(L).attr("scrolling")!="undefined"&&n(L).attr("scrolling","auto"),n(ie).html(""),n(ie).append(Y),e.Editor.addDeleteButton(n(ie)),n(Y).append(L),G(L,ie),e.Editor.Tools.loadToolbarForObject(V)},G=function(V,ie){var R=ie.width(),Y=ie.height(),L=V.width(),Q=V.height(),oe=Q/L;L>R&&(V.width(R),V.height(L*oe),L=R,Q=V.height()),Q>Y&&(V.height(Y),V.width(Q/oe),L=V.width(),Q=Y);var b=V.parent();n(b).hasClass("object_wrapper")&&(n(b).height(V.height()),n(b).width(V.width()))},K=function(){n(p).trigger("click")},te=function(){var V=n("#objectSettings_fancybox"),ie=n(e.Editor.getCurrentArea()),R=ie.find("div.object_wrapper").children().first(),Y=R.attr("reusablepuzzleinstance")==="true";V.find("input[type='hidden'][name='elId']").val(ie.attr("id"));var L={},Q=Y===!1,oe=Y;try{L=JSON.parse(ie.attr("elSettings"))}catch(ce){}typeof L.unloadObject!="undefined"&&(Q=L.unloadObject),typeof L.addPreviewParamToObject!="undefined"&&(oe=L.addPreviewParamToObject);var b=V.find("input[type='checkbox'][name='unloadObject']");b.prop("checked",Q);var Le=V.find("input[type='checkbox'][name='addPreviewParamToObject']");Le.prop("checked",oe),Le.attr("defaultvalue",Y),e.Editor.Utils.enableElementSettingsField(b,!0),e.Editor.Utils.enableElementSettingsField(Le,Y===!1)},X=function(){var V=n("#objectSettings_fancybox"),ie=V.find("input[type='hidden'][name='elId']").val(),R=n("#"+ie),Y=R.find("div.object_wrapper").children().first(),L={};try{L=JSON.parse(n(area).attr("elsettings"))}catch(b){}L.unloadObject=V.find("input[type='checkbox'][name='unloadObject']").is(":checked"),L.addPreviewParamToObject=V.find("input[type='checkbox'][name='addPreviewParamToObject']").is(":checked");var Q=JSON.stringify(L);R.attr("elSettings",Q);var oe=Y.attr("src");L.addPreviewParamToObject?oe=e.Utils.addParamToUrl(oe,"escapp_preview",""+e.Status.isPreview()):oe=e.Utils.removeParamFromUrl(oe,"escapp_preview"),Y.attr("src",oe),n.fancybox.close()};return{init:T,onLoadTab:A,drawObject:k,renderObjectPreview:h,resizeObject:v,drawPreview:D,resetPreview:F,drawPreviewElement:_,drawPreviewObject:O,showObjectSettings:K,onObjectSettingsDone:X}})(SceneMaker,jQuery),SceneMaker.Editor.Object.Web=(function(e,n,w){var l=function(){},c=function(A){return A=e.Utils.checkWebUrl(A),"<iframe src='"+A+"' wmode='opaque'></iframe>"},m=function(A){return A=e.Utils.checkReusablePuzzleInstanceUrl(A),"<iframe src='"+A+"' reusablepuzzleinstance='true' wmode='opaque'></iframe>"},p=function(A){return A=e.Utils.checkWebUrl(A),"<iframe class='objectPreview' src='"+A+"' wmode='opaque'></iframe>"},T=function(A){return A=e.Utils.checkReusablePuzzleInstanceUrl(A),p(A)};return{init:l,generatePreviewWrapperForWeb:p,generateWrapperForReusablePuzzleInstance:m,generateWrapperForWeb:c,generatePreviewWrapperForReusablePuzzleInstance:T}})(SceneMaker,jQuery),SceneMaker.Editor.Object.PDF=(function(e,n,w){var l=function(){},c=function(p){return e.Object.PDF.generateWrapper(p)},m=function(p){var T=e.Object.PDF.generateWrapper(p),A=n(T);return n(A).addClass("objectPreview"),e.Utils.getOuterHTML(A)};return{init:l,generateWrapper:c,generatePreviewWrapper:m}})(SceneMaker,jQuery),SceneMaker.Editor.Object.GoogleDOC=(function(e,n,w){var l=function(){},c=function(p){return e.Object.GoogleDOC.generateWrapper(p)},m=function(p){var T=e.Object.GoogleDOC.generateWrapper(p),A=n(T);return n(A).addClass("objectPreview"),e.Utils.getOuterHTML(A)};return{init:l,generatePreviewWrapper:m,generateWrapper:c}})(SceneMaker,jQuery),SceneMaker.Editor.Text=(function(e,n,w){var l=!1,c={},m=function(){l||(n(document).on("click",".textthumb",p),CKEDITOR.on("dialogDefinition",function(v){var h=v.data.name,S=v.data.definition;switch(h){case"link":S.getContents("info").remove("linkType");var k=S.getContents("info").get("protocol").items;k.splice(3,1),k.splice(2,1),S.removeContents("advanced");var N=S.getContents("target"),X=N.get("linkTargetType");X.default="_blank",X.items.splice(6,1),X.items.splice(4,1),X.items.splice(1,1),X.items.splice(0,1);break;case"table":S.removeContents("advanced");var G=S.getContents("info"),K=G.get("cmbAlign");K.items.splice(0,1),K.default="center",G.remove("selHeaders");break;case"image":S.removeContents("advanced");var te=S.getContents("Link"),X=te.get("cmbTarget");X.default="_blank",X.items.splice(4,1),X.items.splice(2,1),X.items.splice(0,1);break;case"MediaEmbedDialog":break}}),l=!0)},p=function(v,h,S,k){m();var N;h?N=h:N=n(this).parents(".selectable"),N.attr("type","text");var G=n("article").has(N),K=n("article > article").has(N);typeof n(N).attr("id")=="undefined"&&n(N).attr("id",e.Utils.getId("TmpShownId"));var te=k&&k.disableTmpShown;te||e.Utils.addTempShown(N);var X=n(N).height(),V=n(N).width();te||e.Utils.removeTempShown(N);var ie=e.Utils.getId(),R=n("<div id='"+ie+"' class='wysiwygTextArea'></div>");n(R).attr("style","width: 100%; height: 100%"),n(N).append(R);var Y={};Y.toolbar="Full",Y.toolbar_Full=[{name:"first",items:["Bold","Italic","Underline","-","Subscript","Superscript","Font","FontSize","TextColor","BGColor"]},"/",{name:"lists",items:["NumberedList","BulletedList","Table"]},{name:"alignment",items:["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]},{name:"link",items:["Link"]},{name:"Objects",items:["Image","MediaEmbed"]},{name:"symbols",items:["SpecialChar"]}],Y.sharedSpaces={top:"toolbar_text"},Y.toolbarCanCollapse=!1,Y.resize_enabled=!1,Y.removePlugins="elementspath",Y.extraPlugins="tableresize,autogrow,specialchar,mediaembed",k&&k.autogrow&&(Y.autoGrow_minHeight=34,Y.autoGrow_maxHeight=800),Y.specialChars=[],Y.specialChars=Y.specialChars.concat([["&alpha;","Alpha"]],[["&beta;","Beta"]],[["&gamma;","Gamma"]],[["&delta;","Delta"]],[["&epsilon;","Epsilon"]],[["&zeta;","Zeta"]],[["&eta;","Eta"]],[["&theta;","Theta"]],[["&iota;","Iota"]],[["&kappa;","Kappa"]],[["&lambda;","Lambda"]],[["&mu;","Mu"]],[["&nu;","Nu"]],[["&xi;","Xi"]],[["&omicron;","Omicron"]],[["&pi;","Pi"]],[["&rho;","Rho"]],[["&sigma;","Sigma"]],[["&tau;","Tau"]],[["&upsilon;","Upsilon"]],[["&phi;","Phi"]],[["&chi;","Chi"]],[["&psi;","Psi"]],[["&omega;","Omega"]],[["&divide;",""]],[["&radic;",""]],[["&bull;",""]],[["&middot;",""]],[["&plusmn;",""]],[["&frac14;",""]],[["&frac12;",""]],[["&frac34;",""]],[["&permil;",""]],[["&weierp;",""]],[["&image;",""]],[["&real;",""]],[["&forall;",""]],[["&part;",""]],[["&exist;",""]],[["&empty;",""]],[["&nabla;",""]],[["&isin;",""]],[["&notin;",""]],[["&ni;",""]],[["&prod;",""]],[["&sum;",""]],[["&minus;",""]],[["&lowast;",""]],[["&prop;",""]],[["&infin;",""]],[["&ang;",""]],[["&and;",""]],[["&or;",""]],[["&cap;",""]],[["&cup;",""]],[["&int;",""]],[["&cong;",""]],[["&asymp;",""]],[["&ne;",""]],[["&equiv;",""]],[["&le;",""]],[["&ge;",""]],[["&sub;",""]],[["&sup;",""]],[["&nsub;",""]],[["&sube;",""]],[["&supe;",""]],[["&oplus;",""]],[["&otimes;",""]],[["&perp;",""]],[["&lang;",""]],[["&rang;",""]],[["&lceil;",""]],[["&rceil;",""]],[["&lfloor;",""]],[["&rfloor;",""]],[["&fnof;",""]],[["&lsquo;",""]],[["&rsquo;",""]],[["&ldquo;",""]],[["&rdquo;",""]],[["&larr;",""]],[["&uarr;",""]],[["&darr;",""]],[["&rarr;",""]],[["&harr;",""]],[["&crarr;",""]],[["&lArr;",""]],[["&uArr;",""]],[["&dArr;",""]],[["&rArr;",""]],[["&hArr;",""]],[["&euro;","Euro"]],[["&cent;","Cent"]],[["&pound;","Pound"]],[["&yen;",""]],[["&curren;",""]],[["&brvbar;",""]],[["&sect;",""]],[["&copy;",""]],[["&reg;",""]],[["&ordf;",""]],[["&ordm;",""]],[["&deg;",""]],[["&laquo;",""]],[["&raquo;",""]],[["&not;",""]],[["&para;",""]],[["&loz;",""]],[["&spades;",""]],[["&clubs;",""]],[["&hearts;",""]],[["&diams;",""]],[["&dagger;",""]]),Y.width="100%",Y.height=X,Y.fontSize_defaultLabel="12";var L=CKEDITOR.basePath.substr(0,CKEDITOR.basePath.indexOf("editor/"));Y.skin="sceneMaker,"+L+"editor/skins/sceneMaker/";var Q=typeof S!="string"||k&&k.forceNew;if(Q){var oe=36,b="center",Le="color:#000",ce=Le;k&&(typeof k.fontSize=="number"&&(oe=k.fontSize),k.placeholder===!0&&(Le="color:#ccc")),S="<p style='text-align:"+b+";'><span autoColor='true' style='"+Le+"'><span style='font-size:"+oe+"px;'>&shy</span></span></p>",initial_text_blank="<p style='text-align:"+b+";'><span autoColor='true' style='"+ce+"'><span style='font-size:"+oe+"px;'>&shy</span></span></p>"}var J=CKEDITOR.appendTo(ie,Y),me=V,f=X;Q||(te||e.Utils.addTempShown([G,K,N]),setTimeout(function(){c[J.name]!==!0?(c[J.name]=!1,te||e.Utils.removeTempShown([G,K,N])):c[J.name]=w},6e3)),J.on("instanceReady",function(){S&&J.setData(S,function(){O(J),Q&&J.focus(),k&&typeof k.callback=="function"&&k.callback()}),Q||(typeof c[J.name]=="undefined"?(c[J.name]=!0,te||e.Utils.removeTempShown([G,K,N])):c[J.name]=w),k&&typeof k.onKeyup=="function"&&k.placeholder!=!0&&J.document.on("keyup",function(Re){k.onKeyup(N,J,Re)}),!S&&k&&typeof k.callback=="function"&&k.callback()}),J.on("resize",function(Re){}),J.on("focus",function(Re){if(k&&k.placeholder===!0){var je=n(S).text().replace(/\s+/g,""),Me=n(Re.editor.getData()).text().replace(/\s+/g,"");je==Me&&setTimeout(function(){Re.editor.setData(initial_text_blank,function(){k&&typeof k.onKeyup=="function"&&J.document.on("keyup",function(Tt){k.onKeyup(N,J,Tt)})}),Re.editor.focus()},20)}var ot=A(Re.editor.container.$);e.Editor.selectContentZone(ot)}),J.getPlainText=_,e.Editor.addDeleteButton(N)},T=function(v){if(!v||typeof CKEDITOR=="undefined"||typeof CKEDITOR.instances=="undefined")return null;var h=null;return jQuery.each(CKEDITOR.instances,function(S,k){var N=A(k.container.$);if(n(N).attr("id")===n(v).attr("id")){h=k;return}}),h},A=function(v){return n("div[type='text']").has(v)},D=function(v){var h=T(v);return h?U(h):null},U=function(v){var h=n(document.getElementById("cke_contents_"+v.name)).find("iframe")[0];return n(h).contents()[0]},F=function(v){if(!v||typeof CKEDITOR=="undefined"||typeof CKEDITOR.instances=="undefined")return null;n(v).hasClass(".cke_skin_sceneMaker")||(v=n(v).find(".cke_skin_sceneMaker"),v.length>0&&(v=v[0]));var h=null;return jQuery.each(CKEDITOR.instances,function(S,k){if(v===k.container.$){h=k;return}}),h},_=function(){var v="",h=0;return n(this.getSnapshot()).each(function(S,k){k.tagName!="SCRIPT"&&(h!=0&&(v=v+`
`),v=v+n(k).text(),h+=1)}),v},O=function(v){if(CKEDITOR.env.webkit){var h=n(document.getElementById("cke_contents_"+v.name)).find("iframe")[0];h.style.display="none",h.style.display="block"}};return{init:m,launchTextEditor:p,getCKEditorFromZone:T,getCKEditorIframeContentFromZone:D,getCKEditorFromTextArea:F}})(SceneMaker,jQuery),SceneMaker.Editor.Thumbnails=(function(e,n,w){var l="screens_list",c="views_list",m,p,T=w,A=w,D=function(){},U=function(b){m=b,e.Editor.Scrollbar.cleanScrollbar(l),n("#"+l).hide();var Le=[],ce=[],J=0;n(".slides > article").each(function(f,Re){var je=K(Re),Me=V(Re);je&&(J+=1,Le.push(n("<img id='screenThumbnail"+J+"' class='image_slidethumbnail' slideNumber='"+J+"' action='goToScreenWithNumber' src='"+je+"' defaultsrc='"+Me+"'/>")),ce.push(J))});var me={};me.titleArray=ce,me.callback=_,me.onImageErrorCallback=F,e.Editor.Utils.Loader.loadImagesOnContainer(Le,l,me)},F=function(b){var Le=e.Screen.getScreenWithNumber(n(b).attr("slidenumber")),ce=V(Le),J=e.Editor.Thumbnails.getThumbnailForSlide(Le);n(J).attr("src",ce),e.Screen.getCurrentScreen()===Le&&n("#screen_selected > img").attr("src",thumbnailURL)},_=function(){n("#"+l).find("img.image_slidethumbnail").each(function(Le,ce){var J=n(ce).parent();n(J).addClass("wrapper_slidethumbnail"),n(J).addClass("preventNoselectable"),n(J).append("<div class='delete_slide delete_screen'></div>");var me=n(J).find("p");n(me).addClass("ptext_barbutton"),n(ce).click(function(f){v(f)})}),n(".barbutton").css("background-color","transparent");var b=new Array;b.callback=O,n("#"+l).show(),e.Editor.Scrollbar.createScrollbar(l,b)},O=function(){n("#"+l).sortable({items:'div.wrapper_slidethumbnail:has(img[action="goToScreenWithNumber"])',change:function(b,Le){},start:function(b,Le){},stop:function(b,Le){var ce=Le.item,J=n(Le.item).find("img.image_slidethumbnail[slidenumber]");if(!isNaN(n(J).attr("slidenumber"))){var me=parseInt(n(J).attr("slidenumber")),f;n("#screens_list").find("img.image_slidethumbnail[slidenumber]").each(function(Re,je){var Me=parseInt(n(je).attr("slidenumber")),ot=Re+1;Me===me&&Me!=ot&&(f=ot)}),e.Editor.Screen.moveScreenTo(me,f)}}}),typeof m=="function"&&(m(),m=w)},v=function(b){switch(n(b.target).attr("action")){case"goToScreenWithNumber":e.Screen.goToScreenWithNumber(n(b.target).attr("slideNumber"));break;default:return}},h=function(b){n("#screens_list img.image_slidethumbnail").removeClass("selectedScreenThumbnail"),n("#screens_list img.image_slidethumbnail[slideNumber="+b+"]").addClass("selectedScreenThumbnail"),n("#screens_list div.wrapper_slidethumbnail").removeClass("selectedThumbnailBackground"),n("#screens_list img.image_slidethumbnail[slideNumber="+b+"]").parent("div.wrapper_slidethumbnail").addClass("selectedThumbnailBackground");var Le=T===w||b>T;T=b;var ce=e.Screen.getScreenWithNumber(b);oe(ce)||S(Le?Math.max(b-5,1):b)},S=function(b){var Le=n("img.image_slidethumbnail[slideNumber="+b+"]");e.Editor.Scrollbar.goToElement(l,Le)},k=function(b){var Le=n("#views_list img.image_slidethumbnail[slideNumber="+b+"]").parent();e.Editor.Scrollbar.goToElement(c,Le)},N=function(b){if(e.Slides.isView(b))return G(b);var Le=n(b).attr("slidenumber");return n("#screens_list img.image_slidethumbnail[slideNumber="+Le+"]")},G=function(b){var Le=n(b).attr("slidenumber");return n("#views_list img.image_slidethumbnail[slideNumber="+Le+"]")},K=function(b){return n(b).attr("type")===e.Constant.VIEW_CONTENT?te(b):X(b)},te=function(b){var Le=n(b).children("div.view_content_zone");if(Le.length===1&&!e.Editor.isZoneEmpty(Le)&&Le.attr("type")=="image"){var ce=Le.find("img");if(n(ce).length===1&&typeof n(ce).attr("src")=="string")return n(ce).attr("src")}return V(b)},X=function(b){var Le=e.Slides.getSlideBackground(b);return typeof Le!="undefined"?Le:V(b)},V=function(b){return n(b).attr("type")===e.Constant.VIEW_CONTENT?e.ImagesPath+"slidesthumbs/view_content_template.png":e.ImagesPath+"slidesthumbs/screen_template.png"},ie=function(b,Le){p=Le,e.Editor.Scrollbar.cleanScrollbar(c),n("#"+c).hide();var ce=[],J=0;n(b).each(function(f,Re){if(!e.Slides.isView(Re))return e.Debugging.log("Invalid view type"),!0;var je=K(Re),Me=V(Re);J+=1,ce.push(n("<img id='viewThumbnail"+J+"' class='image_slidethumbnail' slideNumber='"+J+"' src='"+je+"' defaultsrc='"+Me+"'/>"))});var me={};me.callback=R,e.Editor.Utils.Loader.loadImagesOnContainer(ce,c,me)},R=function(){n("#"+c).find("img.image_slidethumbnail").each(function(Le,ce){var J=n(ce).parent();n(J).addClass("wrapper_slidethumbnail"),n(J).append("<div class='delete_slide delete_view'></div>"),n(J).find("p").addClass("ptext_barbutton"),n(ce).click(function(me){L(me)})});var b=new Array;b.horizontalScroll=!0,b.callback=Y,n("#"+c).show(),e.Editor.Scrollbar.createScrollbar(c,b)},Y=function(){typeof p=="function"&&(p(),p=w)},L=function(b){var Le=n(b.target).attr("slideNumber");e.Editor.View.openViewWithNumber(Le)},Q=function(b){if(n("#views_list img.image_slidethumbnail").removeClass("selectedViewThumbnail"),b!==null){n("#views_list img.image_slidethumbnail[slideNumber="+b+"]").addClass("selectedViewThumbnail");var Le=A===w||b>A;A=b;var ce=e.View.getViewWithNumber(e.Screen.getCurrentScreen(),b);oe(ce)||k(Le?Math.max(b-7,1):b)}},oe=function(b){var Le=N(b),ce=n(Le).offset();if(typeof ce=="undefined"||ce===null)return!0;if(e.Slides.isView(b)){var J=ce.left;return J>466&&J<1119}else{var me=ce.top;return me>132&&me<667}};return{init:D,drawScreenThumbnails:U,drawViewThumbnails:ie,selectThumbnail:h,selectViewThumbnail:Q,moveThumbnailsToScreenWithNumber:S,moveThumbnailsToViewWithNumber:k,getThumbnailURLForSlide:K,getDefaultThumbnailURLForSlide:V,getThumbnailForSlide:N,isThumbnailVisible:oe}})(SceneMaker,jQuery),SceneMaker.Editor.Settings=(function(e,n,w){var l,c=function(){},m=function(v){typeof v!="undefined"?(l=JSON.parse(JSON.stringify(v)),delete l.screens):l={},l.SMVersion=e.VERSION,(typeof l.aspectRatio!="string"||["4:3","16:9"].indexOf(l.aspectRatio)===-1)&&(l.aspectRatio="4:3"),e.ViewerAdapter.applyAspectRatio(l.aspectRatio)},p=function(){var v=JSON.parse(JSON.stringify(l));return(typeof v.title!="string"||v.title.trim()==="")&&(v.title=e.I18n.getTrans("i.Untitled")),v.avatar=T(),v},T=function(){for(var v=n("section.slides > article"),h=0;h<v.length;h++){var S=v[h];if(e.Slides.isScreen(S)){var k=e.Slides.getSlideBackground(S);if(typeof k!="undefined")return k}}return e.ImagesPath+"logos/scene_maker_escapp_thumbnail.png"},A=function(){n("a#edit_scene_details").fancybox({autoDimensions:!1,autoScale:!0,scrolling:"no",width:1e3,height:700,padding:0,hideOnOverlayClick:!1,hideOnContentClick:!1,showCloseButton:!0,onStart:function(){D()},onComplete:function(v){}}),n("a#edit_scene_details").trigger("click")},D=function(){typeof l.title=="string"?n("#scene_details_input_title").val(l.title):n("#scene_details_input_title").val("");var v=e.ViewerAdapter.getAspectRatio();typeof v!="undefined"&&n("#scene_details_select_aspectRatio").val(v),e.Editor.Actions.loadActions(n("#sceneActions"),l,"SCENE"),U()},U=function(){var v=F();v?(n("#save_scene_details").removeClass("buttonDisabledOnSettings"),n("#save_scene_details").removeAttr("disabled"),n("#save_scene_details").removeAttr("title")):(n("#save_scene_details").addClass("buttonDisabledOnSettings"),n("#save_scene_details").attr("disabled","true"))},F=function(){return!0},_=function(v){v.preventDefault(),!n(v.target).hasClass("buttonDisabledOnSettings")&&(l=O(),e.ViewerAdapter.applyAspectRatio(l.aspectRatio),n.fancybox.close())},O=function(){var v={};v.SMVersion=e.VERSION;var h=n("#scene_details_input_title").val();typeof h=="string"&&(v.title=h);var S=n("#scene_details_select_aspectRatio").val();typeof S=="string"&&["4:3","16:9"].indexOf(S)!==-1?v.aspectRatio=S:v.aspectRatio="4:3";var k=e.Editor.Actions.getActionsJSON(n("#sceneActions"));return k.length>0&&(v.actions=k),v};return{init:c,loadSceneSettings:m,getSettings:p,displaySettings:A,onSaveSceneSettingsButtonClicked:_}})(SceneMaker,jQuery),SceneMaker.Editor.Tools=(function(e,n,w){var l=!1,c=1.05,m=function(){p(),l||(n.each(n("#toolbar_wrapper a.tool_action, div.tool_action"),function(Ue,et){n(et).on("click",function(Pe){return typeof e.Editor.Tools[n(et).attr("action")]=="function"&&(n(et).find(".toolbar_scene_wrapper").hasClass("toolbar_scene_wrapper_disabled")||e.Editor.Tools[n(et).attr("action")](this)),!1})}),l=!0),e.Editor.Tools.Menu.init()},p=function(){var Ue=e.Screen.getCurrentScreen();typeof Ue!="undefined"&&D(Ue)},T=function(){n("#toolbar_wrapper").show()},A=function(){n("#toolbar_wrapper").hide()},D=function(Ue){U();var et=n(Ue).attr("type");switch(n(".toolbar_scene_wrapper_slideTools:not(.toolbar_"+et+")").hide(),n("#toolbar_slide .toolbar_btn.tool_action:not(.toolbar_"+et+")").hide(),et){case e.Constant.VIEW_CONTENT:n("#toolbar_slide").removeClass("toolbar_slide_screen").addClass("toolbar_slide_view_content");break;case e.Constant.VIEW_IMAGE:case e.Constant.SCREEN:n("#toolbar_slide").removeClass("toolbar_slide_view_content").addClass("toolbar_slide_screen"),n("div.tool_action[action='changeBackground']").show(),typeof e.Slides.getSlideBackground(Ue)!="undefined"?(n("div.tool_action[action='addHotspot']").show(),n("div.tool_action[action='addHotzone']").show(),n("div.tool_action[action='addCaption']").show()):(n("div.tool_action[action='addHotspot']").hide(),n("div.tool_action[action='addHotzone']").hide(),n("div.tool_action[action='addCaption']").hide());break;default:return}},U=function(){n(".toolbar_scene_wrapper_slideTools").removeClass("toolbar_scene_wrapper_disabled"),n(".menuselect_hide").hide(),n(".delete_content").hide(),oe()},F,_="enabled",O=function(Ue){switch(Ue){case"enabled":v();break;case"loading":h();break;case"disabled":S();break;default:return}},v=function(){_!=="enabled"&&(_="enabled",k(),n("#toolbar_save").find(".toolbar_scene_wrapper").removeClass("toolbar_scene_wrapper_loading"),n("#toolbar_save").find(".toolbar_scene_wrapper").removeClass("toolbar_scene_wrapper_disabled"),n("#toolbar_save").find("p.toolbar_scene_title").html(e.I18n.getTrans("i.Save")),n(".menu_option.menu_action[action='onSaveButtonClicked']").parent().removeClass("menu_item_disabled"),n(".menu_option.menu_action[action='onSaveButtonClicked']").find("span").html(e.I18n.getTrans("i.Save")))},h=function(){_!=="loading"&&(_="loading",n("#toolbar_save").find(".toolbar_scene_wrapper").addClass("toolbar_scene_wrapper_disabled"),n("#toolbar_save").find(".toolbar_scene_wrapper").addClass("toolbar_scene_wrapper_loading"),n("#toolbar_save").find("p.toolbar_scene_title").html(e.I18n.getTrans("i.Saving")),n(".menu_option.menu_action[action='onSaveButtonClicked']").parent().addClass("menu_item_disabled"),n(".menu_option.menu_action[action='onSaveButtonClicked']").find("span").html(e.I18n.getTrans("i.Saving")))},S=function(){_!=="disabled"&&(_="disabled",n("#toolbar_save").find(".toolbar_scene_wrapper").removeClass("toolbar_scene_wrapper_loading"),n("#toolbar_save").find(".toolbar_scene_wrapper").addClass("toolbar_scene_wrapper_disabled"),n("#toolbar_save").find("p.toolbar_scene_title").html(e.I18n.getTrans("i.Saved")),k(),F=setTimeout(function(){O("enabled")},5e3),n(".menu_option.menu_action[action='onSaveButtonClicked']").parent().addClass("menu_item_disabled"),n(".menu_option.menu_action[action='onSaveButtonClicked']").find("span").html(e.I18n.getTrans("i.Saved")))},k=function(){typeof F!="undefined"&&clearTimeout(F)},N=function(Ue){R(e.Editor.getLastArea());var et=n(Ue).attr("type");switch(et){case"text":L(et);break;case"image":L(et);break;case"video":L(et);break;case"object":var Pe=n(Ue).find(".object_wrapper").children()[0];Q(Pe);break;case w:n(Ue).find(".menuselect_hide").show(),ie(n(Ue).find(".zone_tooltip"));return;default:break}n(Ue).find(".delete_content").show()},G=function(Ue){for(var et=n(Ue).find("div.view_content_zone"),Pe=0;Pe<et.length;Pe++)K(et[Pe])},K=function(Ue,et){var Pe="",We="true";et===!0&&(Pe="style='display:none'",We="false");var xt="<span class='zone_tooltip' visible='"+We+"' "+Pe+" >"+e.I18n.getTrans("i.ZoneTooltip")+"</span>";n(Ue).append(xt),xt=n(Ue).find(".zone_tooltip"),et===!0?ie(xt):te(xt)},te=function(Ue){var et=n("div").has(Ue);n(Ue).show(),n(Ue).attr("visible","true"),n(et).attr("tooltip","true"),n(Ue).css("margin-top")==="0px"&&X(Ue)},X=function(Ue){var et=n("div").has(Ue),Pe=n("article").has(et);e.Utils.addTempShown([Pe,et,Ue]);var We=n(et).height(),xt=n(Ue).height(),Et=(We-xt)/2;e.Utils.removeTempShown([Pe,et,Ue]),n(Ue).css("margin-top",Et+"px")},V=function(Ue){n("span.zone_tooltip").each(function(et,Pe){X(Pe)}),typeof Ue=="function"&&Ue(!0)},ie=function(Ue){var et=n("div").has(Ue);n(Ue).hide(),n(Ue).attr("visible","false"),n(et).attr("tooltip","false")},R=function(Ue){oe();var et=n(Ue).find(".zone_tooltip");e.Editor.isZoneEmpty(Ue)?(n(Ue).find(".menuselect_hide").remove(),n(Ue).removeClass("zoneUnselected").removeClass("zoneSelected").addClass("editable"),te(et)):(n(Ue).find(".menuselect_hide").hide(),n(Ue).find(".delete_content").hide(),ie(et))},Y=function(Ue){L(Ue)},L=function(Ue){oe(Ue);var et="toolbar_"+Ue;n("#toolbar_element").children().hide(),n("#toolbar_element").find("."+et).css("display","inline-block"),document.getElementById("toolbar_settings_wrapper").style.top="-4px"},Q=function(Ue){var et=e.Object.getObjectInfo(Ue);switch(et.type){case e.Constant.MEDIA.WEB:L(e.Constant.MEDIA.WEB);break;default:L("object");break}},oe=function(Ue){Ue!=="hotspot"&&e.Editor.Marker.setCurrentHotspot(w),Ue!=="hotzone"&&e.Editor.Marker.setCurrentHotzoneId(w),n("#toolbar_element").children().hide()},b=function(){e.Editor.Tools.Menu.exit()},Le=function(){oe(),e.Editor.Settings.displaySettings()},ce=function(){oe(),e.Editor.Tools.Menu.onSaveButtonClicked()},J=function(){oe(),e.Editor.Preview.preview()},me=function(){n("#hidden_button_to_change_slide_background").trigger("click")},f=function(){e.Editor.Slides.removeCurrentSlide()},Re=function(){e.Editor.Marker.addHotspot()},je=function(){e.Editor.Marker.addHotzone()},Me=function(){oe(),e.Editor.Caption.addCaption()},ot=function(){e.Editor.Marker.deleteCurrentHotmarker()},Tt=function(Ue){switch(e.Editor.getCurrentElementType()){case"HOTSPOT":e.Editor.Marker.showHotspotSettings();break;case"HOTZONE":e.Editor.Marker.showHotzoneSettings();break;case"ZONE":switch(n(e.Editor.getCurrentArea()).attr("type")){case e.Constant.OBJECT:e.Editor.Object.showObjectSettings();break;default:break}break}};return{init:m,loadToolsForSlide:D,loadToolsForElement:Y,loadToolsForZone:N,loadToolbarForObject:Q,cleanZoneTool:R,cleanToolbar:p,enableToolbar:T,disableToolbar:A,save:ce,displaySettings:Le,preview:J,deleteSlide:f,changeBackground:me,addHotspot:Re,addHotzone:je,addCaption:Me,deleteHotmarker:ot,addTooltipsToSlide:G,addTooltipToZone:K,showZoneToolTip:te,hideZoneToolTip:ie,setAllTooltipMargins:V,changeSaveButtonStatus:O,showElementSettings:Tt,exit:b}})(SceneMaker,jQuery),SceneMaker.Editor.Tools.Menu=(function(e,n,w){var l=!1,c=!1,m=function(){if(!l){c=!0,n.each(n("#menu a.menu_action"),function(K,te){n(te).on("click",function(X){return X.preventDefault(),n(te).parent().hasClass("menu_item_disabled")||typeof e.Editor.Tools.Menu[n(te).attr("action")]=="function"&&(e.Editor.Tools.Menu[n(te).attr("action")](this),k()),!1})}),n("a.menu_option_main, a.menu_option:not('.menu_action')").on("click",function(K){return K.preventDefault(),!1});var N=e.Utils.getOptions();typeof N.exitURL!="string"?(n(".menu_option.menu_action[action='exit']").parent().hide(),n("#toolbar_exit_btn").hide()):e.exitPath=N.exitURL,l=!0}n("#menu").show();var G=!1;n("a:.menu_option_main").on("click",function(){n("#menu li > ul.menu_option_main").css("display")==="none"?(n("#menu li > ul.menu_option_main").css("display","block"),n("ul:.menu_option_main li").hover(function(K){n(this).children("ul").css("display","block").on("mouseenter",function(){G=!0,n(this).mouseleave(function(te){G=!1})})},function(){G||n("ul:.menu_option_main li > ul").css("display","none")})):n("#menu li > ul.menu_option_main").css("display","none")}),n(document).click(function(){n("#menu li > ul.menu_option_main").hide()})},p=function(N){n(N).removeClass("menu_item_disabled").addClass("menu_item_enabled")},T=function(N){n(N).removeClass("menu_item_enabled").addClass("menu_item_disabled")},A=function(){n("#menu").hide(),n("#menu").attr("id","menuDisabled")},D=function(){n("#menuDisabled").show(),n("#menuDisabled").attr("id","menu")},U=function(){if(e.Screen.getScreens().length===0){var N={};N.width=600,N.height=150,N.text=e.I18n.getTrans("i.NoSlidesOnSaveNotification");var G={};G.text=e.I18n.getTrans("i.Ok"),G.callback=function(){n.fancybox.close()},N.buttons=[G],e.Utils.showDialog(N);return}e.Editor.Tools.changeSaveButtonStatus("loading");var K=e.Editor.saveScene();e.Editor.sendScene(K,"save",function(){e.Editor.Tools.changeSaveButtonStatus("disabled")},function(){e.Editor.Tools.changeSaveButtonStatus("enabled")})},F=function(){e.Editor.Preview.preview()},_=function(){if(e.Editor.hasSceneChanged()){var N={};N.width=600,N.height=200,N.notificationIconSrc=e.ImagesPath+"icons/save_document.png",N.text=e.I18n.getTrans("i.ExitConfirmationMenu"),N.buttons=[];var G={};G.text=e.I18n.getTrans("i.cancel"),G.callback=function(){n.fancybox.close()},N.buttons.push(G);var K={};K.text=e.I18n.getTrans("i.exitWSaving"),K.callback=function(){O(),n.fancybox.close()},N.buttons.push(K);var te={};te.text=e.I18n.getTrans("i.saveAndExit"),te.callback=function(){n("#waiting_overlay").show(),e.Editor.Tools.changeSaveButtonStatus("loading");var X=e.Editor.saveScene();e.Editor.sendScene(X,"save",function(){e.Editor.Tools.changeSaveButtonStatus("disabled"),O()},function(){e.Editor.Tools.changeSaveButtonStatus("enabled"),n("#waiting_overlay").hide()}),n.fancybox.close()},N.buttons.push(te),e.Utils.showDialog(N)}else O()},O=function(){e.Editor.Events.allowExitWithoutConfirmation(),window.top.location.href=e.exitPath},v=function(){return n("#addScreenButton").trigger("click"),!1},h=function(){return n("#addViewButton").trigger("click"),!1},S=function(){e.Editor.Settings.displaySettings()},k=function(){c&&(n("#menu ul.menu_option_main").addClass("temp_hidden"),setTimeout(function(){n("#menu ul.menu_option_main").removeClass("temp_hidden")},500))};return{init:m,disableMenu:A,enableMenu:D,addScreen:v,addView:h,displaySettings:S,onSaveButtonClicked:U,preview:F,exit:_}})(SceneMaker,jQuery),SceneMaker.Editor.Utils=(function(e,n,w){var l=function(O,v,h,S){var k={width:h,height:S},N=O/v,G=h/S;return N>G?(k.width=G*v,k.height=v,k):(k.width=O,k.height=O/G,k)},c=function(O,v){var h="";n.each(O.split(";"),function(k,N){N.indexOf("width")===-1&&N.indexOf("height")===-1&&(h=h+N+"; ")});var S=e.Utils.getPixelDimensionsFromStyle(O,v);return S&&S[0]&&(h=h+"width: "+S[0]+"px; ",S[1]&&(h=h+"height: "+S[1]+"px; ")),h},m=function(O,v){var h=v.width()*100/O.width(),S=v.height()*100/O.height(),k=v.position().top*100/O.height(),N=v.position().left*100/O.width();return"position: relative; width:"+h+"%; height:"+S+"%; top:"+k+"%; left:"+N+"%;"},p=function(){return"position: relative; width:100%; height:100%; top:0%; left:0%;"},T=function(O){var v=/(^http(s)?:\/\/)/g,h=/(^#)/g,S=e.Object.getObjectInfo(O);return S.wrapper===null&&O.match(v)===null&&O.match(h)===null?"http://"+O:O},A,D=function(O){switch(n(".fancy_tab_content").hide(),n("#"+O+"_content").show(),n(".fancy_tab").removeClass("fancy_selected"),n("#"+O).addClass("fancy_selected"),n("#"+O+"_help").show(),O){case"tab_pic_from_url":e.Editor.Image.onLoadTab("url");break;case"tab_video_from_url":e.Editor.Video.onLoadTab();break;case"tab_object_from_url":e.Editor.Object.onLoadTab("url");break;default:break}return!1},U=function(){n("div.fancy_tabs a.fancy_tab:not(.disabled)").show()},F=function(O){var v={};v.width=650,v.height=190,v.text=O;var h={};h.text=e.I18n.getTrans("i.Ok"),h.callback=function(){n.fancybox.close()},v.buttons=[h],e.Utils.showDialog(v)},_=function(O,v){if(O instanceof Array){for(var h=0;h<O.length;h++)_(O[h],v);return}if(v)n(O).parent().removeClass("disableSettingsField"),n(O).removeAttr("disabled");else{if(n(O).is("input")){if(n(O).attr("type")==="checkbox"){var S=n(O).attr("defaultvalue")==="true";n(O).prop("checked",S)}}else if(n(O).is("select")){var k=n(O).find("option[selected='selected']").val();n(O).val(k)}n(O).parent().addClass("disableSettingsField"),n(O).attr("disabled","disabled")}};return{dimentionsToDraw:l,setStyleInPixels:c,getStylesInPercentages:m,getStylesForFitContent:p,autocompleteUrls:T,loadTab:D,hideNonDefaultTabs:U,showErrorDialog:F,enableElementSettingsField:_}})(SceneMaker,jQuery),SceneMaker.Editor.Utils.Loader=(function(e,n,w){var l=function(_){T(n(_).find(".object_wrapper"))},c=function(_){A(n(_).find(".object_wrapper"))},m=function(){T(n(".object_wrapper"))},p=function(){A(n(".object_wrapper"))},T=function(_){n.each(_,function(O,v){var h=n(v).attr("htmlContent");typeof h!="undefined"&&(n(v).html(h),n(v).removeAttr("htmlContent"))})},A=function(_){n.each(_,function(O,v){var h=n(v).html();typeof h!="undefined"&&h!==""&&(n(v).attr("htmlContent",n(v).html()),n(v).html(""))})},D=function(_,O,v){var h=_,S=_.length,k=0;n.each(_,function(N,G){n(G).load(function(K){k=k+1,k===S&&U(h,O,v)}),n(G).error(function(K){k=k+1,v.filterUnloadedImages===!0&&h.splice(h.indexOf(G),1),k===S&&U(h,O,v)})})},U=function(_,O,v){n.each(_,function(h,S){F(S,_,O,v)}),typeof v.callback=="function"&&v.callback(v)},F=function(_,O,v,h){var S=h.titleArray;S&&S[O.indexOf(_)]?n("#"+v).append("<div><p>"+S[O.indexOf(_)]+"</p>"+e.Utils.getOuterHTML(_)+"</div>"):n("#"+v).append("<div>"+e.Utils.getOuterHTML(_)+"</div>")};return{loadObjectsInEditorSlide:l,unloadObjectsInEditorSlide:c,loadAllObjects:m,unloadAllObjects:p,loadImagesOnContainer:D}})(SceneMaker,jQuery),SceneMaker.Editor.Screen=(function(e,n,w){var l=function(){},c=function(Y){var Y=n(Y);e.Screen.getCurrentScreen()?n(e.Screen.getCurrentScreen()).after(Y):m(Y);var L=e.Screen.getCurrentScreenNumber();e.Screen.setCurrentScreenNumber(L+1),e.Screen.triggerScreenLeaveEvent(L),e.Screen.updateScreens(),e.Screen.triggerScreenEnterEvent(e.Screen.getCurrentScreenNumber()),e.Editor.Thumbnails.drawScreenThumbnails(function(){e.Editor.Thumbnails.selectThumbnail(e.Screen.getCurrentScreenNumber()),e.Editor.Thumbnails.moveThumbnailsToScreenWithNumber(e.Screen.getCurrentScreenNumber())})},m=function(R){n(".slides").append(R)},p=function(){var R=e.Editor.Dummies.getDummy(e.Constant.SCREEN,{slideNumber:e.Screen.getScreensQuantity()+1});return c(R),n.fancybox.close(),!1},T=function(R){return n(R).children("article").length},A=function(R){e.Editor.Slides.updateThumbnail(R),n("#bottomside").show(),F(R);var Y=n(R).attr("id"),L=n("#"+Y+" > article");e.Editor.Thumbnails.drawViewThumbnails(L,function(){})},D=function(R){_(R);var Y=e.Editor.View.getCurrentView();Y&&e.Editor.View.closeView(Y),n("#bottomside").hide(),n("#screen_selected > img").attr("src","")},U=function(){var R=e.Screen.getCurrentScreen();F(R)},F=function(R){n("#screen_selected_img").addClass("selectedScreenThumbnailInViews");var Y=e.Editor.View.getCurrentView();Y&&e.Editor.View.closeView(Y),e.Editor.Tools.loadToolsForSlide(R)},_=function(R){n("#screen_selected_img").removeClass("selectedScreenThumbnailInViews"),e.Editor.Marker.cancelAnnotationSelectedForSlide(n(R).attr("id"))},O=function(R){var Y=n(R.target).prev("img").attr("slidenumber"),L=n("article[type='screen'][slidenumber='"+Y+"']")[0];v(L)},v=function(R){var Y={};Y.width=375,Y.height=130,Y.notificationIconSrc=e.Editor.Thumbnails.getThumbnailURLForSlide(R),Y.notificationIconClass="notificationIconDeleteSlide",Y.text=e.I18n.getTrans("i.AreYouSureDeleteScreen");var L={};L.text=e.I18n.getTrans("i.no"),L.callback=function(){n.fancybox.close()};var Q={};Q.text=e.I18n.getTrans("i.delete"),Q.callback=function(){h(R),n.fancybox.close()},Y.buttons=[L,Q],e.Utils.showDialog(Y)},h=function(R){if(R!==null){e.Screen.getCurrentScreen()===R&&D(R);var Y=n(R).attr("slidenumber"),L=e.Screen.getCurrentScreenNumber();n(R).remove(),Y<=L&&(L-1>0?e.Screen.setCurrentScreenNumber(L-1):e.Screen.getScreensQuantity()>1&&e.Screen.setCurrentScreenNumber(1)),e.Screen.updateScreens(),e.Editor.Thumbnails.drawScreenThumbnails(function(){if(typeof e.Screen.getCurrentScreen()!="undefined"){var Q=e.Screen.getCurrentScreenNumber();e.Editor.Thumbnails.selectThumbnail(Q),e.Editor.Thumbnails.moveThumbnailsToScreenWithNumber(Q),e.Screen.triggerScreenEnterEvent(Q)}})}},S=function(R,Y){var L=e.Screen.getScreenWithNumber(R),Q=e.Screen.getScreenWithNumber(Y);if(!(typeof L=="undefined"||typeof Q=="undefined")&&!(typeof L.length!==w&&(L=n(L)[0],typeof L=="undefined"))&&!(typeof Q.length!==w&&(Q=n(Q)[0],typeof Q=="undefined"))&&!(L.tagName!="ARTICLE"||Q.tagName!="ARTICLE"||L==Q)){var oe=null;if(Y>R)oe="after";else if(Y<R)oe="before";else return;var b=!1,Le=e.Screen.getCurrentScreen(),ce=parseInt(n(Le).attr("slidenumber"));Le===L&&(b=!0);var J=e.Editor.Slides.copyTextAreasOfSlide(L);if(n(L).remove(),oe=="after")n(Q).after(L);else if(oe=="before")n(Q).before(L);else return;e.Utils.addTempShown(L),e.Editor.Marker.refreshDraggables(L),e.Editor.Slides.cleanTextAreasOfSlide(L),e.Editor.Slides.loadTextAreasOfSlide(L,J),e.Utils.removeTempShown(L),e.Screen.setScreens(n("section.slides > article")),n("#screens_list").find("div.wrapper_slidethumbnail:has(img[slidenumber])").each(function(f,Re){var je=f+1,Me=n(Re).find("p.ptext_barbutton");n(Me).html(je);var ot=n(Re).find("img.image_slidethumbnail");n(ot).attr("slidenumber",je)});var me;b?me=Y:R>ce&&Y<=ce?me=ce+1:R<ce&&Y>=ce&&(me=ce-1),typeof me=="number"&&e.Screen.setCurrentScreenNumber(me),e.Screen.updateScreens()}},k=function(R,Y){if(typeof R!="undefined"){var L=n(R).attr("id");e.Editor.Slides.cleanTextAreasOfSlide(R),R=N(R);var Q=n(R).attr("id"),oe=e.Screen.getCurrentScreen();oe?n(oe).after(R):n("section#slides_panel").append(R);var b=n("#"+Q);e.Editor.Marker.refreshDraggables(b),e.Editor.Marker.copyMarkers(L,Q),Y.textAreas&&e.Editor.Slides.loadTextAreasOfSlide(b,Y.textAreas,!0),e.Screen.updateScreens(),e.Editor.Thumbnails.drawScreenThumbnails(function(){oe?(e.Screen.goToScreenWithNumber(e.Screen.getCurrentScreenNumber()+1),e.Editor.Thumbnails.moveThumbnailsToScreenWithNumber(e.Screen.getCurrentScreenNumber())):(e.Screen.goToScreenWithNumber(1),e.Editor.Thumbnails.moveThumbnailsToScreenWithNumber(1))}),n(b).find("[copyid]").removeAttr("copyid")}},N=function(R){var Y=n(R),L=Y.attr("id"),Q=e.Utils.getId("article");Y.attr("id",Q);var oe=Y.find("img.slide_background#"+L+"_background");n(oe).attr("id",Q+"_background");var b=Y.children("article");return b.each(function(Le,ce){G(ce,Q)}),R},G=function(R,Y){var L=n(R);switch(L.attr("type")){case e.Constant.VIEW_IMAGE:return K(L,Y);case e.Constant.VIEW_CONTENT:return te(L,Y)}},K=function(R,Y){var L=R.attr("id"),Q=e.Utils.getId(Y+"_article");R.attr("id",Q);var oe=R.find("img.slide_background#"+L+"_background");n(oe).attr("id",Q+"_background")},te=function(R,Y){var L=e.Utils.getId(Y+"_article");R.attr("id",L),R.children("div[id].view_content_zone").each(function(Q,oe){oe=X(oe,L)})},X=function(R,Y){n(R).attr("copyid",n(R).attr("id"));var L=e.Utils.getId(Y+"_zone");return n(R).attr("id",L),n(R).find("[id]").each(function(Q,oe){oe=V(oe,L)}),R},V=function(R,Y){var L=ie(R),Q=e.Utils.getId(Y+"_"+L);return n(R).attr("id",Q),R},ie=function(R){var Y=n(n(R).attr("id").split("_")).last()[0];return Y.length>1?Y.substring(0,Y.length-1):Y};return{init:l,addScreen:c,appendScreen:m,onClickAddScreenButton:p,onEnterScreen:A,onLeaveScreen:D,openScreen:F,closeScreen:_,onDeleteScreenClicked:O,removeScreen:v,onClickOpenScreen:U,getViewsQuantity:T,moveScreenTo:S,copyScreen:k}})(SceneMaker,jQuery),SceneMaker.Editor.View=(function(e,n,w){var l,c=function(){},m=function(){return l},p=function(V){l=V},T=function(V,R){var R=n(R).css("display","none")[0];A(V,R),e.Editor.Tools.addTooltipsToSlide(R),e.Editor.View.openView(R),e.Editor.Thumbnails.drawViewThumbnails(n(V).find("article"),function(){e.Editor.Thumbnails.selectViewThumbnail(n(R).attr("slidenumber"))})},A=function(V,ie){n(V).append(ie)},D=function(){return n("#addViewFancybox").trigger("click"),e.Editor.Utils.loadTab("tab_views"),!1},U=function(V){var ie=e.Screen.getCurrentScreen(),R=n(V.target).prev("img").attr("slidenumber"),Y=n(ie).find("article[slidenumber='"+R+"']")[0];F(Y)},F=function(V){var ie={};ie.width=375,ie.height=130,ie.notificationIconSrc=e.Editor.Thumbnails.getThumbnailURLForSlide(V),ie.notificationIconClass="notificationIconDeleteSlide",ie.text=e.I18n.getTrans("i.AreYouSureDeleteView");var R={};R.text=e.I18n.getTrans("i.no"),R.callback=function(){n.fancybox.close()};var Y={};Y.text=e.I18n.getTrans("i.delete"),Y.callback=function(){_(V),n.fancybox.close()},ie.buttons=[R,Y],e.Utils.showDialog(ie)},_=function(V){if(typeof V=="object"){var ie=n(V).parent(),R=e.View.getCurrentView(),Y=R===V;e.View.getCurrentView()===V&&N(V),n(V).remove();var L=n(ie).find("article");n(L).each(function(Q,oe){n(oe).attr("slidenumber",Q+1)}),e.Editor.Thumbnails.drawViewThumbnails(L,function(){Y===!1&&e.Editor.Thumbnails.selectViewThumbnail(n(R).attr("slidenumber"))}),Y&&e.Editor.Screen.openScreen(ie)}},O=function(V){var ie=e.Screen.getCurrentScreen(),R=n(ie).find("article"),Y=R[V-1];v(Y)},v=function(V){var ie=m();if(ie)N(ie);else{var R=n(V).parent();e.Editor.Screen.closeScreen(R)}p(V),h(V),e.Editor.Thumbnails.selectViewThumbnail(n(V).attr("slidenumber")),e.Slides.triggerSlideEnterEvent(n(V).attr("id"))},h=function(V){n(V).css("display","block")},S=function(V){n(V).css("display","none")},k=function(V){var ie=e.Screen.getCurrentScreen(),R=n(ie).find("article"),Y=R[V-1];N(Y)},N=function(V){var ie=n(V).attr("id");p(null),e.Editor.Thumbnails.selectViewThumbnail(null),S(V),e.Editor.Marker.cancelAnnotationSelectedForSlide(ie),e.Slides.triggerSlideLeaveEvent(ie)},G=function(V){te(1)},K=function(){te(-1)},te=function(V){var ie=e.View.getCurrentViewNumber();typeof ie=="undefined"&&(ie=0);var R=e.Editor.Screen.getViewsQuantity(e.Screen.getCurrentScreen()),Y=ie+V,L=Math.min(Math.max(0,Y),R);Y===L&&X(Y)},X=function(V){V===0?e.Editor.Screen.onClickOpenScreen():e.Editor.View.openViewWithNumber(V)};return{init:c,addView:T,appendView:A,onClickAddViewButton:D,onDeleteViewClicked:U,removeView:F,getCurrentView:m,openViewWithNumber:O,openView:v,closeViewWithNumber:k,closeView:N,forwardOneView:G,backwardOneView:K}})(SceneMaker,jQuery),SceneMaker.Editor.Marker=(function(e,n,w){var l,c,m,p,T="NONE",A,D,U=function(){l={},p={},A=n('<a href="#hotspotSettings_fancybox" style="display:none"></a>'),n(A).fancybox({autoDimensions:!1,height:690,width:920,scrolling:"no",showCloseButton:!1,padding:0,onStart:function(ue){me()},onComplete:function(ue){},onClosed:function(ue){}}),D=n('<a href="#hotzoneSettings_fancybox" style="display:none"></a>'),n(D).fancybox({autoDimensions:!1,height:690,width:920,scrolling:"no",showCloseButton:!1,padding:0,onStart:function(ue){Ct()},onComplete:function(ue){},onClosed:function(ue){}})},F=function(ue){var se={hotspots:{},hotzones:{},caption:{}};return se},_=function(ue,se){ue&&(typeof ue.background=="string"&&e.Editor.Slides.setSlideBackground(se,ue.background),v(ue.id,ue.hotzones),O(ue.id,ue.hotspots),e.Editor.Caption.loadCaption(ue.id,ue.caption))},O=function(ue,se){Array.isArray(se)&&se.forEach(function(Ne,Xe){e.Utils.registerId(Ne.id);var it,vt;n("body").attr("aspectRatio")==="16:9"?(it=1024,vt=576):(it=800,vt=600),Ne.x=Ne.x*it/100,Ne.y=Ne.y*vt/100,Ne.width=Ne.width*it/100,Ne.height=Ne.height*vt/100,X(ue,Ne),Array.isArray(Ne.actions)&&Ne.actions.length>0&&(l[ue].hotspots[Ne.id].actions=Ne.actions)})},v=function(ue,se){Array.isArray(se)&&n(se).each(function(Ne,Xe){h(ue,Xe)})},h=function(ue,se){if(Array.isArray(se.points)){var Ne;typeof se.id=="string"?Ne=se.id:Ne=e.Utils.getId("annotation-");var Xe;typeof se.idAlias=="string"?Xe=se.idAlias:Xe=e.Utils.getId("zone-"),p[Ne]=Xe,e.Utils.registerId(Xe);var it=e.Marker.createAnnotationFromPointsArray(Ne,se.points),vt=Et(ue);vt.addAnnotation(it),l[ue].hotzones[Ne]={},l[ue].hotzones[Ne].cursorVisibility=se.cursorVisibility,l[ue].hotzones[Ne].enabled=se.enabled,Array.isArray(se.actions)&&se.actions.length>0&&(l[ue].hotzones[Ne].actions=se.actions)}},S=function(){T==="HOTSPOT"?G("HOTSPOT"):N("HOTSPOT")},k=function(){T==="HOTZONE"?G("HOTZONE"):N("HOTZONE")},N=function(ue){switch(T=ue,ue){case"HOTSPOT":G("HOTZONE"),n("#slides_panel").addClass("hotspot_active");break;case"HOTZONE":G("HOTSPOT"),n("#slides_panel").addClass("hotzone_active"),We();break;case"NONE":G("HOTSPOT"),G("HOTZONE");break}},G=function(ue){switch(T===ue&&(T="NONE"),ue){case"HOTSPOT":n("#slides_panel").removeClass("hotspot_active"),Kt(w);break;case"HOTZONE":n("#slides_panel").removeClass("hotzone_active"),m=w,xt();break;default:break}},K=function(ue){var se=n(ue.target);if(T!=="NONE")if(se.closest('article[type="'+e.Constant.SCREEN+'"]').length===0)N("NONE");else switch(T){case"HOTSPOT":te(ue);break;case"HOTZONE":break;default:break}else se.hasClass("hotspot")&&ce(se)},te=function(ue){ue.preventDefault(),ue.stopPropagation();var se=e.Slides.getCurrentSlide(),Ne=n(se).attr("id"),Xe=e.Utils.getId("hotspot-"),it=42,vt=se.getBoundingClientRect(),at=ue.clientX-vt.left-it/2,_t=ue.clientY-vt.top-it/2;X(Ne,{id:Xe,x:at,y:_t}),N("NONE")},X=function(ue,se){typeof se.image!="string"&&(se.image=e.Marker.getDefaultHotspotImg()),typeof se.lockAspectRatio!="boolean"&&(se.lockAspectRatio=!0),typeof se.visibility!="string"&&(se.visibility="visible"),typeof se.cursorVisibility!="string"&&(se.cursorVisibility="pointer"),typeof se.width!="number"&&(se.width=42),typeof se.height!="number"&&(se.height=42);var Ne=parseFloat(se.rotationAngle);(typeof Ne!="number"||isNaN(Ne)||Ne<0||Ne>360)&&(Ne=0);var Xe=n("#"+ue),it=e.Slides.getSlideBackgroundImg(Xe),vt=n("<img>",{src:se.image,class:"hotspot",id:se.id,rotationAngle:Ne,css:{position:"absolute",left:se.x,top:se.y,width:se.width+"px",height:se.height+"px",transform:"rotate("+Ne+"deg)"}}).appendTo(it.parent());ie(vt),typeof l[ue]=="undefined"&&(l[ue]=F()),l[ue].hotspots[se.id]={},l[ue].hotspots[se.id].lockAspectRatio=se.lockAspectRatio,l[ue].hotspots[se.id].visibility=se.visibility,l[ue].hotspots[se.id].cursorVisibility=se.cursorVisibility,V(vt)},V=function(ue){ue.draggable({start:function(se,Ne){ce(ue)},stop:function(se,Ne){ie(ue)}})},ie=function(ue,se=15){const Ne=ue.parent();Y(Ne,ue,se)&&L(Ne,ue)},R=function(ue,se,Ne=0){const Xe=ue.innerWidth(),it=ue.innerHeight(),vt=se.outerWidth(),at=se.outerHeight(),_t=se.position();return _t.left>=-Ne&&_t.top>=-Ne&&_t.left+vt<=Xe+Ne&&_t.top+at<=it+Ne},Y=function(ue,se,Ne=0){const Xe=ue.innerWidth(),it=ue.innerHeight(),vt=se.outerWidth(),at=se.outerHeight(),_t=se.position();return _t.left+vt<=+Ne||_t.top+at<=+Ne||_t.left>=Xe-Ne||_t.top>=it-Ne},L=function(ue,se,Ne=0){const Xe=ue.innerWidth(),it=ue.innerHeight(),vt=se.outerWidth(),at=se.outerHeight();let{left:_t,top:kt}=se.position();_t=Math.max(Ne,Math.min(_t,Xe-vt-Ne)),kt=Math.max(Ne,Math.min(kt,it-at-Ne)),se.stop(!0).animate({left:_t,top:kt},1e3)},Q=function(ue){n(ue).find("img.hotspot").each(function(){var se=n(this);V(se)})},oe=function(ue,se){b(ue,se),n("#"+se).children("article").each(function(Ne,Xe){var it=n(Xe).attr("id"),vt=ue+it.slice(se.length);b(vt,it)})},b=function(ue,se){if(typeof l[se]=="undefined"&&(l[se]=F()),typeof l[ue]!="undefined"){l[se]=JSON.parse(JSON.stringify(l[ue]));var Ne=n("#"+se);if(typeof l[se].annotator!="undefined"){delete l[se].annotator,l[se].hotzones={};var Xe=e.Slides.getSlideBackgroundImg(Ne);Xe.parent("div[data-theme]").remove(),Xe.prependTo(Ne)}var it={};Ne.children("img.hotspot").each(function(vn,dn){var Bn=n(dn).attr("id"),tn=e.Utils.getId("hotspot-");n(dn).attr("id",tn),it[Bn]=tn});for(var vt in it){var at=it[vt],_t=Object.assign({},l[se].hotspots[vt]);typeof _t!="undefined"&&Object.keys(_t).length>0&&(l[se].hotspots[at]=_t),delete l[se].hotspots[vt]}for(var kt=Mt(n("#"+ue)),Nt=kt.hotzones,Gt={},Bt=0;Bt<Nt.length;Bt++){var Jt=Nt[Bt].id;Nt[Bt].id=e.Utils.getId("annotation-"),Gt[Jt]=Nt[Bt].id,delete Nt[Bt].idAlias}for(var un in l[se].hotspots){var mn=l[se].hotspots[un];l[se].hotspots[un].actions=Le(mn.actions,un,ue,se,it,Gt)}for(var jt=0;jt<Nt.length;jt++)Nt[jt].actions=Le(Nt[jt].actions,Nt[jt].id,ue,se,it,Gt);Array.isArray(Nt)&&Nt.length>0&&v(se,Nt)}},Le=function(ue,se,Ne,Xe,it,vt){if(Array.isArray(ue))for(var at=ue.length,_t=0;_t<at;_t++){var kt=ue[_t];switch(kt.actionType){case"openView":if(kt.actionParams&&typeof kt.actionParams.view=="string"){var Nt=kt.actionParams.view,Gt;if(Nt.startsWith(Ne))Gt=Xe+Nt.slice(Ne.length);else if(Nt.split("_")[0]===Ne.split("_")[0]){var Bt=Xe.split("_")[0];Gt=Bt+Nt.slice(Bt.length)}typeof Gt=="string"&&(ue[_t].actionParams.view=Gt)}break;case"showHotspot":case"hideHotspot":if(kt.actionParams&&typeof kt.actionParams.hotspotId=="string"){var Jt=kt.actionParams.hotspotId,un=Object.keys(it).includes(Jt);un&&(kt.actionParams.hotspotId=it[Jt])}break;case"enableHotzone":case"disableHotzone":if(kt.actionParams&&typeof kt.actionParams.hotzoneId=="string"){var mn=kt.actionParams.hotzoneId,jt=Object.keys(vt).includes(mn);jt&&(kt.actionParams.hotzoneId=vt[mn])}break}}return ue},ce=function(ue){Kt(ue),e.Editor.Tools.loadToolsForElement("hotspot")},J=function(){n(A).trigger("click")},me=function(){var ue=n(e.Slides.getCurrentSlide()).attr("id"),se=n(c),Ne=se.attr("id"),Xe=l[ue].hotspots[Ne];n("#hotspotIdInput").val(Ne),f(function(){n("#hotspotImageGallery img").removeClass("selected");var Gt=se.attr("src"),Bt=n("#hotspotImageGallery").find("img[src='"+Gt+"']")[0];typeof Bt=="undefined"?(n("#hotspotImageURL").val(Gt),n("#hotspotImageSource").val("url").trigger("change")):(n(Bt).addClass("selected"),n("#hotspotImageSource").val("gallery").trigger("change"),e.Editor.Carousel.goToElement("hotspotImageGallery",Bt))});var it=parseFloat(se.css("left")),vt=parseFloat(se.css("top"));n("#hotspotPositionX").val(it),n("#hotspotPositionY").val(vt),typeof l[ue].hotspots[Ne].lockAspectRatio=="boolean"&&n("#hotspotLockAspectRatio").prop("checked",l[ue].hotspots[Ne].lockAspectRatio);var at=se.width(),_t=se.height(),kt=Math.round(at/_t*100)/100;n("#hotspotSizeWidth").val(at),n("#hotspotSizeHeight").val(_t),n("#hotspotAspectRatio").val(kt);var Nt=se.attr("rotationAngle");!isNaN(Nt)&&Nt>=0&&Nt<=360?n("#hotspotRotation").val(Nt):n("#hotspotRotation").val(0),typeof l[ue].hotspots[Ne].visibility=="string"?n("#hotspotVisibility").val(l[ue].hotspots[Ne].visibility):n("#hotspotVisibility").val("visible"),typeof l[ue].hotspots[Ne].cursorVisibility=="string"?n("#hotspotCursorVisibility").val(l[ue].hotspots[Ne].cursorVisibility):n("#hotspotCursorVisibility").val("pointer"),e.Editor.Actions.loadActions(n("#hotspotActions"),Xe,"HOTSPOT")},f=function(ue){je();var se=[{src:e.ImagesPath+"hotspotgallery/hotspot.png"},{src:e.ImagesPath+"hotspotgallery/arrow.png"},{src:e.ImagesPath+"hotspotgallery/magnifying_glass.png"},{src:e.ImagesPath+"hotspotgallery/eye.png"},{src:e.ImagesPath+"hotspotgallery/hand.png"},{src:e.ImagesPath+"hotspotgallery/hand2.png"},{src:e.ImagesPath+"hotspotgallery/wheel.png"},{src:e.ImagesPath+"hotspotgallery/info.png"},{src:e.ImagesPath+"hotspotgallery/dialogue.png"},{src:e.ImagesPath+"hotspotgallery/dialogue2.png",aspectRatio:1.164},{src:e.ImagesPath+"hotspotgallery/pin.png",aspectRatio:.774},{src:e.ImagesPath+"hotspotgallery/close.png"},{src:e.ImagesPath+"hotspotgallery/key.png",aspectRatio:.779},{src:e.ImagesPath+"hotspotgallery/painting.png",aspectRatio:.891},{src:e.ImagesPath+"hotspotgallery/keypad_standard.png"},{src:e.ImagesPath+"hotspotgallery/keypad_retro.png"},{src:e.ImagesPath+"hotspotgallery/keypad_futuristic.png"},{src:e.ImagesPath+"hotspotgallery/decoderdisk_standard.png"},{src:e.ImagesPath+"hotspotgallery/decoderdisk_basic.png"},{src:e.ImagesPath+"hotspotgallery/decoderdisk_retro.png"},{src:e.ImagesPath+"hotspotgallery/decoderdisk_futuristic.png"},{src:e.ImagesPath+"hotspotgallery/safebox_standard.png"},{src:e.ImagesPath+"hotspotgallery/safebox_retro.png"},{src:e.ImagesPath+"hotspotgallery/safebox_futuristic.png",aspectRatio:1.286},{src:e.ImagesPath+"hotspotgallery/signal_generator.png"},{src:e.ImagesPath+"hotspotgallery/switch_standard_off.png",aspectRatio:.767},{src:e.ImagesPath+"hotspotgallery/switch_standard_on.png",aspectRatio:.767},{src:e.ImagesPath+"hotspotgallery/switch_retro_off.png",aspectRatio:.743},{src:e.ImagesPath+"hotspotgallery/switch_retro_on.png",aspectRatio:.743},{src:e.ImagesPath+"hotspotgallery/switch_futuristic_off.png",aspectRatio:.762},{src:e.ImagesPath+"hotspotgallery/switch_futuristic_on.png",aspectRatio:.762},{src:e.ImagesPath+"hotspotgallery/switches_container_standard.png",aspectRatio:1.779},{src:e.ImagesPath+"hotspotgallery/switches_container_retro.png",aspectRatio:1.779},{src:e.ImagesPath+"hotspotgallery/switches_container_futuristic.png",aspectRatio:16/9},{src:e.ImagesPath+"hotspotgallery/wires_container_standard.png",aspectRatio:1.687},{src:e.ImagesPath+"hotspotgallery/wires_container_retro.png",aspectRatio:1.93},{src:e.ImagesPath+"hotspotgallery/wires_container_futuristic.png",aspectRatio:1.875},{src:e.ImagesPath+"hotspotgallery/chessboard_standard.png"},{src:e.ImagesPath+"hotspotgallery/chessboard_realistic.png"},{src:e.ImagesPath+"hotspotgallery/chessboard_futuristic.png"},{src:e.ImagesPath+"hotspotgallery/chessbox_standard.png",aspectRatio:.564},{src:e.ImagesPath+"hotspotgallery/chessbox_realistic.png",aspectRatio:.564}],Ne=[];n.each(se,function(it,vt){var at=n("<img src='"+vt.src+"'/>");typeof vt.aspectRatio=="number"&&at.attr("aspectratio",vt.aspectRatio),Ne.push(at)});var Xe={};Xe.callback=Re,Xe.afterDrawCarouselCallback=ue,e.Editor.Utils.Loader.loadImagesOnContainer(Ne,"hotspotImageGallery",Xe)},Re=function(ue){var se=n("#hotspotImageGallery"),Ne=se.parent();se.show(),e.Utils.addTempShown([Ne,se]);var Xe=new Array;Xe.rows=1,Xe.rowItems=9,Xe.scrollItems=9,Xe.afterCreateCarruselFunction=function(){setTimeout(function(){e.Utils.removeTempShown([Ne,se]),typeof ue.afterDrawCarouselCallback=="function"&&ue.afterDrawCarouselCallback()},100)},e.Editor.Carousel.createCarousel("hotspotImageGallery",Xe)},je=function(){e.Editor.Carousel.cleanCarousel("hotspotImageGallery"),n("#hotspotImageGallery").hide()},Me=function(ue){var se=ue.target.value;if(se==="gallery"){var Ne=n("#hotspotImageGallery").parent().parent();n(Ne).show(),n("#hotspotImageURLWrapper").hide(),n("#hotspotImageURL").val(""),ot()}else if(se==="url"){var Ne=n("#hotspotImageGallery").parent().parent();n(Ne).hide(),n("#hotspotImageURLWrapper").show(),ot()}},ot=function(){var ue=n("#hotspotImageURLPreviewWrapper"),se=n("#hotspotImageURL").val();typeof se=="string"&&se.trim()!==""?ue.html("<img src='"+se+"'>").show():ue.html("").hide()},Tt=function(ue){var se=n(ue.target);n("#hotspotImageGallery").find("img").removeClass("selected"),se.addClass("selected");var Ne=parseFloat(se.attr("aspectratio"));isNaN(parseFloat(Ne))&&(Ne=1);var Xe=n("#hotspotSizeWidth").val()/n("#hotspotSizeHeight").val();if(Ne!==Xe&&Ne>0){var it=Math.round(n("#hotspotSizeWidth").val()/Ne);n("#hotspotSizeHeight").val(it),n("#hotspotAspectRatio").val(Ne)}},Ue=function(ue){var se=n("#hotspotLockAspectRatio").prop("checked");if(se){var Ne=parseFloat(n("#hotspotAspectRatio").val()),Xe=Math.round(n("#hotspotSizeWidth").val()/Ne);n("#hotspotSizeHeight").val(Xe)}},et=function(ue){var se=n("#hotspotLockAspectRatio").prop("checked");if(se){var Ne=parseFloat(n("#hotspotAspectRatio").val()),Xe=Math.round(n("#hotspotSizeHeight").val()*Ne);n("#hotspotSizeWidth").val(Xe)}},Pe=function(ue){var se=n(e.Slides.getCurrentSlide()).attr("id"),Ne=n(c),Xe=Ne.attr("id"),it={},vt;switch(n("#hotspotImageSource").val()){case"gallery":var at=n("#hotspotImageGallery img.selected");at.length&&(vt=at.attr("src"));break;case"url":vt=n("#hotspotImageURL").val();break;default:break}typeof vt!="string"&&(vt=e.Marker.getDefaultHotspotImg()),Ne.attr("src",vt);var _t=parseFloat(n("#hotspotPositionX").val()),kt=parseFloat(n("#hotspotPositionY").val());typeof _t=="number"&&!Number.isNaN(_t)&&_t>=0&&Ne.css("left",_t+"px"),typeof kt=="number"&&!Number.isNaN(kt)&&kt>=0&&Ne.css("top",kt+"px"),it.lockAspectRatio=n("#hotspotLockAspectRatio").prop("checked");var Nt=n("#hotspotSizeWidth").val(),Gt=n("#hotspotSizeHeight").val();Nt>0&&Ne.width(Nt),Gt>0&&Ne.height(Gt);var Bt=parseFloat(n("#hotspotRotation").val());!isNaN(Bt)&&Bt>=0&&Bt<=360&&(Ne.attr("rotationAngle",Bt),Ne.css("transform","rotate("+Bt+"deg)")),it.visibility=n("#hotspotVisibility").val(),it.cursorVisibility=n("#hotspotCursorVisibility").val(),ie(Ne);var Jt=e.Editor.Actions.getActionsJSON(n("#hotspotActions"));Jt.length>0&&(it.actions=Jt),l[se].hotspots[Xe]=it,n.fancybox.close()},We=function(){var ue=n(e.Slides.getCurrentSlide()),se=ue.attr("id");if(typeof l[se]=="undefined"||typeof l[se].annotator=="undefined"){var Ne=ue.children("img.slide_background");if(Ne.length===0){G("HOTZONE");return}Et(se)}ue.find("div > svg.a9s-annotationlayer").css("pointer-events","auto"),l[se].annotator.setDrawingEnabled(!0),l[se].annotator.setUserSelectAction("NONE"),l[se].annotator.off("selectionChanged",le)},xt=function(){var ue=n(e.Slides.getCurrentSlide()),se=ue.attr("id");ue.find("div > svg.a9s-annotationlayer").css("pointer-events","none"),typeof l[se]!="undefined"&&typeof l[se].annotator!="undefined"&&(l[se].annotator.setDrawingEnabled(!1),l[se].annotator.setUserSelectAction("EDIT"),l[se].annotator.on("selectionChanged",le))},Et=function(ue){if(typeof l[ue]=="undefined"&&(l[ue]=F()),typeof l[ue].annotator!="undefined")return l[ue].annotator;var se=n("#"+ue),Ne=e.Slides.getSlideBackgroundImg(se),Xe=Annotorious.createImageAnnotator(Ne.attr("id"),{drawingEnabled:!1,drawingMode:"click",userSelectAction:"EDIT",style:{fill:"#dddddd",fillOpacity:.25,stroke:"#000000",strokeWidth:1}});Xe.setDrawingTool("polygon"),Xe.on("createAnnotation",vt=>{p[vt.id]=e.Utils.getId("zone-"),l[ue].hotzones[vt.id]={},l[ue].hotzones[vt.id].cursorVisibility="default",l[ue].hotzones[vt.id].enabled=!0,G("HOTZONE")}),Xe.on("selectionChanged",le);var it=n(se.find("div > svg.a9s-annotationlayer").parent());return se.children("img.hotspot").each(function(vt,at){it.append(at)}),l[ue].annotator=Xe,Xe},le=function(ue){Array.isArray(ue)&&ue.length===1&&Oe(ue[0].id)},Oe=function(ue){T==="HOTSPOT"&&G("HOTSPOT"),m=ue,e.Editor.Tools.loadToolsForElement("hotzone")},ft=function(){n(D).trigger("click")},Ct=function(){var ue=n(e.Slides.getCurrentSlide()).attr("id"),se=m,Ne=l[ue].hotzones[se];n("#hotzoneIdInput").val(p[se]),typeof l[ue].hotzones[se].cursorVisibility=="string"?n("#hotzoneCursorVisibility").val(l[ue].hotzones[se].cursorVisibility):n("#hotzoneCursorVisibility").val("default"),l[ue].hotzones[se].enabled===!1?n("#hotzoneEnabled").val("false"):n("#hotzoneEnabled").val("true"),e.Editor.Actions.loadActions(n("#hotzoneActions"),Ne,"HOTZONE")},Rt=function(ue){var se=n(e.Slides.getCurrentSlide()).attr("id"),Ne=m,Xe={};Xe.enabled=n("#hotzoneEnabled").val()!=="false",Xe.cursorVisibility=n("#hotzoneCursorVisibility").val();var it=e.Editor.Actions.getActionsJSON(n("#hotzoneActions"));it.length>0&&(Xe.actions=it),l[se].hotzones[Ne]=Xe,n.fancybox.close()},Wt=function(){return l},nn=function(ue){l=ue},rn=function(){return c},Kt=function(ue){c=ue,n("img.hotspot").removeClass("hotspot_selected"),typeof ue!="undefined"&&n(ue).addClass("hotspot_selected")},Vt=function(){return m},Qt=function(ue){m=ue,typeof ue=="undefined"&&pt(n(e.Slides.getCurrentSlide()).attr("id"))},st=function(ue){return p[ue]},pt=function(ue){typeof l[ue]!="undefined"&&typeof l[ue].annotator!="undefined"&&l[ue].annotator.cancelSelected()},qt=function(){var ue;if(typeof c!="undefined")ue=!0;else if(typeof m=="undefined")return;var se={};se.width=375,se.height=130,ue?(se.text=e.I18n.getTrans("i.AreYouSureDeleteHotspot"),se.notificationIconSrc=n(c).attr("src"),se.notificationIconClass="notificationIconDeleteHotspot"):(se.text=e.I18n.getTrans("i.AreYouSureDeleteHotzone"),se.notificationIconSrc=e.ImagesPath+"thumbs/hotzone.png");var Ne={};Ne.text=e.I18n.getTrans("i.no"),Ne.callback=function(){n.fancybox.close()};var Xe={};Xe.text=e.I18n.getTrans("i.delete"),Xe.callback=function(){var it=n(e.Slides.getCurrentSlide()).attr("id");if(ue){var vt=n(c),at=vt.attr("id");vt.remove(),delete l[it].hotspots[at],Kt(w)}else{var _t=l[it].annotator;typeof _t!="undefined"&&_t.removeAnnotation(m),delete l[it].hotzones[m],m=w}e.Editor.Tools.cleanToolbar(),n.fancybox.close()},se.buttons=[Ne,Xe],e.Utils.showDialog(se)},Mt=function(ue){var se={};se.id=n(ue).attr("id"),se.type=n(ue).attr("type");var Ne=e.Slides.getSlideBackground(ue);if(typeof Ne=="string"&&(se.background=Ne),typeof l[se.id]!="undefined"){var Xe=Object.keys(l[se.id].hotspots);Xe.length>0&&(se.hotspots=[],Xe.forEach(at=>{var _t=n("img.hotspot[id='"+at+"']"),kt=parseFloat(_t.css("left")),Nt=parseFloat(_t.css("top")),Gt=l[se.id].hotspots[at],Bt,Jt;n("body").attr("aspectRatio")==="16:9"?(Bt=1024,Jt=576):(Bt=800,Jt=600);var un=(kt*100/Bt).toFixed(4),mn=(Nt*100/Jt).toFixed(4),jt=(_t.width()*100/Bt).toFixed(4),vn=(_t.height()*100/Jt).toFixed(4),dn={id:at,x:un,y:mn,image:_t.attr("src"),width:jt,height:vn,lockAspectRatio:Gt.lockAspectRatio,rotationAngle:_t.attr("rotationAngle"),visibility:Gt.visibility,cursorVisibility:Gt.cursorVisibility};Array.isArray(Gt.actions)&&Gt.actions.length>0&&(dn.actions=Gt.actions),se.hotspots.push(dn)}));var it=l[se.id].annotator;if(typeof it!="undefined"){var vt=it.getAnnotations();vt.length>0&&(se.hotzones=[],vt.forEach(at=>{var _t=at.id,kt=l[se.id].hotzones[_t],Nt=at.target.selector.geometry.points,Gt={id:_t,idAlias:p[_t],points:Nt,cursorVisibility:kt.cursorVisibility,enabled:kt.enabled};Array.isArray(kt.actions)&&kt.actions.length>0&&(Gt.actions=kt.actions),se.hotzones.push(Gt)}))}se=e.Editor.Caption.saveCaption(se)}return se};return{init:U,drawSlideWithMakers:_,refreshDraggables:Q,copyMarkers:oe,addHotspot:S,addHotzone:k,onClick:K,getSlideData:Wt,setSlideData:nn,getDefaultSlideConfig:F,getCurrentHotspot:rn,setCurrentHotspot:Kt,showHotspotSettings:J,getCurrentHotzoneId:Vt,setCurrentHotzoneId:Qt,getAliasForHotzone:st,showHotzoneSettings:ft,cancelAnnotationSelectedForSlide:pt,deleteCurrentHotmarker:qt,onHotspotImageSourceChange:Me,onClickHotspotImageGallery:Tt,checkHotspotImageURLPreview:ot,onInputHotspotSizeWidth:Ue,onInputHotspotSizeHeight:et,onHotspotSettingsDone:Pe,onHotzoneSettingsDone:Rt,saveSlideWithMarkers:Mt}})(SceneMaker,jQuery),SceneMaker.Editor.Actions=(function(e,n,w){var l=function(){var O=[],v=e.Editor.getOptions().nPuzzles;if(typeof v=="number"&&v>0)for(var h=0;h<v;h++){var S=h+1;O.push({value:S,text:e.I18n.getTrans("i.PuzzleOption",{number:S})})}n("div.actionWrapperTemplate div.actionParamsPuzzle select, div.actionWrapperTemplate div.actionEventParamsPuzzle select").each(function(){var k=n(this);k.empty(),k.append(n("<option>",{value:"none",text:e.I18n.getTrans("i.Unspecified")})),n.each(O,function(N,G){k.append(n("<option>",{value:G.value,text:G.text}))})})},c=function(O){var v=n("div.actionWrapperTemplate"),h=[];n('article[type="'+e.Constant.SCREEN+'"]').each(function(){var R=n(this);h.push({value:R.attr("id"),text:e.I18n.getTrans("i.ScreenOption",{number:R.attr("slidenumber")})})}),v.find("div.actionParamsScreen select").each(function(){var R=n(this);R.empty(),R.append(n("<option>",{value:"none",text:e.I18n.getTrans("i.Unspecified")})),n.each(h,function(Y,L){R.append(n("<option>",{value:L.value,text:L.text}))})}),v.find("div.actionParamsScreenReplacement select").each(function(){var R=n(this);R.empty(),R.append(n("<option>",{value:"none",text:e.I18n.getTrans("i.Unspecified")})),n.each(h,function(Y,L){R.append(n("<option>",{value:L.value,text:L.text}))})});var S=[],k=[],N=[],G=n(e.Screen.getCurrentScreen()),K=G.attr("id");n("article[type='screen'] > article").each(function(){var R=n(this),Y=n(this).parent(),L={value:R.attr("id"),text:e.I18n.getTrans("i.ViewOption",{screenNumber:Y.attr("slidenumber"),viewNumber:R.attr("slidenumber")})};S.push(L),Y.attr("id")===K&&k.push(L),R.attr("type")===e.Constant.VIEW_IMAGE&&N.push(L)});var te;O==="SCENE"?te=S:te=k,v.find("div.actionParamsView select").each(function(){var R=n(this);R.empty(),R.append(n("<option>",{value:"none",text:e.I18n.getTrans("i.Unspecified")})),n.each(te,function(Y,L){R.append(n("<option>",{value:L.value,text:L.text}))})}),v.find("div.actionEventParamsSlide select").each(function(){var R=n(this);R.empty(),R.append(n("<option>",{value:"none",text:e.I18n.getTrans("i.Unspecified")})),n.each(h,function(Y,L){R.append(n("<option>",{value:L.value,text:L.text}))}),n.each(S,function(Y,L){R.append(n("<option>",{value:L.value,text:L.text}))})}),v.find("div.actionParamsSlide select").each(function(){var R=n(this);R.empty(),R.append(n("<option>",{value:"none",text:e.I18n.getTrans("i.Unspecified")})),n.each(h,function(Y,L){R.append(n("<option>",{value:L.value,text:L.text}))}),n.each(N,function(Y,L){R.append(n("<option>",{value:L.value,text:L.text}))})});var X=[];n("img.hotspot").each(function(){var R=n(this);X.push({value:R.attr("id"),text:R.attr("id")})}),v.find("div.actionParamsHotspotId select").each(function(){var R=n(this);R.empty(),R.append(n("<option>",{value:"none",text:e.I18n.getTrans("i.Unspecified")})),n.each(X,function(Y,L){R.append(n("<option>",{value:L.value,text:L.text}))})});var V=[],ie=e.Editor.Marker.getSlideData();Object.keys(ie).forEach((R,Y)=>{Object.keys(ie[R].hotzones).forEach((L,Q)=>{V.push({value:L,text:e.Editor.Marker.getAliasForHotzone(L)})})}),v.find("div.actionParamsHotzoneId select").each(function(){var R=n(this);R.empty(),R.append(n("<option>",{value:"none",text:e.I18n.getTrans("i.Unspecified")})),n.each(V,function(Y,L){R.append(n("<option>",{value:L.value,text:L.text}))})})},m=function(O,v,h){if(n(O).find("div.actionWrapper:not(.actionWrapperTemplate)").remove(),c(h),n(O).addClass("actions_container"),typeof h=="string"&&n(O).addClass("actions_container_"+h),Array.isArray(v.actions)&&v.actions.length>0)for(var S=0;S<v.actions.length;S++){var k=v.actions[S];if(typeof k.actionType=="string"&&k.actionType!=="none"){var N=p(O);if(typeof k.event!="undefined"&&typeof k.event.eventType=="string"&&k.event.eventType!=="none"&&(N.find("select.actionEvent").val(k.event.eventType).trigger("change"),typeof k.event.eventParams!="undefined")){if(typeof k.event.eventParams.puzzleId=="string"){var G=N.find("div.actionEventParamsPuzzle select");G.val(k.event.eventParams.puzzleId)}if(typeof k.event.eventParams.slide=="string"){var K=N.find("div.actionEventParamsSlide select");K.val(k.event.eventParams.slide)}}if(N.find("select.actionType").val(k.actionType).trigger("change"),typeof k.actionParams!="undefined"){if(typeof k.actionParams.screen=="string"){var te=N.find("div.actionParamsScreen select");te.val(k.actionParams.screen)}if(typeof k.actionParams.screenReplacement=="string"){var X=N.find("div.actionParamsScreenReplacement select");X.val(k.actionParams.screenReplacement)}if(typeof k.actionParams.view=="string"){var V=N.find("div.actionParamsView select");V.val(k.actionParams.view)}if(typeof k.actionParams.slide=="string"){var ie=N.find("div.actionParamsSlide select");ie.val(k.actionParams.slide)}if(typeof k.actionParams.text=="string"){var R=N.find("div.actionParamsText textarea");R.val(k.actionParams.text)}if(typeof k.actionParams.url=="string"){var Y=N.find("div.actionParamsURL input");Y.val(k.actionParams.url)}if(typeof k.actionParams.hotspotId=="string"){var L=N.find("div.actionParamsHotspotId select");L.val(k.actionParams.hotspotId)}if(typeof k.actionParams.hotzoneId=="string"){var Q=N.find("div.actionParamsHotzoneId select");Q.val(k.actionParams.hotzoneId)}if(typeof k.actionParams.puzzleId=="string"){var oe=N.find("div.actionParamsPuzzle select");oe.val(k.actionParams.puzzleId),U(k.actionParams.puzzleId,N)}}}}},p=function(O){var v=n("div.actionWrapperTemplate").clone().removeClass("actionWrapperTemplate").show(),h=n(O);if(h.hasClass("actions_container_SCENE")){var S=["none","goToScreen","openView","showHotspot","hideHotspot","enableHotzone","disableHotzone","changeBackground","changeScreen","playSound","stopSound"];v.find("select.actionType option").each(function(){var k=n(this).val();S.includes(k)||n(this).remove()})}else v.find("div.setting_scene").remove();return n(O).append(v),v},T=function(O){var v=O.target.value,h=n(O.target).closest("div.actionWrapper"),S=h.find("div.actionEventParamsSlide"),k=S.find("select"),N=h.find("div.actionEventParamsPuzzle"),G=N.find("select");v==="puzzleSolved"?(G.prop("selectedIndex",0),N.show()):N.hide(),v==="slideRevealedFirstTime"||v==="slideRevealed"?(k.prop("selectedIndex",0),S.show()):S.hide()},A=function(O){var v=O.target.value,h=n(O.target).closest("div.actionWrapper"),S=h.find("div.actionParamsScreen"),k=S.find("select"),N=h.find("div.actionParamsScreenReplacement"),G=N.find("select"),K=h.find("div.actionParamsView"),te=K.find("select"),X=h.find("div.actionParamsSlide"),V=X.find("select"),ie=h.find("div.actionParamsText"),R=ie.find("textarea"),Y=h.find("div.actionParamsURL"),L=Y.find("input"),Q=h.find("div.actionParamsHotspotId"),oe=Q.find("select"),b=h.find("div.actionParamsHotzoneId"),Le=b.find("select"),ce=h.find("div.actionParamsPuzzle"),J=ce.find("select"),me=h.find("div.actionParamsPuzzleSolution"),f=h.find("div.ActionWarningChangeBackground");v==="goToScreen"||v==="changeScreen"?(k.prop("selectedIndex",0),S.show()):S.hide(),v==="changeScreen"?(G.prop("selectedIndex",0),N.show()):N.hide(),v==="openView"?(te.prop("selectedIndex",0),K.show()):K.hide(),v==="changeBackground"?(V.prop("selectedIndex",0),X.show(),f.show()):(X.hide(),f.hide()),v==="showText"?(R.val(""),ie.show()):ie.hide(),v==="openLink"||v==="changeBackground"||v==="playSound"||v==="stopSound"?(L.val(""),Y.show()):Y.hide(),v==="showHotspot"||v==="hideHotspot"?(oe.prop("selectedIndex",0),Q.show()):Q.hide(),v==="enableHotzone"||v==="disableHotzone"?(Le.prop("selectedIndex",0),b.show()):b.hide(),v==="solvePuzzle"?(J.prop("selectedIndex",0),ce.show()):ce.hide(),me.hide()},D=function(O){var v=O.target.value,h=n(O.target).closest("div.actionWrapper");U(v,h)},U=function(O,v){var h=v.find("div.actionParamsPuzzleSolution"),S=h.find("input");if(O!=="none"){var k=v.parent(),N="";k.hasClass("actions_container_HOTSPOT")?N=n("#hotspotIdInput").val():k.hasClass("actions_container_HOTZONE")&&(N=n("#hotzoneIdInput").val()),S.val(N),h.show()}else S.val(),h.hide()},F=function(O){n(O.target).closest(".actionWrapper").remove()},_=function(O){var v=[],h=n(O).hasClass("actions_container_SCENE");return n(O).find("div.actionWrapper").each(function(S,k){var N=n(this),G=N.find("select.actionType").val();if(G!=="none"){var K={actionType:G,actionParams:{}},te=N.find("div.actionParamsScreen select");te.is(":visible")&&(K.actionParams.screen=te.val());var X=N.find("div.actionParamsScreenReplacement select");X.is(":visible")&&(K.actionParams.screenReplacement=X.val());var V=N.find("div.actionParamsView select");V.is(":visible")&&(K.actionParams.view=V.val());var ie=N.find("div.actionParamsSlide select");ie.is(":visible")&&(K.actionParams.slide=ie.val());var R=N.find("div.actionParamsText textarea");R.is(":visible")&&(K.actionParams.text=R.val());var Y=N.find("div.actionParamsURL input");Y.is(":visible")&&(K.actionParams.url=e.Editor.Utils.autocompleteUrls(Y.val()));var L=N.find("div.actionParamsHotspotId select");L.is(":visible")&&(K.actionParams.hotspotId=L.val());var Q=N.find("div.actionParamsHotzoneId select");Q.is(":visible")&&(K.actionParams.hotzoneId=Q.val());var oe=N.find("div.actionParamsPuzzle select");oe.is(":visible")&&(K.actionParams.puzzleId=oe.val()),Object.keys(K.actionParams).length===0&&delete K.actionParams;var b=N.find("select.actionEvent").val();if(b!=="none"){K.event={eventType:b,eventParams:{}};var Le=N.find("div.actionEventParamsPuzzle select");Le.is(":visible")&&(K.event.eventParams.puzzleId=Le.val());var ce=N.find("div.actionEventParamsSlide select");ce.is(":visible")&&(K.event.eventParams.slide=ce.val())}if(h&&typeof K.event=="undefined")return;v.push(K)}}),v};return{init:l,loadActions:m,onActionEventChange:T,onActionTypeChange:A,addNewAction:p,onPuzzleChange:D,onDeleteAction:F,getActionsJSON:_}})(SceneMaker,jQuery),SceneMaker.Editor.Caption=(function(e,n,w){var l,c=function(){l=n('<a href="#caption_fancybox" style="display:none"></a>'),n(l).fancybox({autoDimensions:!1,height:690,width:920,scrolling:"no",showCloseButton:!1,padding:0,onStart:function(F){m()},onComplete:function(F){},onClosed:function(F){}})},m=function(){var F=n(e.Slides.getCurrentSlide()).attr("id"),_=e.Editor.Marker.getSlideData(),O={};typeof _[F]!="undefined"&&typeof _[F].caption!="undefined"&&(O=_[F].caption),typeof O.text=="string"?n("#captionText").val(O.text):n("#captionText").val(""),typeof O.mode=="string"?n("#captionMode").val(O.mode):n("#captionMode").val("minimizable")},p=function(){n(l).trigger("click")},T=function(F){var _=n(e.Slides.getCurrentSlide()).attr("id"),O={};O.text=n("#captionText").val(),O.mode=n("#captionMode").val();var v=e.Editor.Marker.getSlideData();typeof v[_]=="undefined"&&(v[_]=e.Editor.Marker.getDefaultSlideConfig()),v[_].caption=O,e.Editor.Marker.setSlideData(v),n.fancybox.close()},A=function(F,_){if(U(_)!==!1){var O=e.Editor.Marker.getSlideData();typeof O[F]=="undefined"&&(O[F]=e.Editor.Marker.getDefaultSlideConfig()),O[F].caption=_,e.Editor.Marker.setSlideData(O)}},D=function(F){var _=e.Editor.Marker.getSlideData();return typeof _[F.id]!="undefined"&&U(_[F.id].caption)&&(F.caption=_[F.id].caption),F},U=function(F){return!(typeof F!="object"||typeof F.text!="string")};return{init:c,addCaption:p,onCaptionDone:T,loadCaption:A,saveCaption:D}})(SceneMaker,jQuery),SceneMaker.Editor.Preview=(function(e,n,w){var l=function(){},c=function(){var A=1;typeof e.PreviewPath!="undefined"&&n("#preview_action").attr("href",e.PreviewPath+"#"+A),window.SCENE_MAKER_OPTIONS_PREVIEW=JSON.parse(JSON.stringify(e.Utils.getOptions())),window.SCENE_MAKER_OPTIONS_PREVIEW.preview=!0,window.SCENE_MAKER_OPTIONS_PREVIEW.scene=e.Editor.saveScene(),m(),n("#preview_action").trigger("click")},m=function(){n("#preview_action").fancybox({width:p().width,height:p().height,padding:0,autoScale:!1,transitionIn:"none",transitionOut:"none",type:"iframe",onStart:function(){e.Editor.Utils.Loader.unloadObjectsInEditorSlide(e.Screen.getCurrentScreen())},onClosed:function(){e.Editor.Utils.Loader.loadObjectsInEditorSlide(e.Screen.getCurrentScreen())},onComplete:function(){}})},p=function(){var A={};return n("body").attr("aspectRatio")==="16:9"?(A.width=1e3,A.height=670):(A.width=910,A.height=680),A},T=function(){return scenePreview};return{init:l,preview:c,getPreview:T}})(SceneMaker,jQuery),SceneMaker.Editor.Clipboard=(function(e,n,w){var l,c,m="SceneMakerClipboard",p=function(){l=[null,null,null]},T=function(D){if(!(!D||!e.Slides.isScreen(D))){l[0]=e.Utils.getOuterHTML(n(D).clone()[0]);var U={};U.textAreas=e.Editor.Slides.copyTextAreasOfSlide(D),l[1]=U,e.Status.getDevice().features.localStorage&&localStorage.setItem(m,JSON.stringify(l))}},A=function(){if(c){var D=new Date().getTime()-c;if(D<500)return}if(c=new Date().getTime(),e.Status.getDevice().features.localStorage){var U=localStorage.getItem(m);if(U!==null)var F=JSON.parse(U)}if(F||(F=l),F[0])F[0]=n(F[0])[0];else return;var _=n(F[0]).clone()[0],O={};F[1]&&F[1].textAreas&&(O.textAreas=F[1].textAreas),e.Editor.Screen.copyScreen(_,O)};return{init:p,copy:T,paste:A}})(SceneMaker,jQuery),SceneMaker.Editor.Events=(function(e,n,w){var l=!1,c,m=!1,p=function(){T()},T=function(){l||(n(document).on("click","#addScreenButton",e.Editor.Screen.onClickAddScreenButton),n(document).on("click","#addViewButton",e.Editor.View.onClickAddViewButton),n(document).on("click","#screen_selected_img",e.Editor.Screen.onClickOpenScreen),n(document).on("click","#save_scene_details",e.Editor.Settings.onSaveSceneSettingsButtonClicked),n(document).on("click","div.viewthumb",e.Editor.onViewThumbClicked),n(document).on("click",".editable",e.Editor.onEditableClicked),n(document).on("click",".selectable",e.Editor.onSelectableClicked),n(document).on("click",':not(".selectable"):not(".preventNoselectable")',e.Editor.onNoSelectableClicked),n(document).on("click",".delete_screen",e.Editor.Screen.onDeleteScreenClicked),n(document).on("click",".delete_view",e.Editor.View.onDeleteViewClicked),n(document).on("click",".delete_content",e.Editor.onDeleteItemClicked),n(document).on("click",".change_bg_button",e.Editor.Tools.changeBackground),n(document).on("click","#tab_pic_from_url_content button.button_addContent",e.Editor.Image.addContent),n(document).on("click","#tab_object_from_url_content button.button_addContent",e.Editor.Object.drawPreviewElement),n(document).on("click","#tab_video_from_url_content button.button_addContent",e.Editor.Video.addContent),n(document).on("change","#hotspotImageSource",e.Editor.Marker.onHotspotImageSourceChange),n(document).on("click","#hotspotImageGallery img",e.Editor.Marker.onClickHotspotImageGallery),n(document).on("blur","#hotspotImageURL",e.Editor.Marker.checkHotspotImageURLPreview),n(document).on("input","#hotspotSizeWidth",e.Editor.Marker.onInputHotspotSizeWidth),n(document).on("input","#hotspotSizeHeight",e.Editor.Marker.onInputHotspotSizeHeight),n(document).on("click","#hotspotSettingsDone",e.Editor.Marker.onHotspotSettingsDone),n(document).on("click","#hotzoneSettingsDone",e.Editor.Marker.onHotzoneSettingsDone),n(document).on("click","div.actions_container button.add_action",function(){e.Editor.Actions.addNewAction(n(this).closest("div.actions_container"))}),n(document).on("change","select.actionEvent",e.Editor.Actions.onActionEventChange),n(document).on("change","select.actionType",e.Editor.Actions.onActionTypeChange),n(document).on("click","div.delete_action",e.Editor.Actions.onDeleteAction),n(document).on("change","div.actionParamsPuzzle select",e.Editor.Actions.onPuzzleChange),n(document).on("click","#objectSettingsDone",e.Editor.Object.onObjectSettingsDone),n(document).on("click","#captionDone",e.Editor.Caption.onCaptionDone),n(document).on("click",D),n(document).bind("keydown",U),n(document).bind("keyup",F),n("article").live("slideenter",e.Editor.onSlideEnterEditor),n("article").live("slideleave",e.Editor.onSlideLeaveEditor),n(document).on("click","#waiting_overlay",function(v){v.stopPropagation(),v.preventDefault()}),n(window).on("orientationchange",function(){n(window).trigger("resize")}),n("a#addViewFancybox").fancybox({autoDimensions:!1,scrolling:"no",width:800,height:740,padding:0,onStart:function(v){e.Editor.setContentAddMode(e.Constant.VIEW);var h=n(v).attr("zone");e.Editor.setCurrentArea(n("#"+h)),e.Editor.Utils.loadTab("tab_views")},onClosed:function(v){e.Editor.setContentAddMode(e.Constant.NONE)}}),n("#fancyLoad").fancybox({type:"inline",autoDimensions:!1,scrolling:"no",autoScale:!0,width:"100%",height:"100%",padding:0,margin:0,overlayOpacity:0,overlayColor:"#fff",showCloseButton:!1,onComplete:function(v){e.Utils.Loader.prepareFancyboxForFullLoading()},onClosed:function(v){}}),n("#hidden_button_to_change_slide_background").fancybox({autoDimensions:!1,width:800,scrolling:"no",height:600,padding:0,onStart:function(v){e.Editor.Image.setAddContentMode(e.Constant.SCREEN),e.Editor.Utils.loadTab("tab_pic_from_url")},onClosed:function(v){e.Editor.Image.setAddContentMode(e.Constant.NONE)}}),window.onbeforeunload=_,c=!0,l=!0)},A=function(v){n(v).find("a.addpicture").fancybox({autoDimensions:!1,width:800,scrolling:"no",height:600,padding:0,onStart:function(h){var S=n(h).attr("zone");e.Editor.setCurrentArea(n("#"+S)),e.Editor.Image.setAddContentMode(e.Constant.NONE),e.Editor.Utils.loadTab("tab_pic_from_url")}}),n(v).find("a.addobject").fancybox({autoDimensions:!1,width:800,height:600,scrolling:"no",padding:0,onStart:function(h){var S=n(h).attr("zone");e.Editor.setCurrentArea(n("#"+S)),e.Editor.Utils.loadTab("tab_object_from_url")},onClosed:function(h){e.Editor.Object.resetPreview("tab_object_from_url_content")}}),n(v).find("a.addvideo").fancybox({autoDimensions:!1,width:800,scrolling:"no",height:600,padding:0,onStart:function(h){var S=n(h).attr("zone");e.Editor.setCurrentArea(n("#"+S)),e.Editor.Utils.loadTab(e.Editor.Video.getDefaultTab())},onClosed:function(h){e.Editor.Object.resetPreview("tab_video_from_url_content")}})},D=function(v){e.Editor.Marker.onClick(v)},U=function(v){switch(v.keyCode){case 39:e.Editor.Slides.isSlideFocused()&&(e.Slides.isScreen(e.Screen.getCurrentScreen())&&e.Editor.View.forwardOneView(),v.preventDefault());break;case 40:e.Editor.Slides.isSlideFocused()&&(e.Screen.forwardOneScreen(),v.preventDefault());break;case 37:e.Editor.Slides.isSlideFocused()&&(e.Slides.isScreen(e.Screen.getCurrentScreen())&&e.Editor.View.backwardOneView(),v.preventDefault());break;case 38:e.Editor.Slides.isSlideFocused()&&(e.Screen.backwardOneScreen(),v.preventDefault());break;case 17:m=!0;break;case 67:e.Editor.Slides.isSlideFocused()&&m&&e.Screen.getCurrentScreenNumber()&&e.Editor.Clipboard.copy(e.Screen.getCurrentScreen());break;case 86:e.Editor.Slides.isSlideFocused()&&m&&e.Editor.Clipboard.paste();break;case 46:e.Editor.Slides.isSlideFocused()&&e.Editor.Slides.removeCurrentSlide();break}},F=function(v){switch(v.keyCode){case 17:m=!1;break}},_=function(){if(c&&e.Editor.hasSceneChanged()){var v=e.I18n.getTrans("i.ExitConfirmation");return v}},O=function(){c=!1};return{init:p,bindEditorEventListeners:T,addZoneThumbsEvents:A,allowExitWithoutConfirmation:O}})(SceneMaker,jQuery);
