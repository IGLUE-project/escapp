<table class="ranking-table">
    <tr>
    	<th class="ranking-team"><%=i18n.analytics.ranking.team%></th>
    	<th class="ranking-members"><%=i18n.analytics.ranking.members%></th>
    	<th class="ranking-res"><%=i18n.analytics.ranking.res%></th>
    	<th class="ranking-time"><%=i18n.analytics.ranking.time%></th>

    </tr>
    
    <% for (var t in teams) { 
    	var team = teams[t];
    	var stringified = JSON.parse(JSON.stringify(team));
    	var count = stringified.countretos;
    	var startTime = stringified.turno.startTime;
    	var latestRetoSuperado = stringified.latestretosuperado;
    	var res = count + "/" + escapeRoom.puzzles.length;
    	var myTeam = false;
    	var participants = team.teamMembers.map(member=> {
			if (member.id === userId) {
				myTeam = true;
			}
			return member.name + " " + member.surname}).join(", ");
    	%>
	    <tr class="<%=myTeam ? "myTeam":""%>">
	    	<td class="ranking-team"><b><%=team.name%></b></td>
	    	<td class="ranking-members">
	    		<%=participants%>
	    	</td>
	    	<td class="ranking-res"><%=res%></td>
	    	<td class="ranking-time">
	    		<% if(escapeRoom.puzzles.length === parseInt(count) && startTime) { %>
	    			<%= secondsToDhms((new Date(latestRetoSuperado) - new Date(startTime))/1000)  %>
	    		<% } else { %>
	    			n/a
	    		<%}
	    	%></td>

	    </tr>
    <% } %>
</table>